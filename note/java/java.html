<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>java - Trdthg&#x27;s Self</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../../favicon.svg">
                        <link rel="shortcut icon" href="../../favicon.png">
                <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
                <link rel="stylesheet" href="../../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">trans</li><li class="chapter-item expanded "><a href="../../trans/2022-04-20-è¯‘-ä½¿ç”¨-Tokio-å¤„ç†-CPU-å¯†é›†å‹ä»»åŠ¡.html"><strong aria-hidden="true">1.</strong> 2022-04-20-è¯‘-ä½¿ç”¨-Tokio-å¤„ç†-CPU-å¯†é›†å‹ä»»åŠ¡</a></li><li class="chapter-item expanded "><a href="../../trans/2023-01-03-è¯‘-Rustå†’é™©:-æ»¥ç”¨-Serde.html"><strong aria-hidden="true">2.</strong> 2023-01-03-è¯‘-Rustå†’é™©:-æ»¥ç”¨-Serde</a></li><li class="chapter-item expanded "><a href="../../trans/2023-01-01-è¯‘-æ‹“å±•-Rust-ä¸­çš„-Map.html"><strong aria-hidden="true">3.</strong> 2023-01-01-è¯‘-æ‹“å±•-Rust-ä¸­çš„-Map</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-01-è¯‘-search_engine.html"><strong aria-hidden="true">4.</strong> 2022-04-01-è¯‘-search_engine</a></li><li class="chapter-item expanded "><a href="../../trans/2022-05-04-è¯‘-å¯è§†åŒ–-Rust-å„æ•°æ®ç±»å‹çš„å†…å­˜å¸ƒå±€.html"><strong aria-hidden="true">5.</strong> 2022-05-04-è¯‘-å¯è§†åŒ–-Rust-å„æ•°æ®ç±»å‹çš„å†…å­˜å¸ƒå±€</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-13-è¯‘-tail_latency.html"><strong aria-hidden="true">6.</strong> 2022-04-13-è¯‘-tail_latency</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-30-è¯‘-ä»€ä¹ˆæ—¶å€™ä¸åº”è¯¥ä½¿ç”¨-Rust-ï¼Ÿ.html"><strong aria-hidden="true">7.</strong> 2022-04-30-è¯‘-ä»€ä¹ˆæ—¶å€™ä¸åº”è¯¥ä½¿ç”¨-Rust-ï¼Ÿ</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-11-è¯‘-å¼‚æ­¥-Rustï¼šåä½œä¸æŠ¢å å¼è°ƒåº¦.html"><strong aria-hidden="true">8.</strong> 2022-04-11-è¯‘-å¼‚æ­¥-Rustï¼šåä½œä¸æŠ¢å å¼è°ƒåº¦</a></li><li class="chapter-item expanded "><a href="../../trans/2023-01-02-è¯‘-æœªåˆå§‹åŒ–å†…å­˜:-unsafe-Rustå¤ªéš¾äº†.html"><strong aria-hidden="true">9.</strong> 2023-01-02-è¯‘-æœªåˆå§‹åŒ–å†…å­˜:-unsafe-Rustå¤ªéš¾äº†</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/index.html"><strong aria-hidden="true">10.</strong> 2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-4-é‡æ„.html"><strong aria-hidden="true">10.1.</strong> Rust-å…­è¾¹å½¢æ¶æ„-4-é‡æ„</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-2-å†…å­˜å­˜å‚¨åº“.html"><strong aria-hidden="true">10.2.</strong> Rust-å…­è¾¹å½¢æ¶æ„-2-å†…å­˜å­˜å‚¨åº“</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-7-é•¿æœŸå­˜å‚¨åº“.html"><strong aria-hidden="true">10.3.</strong> Rust-å…­è¾¹å½¢æ¶æ„-7-é•¿æœŸå­˜å‚¨åº“</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-1-åŸŸ.html"><strong aria-hidden="true">10.4.</strong> Rust-å…­è¾¹å½¢æ¶æ„-1-åŸŸ</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-5-å…¶ä»–ç”¨ä¾‹.html"><strong aria-hidden="true">10.5.</strong> Rust-å…­è¾¹å½¢æ¶æ„-5-å…¶ä»–ç”¨ä¾‹</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-6-CLI.html"><strong aria-hidden="true">10.6.</strong> Rust-å…­è¾¹å½¢æ¶æ„-6-CLI</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-3-HTTP-API.html"><strong aria-hidden="true">10.7.</strong> Rust-å…­è¾¹å½¢æ¶æ„-3-HTTP-API</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/index.html"><strong aria-hidden="true">10.8.</strong> README</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">note</li><li class="chapter-item expanded "><a href="../../note/java/index.html"><strong aria-hidden="true">11.</strong> java</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../note/java/java.html" class="active"><strong aria-hidden="true">11.1.</strong> java</a></li><li class="chapter-item expanded "><a href="../../note/java/springboot.html"><strong aria-hidden="true">11.2.</strong> springboot</a></li><li class="chapter-item expanded "><a href="../../note/java/spring.html"><strong aria-hidden="true">11.3.</strong> spring</a></li><li class="chapter-item expanded "><a href="../../note/java/sourceread.html"><strong aria-hidden="true">11.4.</strong> sourceread</a></li><li class="chapter-item expanded "><a href="../../note/java/index.html"><strong aria-hidden="true">11.5.</strong> README</a></li></ol></li><li class="chapter-item expanded "><a href="../../note/frontend/index.html"><strong aria-hidden="true">12.</strong> frontend</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../note/frontend/mini_bundle.html"><strong aria-hidden="true">12.1.</strong> mini_bundle</a></li><li class="chapter-item expanded "><a href="../../note/frontend/js_advanced.html"><strong aria-hidden="true">12.2.</strong> js_advanced</a></li><li class="chapter-item expanded "><a href="../../note/frontend/mini_vue.html"><strong aria-hidden="true">12.3.</strong> mini_vue</a></li><li class="chapter-item expanded "><a href="../../note/frontend/vue.html"><strong aria-hidden="true">12.4.</strong> vue</a></li><li class="chapter-item expanded "><a href="../../note/frontend/list.html"><strong aria-hidden="true">12.5.</strong> list</a></li><li class="chapter-item expanded "><a href="../../note/frontend/http.html"><strong aria-hidden="true">12.6.</strong> http</a></li><li class="chapter-item expanded "><a href="../../note/frontend/flutter.html"><strong aria-hidden="true">12.7.</strong> flutter</a></li><li class="chapter-item expanded "><a href="../../note/frontend/css.html"><strong aria-hidden="true">12.8.</strong> css</a></li><li class="chapter-item expanded "><a href="../../note/frontend/vdom.html"><strong aria-hidden="true">12.9.</strong> vdom</a></li><li class="chapter-item expanded "><a href="../../note/frontend/index.html"><strong aria-hidden="true">12.10.</strong> README</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">blog</li><li class="chapter-item expanded "><a href="../../blog/index.html"><strong aria-hidden="true">13.</strong> README</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">docs</li><li class="chapter-item expanded "><a href="../../docs/log.html"><strong aria-hidden="true">14.</strong> log</a></li><li class="chapter-item expanded "><a href="../../docs/intro.html"><strong aria-hidden="true">15.</strong> intro</a></li><li class="chapter-item expanded "><a href="../../docs/magic/index.html"><strong aria-hidden="true">16.</strong> magic</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../docs/magic/riscv.html"><strong aria-hidden="true">16.1.</strong> riscv</a></li><li class="chapter-item expanded "><a href="../../docs/magic/haskell.html"><strong aria-hidden="true">16.2.</strong> haskell</a></li><li class="chapter-item expanded "><a href="../../docs/magic/bash.html"><strong aria-hidden="true">16.3.</strong> bash</a></li><li class="chapter-item expanded "><a href="../../docs/magic/memory_ordering.html"><strong aria-hidden="true">16.4.</strong> memory_ordering</a></li><li class="chapter-item expanded "><a href="../../docs/magic/linuxIO.html"><strong aria-hidden="true">16.5.</strong> linuxIO</a></li><li class="chapter-item expanded "><a href="../../docs/magic/cicd.html"><strong aria-hidden="true">16.6.</strong> cicd</a></li><li class="chapter-item expanded "><a href="../../docs/magic/fd.html"><strong aria-hidden="true">16.7.</strong> fd</a></li><li class="chapter-item expanded "><a href="../../docs/magic/hadoop.html"><strong aria-hidden="true">16.8.</strong> hadoop</a></li><li class="chapter-item expanded "><a href="../../docs/magic/go.html"><strong aria-hidden="true">16.9.</strong> go</a></li><li class="chapter-item expanded "><a href="../../docs/magic/async.html"><strong aria-hidden="true">16.10.</strong> async</a></li><li class="chapter-item expanded "><a href="../../docs/magic/index.html"><strong aria-hidden="true">16.11.</strong> README</a></li><li class="chapter-item expanded "><a href="../../docs/magic/software_arch.html"><strong aria-hidden="true">16.12.</strong> software_arch</a></li></ol></li><li class="chapter-item expanded "><a href="../../docs/riscv/index.html"><strong aria-hidden="true">17.</strong> riscv</a></li><li class="chapter-item expanded "><a href="../../docs/common/index.html"><strong aria-hidden="true">18.</strong> common</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../docs/common/pgsql.html"><strong aria-hidden="true">18.1.</strong> pgsql</a></li><li class="chapter-item expanded "><a href="../../docs/common/git.html"><strong aria-hidden="true">18.2.</strong> git</a></li><li class="chapter-item expanded "><a href="../../docs/common/linux.html"><strong aria-hidden="true">18.3.</strong> linux</a></li><li class="chapter-item expanded "><a href="../../docs/common/datastructure.html"><strong aria-hidden="true">18.4.</strong> datastructure</a></li><li class="chapter-item expanded "><a href="../../docs/common/docker.html"><strong aria-hidden="true">18.5.</strong> docker</a></li><li class="chapter-item expanded "><a href="../../docs/common/analyze.html"><strong aria-hidden="true">18.6.</strong> analyze</a></li><li class="chapter-item expanded "><a href="../../docs/common/oci.html"><strong aria-hidden="true">18.7.</strong> oci</a></li><li class="chapter-item expanded "><a href="../../docs/common/unsorted.html"><strong aria-hidden="true">18.8.</strong> unsorted</a></li><li class="chapter-item expanded "><a href="../../docs/common/oauth2.html"><strong aria-hidden="true">18.9.</strong> oauth2</a></li><li class="chapter-item expanded "><a href="../../docs/common/vim.html"><strong aria-hidden="true">18.10.</strong> vim</a></li><li class="chapter-item expanded "><a href="../../docs/common/python.html"><strong aria-hidden="true">18.11.</strong> python</a></li><li class="chapter-item expanded "><a href="../../docs/common/index.html"><strong aria-hidden="true">18.12.</strong> README</a></li></ol></li><li class="chapter-item expanded "><a href="../../docs/rust/index.html"><strong aria-hidden="true">19.</strong> rust</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../docs/rust/mini_tokio.html"><strong aria-hidden="true">19.1.</strong> mini_tokio</a></li><li class="chapter-item expanded "><a href="../../docs/rust/wasm.html"><strong aria-hidden="true">19.2.</strong> wasm</a></li><li class="chapter-item expanded "><a href="../../docs/rust/rust_quiz.html"><strong aria-hidden="true">19.3.</strong> rust_quiz</a></li><li class="chapter-item expanded "><a href="../../docs/rust/rust.html"><strong aria-hidden="true">19.4.</strong> rust</a></li><li class="chapter-item expanded "><a href="../../docs/rust/print_into_detail.html"><strong aria-hidden="true">19.5.</strong> print_into_detail</a></li><li class="chapter-item expanded "><a href="../../docs/rust/net-piercer.html"><strong aria-hidden="true">19.6.</strong> net-piercer</a></li><li class="chapter-item expanded "><a href="../../docs/rust/rs_channel.html"><strong aria-hidden="true">19.7.</strong> rs_channel</a></li><li class="chapter-item expanded "><a href="../../docs/rust/lists.html"><strong aria-hidden="true">19.8.</strong> lists</a></li><li class="chapter-item expanded "><a href="../../docs/rust/index.html"><strong aria-hidden="true">19.9.</strong> README</a></li></ol></li><li class="chapter-item expanded "><a href="../../docs/riscv/index.html"><strong aria-hidden="true">20.</strong> riscv</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../docs/riscv/index.html"><strong aria-hidden="true">20.1.</strong> README</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">other</li><li class="chapter-item expanded "><a href="../../other/2023-04-12-remote-usb.html"><strong aria-hidden="true">21.</strong> 2023-04-12-remote-usb</a></li><li class="chapter-item expanded "><a href="../../other/resources.html"><strong aria-hidden="true">22.</strong> resources</a></li><li class="chapter-item expanded "><a href="../../other/i3wm.html"><strong aria-hidden="true">23.</strong> i3wm</a></li><li class="chapter-item expanded "><a href="../../other/lsm.html"><strong aria-hidden="true">24.</strong> lsm</a></li><li class="chapter-item expanded "><a href="../../other/site_update_log.html"><strong aria-hidden="true">25.</strong> site_update_log</a></li><li class="chapter-item expanded "><a href="../../other/ioclub/index.html"><strong aria-hidden="true">26.</strong> ioclub</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../other/ioclub/share_1.html"><strong aria-hidden="true">26.1.</strong> share_1</a></li><li class="chapter-item expanded "><a href="../../other/ioclub/index.html"><strong aria-hidden="true">26.2.</strong> README</a></li></ol></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/index.html"><strong aria-hidden="true">27.</strong> 2021-åç«¯</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_1.html"><strong aria-hidden="true">27.1.</strong> backend_1</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_2.html"><strong aria-hidden="true">27.2.</strong> backend_2</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_3.html"><strong aria-hidden="true">27.3.</strong> backend_3</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_4.html"><strong aria-hidden="true">27.4.</strong> backend_4</a></li></ol></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/index.html"><strong aria-hidden="true">28.</strong> 2021-åç«¯</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_1.html"><strong aria-hidden="true">28.1.</strong> backend_1</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_2.html"><strong aria-hidden="true">28.2.</strong> backend_2</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_3.html"><strong aria-hidden="true">28.3.</strong> backend_3</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_4.html"><strong aria-hidden="true">28.4.</strong> backend_4</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/index.html"><strong aria-hidden="true">28.5.</strong> README</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">draft</li><li class="chapter-item expanded "><a href="../../draft/ç»„æˆåŸç†.html"><strong aria-hidden="true">29.</strong> ç»„æˆåŸç†</a></li><li class="chapter-item expanded "><a href="../../draft/è®¡ç®—æœºç½‘ç»œ.html"><strong aria-hidden="true">30.</strong> è®¡ç®—æœºç½‘ç»œ</a></li><li class="chapter-item expanded "><a href="../../draft/è¯‘-pkg_mng.html"><strong aria-hidden="true">31.</strong> è¯‘-pkg_mng</a></li><li class="chapter-item expanded "><a href="../../draft/DistributedSystem.html"><strong aria-hidden="true">32.</strong> DistributedSystem</a></li><li class="chapter-item expanded "><a href="../../draft/oscamp2022.html"><strong aria-hidden="true">33.</strong> oscamp2022</a></li><li class="chapter-item expanded "><a href="../../draft/compile.html"><strong aria-hidden="true">34.</strong> compile</a></li><li class="chapter-item expanded "><a href="../../draft/test.html"><strong aria-hidden="true">35.</strong> test</a></li><li class="chapter-item expanded "><a href="../../draft/ld.html"><strong aria-hidden="true">36.</strong> ld</a></li><li class="chapter-item expanded "><a href="../../draft/æ•°æ®åº“è®¾è®¡.html"><strong aria-hidden="true">37.</strong> æ•°æ®åº“è®¾è®¡</a></li><li class="chapter-item expanded "><a href="../../draft/index.html"><strong aria-hidden="true">38.</strong> README</a></li><li class="chapter-item expanded "><a href="../../draft/computer_network/index.html"><strong aria-hidden="true">39.</strong> computer_network</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../draft/computer_network/index.html"><strong aria-hidden="true">39.1.</strong> README</a></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Trdthg&#x27;s Self</h1>

                    <div class="right-buttons">
                                                <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="java"><a class="header" href="#java">Java</a></h1>
<h2 id="åŸºç¡€çŸ¥è¯†"><a class="header" href="#åŸºç¡€çŸ¥è¯†">åŸºç¡€çŸ¥è¯†</a></h2>
<h3 id="for-å’Œ-whiletrue-çš„åŒºåˆ«"><a class="header" href="#for-å’Œ-whiletrue-çš„åŒºåˆ«">for(;;) å’Œ while(true) çš„åŒºåˆ«</a></h3>
<p>è™½ç„¶ä¸¤è€…éƒ½èƒ½å®ç°æ­»å¾ªç¯ï¼Œä½†æ˜¯æºç ä¸­éƒ½æ˜¯é€‰æ‹© for(;;) åŸå› ï¼š</p>
<pre><code>ç¼–è¯‘å‰              ç¼–è¯‘å
while (1)           mov eax,1
                    test eax,eax
                    je foo+23h
                    jmp foo+18h

ç¼–è¯‘å‰              ç¼–è¯‘å
for (;;)          jmp foo+23h
</code></pre>
<p>å¯¹æ¯”ä¹‹ä¸‹ï¼Œfor (;;) æŒ‡ä»¤å°‘ï¼Œä¸å ç”¨å¯„å­˜å™¨ï¼Œè€Œä¸”æ²¡æœ‰åˆ¤æ–­è·³è½¬ï¼Œæ¯” while (1) å¥½ã€‚
ä¹Ÿå°±æ˜¯è¯´ä¸¤è€…åœ¨åœ¨å®è§‚ä¸Šå®Œå…¨ä¸€æ ·çš„é€»è¾‘ï¼Œä½†æ˜¯åº•å±‚å®Œå…¨ä¸ä¸€æ ·ï¼Œfor ç›¸å¯¹äºæ¥è¯´æ›´åŠ ç®€æ´æ˜äº†ã€‚</p>
<h3 id="equal-ä¸çš„åŒºåˆ«"><a class="header" href="#equal-ä¸çš„åŒºåˆ«">equal ä¸==çš„åŒºåˆ«</a></h3>
<ol>
<li>åŒºåˆ«</li>
</ol>
<ul>
<li>==æ˜¯è¿ç®—ç¬¦ï¼Œequal æ˜¯æ–¹æ³•ï¼Œ</li>
<li>æ¯”è¾ƒåŸºæœ¬ç±»å‹ï¼šåªèƒ½ç”¨==, ä¸èƒ½ç”¨ equal</li>
<li>æ¯”è¾ƒåŒ…è£…ç±»å‹ï¼š==æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€ï¼Œè€Œ equal æ¯”è¾ƒçš„æ˜¯å€¼</li>
<li>æ¯”è¾ƒå¯¹è±¡ï¼š==å’Œ equal æ¯”è¾ƒçš„éƒ½æ˜¯å†…å­˜åœ°å€ï¼Œå› ä¸º equal æ²¡æœ‰è¢«é‡å†™ï¼Œæ²¡æœ‰è¢«é‡å†™çš„ equal éƒ½æ˜¯ object çš„ equal æ–¹æ³• ::: warning
æ³¨æ„ Stringï¼ˆè¿˜æœ‰ Dateï¼ŒIntegerï¼‰ç±»å‹é‡å†™äº† equals æ–¹æ³•ï¼Œä½¿å…¶æ¯”è¾ƒçš„æ˜¯å­˜å‚¨å¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼Œè€Œä¸æ˜¯å †å†…å­˜åœ°å€ã€‚ :::</li>
</ul>
<h3 id="classthis-å’Œ-this-çš„åŒºåˆ«"><a class="header" href="#classthis-å’Œ-this-çš„åŒºåˆ«">Class.this å’Œ this çš„åŒºåˆ«</a></h3>
<p>å½“ inner classï¼ˆå†…éƒ¨ç±»ï¼‰å¿…é¡ºä½¿ç”¨åˆ° outer classï¼ˆå¤–éƒ¨ç±»ï¼‰çš„ this instanceï¼ˆå®ä¾‹ï¼‰æ—¶ï¼Œæˆ–è€…åŒ¿åå†…éƒ¨ç±»è¦ä½¿ç”¨å¤–éƒ¨ç±»çš„å®ä¾‹ã€‚</p>
<h3 id="å¾…ç»­"><a class="header" href="#å¾…ç»­">å¾…ç»­...</a></h3>
<h2 id="åŒ…è£…ç±»"><a class="header" href="#åŒ…è£…ç±»">åŒ…è£…ç±»</a></h2>
<h3 id="int-vs-integer"><a class="header" href="#int-vs-integer">int VS Integer</a></h3>
<h5 id="åˆå§‹åŒ–"><a class="header" href="#åˆå§‹åŒ–">åˆå§‹åŒ–</a></h5>
<ul>
<li>1 int ç±»çš„å˜é‡åˆå§‹ä¸º 0. Integer çš„å˜é‡åˆ™åˆå§‹åŒ–ä¸º null.</li>
<li>2 Integer å˜é‡å¿…é¡»å®ä¾‹åŒ–åæ‰èƒ½ä½¿ç”¨ï¼Œint å˜é‡ä¸éœ€è¦ .</li>
<li>3 åœ¨ Int æ˜¯å°†å€¼ç›´æ¥å­˜å‚¨ï¼ŒInteger å¯¹è±¡æ˜¯ç”ŸæˆæŒ‡é’ˆæŒ‡å‘æ­¤å¯¹è±¡ã€‚</li>
</ul>
<h5 id="æ¯”è¾ƒ"><a class="header" href="#æ¯”è¾ƒ">æ¯”è¾ƒ</a></h5>
<ol>
<li>Integer ? int <code>&lt;br/&gt;</code> åªè¦ä¸¤ä¸ªå˜é‡çš„å€¼æ˜¯å‘ç­‰çš„ï¼Œåˆ™ç»“æœä¸º trueã€‚
å› ä¸ºåŒ…è£…ç±» Integer å’ŒåŸºæœ¬æ•°æ®ç±»å‹ int æ¯”è¾ƒæ—¶ï¼Œjava ä¼šè‡ªåŠ¨æ‹†åŒ…è£…ä¸º intï¼Œç„¶åè¿›è¡Œæ¯”è¾ƒï¼Œå®é™…ä¸Šå°±å˜ä¸ºä¸¤ä¸ª int å˜é‡çš„æ¯”è¾ƒã€‚</li>
<li>new Integer() ? !new Integer()ï¼Œ<code>&lt;br/&gt;</code> ç»“æœä¸º false ! new
Integer() å½“å˜é‡å€¼åœ¨ -128~127 ä¹‹é—´æ—¶ï¼Œé new ç”Ÿæˆçš„ Integer å˜é‡æŒ‡å‘çš„æ˜¯ java å¸¸é‡æ± ä¸­ cache æ•°ç»„ä¸­å­˜å‚¨çš„æŒ‡å‘äº†å †ä¸­çš„ Integer å¯¹è±¡ï¼Œ
è€Œ new Integer() ç”Ÿæˆçš„å˜é‡æŒ‡å‘å †ä¸­æ–°å»ºçš„å¯¹è±¡ï¼Œä¸¤è€…åœ¨å†…å­˜ä¸­çš„åœ°å€ä¸åŒï¼›</li>
<li>new Interger() ? new Integer() <code>&lt;br/&gt;</code> false</li>
<li>!new Integer() ? !new Integer() <code>&lt;br/&gt;</code> å¦‚æœä¸¤ä¸ªå€¼ç›¸ç­‰ï¼Œä¸”åœ¨åŒºé—´ -128 åˆ° 127 ä¹‹é—´åˆ™ true
åªè¦ä¸åŒæˆ–è€…æœ‰å€¼åœ¨åŒºé—´å¤–å°±ä¸ç›¸åŒ</li>
</ol>
<h5 id="åº”ç”¨"><a class="header" href="#åº”ç”¨">åº”ç”¨</a></h5>
<pre><code class="language-java">Integer a = Integer.parseInt(&quot;1&quot;);
Integer b = Integer.parseInt(&quot;1&quot;);
synchronized(i)
</code></pre>
<h2 id="ææ„å‡½æ•°"><a class="header" href="#ææ„å‡½æ•°">&quot;ææ„å‡½æ•°&quot;</a></h2>
<p>java æä¾› finalize() æ–¹æ³•ï¼Œåƒåœ¾å›æ”¶å™¨å‡†å¤‡é‡Šæ”¾å†…å­˜çš„æ—¶å€™ï¼Œä¼šå…ˆè°ƒç”¨ finalize()ã€‚</p>
<ul>
<li>ç‰¹å¾</li>
</ul>
<ol>
<li>å¯¹è±¡ä¸ä¸€å®šä¼šè¢«å›æ”¶ã€‚</li>
<li>åƒåœ¾å›æ”¶ä¸æ˜¯ææ„å‡½æ•°ã€‚</li>
<li>åƒåœ¾å›æ”¶åªä¸å†…å­˜æœ‰å…³ã€‚</li>
<li>åƒåœ¾å›æ”¶å’Œ finalize() éƒ½æ˜¯é ä¸ä½çš„ï¼Œåªè¦ JVM è¿˜æ²¡æœ‰å¿«åˆ°è€—å°½å†…å­˜çš„åœ°æ­¥ï¼Œå®ƒæ˜¯ä¸ä¼šæµªè´¹æ—¶é—´è¿›è¡Œåƒåœ¾å›æ”¶çš„ã€‚</li>
</ol>
<ul>
<li>åº”å¯¹æ–¹æ³•</li>
</ul>
<ol>
<li>ä¸»åŠ¨è°ƒç”¨ System.gc() æ–¹æ³•å¼ºåˆ¶åƒåœ¾å›æ”¶å™¨æ¥é‡Šæ”¾è¿™äº›å¯¹è±¡çš„å†…å­˜ã€‚</li>
<li>Java 1.1 é€šè¿‡æä¾›ä¸€ä¸ª System.runFinalizersOnExit() æ–¹æ³•ï¼Œä¸è±¡ System.gc()
æ–¹æ³•é‚£æ ·ï¼ŒSystem.runFinalizersOnExit() æ–¹æ³•å¹¶ä¸ç«‹å³è¯•å›¾å¯åŠ¨åƒåœ¾å›æ”¶å™¨ã€‚è€Œæ˜¯å½“åº”ç”¨ç¨‹åºæˆ– Applet
é€€å‡ºæ—¶ï¼Œå®ƒè°ƒç”¨æ¯ä¸ªå¯¹è±¡çš„ finalize() æ–¹æ³•ã€‚</li>
<li>ç»§æ‰¿ finalize()</li>
</ol>
<h2 id="æ³›å‹"><a class="header" href="#æ³›å‹">æ³›å‹</a></h2>
<h3 id="t-çš„ä½ç½®"><a class="header" href="#t-çš„ä½ç½®">T çš„ä½ç½®</a></h3>
<ol>
<li>ç¤ºä¾‹</li>
</ol>
<pre><code class="language-java">static &lt;T&gt; void show(Collection&lt;T&gt; C) {
    System.out.println(&quot;ä½¿ç”¨æ³›å‹ -------&gt;&quot; + C);
}
</code></pre>
<ol start="2">
<li>è§£é‡Š</li>
</ol>
<ul>
<li>ç¬¬ä¸€å¤„ï¼šé™æ€æ–¹æ³•ä¸èƒ½ç›´æ¥å¼•ç”¨ç±»å®šä¹‰å¤„çš„æ³›å‹ï¼Œéœ€è¦æå‰å®šä¹‰å¥½æ³›å‹æ‰èƒ½ä½¿ç”¨</li>
<li>ç¬¬äºŒå¤„ï¼šæŒ‡å®š Collection çš„å…ƒç´ ç±»å‹ä¸º T</li>
</ul>
<h3 id="è¾¹ç•Œé€šé…ç¬¦"><a class="header" href="#è¾¹ç•Œé€šé…ç¬¦">è¾¹ç•Œé€šé…ç¬¦</a></h3>
<pre><code class="language-java">&lt;? extends T&gt;å’Œ&lt;? super T&gt;
</code></pre>
<ol>
<li>å¼•ä¾‹</li>
</ol>
<ul>
<li>è¿™ç§æƒ…å†µä¸‹æ˜¯å¯è¡Œçš„</li>
</ul>
<pre><code class="language-java">Plate&lt;Fruit&gt; plate = new Plate&lt;&gt;(apple);
</code></pre>
<ul>
<li>è¿™ç§æƒ…å†µä¸‹ï¼Œè™½ç„¶è‹¹æœå’Œæ°´æœæœ‰ç»§æ‰¿å…³ç³»ï¼Œä½†ç›˜å­é—´æ²¡æœ‰ç»§æ‰¿å…³ç³»ä¼šæŠ¥é”™</li>
</ul>
<pre><code class="language-java">Plate&lt;Fruit&gt; plate = new Plate&lt;Apple&gt;(apple);
</code></pre>
<ol start="2">
<li>ä¸Šä¸‹ç•Œé€šé…ç¬¦</li>
</ol>
<ul>
<li>Apple -&gt; Fruit -&gt; Food</li>
<li><code>&lt;? extends T&gt;</code> å¯ä»¥æ˜¯ä»»ä½• T çš„å­ç±»</li>
</ul>
<pre><code class="language-java">Plate&lt;? extends Food&gt; plate = new Plate&lt;Fruit&gt;(apple);
</code></pre>
<ul>
<li><code>&lt;? super T&gt;</code> å¯ä»¥æ˜¯ä»»ä½• T çš„çˆ¶ç±»</li>
</ul>
<pre><code class="language-java">Plate&lt;? super Apple&gt; plate = new Plate&lt;Food&gt;(fruit);
</code></pre>
<ol start="3">
<li>ä¸Šä¸‹ç•Œé€šé…ç¬¦çš„å‰¯ä½œç”¨</li>
</ol>
<ul>
<li>ä¸Šç•Œ<code>&lt;? extends T&gt;</code>ä¸èƒ½å¾€é‡Œå­˜ï¼Œåªèƒ½å¾€å¤–å–</li>
</ul>
<pre><code class="language-java">Plate&lt;? extends Food&gt; plate = new Plate&lt;Fruit&gt;(apple);
Food a = plate.getItem();
// plate.setItem(food);  å¤±æ•ˆ
</code></pre>
<ul>
<li>ä¸‹ç•Œ&lt;? super T&gt;ä¸å½±å“å¾€é‡Œå­˜ï¼Œä½†å¾€å¤–å–åªèƒ½æ”¾åœ¨ Object å¯¹è±¡é‡Œ</li>
</ul>
<pre><code class="language-java">Plate&lt;? super Apple&gt; plate = new Plate&lt;Food&gt;(fruit);
plate2.setItem(apple);
// Apple b = plate2.getItem(); å¤±æ•ˆ
// å…ƒç´ çš„ç±»å‹ä¿¡æ¯å…¨éƒ¨ä¸¢å¤±ã€‚
</code></pre>
<p>::: tip è¡¥å……</p>
<ul>
<li>?ä¸ T çš„åŒºåˆ«</li>
<li>å¯¹ç¼–è¯‘å™¨æ¥è¯´æ‰€æœ‰çš„ T éƒ½ä»£è¡¨åŒä¸€ç§ç±»å‹ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªæ³›å‹æ–¹æ³•é‡Œï¼Œä¸‰ä¸ª T éƒ½æŒ‡ä»£åŒä¸€ä¸ªç±»å‹ï¼Œè¦ä¹ˆéƒ½æ˜¯ Stringï¼Œè¦ä¹ˆéƒ½æ˜¯ Integerã€‚</li>
<li>ä½†é€šé…ç¬¦<code>&lt;?&gt;æ²¡æœ‰è¿™ç§çº¦æŸï¼ŒPlate&lt;?&gt;</code>å•çº¯çš„å°±è¡¨ç¤ºï¼šç›˜å­é‡Œæ”¾äº†ä¸€ä¸ªä¸œè¥¿ï¼Œæ˜¯ä»€ä¹ˆæˆ‘ä¸çŸ¥é“ã€‚æ‰€ä»¥é¢˜ä¸»é—®é¢˜é‡Œçš„é”™è¯¯å°±åœ¨è¿™é‡Œï¼ŒPlate&lt;ï¼Ÿ
extends Fruit&gt;é‡Œä»€ä¹ˆéƒ½æ”¾ä¸è¿›å»ã€‚ :::</li>
</ul>
<h2 id="æ³¨è§£"><a class="header" href="#æ³¨è§£">æ³¨è§£</a></h2>
<ol>
<li>æ³¨è§£ä¼šå½±å“ç¨‹åºçš„ç¼–è¯‘å’Œè¿è¡Œ</li>
<li>æ³¨è§£æœ¬èº«åªæ˜¯ä¸€ä¸ªæ ‡æ³¨ï¼Œæœ¬èº«ä¸ç”¨åŒ…å«é€»è¾‘å¤„ç†å†…å®¹</li>
</ol>
<h3 id="ä½œç”¨èŒƒå›´"><a class="header" href="#ä½œç”¨èŒƒå›´">ä½œç”¨èŒƒå›´</a></h3>
<ul>
<li>RUNTIMEï¼šç¨‹åºè¿è¡Œæ—¶èµ·ä½œç”¨ï¼Œä¾‹å¦‚ï¼š<code>@WebServlet</code></li>
<li>SOURCEï¼šç¼–è¯‘æ—¶æœŸä½œç”¨ï¼Œä¾‹å¦‚ <code>@Override</code></li>
</ul>
<h3 id="target"><a class="header" href="#target">@Target</a></h3>
<p>æŒ‡å®šæ³¨è§£é’ˆå¯¹çš„ç›®æ ‡</p>
<ul>
<li>ElementType.Type ç±»ã€æ–¹æ³•</li>
<li>ElementType.Field æˆå‘˜å˜é‡</li>
<li>ElementType.METHOD æˆå‘˜æ–¹æ³•</li>
<li>ElementType.PARAMETER æ–¹æ³•å‚æ•°</li>
<li>ElementType.CONSTRUCTOR æ„é€ å™¨</li>
<li>ElementType.PACKAGE åŒ…</li>
<li>ElementType.ANNOTATION_TYPE æ³¨è§£</li>
</ul>
<h3 id="retention"><a class="header" href="#retention">@Retention</a></h3>
<p>æŒ‡å®šæ³¨è§£çš„ä¿ç•™åŸŸ</p>
<ul>
<li>RetentionPolicy.SOURCE æºä»£ç çº§åˆ«ï¼Œç”±ç¼–è¯‘å™¨å¤„ç†ï¼Œå¤„ç†åä¸å†ä¿ç•™</li>
<li>RetentionPolicy.CLASS æ³¨è§£ä¿¡æ¯ä¿ç•™åˆ° class æ–‡ä»¶ä¸­</li>
<li>RetentionPolicy.RUNTION ç”± jvm è¯»å–ï¼Œè¿è¡Œæ—¶ä½¿ç”¨</li>
</ul>
<h3 id="ç¤ºä¾‹"><a class="header" href="#ç¤ºä¾‹">ç¤ºä¾‹</a></h3>
<ol>
<li>æ³¨è§£ç±»</li>
</ol>
<pre><code class="language-java">@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface InitAnno {

}
</code></pre>
<ol start="2">
<li>è¢«æ³¨è§£ç±»</li>
</ol>
<pre><code class="language-java">public class Foo {
    @InitAnno
    public void bar() {
        System.out.println(&quot;è¿›å…¥äº† bar æ–¹æ³•&quot;);
    }
}
</code></pre>
<ol start="3">
<li>Main</li>
</ol>
<pre><code class="language-java">public static void main(String[] args) {
    Class&lt;?&gt; clazz = Class.forName(&quot;Foo&quot;);
    Annotation annotation = clazz.getAnnotation(InitAnno.class);
    if (annotation == null) {
        System.out.println(&quot;ç±»å‰æ²¡æœ‰ InitAnno æ³¨è§£&quot;);
    }
    Method[] methods = clazz.getMethods();
    for (Method method : methods) {
        boolean isInitAnno = method.isAnnotationPresent(InitAnno.class);
        if (isInitAnno) {
            method.invoke(clazz.getConstructor(null).newInstance(null), null);
        }
    }
}
</code></pre>
<h2 id="å¤šçº¿ç¨‹"><a class="header" href="#å¤šçº¿ç¨‹">å¤šçº¿ç¨‹</a></h2>
<h3 id="å®ç°"><a class="header" href="#å®ç°">å®ç°</a></h3>
<ol>
<li>ç»§æ‰¿ Thread ç±»</li>
</ol>
<pre><code class="language-java">MyThread thread = new MyThread();
thread.start();
</code></pre>
<ol start="2">
<li>å®ç° Runnable æ¥å£</li>
</ol>
<pre><code class="language-java">MyRunnable runnable = new MyRunnable();
Thread thread = new Thread(runnable);

Thread thread = new Thread(new MyRunnable() {
    @Override
    public void run() {
        for(int i = 0;i&lt;100;i++) {
            System.out.println(&quot;MyRunnable1&quot;);
        }
    }
});
thread.start();
</code></pre>
<p>::: tip æç¤º Runnable ç›¸æ¯” Thread è€¦åˆä½ï¼Œlambda è¡¨è¾¾å¼æ›´ä½ ::: 3. å®ç° Callable æ¥å£</p>
<pre><code class="language-java">Callable&lt;String&gt; callable = () -&gt; {
    System.out.println(&quot;è¿›å»äº†&quot;);
    return &quot;Hello&quot;;
};
FutureTask&lt;String&gt; featureTask = new FutureTask&lt;&gt;(callable);
Thread thread = new Thread(featureTask);
System.out.println(featureTask.get());
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼Callable ä¸ Thread æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œéœ€è¦é—´æ¥å®ç°</p>
</blockquote>
<pre><code class="language-java">public interface RunnableFuture&lt;V&gt; extends Runnable, Future&lt;V&gt; {
    /**
     * Sets this Future to the result of its computation
     * unless it has been cancelled.
     */
    void run();
}

public class FutureTask&lt;V&gt; implements RunnableFuture&lt;V&gt; {
    private Callable&lt;V&gt; callable;
}
</code></pre>
<pre><code class="language-mermaid">graph LR
A[Callable] --&gt;B(FutureTask) --&gt; C(RunnableFuture) --&gt; D(Runnable) --&gt; E(Thread)
</code></pre>
<h3 id="å¸¸ç”¨æ–¹æ³•"><a class="header" href="#å¸¸ç”¨æ–¹æ³•">å¸¸ç”¨æ–¹æ³•</a></h3>
<pre><code class="language-java">1. ä¼‘çœ 
thread.sleep(3000);
2. åˆå¹¶
thread.join(3000);
3. ç¤¼è®©
yield();
</code></pre>
<h3 id="çº¿ç¨‹åŒæ­¥"><a class="header" href="#çº¿ç¨‹åŒæ­¥">çº¿ç¨‹åŒæ­¥</a></h3>
<p>æ¯ä¸ª java å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…ç½®é”ï¼Œå†…ç½®é”ä¼šä¿æŠ¤ä½¿ç”¨ synchronized å…³é”®å­—ä¿®é¥°çš„æ–¹æ³• è¦è°ƒç”¨è¯¥æ–¹æ³•å¿…é¡»å…ˆè·å–é”ï¼Œå¦åˆ™å°±å¤„äºå µå¡çŠ¶æ€</p>
<ul>
<li>é™æ€å˜é‡</li>
</ul>
<pre><code class="language-java">public class SameRunnable implements Runnable {
    private static int num = 0;
    @Override
    public synchronized void run() {
        ++num;
        Thread.sleep(10);
        System.out.println(&quot;ç¬¬&quot; + Thread.currentThread().getName() + &quot;ä½è®¿å®¢æ˜¯ç¬¬&quot; + num + &quot;ä¸ª&quot;);
    }
}
</code></pre>
<ul>
<li>é™æ€ä»£ç å—ï¼Œé”å®šç±» synchronized å…³é”®å­—ä¹Ÿèƒ½ä¿®é¥°ä»£ç å—ï¼Œä»¥ä¸‹ä¾‹å­ä¹Ÿèƒ½æœ‰ç›¸åŒçš„æ•ˆæœ</li>
</ul>
<pre><code class="language-java">public class Test {
    public static void main(String[] args) {
        for (int i = 0; i &lt; 5; i++) {
            Thread thread = new Thread(new Runnable() {
                public void run() {
                    Test test = new Test();
                    test.print();
                }
            }).start();
        }
    }
    public synchronized void print() {
        synchronized (Test.class) {    // é”å®šç±» (éé™æ€å¯ this), ä¸èƒ½æ˜¯ç±»çš„å®ä¾‹
            System.out.println(&quot;å¼€å§‹&quot;);
            Thread.currentThread().sleep(1000);
            System.out.println(&quot;ç»“æŸ&quot;);
        }
    }
}
</code></pre>
<ul>
<li>é”å®šå®ä¾‹æ–¹æ³• ::: danger æ³¨æ„ synchronized å…³é”®å­—åªæ˜¯ä¿®é¥°å…±äº«çš„èµ„æºï¼Œä¸‹é¢çš„ä¾‹å­ä¸èƒ½å¾—åˆ°æƒ³è¦çš„æ•ˆæœ :::</li>
</ul>
<pre><code class="language-java">public synchronized void print() {
    System.out.println(&quot;å¼€å§‹&quot;);
    Thread.currentThread().sleep(1000);
    System.out.println(&quot;ç»“æŸ&quot;);
}
</code></pre>
<h3 id="çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼"><a class="header" href="#çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼">çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼</a></h3>
<ul>
<li>é”å®šç±»</li>
</ul>
<pre><code class="language-java">public volatile class Runner {
    private static Runner runner;
    // è®°å¾—åŠ å…³é”®å­—ï¼Œé˜²æ­¢å¤šä¸ªçº¿ç¨‹è®¿é—®æ—¶è¿˜æ²¡åˆ›å»ºè¿‡å¯¹è±¡
    // 1. ğŸ”’æ•´ä¸ªæ–¹æ³•
    public synchronized static Runner getRunner() {
        if (runner == null) {
            runner = new Runner();
        }
        return runner;
    }
    // åªé”ä»£ç å—ï¼Œä¸å½±å“è¯¥æ–¹æ³•å†…çš„å…¶ä»–ä¸šåŠ¡
    public static Runner getRunner() {
        synchronized(Runner.class) {
            if (runner == null) {
                runner = new Runner();
            }
        }
        return runner;
    }

}
</code></pre>
<p>::: tip å…¶ä»–é”å®šå¯¹è±¡</p>
<ol>
<li>synchronized(runner): n ä¸ªç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä¸èƒ½é”ç©ºå¯¹è±¡</li>
<li>Integer i = Integer.parseInt(&quot;1&quot;); synchronized(i): ä¹Ÿå¯ä»¥</li>
<li>Integer a = Integer.parseInt(&quot;1&quot;); Integer b = Integer.parseInt(&quot;1&quot;);
synchronized(i) å¼€å¯ä¸¤ä¸ªçº¿ç¨‹ï¼Œè‹¥ a,b å€¼ (è¯¦æƒ…è§ Integer åŒ…è£…ç±») ç›¸åŒï¼Œåˆ™çº¿ç¨‹å®‰å…¨ï¼Œå¦åˆ™ä¸å®‰å…¨ :::</li>
</ol>
<h3 id="voletile-å…³é”®å­—"><a class="header" href="#voletile-å…³é”®å­—">voletile å…³é”®å­—</a></h3>
<ol>
<li>å¼•ä¾‹</li>
</ol>
<pre><code class="language-java">public class exam {

    public static void main(String[] args) {
        int num = 0;
        int finalNum = num;
        new Thread(() -&gt; {
            while (finalNum == 0) {
            }
        }).start();
        TimeUnit.SECONDS.sleep(1);
        num = 1;
        System.out.println(num);
    }
}
</code></pre>
<ul>
<li>åœ¨è¯¥ä¾‹å­ä¸­ï¼Œå¾ªç¯ä¸ä¼šåœæ­¢ new Thread ä¸ main åŒæ—¶æ“ä½œ numï¼Œä»–ä»¬åˆ†åˆ«ä»ä¸»å†…å­˜å¤åˆ¶åˆ°å·¥ä½œå†…å­˜ï¼Œå¯¹å„è‡ªçš„å·¥ä½œå†…å­˜ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œï¼Œ
main çº¿ç¨‹å¯¹ num+1ï¼ŒåŒæ­¥åˆ°ä¸»çº¿ç¨‹ï¼Œä½† new Thread çš„ä»»åŠ¡æœªåœæ­¢ï¼Œæ²¡æœ‰ä¸ä¸»å†…å­˜åŒæ­¥ï¼Œå¾ªç¯ä¸ä¼šç»ˆæ­¢</li>
<li>è‹¥å¾ªç¯ä¸­åŠ ä¸€ä¸ªæ‰§è¡Œè¯­å¥ï¼Œå¾ªç¯ä¼šç»ˆæ­¢ï¼Œå·¥ä½œå†…å­˜ä¼šå³ä½¿ä¸ä¸»å†…å­˜è¿›è¡ŒåŒæ­¥</li>
</ul>
<p>å½“å„ä¸ªçº¿ç¨‹æ“ä½œæ—¶ï¼Œæ•°æ®æ²¡æœ‰è¿›è¡ŒåŒæ­¥åˆ°ä¸»å†…å­˜ï¼Œäº§ç”Ÿé”™è¯¯ voletile å…³é”®å­—ä½¿å¤šä¸ªçº¿ç¨‹ç›´æ¥æ“ä½œä¸»å†…å­˜ï¼Œä¸åœ¨ç»è¿‡å·¥ä½œå†…å­˜</p>
<h3 id="å¾…ç»­-1"><a class="header" href="#å¾…ç»­-1">å¾…ç»­...</a></h3>
<h2 id="juc"><a class="header" href="#juc">JUC</a></h2>
<h3 id="ç‰¹å¾"><a class="header" href="#ç‰¹å¾">ç‰¹å¾</a></h3>
<p>synchronized ä¸ Lock å¯¹æ¯”</p>
<ol>
<li>synchronized è‡ªåŠ¨ä¸Šé”è§£é”ï¼ŒLock æ‰‹åŠ¨ä¸Šé”è§£é”</li>
<li>synchronized æ— æ³•åˆ¤æ–­æ˜¯å¦è·å–åˆ°é”ï¼ŒLock å¯ä»¥</li>
<li>synchronized æ‹¿ä¸åˆ°é”ä¼šä¸€ç›´ç­‰å¾…ï¼ŒLock ä¸ä¼š</li>
<li>synchronized æ˜¯å…³é”®å­—ï¼Œjvm å®ç°ï¼ŒLock æ˜¯æ¥å£ï¼Œjdk å®ç°</li>
<li>synchronized æ˜¯éå…¬å¹³é”ï¼ŒLock è‡ªç”±è®¾ç½®</li>
</ol>
<blockquote>
<p>å…¬å¹³é”ï¼šå¤šä¸ªçº¿ç¨‹æ’é˜ŸåŠ é”<code>&lt;br/&gt;</code> éå…¬å¹³é”ï¼šä¸åˆ¤æ–­æ˜¯å¦æœ‰å…¶ä»–ç­‰å¾…çº¿ç¨‹ï¼Œç›´æ¥å ç”¨</p>
</blockquote>
<h3 id="åŸºæœ¬æ“ä½œ"><a class="header" href="#åŸºæœ¬æ“ä½œ">åŸºæœ¬æ“ä½œ</a></h3>
<pre><code class="language-java">private Lock lock = new ReentrantLock();
lock.lock();
    ...
lock.unlock();
</code></pre>
<h3 id="æ­»é”"><a class="header" href="#æ­»é”">æ­»é”</a></h3>
<pre><code class="language-java">/*
* num = 1 çš„äººæ‹¿åˆ° chopsticks1ï¼Œç­‰å¾… chopsticks2
* num = 2 çš„äººæ‹¿åˆ° chopsticks2ï¼Œç­‰å¾… chopsticks1
* */
@Override
public void run() {
    if (num == 1) {
        synchronized (chopsticks1) {
            Thread.sleep(100);
            synchronized (chopsticks2) {
                System.out.println(&quot;1 åƒå®Œäº†&quot;);
            }
        }
    }
    if (num == 2) {
        synchronized (chopsticks2) {
            synchronized (chopsticks1) {
                System.out.println(&quot;2 åƒå®Œäº†&quot;);
            }
        }
    }
}
</code></pre>
<h3 id="ç”Ÿäº§è€…æ¶ˆè´¹è€…"><a class="header" href="#ç”Ÿäº§è€…æ¶ˆè´¹è€…">ç”Ÿäº§è€…æ¶ˆè´¹è€…</a></h3>
<pre><code class="language-java">// 1. synchronize
class Container {
    private int num = 5;
    public synchronized void add() {
        while (num != 0) {
            this.wait();
        }
        num += 1;
        TimeUnit.SECONDS.sleep(1);
        System.out.println(Thread.currentThread().getName() + &quot;ç”Ÿäº§äº† 1 ä¸ªï¼Œè¿˜æœ‰&quot; + num + &quot;ä¸ª&quot;);
        this.notify();
    }
    public synchronized void pop(int i) {
        while (num == 0) {
            this.wait();
        }
        num -= 1;
        System.out.println(i + &quot;è´­ä¹°äº† 1 ä¸ªï¼Œè¿˜æœ‰&quot; + num + &quot;ä¸ª&quot;);
        this.notify();
    }
}
// 2. Lock è¦ä»¥ condition.await å’Œ condition.singal ä»£æ›¿ wait å’Œ notify
class Container2 {
    private int num = 5;
    ReentrantLock lock = new ReentrantLock();
    private Condition condition = lock.newCondition();
    public void add() {
        lock.lock();
        while (num != 0) {
            condition.await();
        }
        num += 1;
        TimeUnit.SECONDS.sleep(1);
        System.out.println(Thread.currentThread().getName() + &quot;ç”Ÿäº§äº† 1 ä¸ªï¼Œè¿˜æœ‰&quot; + num + &quot;ä¸ª&quot;);
        condition.signal();
        lock.unlock();
    }
}
</code></pre>
<h3 id="trylock"><a class="header" href="#trylock">tryLock</a></h3>
<pre><code class="language-java">class TimeLock {
    private final ReentrantLock lock = new ReentrantLock();
    public void tryLock() {
        try {
            if (lock.tryLock(3, TimeUnit.SECONDS)) {
                System.out.println(&quot;3 ç§’å†…æ‹¿åˆ°äº†é”&quot;);
                TimeUnit.SECONDS.sleep(5);
            } else {
                System.out.println(&quot;3 ç§’å†…æ²¡æ‹¿åˆ°é”&quot;);
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        } finally {
            if (lock.isHeldByCurrentThread()) {
                lock.unlock();  // åªèƒ½ç”±ä¸Šé”è€…å»è§£é”
            }
        }
    }
}
</code></pre>
<h3 id="åŒæ—¶è¯»å†™"><a class="header" href="#åŒæ—¶è¯»å†™">åŒæ—¶è¯»å†™</a></h3>
<ol>
<li>å¯¹ ArrayList è¯»å†™æ“ä½œåŒæ—¶å­˜åœ¨ä¼šæŠ›å‡ºå¼‚å¸¸</li>
</ol>
<pre><code class="language-java">public class ReadAndWrite {
    public static void main(String[] args) {
        List&lt;String&gt; list = new ArrayList&lt;&gt;();
        //List&lt;String&gt; list = new Vector&lt;&gt;();
        // List&lt;String&gt; list = Collections.synchronizedList(new ArrayList&lt;&gt;());
        // List&lt;String&gt; list = new CopyOnWriteArrayList();
        for (int i = 0; i &lt; 10; i++) {
            new Thread(() -&gt; {
                try {
                    TimeUnit.MILLISECONDS.sleep(1);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                list.add(&quot;a&quot;);
                System.out.println(Thread.currentThread().getName() + list);
            }, String.valueOf(i)).start();
        }
    }
}
</code></pre>
<ol start="2">
<li>åŸå›  ArrayList ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</li>
</ol>
<pre><code class="language-java">public boolean add(E e) {
    ensureCapacityInternal(size + 1);  // Increments modCount!!
    elementData[size++] = e;
    return true;
}
</code></pre>
<ol start="3">
<li>è§£å†³æ–¹æ³•</li>
</ol>
<ul>
<li>æ›´æ¢ä¸º Vector</li>
</ul>
<pre><code class="language-java">public synchronized boolean add(E e) {
    modCount++;
    ensureCapacityHelper(elementCount + 1);
    elementData[elementCount++] = e;
    return true;
}
</code></pre>
<ul>
<li>
<p>æ›´æ¢ä¸º Collections.synchronizedList()</p>
</li>
<li>
<p>JUC: CopyOnWriteList</p>
</li>
</ul>
<blockquote>
<p>CopyOnWrite å®ç°äº†è¯»å†™åˆ†ç¦»ï¼Œå½“æˆ‘ä»¬å¾€ä¸€ä¸ªå®¹å™¨æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œä¸æ˜¯ç›´æ¥ç»™å®¹å™¨æ·»åŠ ï¼Œè€Œæ˜¯å…ˆå°†å½“å‰å®¹å™¨å¤åˆ¶ä¸€
ä»½ï¼Œå‘æ–°çš„å®¹å™¨ä¸­æ·»åŠ æ•°æ®ï¼Œæ·»åŠ å®Œæˆä¹‹åï¼Œå†å°†åŸå®¹å™¨çš„å¼•ç”¨æŒ‡å‘æ–°çš„å®¹å™¨ã€‚</p>
</blockquote>
<pre><code class="language-java">public boolean add(E e) {
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        Object[] elements = getArray();
        int len = elements.length;
        Object[] newElements = Arrays.copyOf(elements, len + 1);
        newElements[len] = e;
        setArray(newElements);
        return true;
    } finally {
        lock.unlock();
    }
}
</code></pre>
<h3 id="è®¡æ•°å™¨"><a class="header" href="#è®¡æ•°å™¨">è®¡æ•°å™¨</a></h3>
<ul>
<li>å‡æ³•è®¡æ•°å™¨ countDownLatch å¯ä»¥ç¡®ä¿æŸä¸ªçº¿ç¨‹ä¼˜å…ˆæ‰§è¡Œï¼Œå½“è®¡æ•°å™¨æ¸…é›¶åœ¨å”¤é†’å…¶ä»–çº¿ç¨‹</li>
</ul>
<pre><code class="language-java">public class CountDown {
    public static void main(String[] args) {
        CountDownLatch countDownLatch = new CountDownLatch(80);
        new Thread(() -&gt; {
            for (int i = 0; i &lt; 100; i++) {
                countDownLatch.countDown();
                System.out.println(i);
            }
        }).start();

        countDownLatch.await();   // å¿…é¡»å”¤é†’ï¼Œä¸”è®¡æ•°å™¨è¦æ¸…é›¶

        for (int i = 0; i &lt; 10; i++) {
            System.out.println(&quot;main&quot;);
        }
    }
}
</code></pre>
<p>::: warning æ³¨æ„ new CountDownLatch(80), countDownLatch.countDown(),
countDownLatch.await() å¿…é¡»é…åˆä½¿ç”¨ï¼Œåªè¦è®¡æ•°å™¨æ²¡æœ‰æ¸…é›¶ï¼Œè®¡æ•°å™¨ä¸ä¼šåœæ­¢ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿä¸èƒ½å”¤é†’ :::</p>
<ul>
<li>åŠ æ³•è®¡æ•°å™¨ è¯•å›¾å”¤é†’å½“å‰çº¿ç¨‹ï¼Œå½“åŠ åˆ°ä¸€å®šæ•°é‡æˆåŠŸå”¤é†’ï¼Œä¹‹åæ¸…é›¶ï¼Œå†æ¬¡ç´¯åŠ å¾ªç¯</li>
</ul>
<pre><code class="language-java">// æ„é€ å™¨
public CyclicBarrier(int parties, Runnable barrierAction) {
    if (parties &lt;= 0) throw new IllegalArgumentException();
    this.parties = parties;
    this.count = parties;
    this.barrierCommand = barrierAction;
}

// Test
public class CyclicBarrier_ {
    public static void main(String[] args) {
        CyclicBarrier cyclicBarrier = new CyclicBarrier(5, () -&gt; {
            System.out.println(&quot;æ”¾è¡Œ&quot;);
        });
        for (int i = 0; i &lt; 10; i++) {
            final int temp = i;
            new Thread(() -&gt; {
                cyclicBarrier.await();
            }).start();
        }
    }
}
</code></pre>
<ul>
<li>è®¡æ•°çº¿ç¨‹é™æµ é™åˆ¶åŒæ—¶è¿›å…¥çš„çº¿ç¨‹æ•°</li>
</ul>
<ol>
<li>åˆå§‹åŒ–</li>
<li>è·å¾—è®¸å¯</li>
<li>é‡Šæ”¾</li>
</ol>
<pre><code class="language-java">public static void main(String[] args) {
    Semaphore semaphore = new Semaphore(5);   // é™åˆ¶æœ€å¤š 5 äºº
    for (int i = 0; i &lt; 15; i++) {
        new Thread(() -&gt; {
            try {
                semaphore.acquire();
                System.out.println(Thread.currentThread().getName() + &quot;è¿›å»äº†&quot;);
                TimeUnit.SECONDS.sleep(2);
                System.out.println(Thread.currentThread().getName() + &quot;å‡ºå»äº†&quot;);
            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                semaphore.release();
            }
        }).start();
    }
}
</code></pre>
<h3 id="è¯»å†™é”"><a class="header" href="#è¯»å†™é”">è¯»å†™é”</a></h3>
<p>è¯»å†™é”ä¹Ÿæ˜¯ä¸ºäº†å®ç°çº¿ç¨‹åŒæ­¥ï¼Œåªä¸è¿‡ç²’åº¦æ›´ç»†ï¼Œå¯ä»¥ä¸ºè¯»å’Œå†™è®¾ç½®ä¸åŒçš„é”</p>
<pre><code class="language-java">class Cache {
    private Map&lt;Integer, String&gt; map = new HashMap&lt;&gt;();
    private ReadWriteLock readWriteLock = new ReentrantReadWriteLock();

    public void write(Integer id, String value) {
        readWriteLock.writeLock().lock();
        System.out.println(&quot;å¼€å§‹å†™å…¥ ID: &quot; + id);
        map.put(id, value);
        System.out.println(&quot;å†™å…¥å®Œæˆ ID: &quot; + id);
        readWriteLock.writeLock().unlock();
    }

    public String read(Integer id) {
        readWriteLock.readLock().lock();
        System.out.println(&quot;å¼€å§‹è¯»å– ID: &quot; + id);
        String a = map.get(id);
        System.out.println(&quot;è¯»å–å®Œæˆ ID: &quot; + id);
        readWriteLock.readLock().unlock();
        return a;
    }
}
</code></pre>
<p>::: tip è¡¥å…… å†™å…¥é”ä¹Ÿå«ç‹¬å é”ï¼Œåªèƒ½è¢« 1 ä¸ªçº¿ç¨‹å ç”¨ï¼Œè¯»å–é”ä¹Ÿå«å…±äº«é”ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶å ç”¨ã€‚ :::</p>
<h3 id="çº¿ç¨‹æ± "><a class="header" href="#çº¿ç¨‹æ± ">çº¿ç¨‹æ± </a></h3>
<ol>
<li>åŸºæœ¬ä½¿ç”¨</li>
</ol>
<p>é¢„å…ˆåˆ›å»ºå¥½ä¸€å®šæ•°é‡çš„çº¿ç¨‹å¯¹è±¡ï¼Œå­˜å…¥ç¼“å†²æ± ä¸­ï¼Œéœ€è¦ç”¨çš„æ—¶å€™ç›´æ¥ä»ç¼“å†²æ± ä¸­å–å‡ºï¼Œç”¨å®Œä¹‹åä¸è¦é”€æ¯ï¼Œè¿˜å›åˆ°ç¼“å†²æ± ä¸­ï¼Œä¸ºäº†æé«˜èµ„æºçš„åˆ©ç”¨ç‡ã€‚ä¼˜åŠ¿ï¼š</p>
<ul>
<li>æé«˜çº¿ç¨‹çš„åˆ©ç”¨ç‡</li>
<li>æé«˜å“åº”é€Ÿåº¦</li>
<li>ä¾¿äºç»Ÿä¸€ç®¡ç†çº¿ç¨‹å¯¹è±¡</li>
<li>å¯ä»¥æ§åˆ¶æœ€å¤§çš„å¹¶å‘æ•°</li>
</ul>
<pre><code class="language-java">public class ThreadPool_ {
    public static void main(String[] args) {
        // å•ä¾‹
        //ExecutorService executorService = Executors.newSingleThreadExecutor();
        // æŒ‡å®šçº¿ç¨‹æ•°é‡
        //ExecutorService executorService = Executors.newFixedThreadPool(5);
        // ç¼“å†²çº¿ç¨‹æ± 
        ExecutorService executorService = Executors.newCachedThreadPool();
        for (int i = 0; i &lt; 60; i++) {
            final int temp = i;
            executorService.execute(() -&gt; {
                System.out.println(Thread.currentThread().getName() + &quot; &quot; + temp);
            });
        }
        executorService.shutdown();
    }
}
</code></pre>
<!-- 2. çº¿ç¨‹æ± åˆ†æ -->
<ol start="2">
<li>æ„é€ å‡½æ•°</li>
</ol>
<p>ä¸‰ä¸ªå¸¸ç”¨çº¿ç¨‹æ± éƒ½ return new ThreadPoolExecutor(); ThreadPoolExecutor çš„æ„é€ å‡½æ•°å¦‚ä¸‹</p>
<pre><code class="language-java">public ThreadPoolExecutor(  int corePoolSize,
                            int maximumPoolSize,
                            long keepAliveTime,
                            TimeUnit unit,
                            BlockingQueue&lt;Runnable&gt; workQueue,
                            ThreadFactory threadFactory,
                            RejectedExecutionHandler handler) {
</code></pre>
<ul>
<li>corePoolSize: æ ¸å¿ƒæ± æ•°é‡</li>
<li>maximumPoolSize: çº¿ç¨‹æ± å®¹é‡ä¸Šé™ï¼Œä»»åŠ¡é‡å¢å¤§æ—¶ï¼Œçº¿ç¨‹æ± ä¸»åŠ¨æ‰©å®¹</li>
<li>keepAliveTime: çº¿ç¨‹å¯¹è±¡å­˜æ´»æ—¶é—´</li>
<li>unit: çº¿ç¨‹å¯¹è±¡å­˜æ´»æ—¶é—´å•ä½</li>
<li>workQueue: çº¿ç¨‹é˜Ÿåˆ— (æ–°çš„ä»»åŠ¡åœ¨é˜Ÿåˆ—ä¸­ç­‰å€™è·å–çº¿ç¨‹å¯¹è±¡)</li>
<li>threadFactory: çº¿ç¨‹å·¥å‚åˆ›å»ºçº¿ç¨‹å¯¹è±¡</li>
<li>handler: æ‹’ç»ç­–ç•¥</li>
</ul>
<ol start="3">
<li>æ‹’ç»ç­–ç•¥</li>
</ol>
<p>RejectedExecutionHandler æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå‡åœ¨ ThreadPoolExecutor ä¸­å®ç°</p>
<ul>
<li>AbortPolicyz:ç›´æ¥æŠ›å‡ºå¼‚å¸¸</li>
</ul>
<pre><code class="language-java">/**
    * A handler for rejected tasks that throws a
    * {@code RejectedExecutionException}.
    */
public static class AbortPolicy implements RejectedExecutionHandler {
</code></pre>
<ul>
<li>DiscardPolicy: ç›´æ¥æ‹’ç»</li>
</ul>
<pre><code class="language-java">/**
    * A handler for rejected tasks that silently discards the
    * rejected task.
    */
public static class DiscardPolicy implements RejectedExecutionHandler {
</code></pre>
<ul>
<li>DiscardOldestPolicy: å°è¯•ä¸ç­‰å¾…é˜Ÿåˆ—ä¸­æœ€å¼€å§‹çš„ä»»åŠ¡äº‰å¤ºï¼Œä¸æŠ›å‡ºå¼‚å¸¸</li>
</ul>
<pre><code class="language-java">/**
     * A handler for rejected tasks that discards the oldest unhandled
     * request and then retries {@code execute}, unless the executor
     * is shut down, in which case the task is discarded.
     */
    public static class DiscardOldestPolicy implements RejectedExecutionHandler {
</code></pre>
<ul>
<li>CallerRunsPolicy ç”±å‘èµ·è¯·æ±‚çº¿ç¨‹å¤„ç†</li>
</ul>
<pre><code class="language-java">/**
    * A handler for rejected tasks that runs the rejected task
    * directly in the calling thread of the {@code execute} method,
    * unless the executor has been shut down, in which case the task
    * is discarded.
    */
public static class CallerRunsPolicy implements RejectedExecutionHandler {
</code></pre>
<ol start="4">
<li>è‡ªå®šä¹‰çº¿ç¨‹æ± </li>
</ol>
<pre><code class="language-java">executorService = new ThreadPoolExecutor(
        4,
        10,
        2L,
        TimeUnit.SECONDS,
        new ArrayBlockingQueue&lt;&gt;(20),
        Executors.defaultThreadFactory(),
        new ThreadPoolExecutor.AbortPolicy());
</code></pre>
<p>4 ç§ workQueue å µå¡é˜Ÿåˆ—ï¼Œç”¨æ¥å­˜å‚¨ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡</p>
<ul>
<li>ArrayBlockingQueue: åŸºäºæ•°ç»„çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼Œåˆ›å»ºæ—¶å¿…é¡»æŒ‡å®šå¤§å°ã€‚</li>
<li>LinkedBlockingQueue: åŸºäºé“¾è¡¨çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼Œåˆ›å»ºæ—¶å¯ä»¥ä¸æŒ‡å®šå¤§å°ï¼Œé»˜è®¤å€¼æ˜¯ Integer.MAX VALUEã€‚æœ€å¤§å€¼ã€‚</li>
<li>SynchronousQueue: å®ƒä¸ä¼šä¿æŒæäº¤çš„ä»»åŠ¡ï¼Œè€Œæ˜¯ç›´æ¥æ–°å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œæ–°æ¥çš„ä»»åŠ¡ã€‚</li>
<li>PriorityBlockingQueue: å…·æœ‰ä¼˜å…ˆçº§çš„é˜»å¡é˜Ÿåˆ—ã€‚</li>
</ul>
<h3 id="forkjoin"><a class="header" href="#forkjoin">Forkjoin</a></h3>
<ol>
<li>æ¦‚å¿µ</li>
</ol>
<ul>
<li>Forkjoin æ˜¯ JDK 1.7 åå‘å¸ƒçš„å¤šçº¿ç¨‹å¹¶å‘å¤„ç†æ¡†æ¶ï¼ŒåŠŸèƒ½ä¸Šå’Œ JUC ç±»ä¼¼ï¼Œ
JUC æ›´å¤šæ—¶å€™æ˜¯ä½¿ç”¨å•ä¸ªç±»å®Œæˆæ“ä½œï¼ŒForkjoin ä½¿ç”¨å¤šä¸ªç±»åŒæ—¶å®ŒæˆæŸé¡¹å·¥ä½œï¼Œå¤„ç†ä¸Šæ¯” JUC æ›´åŠ ä¸°å¯Œï¼Œ</li>
<li>æœ¬è´¨ä¸Šæ˜¯å¯¹çº¿ç¨‹æ± çš„ä¸€ç§çš„è¡¥å……ï¼Œå¯¹çº¿ç¨‹æ± åŠŸèƒ½çš„ä¸€ç§æ‰©å±•ï¼ŒåŸºäºçº¿ç¨‹æ± ï¼Œ</li>
<li>å®ƒçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯å°†ä¸€ä¸ªå¤§å‹çš„ä»»åŠ¡æ‹†åˆ†æˆå¾ˆå¤šä¸ªå°ä»»åŠ¡ï¼Œç„¶åç”±å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œæœ€ç»ˆå°†å°ä»»åŠ¡çš„ç»“æœè¿›è¡Œæ±‡æ€»ï¼Œç”Ÿæˆæœ€ç»ˆçš„ç»“æœã€‚</li>
</ul>
<ol start="2">
<li>åŸºæœ¬ä½¿ç”¨ è®¾ç½®ä¸´ç•Œå€¼ï¼Œé€’å½’åˆ†é…ä»»åŠ¡ï¼ŒçŸ¥é“ä»»åŠ¡ä¸èƒ½è¢«å†åˆ†</li>
</ol>
<pre><code class="language-java">public class FolkJoin_ extends RecursiveTask&lt;Long&gt; {

    private Long start;
    private Long end;
    private Long temp = 200_0000L;

    public FolkJoin_(Long start, Long end) {
        this.start = start;
        this.end = end;
    }

    @Override
    protected Long compute() {
        if ((end - start) &lt; temp) {
            Long sum = 0L;
            for (Long i = start; i &lt; end ; i++) {
                sum += i;
            }
            return sum;
        } else {
            Long avg = (start + end) / 2;
            FolkJoin_ tast1 = new FolkJoin_(start, avg);
            FolkJoin_ tast2 = new FolkJoin_(avg, end);
            tast1.fork();
            tast2.fork();
            return tast1.join()+tast2.join();
        }
    }
}
</code></pre>
<p>Main.java</p>
<pre><code class="language-java">Long start = System.currentTimeMillis();
ForkJoinPool folkJoinPool = new ForkJoinPool();
FolkJoin_ task = new FolkJoin_(0L, 10_0000_0000L);
folkJoinPool.execute(task);
System.out.println(task.get() + &quot; &quot; + (System.currentTimeMillis() - start) / 1000.0);
</code></pre>
<h3 id="å¾…ç»­-2"><a class="header" href="#å¾…ç»­-2">å¾…ç»­...</a></h3>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../../note/java/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../../note/java/springboot.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../../note/java/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../../note/java/springboot.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
