<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.35">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202022217241.jpg"><title>Haskell å­¦ä¹  | Trdthg's blog</title><meta name="description" content="æˆ‘çš„ä¸ªäººç½‘ç«™">
    <link rel="modulepreload" href="/assets/app.21cc12ca.js"><link rel="modulepreload" href="/assets/haskell.html.673568fd.js"><link rel="modulepreload" href="/assets/haskell.html.e8784d29.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/assets/style.e8e8fc80.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">Trdthg&#39;s blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>å‰ç«¯ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/js/vdom" class="" aria-label="è™šæ‹ŸDOM"><!--[--><!--]--> è™šæ‹ŸDOM <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/js/list" class="" aria-label="èµ„æ–™"><!--[--><!--]--> èµ„æ–™ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/js/vue" class="" aria-label="vue"><!--[--><!--]--> vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/js/http_cache" class="" aria-label="http"><!--[--><!--]--> http <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>pythonç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/other/python" class="" aria-label="æ€»è§ˆ"><!--[--><!--]--> æ€»è§ˆ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>javaç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/java/java" class="" aria-label="åŸºç¡€çŸ¥è¯†"><!--[--><!--]--> åŸºç¡€çŸ¥è¯† <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/sourceread" class="" aria-label="éƒ¨åˆ†æºç "><!--[--><!--]--> éƒ¨åˆ†æºç  <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/spring" class="" aria-label="Springæ¡†æ¶"><!--[--><!--]--> Springæ¡†æ¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/springboot" class="" aria-label="å¸¸ç”¨å·¥å…·"><!--[--><!--]--> å¸¸ç”¨å·¥å…· <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/projects/demo1" class="" aria-label="å°é¡¹ç›® ğŸ’ª"><!--[--><!--]--> å°é¡¹ç›® ğŸ’ª <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/rust/rust" class="" aria-label="è¯­è¨€ç‰¹æ€§"><!--[--><!--]--> è¯­è¨€ç‰¹æ€§ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/dioxus" class="" aria-label="dioxuså‰ç«¯"><!--[--><!--]--> dioxuså‰ç«¯ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/wasm" class="" aria-label="Wasm ä½“éªŒ"><!--[--><!--]--> Wasm ä½“éªŒ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/lists" class="" aria-label="å®ç°é“¾è¡¨"><!--[--><!--]--> å®ç°é“¾è¡¨ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/magic/haskell" class="router-link-active" aria-label="haskellå­¦ä¹ ç¬”è®°"><!--[--><!--]--> haskellå­¦ä¹ ç¬”è®° <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/fd" class="" aria-label="æ–‡ä»¶æè¿°ç¬¦"><!--[--><!--]--> æ–‡ä»¶æè¿°ç¬¦ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/linuxIO" class="" aria-label="IO å¤šè·¯å¤ç”¨"><!--[--><!--]--> IO å¤šè·¯å¤ç”¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/memory_ordering" class="" aria-label="åŸå­æ“ä½œ/å†…å­˜é¡ºåº"><!--[--><!--]--> åŸå­æ“ä½œ/å†…å­˜é¡ºåº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/software_arch" class="" aria-label="è½¯ä»¶æ¶æ„"><!--[--><!--]--> è½¯ä»¶æ¶æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/cicd" class="" aria-label="CI/CD"><!--[--><!--]--> CI/CD <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>åˆ†äº«</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/share_1" class="" aria-label="å…³äºæ•°æ®åº“ä¸B+æ ‘"><!--[--><!--]--> å…³äºæ•°æ®åº“ä¸B+æ ‘ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>æˆè¯¾</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_1" class="" aria-label="åç«¯1"><!--[--><!--]--> åç«¯1 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_2" class="" aria-label="åç«¯2"><!--[--><!--]--> åç«¯2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_3" class="" aria-label="åç«¯3"><!--[--><!--]--> åç«¯3 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_4" class="" aria-label="åç«¯4"><!--[--><!--]--> åç«¯4 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å…¶ä»– ğŸ“¦"><span class="title">å…¶ä»– ğŸ“¦</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å…¶ä»– ğŸ“¦"><span class="title">å…¶ä»– ğŸ“¦</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/other/hadoop" class="" aria-label="hadoop"><!--[--><!--]--> hadoop <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/script" class="" aria-label="è„šæœ¬"><!--[--><!--]--> è„šæœ¬ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/datastructure" class="" aria-label="æ•°æ®ç»“æ„"><!--[--><!--]--> æ•°æ®ç»“æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/vim" class="" aria-label="vim"><!--[--><!--]--> vim <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/git" class="" aria-label="git"><!--[--><!--]--> git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/docker" class="" aria-label="docker"><!--[--><!--]--> docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/oauth2" class="" aria-label="oauth2å­¦ä¹ "><!--[--><!--]--> oauth2å­¦ä¹  <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/trdthg" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="åˆ‡æ¢å¤œé—´"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>å‰ç«¯ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/js/vdom" class="" aria-label="è™šæ‹ŸDOM"><!--[--><!--]--> è™šæ‹ŸDOM <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/js/list" class="" aria-label="èµ„æ–™"><!--[--><!--]--> èµ„æ–™ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/js/vue" class="" aria-label="vue"><!--[--><!--]--> vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/js/http_cache" class="" aria-label="http"><!--[--><!--]--> http <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>pythonç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/other/python" class="" aria-label="æ€»è§ˆ"><!--[--><!--]--> æ€»è§ˆ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>javaç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/java/java" class="" aria-label="åŸºç¡€çŸ¥è¯†"><!--[--><!--]--> åŸºç¡€çŸ¥è¯† <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/sourceread" class="" aria-label="éƒ¨åˆ†æºç "><!--[--><!--]--> éƒ¨åˆ†æºç  <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/spring" class="" aria-label="Springæ¡†æ¶"><!--[--><!--]--> Springæ¡†æ¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/springboot" class="" aria-label="å¸¸ç”¨å·¥å…·"><!--[--><!--]--> å¸¸ç”¨å·¥å…· <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/projects/demo1" class="" aria-label="å°é¡¹ç›® ğŸ’ª"><!--[--><!--]--> å°é¡¹ç›® ğŸ’ª <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/rust/rust" class="" aria-label="è¯­è¨€ç‰¹æ€§"><!--[--><!--]--> è¯­è¨€ç‰¹æ€§ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/dioxus" class="" aria-label="dioxuså‰ç«¯"><!--[--><!--]--> dioxuså‰ç«¯ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/wasm" class="" aria-label="Wasm ä½“éªŒ"><!--[--><!--]--> Wasm ä½“éªŒ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/lists" class="" aria-label="å®ç°é“¾è¡¨"><!--[--><!--]--> å®ç°é“¾è¡¨ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/magic/haskell" class="router-link-active" aria-label="haskellå­¦ä¹ ç¬”è®°"><!--[--><!--]--> haskellå­¦ä¹ ç¬”è®° <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/fd" class="" aria-label="æ–‡ä»¶æè¿°ç¬¦"><!--[--><!--]--> æ–‡ä»¶æè¿°ç¬¦ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/linuxIO" class="" aria-label="IO å¤šè·¯å¤ç”¨"><!--[--><!--]--> IO å¤šè·¯å¤ç”¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/memory_ordering" class="" aria-label="åŸå­æ“ä½œ/å†…å­˜é¡ºåº"><!--[--><!--]--> åŸå­æ“ä½œ/å†…å­˜é¡ºåº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/software_arch" class="" aria-label="è½¯ä»¶æ¶æ„"><!--[--><!--]--> è½¯ä»¶æ¶æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/cicd" class="" aria-label="CI/CD"><!--[--><!--]--> CI/CD <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>åˆ†äº«</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/share_1" class="" aria-label="å…³äºæ•°æ®åº“ä¸B+æ ‘"><!--[--><!--]--> å…³äºæ•°æ®åº“ä¸B+æ ‘ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>æˆè¯¾</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_1" class="" aria-label="åç«¯1"><!--[--><!--]--> åç«¯1 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_2" class="" aria-label="åç«¯2"><!--[--><!--]--> åç«¯2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_3" class="" aria-label="åç«¯3"><!--[--><!--]--> åç«¯3 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_4" class="" aria-label="åç«¯4"><!--[--><!--]--> åç«¯4 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å…¶ä»– ğŸ“¦"><span class="title">å…¶ä»– ğŸ“¦</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å…¶ä»– ğŸ“¦"><span class="title">å…¶ä»– ğŸ“¦</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/other/hadoop" class="" aria-label="hadoop"><!--[--><!--]--> hadoop <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/script" class="" aria-label="è„šæœ¬"><!--[--><!--]--> è„šæœ¬ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/datastructure" class="" aria-label="æ•°æ®ç»“æ„"><!--[--><!--]--> æ•°æ®ç»“æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/vim" class="" aria-label="vim"><!--[--><!--]--> vim <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/git" class="" aria-label="git"><!--[--><!--]--> git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/docker" class="" aria-label="docker"><!--[--><!--]--> docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/oauth2" class="" aria-label="oauth2å­¦ä¹ "><!--[--><!--]--> oauth2å­¦ä¹  <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/trdthg" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Haskell å­¦ä¹  <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/magic/haskell.html#_0-ç‰¹æ€§" class="router-link-active router-link-exact-active sidebar-item" aria-label="0. ç‰¹æ€§"><!--[--><!--]--> 0. ç‰¹æ€§ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_1-å¼€å§‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. å¼€å§‹"><!--[--><!--]--> 1. å¼€å§‹ <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/magic/haskell.html#_1-1-åŸºæœ¬å‡½æ•°" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.1 åŸºæœ¬å‡½æ•°"><!--[--><!--]--> 1.1 åŸºæœ¬å‡½æ•° <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_1-2-åˆ—è¡¨" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2 åˆ—è¡¨"><!--[--><!--]--> 1.2 åˆ—è¡¨ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_1-3-ç”Ÿæˆå¼" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.3 ç”Ÿæˆå¼"><!--[--><!--]--> 1.3 ç”Ÿæˆå¼ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_1-4-å…ƒç»„" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.4 å…ƒç»„"><!--[--><!--]--> 1.4 å…ƒç»„ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_1-5-é‡è¦" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.5 é‡è¦"><!--[--><!--]--> 1.5 é‡è¦ <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/magic/haskell.html#_2-ç±»å‹ç³»ç»Ÿ" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. ç±»å‹ç³»ç»Ÿ"><!--[--><!--]--> 2. ç±»å‹ç³»ç»Ÿ <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/magic/haskell.html#_2-1-æŸ¥çœ‹ç±»å‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1 æŸ¥çœ‹ç±»å‹"><!--[--><!--]--> 2.1 æŸ¥çœ‹ç±»å‹ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_2-2-typeclasses-101" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2 Typeclasses 101"><!--[--><!--]--> 2.2 Typeclasses 101 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/magic/haskell.html#_3-å‡½æ•°è¯­æ³•" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. å‡½æ•°è¯­æ³•"><!--[--><!--]--> 3. å‡½æ•°è¯­æ³• <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/magic/haskell.html#_3-1-matchè¡¨è¾¾å¼" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1 Matchè¡¨è¾¾å¼"><!--[--><!--]--> 3.1 Matchè¡¨è¾¾å¼ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_3-2-guard" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2 Guard"><!--[--><!--]--> 3.2 Guard <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_3-3-where" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3 where"><!--[--><!--]--> 3.3 where <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_3-4-let-it-be" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4 Let it be"><!--[--><!--]--> 3.4 Let it be <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_3-5-case-expression" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5 Case Expression"><!--[--><!--]--> 3.5 Case Expression <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/magic/haskell.html#_4-é€’å½’" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. é€’å½’"><!--[--><!--]--> 4. é€’å½’ <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/magic/haskell.html#_4-2-replicate" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.2 replicate"><!--[--><!--]--> 4.2 replicate <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_4-3-take" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.3 take"><!--[--><!--]--> 4.3 take <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_4-4-zip" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.4 zip"><!--[--><!--]--> 4.4 zip <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_4-5-quick-sort" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.5 quick sort"><!--[--><!--]--> 4.5 quick sort <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/magic/haskell.html#_5-é«˜é˜¶å‡½æ•°" class="router-link-active router-link-exact-active sidebar-item" aria-label="5. é«˜é˜¶å‡½æ•°"><!--[--><!--]--> 5. é«˜é˜¶å‡½æ•° <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/magic/haskell.html#_5-1-curried-functions" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.1 Curried functions"><!--[--><!--]--> 5.1 Curried functions <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_5-2-ä¸€äº›é«˜é˜¶å‡½æ•°" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.2 ä¸€äº›é«˜é˜¶å‡½æ•°"><!--[--><!--]--> 5.2 ä¸€äº›é«˜é˜¶å‡½æ•° <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_5-3-map" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.3 Map"><!--[--><!--]--> 5.3 Map <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_5-4-filter" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.4 Filter"><!--[--><!--]--> 5.4 Filter <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_5-5-takewhile" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.5 takeWhile"><!--[--><!--]--> 5.5 takeWhile <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_5-6-chain" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.6 Chain"><!--[--><!--]--> 5.6 Chain <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_5-7-map-0" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.7 map (*) [0..]"><!--[--><!--]--> 5.7 map (*) [0..] <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_5-8-lambdas" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.8 Lambdas"><!--[--><!--]--> 5.8 Lambdas <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_5-9-fold" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.9 Fold"><!--[--><!--]--> 5.9 Fold <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_5-10-è¿ç®—ç¬¦" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.10 $ è¿ç®—ç¬¦"><!--[--><!--]--> 5.10 $ è¿ç®—ç¬¦ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_5-11-å‡½æ•°ç»„åˆ" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.11 å‡½æ•°ç»„åˆ"><!--[--><!--]--> 5.11 å‡½æ•°ç»„åˆ <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/magic/haskell.html#_6-æ¨¡å—" class="router-link-active router-link-exact-active sidebar-item" aria-label="6. æ¨¡å—"><!--[--><!--]--> 6. æ¨¡å— <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/magic/haskell.html#_6-1-å¯¼å…¥æ¨¡å—" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.1 å¯¼å…¥æ¨¡å—"><!--[--><!--]--> 6.1 å¯¼å…¥æ¨¡å— <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_6-2-data-list" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.2 Data.List"><!--[--><!--]--> 6.2 Data.List <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_6-4-data-map" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.4 Data.Map"><!--[--><!--]--> 6.4 Data.Map <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_6-5-data-set" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.5 Data.Set"><!--[--><!--]--> 6.5 Data.Set <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/magic/haskell.html#_7-è‡ªå®šä¹‰ç±»å‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="7. è‡ªå®šä¹‰ç±»å‹"><!--[--><!--]--> 7. è‡ªå®šä¹‰ç±»å‹ <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/magic/haskell.html#_7-1-åŸºæœ¬ç±»å‹å®šä¹‰" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.1 åŸºæœ¬ç±»å‹å®šä¹‰"><!--[--><!--]--> 7.1 åŸºæœ¬ç±»å‹å®šä¹‰ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_7-2-record-syntax-å®šä¹‰ç±»å‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2 record syntax å®šä¹‰ç±»å‹"><!--[--><!--]--> 7.2 record syntax å®šä¹‰ç±»å‹ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_7-3-ç±»å‹å‚æ•°" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.3 ç±»å‹å‚æ•°"><!--[--><!--]--> 7.3 ç±»å‹å‚æ•° <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_7-4-æ´¾ç”Ÿå®ä¾‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.4 æ´¾ç”Ÿå®ä¾‹"><!--[--><!--]--> 7.4 æ´¾ç”Ÿå®ä¾‹ <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/magic/haskell.html#_8-io" class="router-link-active router-link-exact-active sidebar-item" aria-label="8. IO"><!--[--><!--]--> 8. IO <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/magic/haskell.html#_8-1-cmd-å‚æ•°" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.1 cmd å‚æ•°"><!--[--><!--]--> 8.1 cmd å‚æ•° <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_8-2-è¾“å…¥" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.2 è¾“å…¥"><!--[--><!--]--> 8.2 è¾“å…¥ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_8-3-å¾ªç¯" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.3. å¾ªç¯"><!--[--><!--]--> 8.3. å¾ªç¯ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_8-4-map-io-action" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.4 map IO action"><!--[--><!--]--> 8.4 map IO action <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_8-6-todo-list" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.6 todo list"><!--[--><!--]--> 8.6 todo list <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_8-7-error-handle" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.7 Error Handle"><!--[--><!--]--> 8.7 Error Handle <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/magic/haskell.html#_9-solve-some-problems" class="router-link-active router-link-exact-active sidebar-item" aria-label="9. Solve Some Problems"><!--[--><!--]--> 9. Solve Some Problems <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/magic/haskell.html#_9-1è®¡ç®—åç¼€è¡¨è¾¾å¼" class="router-link-active router-link-exact-active sidebar-item" aria-label="9.1è®¡ç®—åç¼€è¡¨è¾¾å¼"><!--[--><!--]--> 9.1è®¡ç®—åç¼€è¡¨è¾¾å¼ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_9-2-è®¡ç®—æœ€çŸ­è·¯" class="router-link-active router-link-exact-active sidebar-item" aria-label="9.2 è®¡ç®—æœ€çŸ­è·¯"><!--[--><!--]--> 9.2 è®¡ç®—æœ€çŸ­è·¯ <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/magic/haskell.html#_10-functors-applicative-functors-and-monoids" class="router-link-active router-link-exact-active sidebar-item" aria-label="10. Functors, Applicative Functors and Monoids"><!--[--><!--]--> 10. Functors, Applicative Functors and Monoids <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/magic/haskell.html#_10-1-functor" class="router-link-active router-link-exact-active sidebar-item" aria-label="10.1 Functor"><!--[--><!--]--> 10.1 Functor <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_10-2-applicatives" class="router-link-active router-link-exact-active sidebar-item" aria-label="10.2 Applicatives"><!--[--><!--]--> 10.2 Applicatives <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_10-3-monads" class="router-link-active router-link-exact-active sidebar-item" aria-label="10.3 Monads"><!--[--><!--]--> 10.3 Monads <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/magic/haskell.html#_10-4-æ€»ç»“" class="router-link-active router-link-exact-active sidebar-item" aria-label="10.4 æ€»ç»“"><!--[--><!--]--> 10.4 æ€»ç»“ <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="haskell-å­¦ä¹ " tabindex="-1"><a class="header-anchor" href="#haskell-å­¦ä¹ " aria-hidden="true">#</a> Haskell å­¦ä¹ </h1><p>â­ï¸<a href="http://learnyouahaskell.com/chapters" target="_blank" rel="noopener noreferrer">Learn You a Haskell for Great Good!<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="_0-ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#_0-ç‰¹æ€§" aria-hidden="true">#</a> 0. ç‰¹æ€§</h2><ol><li><blockquote><p>We usually use &#39; to either denote a strict version of a function (one that isn&#39;t lazy) or a slightly modified version of a function or a variable. Because &#39; is a valid character in functions, we can make a function like this.</p></blockquote><p><code>â€˜</code> åœ¨haskellä¸­æ˜¯å£°æ˜çš„åˆæ³•å­—ç¬¦ï¼Œ ä¸€èˆ¬ä¸­åŠ  <code>â€™</code> çš„å‡½æ•°ä»£è¡¨ä¸€ä¸ªå‡½æ•°çš„ä¿®æ”¹ç‰ˆæœ¬æˆ–è€…ä¸¥æ ¼ç‰ˆæœ¬</p></li></ol><h2 id="_1-å¼€å§‹" tabindex="-1"><a class="header-anchor" href="#_1-å¼€å§‹" aria-hidden="true">#</a> 1. å¼€å§‹</h2><p><strong>Starting Out</strong></p><h3 id="_1-1-åŸºæœ¬å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#_1-1-åŸºæœ¬å‡½æ•°" aria-hidden="true">#</a> 1.1 åŸºæœ¬å‡½æ•°</h3><ul><li>æœ€å°å€¼: <code>min 1 3</code></li><li>æœ€å¤§å€¼: <code>max 1 3</code></li><li>åŠ ä¸€: <code>succ 1</code></li></ul><h3 id="_1-2-åˆ—è¡¨" tabindex="-1"><a class="header-anchor" href="#_1-2-åˆ—è¡¨" aria-hidden="true">#</a> 1.2 åˆ—è¡¨</h3><ul><li><p>åˆå¹¶ï¼š <code>[1,2,3,4] ++ [9,10,11,12] </code></p></li><li><p>æ ¹æ®ç´¢å¼•å–å€¼ï¼š <code>&quot;Steve Buscemi&quot; !! 6</code></p></li><li><p>å¼€å¤´æ’å…¥ï¼š <code>&#39;A&#39;:&quot; SMALL CAT&quot; </code></p><blockquote><p>[1,2,3] is actually just syntactic sugar for 1:2:3:[].</p></blockquote></li><li><p>å–è¡¨å¤´: <code>head [1, 2, 3, 4, 5]</code></p></li><li><p>å–è¡¨å°¾: <code>tail [1, 2, 3, 4, 5] </code></p></li><li><p>å–æœ€åä¸€ä¸ªå…ƒç´ : <code>last [1, 2, 3, 4, 5]</code></p></li><li><p>å–é™¤äº†æœ€åä¸€ä¸ªå…ƒç´ ï¼š <code>init [1, 2, 3, 4, 5]</code></p></li><li><p>é•¿åº¦ï¼š <code>length [5,4,3,2,1] </code></p></li><li><p>æ˜¯å¦ä¸ºç©ºï¼š <code>null [1,2,3] </code></p></li><li><p>åè½¬åˆ—è¡¨ï¼š <code>reverse [5,4,3,2,1] </code></p></li><li><p>å–å‰nä¸ªï¼š <code>take 3 [5,4,3,2,1] </code></p></li><li><p>ä»ç¬¬nä¸ªå¼€å§‹å‘åå–ï¼š <code>drop 3 [8,4,2,1,5,6] </code></p></li><li><p>æœ€å¤§å…ƒç´ ï¼š <code>maximum [1,9,2,3,4] </code></p></li><li><p>æœ€å°å…ƒç´ ï¼š <code>minimum [8,4,2,1,5,6]</code></p></li><li><p>åŠ ï¼š <code>sum [5,2,1,6,3,2,5,7] </code></p></li><li><p>ä¹˜ï¼š <code>product [6,2,1,2] </code></p></li><li><p>æ˜¯å¦åœ¨åˆ—è¡¨ä¸­ï¼š <code>4 </code>elem <code>[3,4,5,6]</code></p></li></ul><h3 id="_1-3-ç”Ÿæˆå¼" tabindex="-1"><a class="header-anchor" href="#_1-3-ç”Ÿæˆå¼" aria-hidden="true">#</a> 1.3 ç”Ÿæˆå¼</h3><ul><li>å¾ªç¯è¿½åŠ ï¼ˆappendï¼‰ï¼š <code>cycle [1,2,3]</code></li><li>å¾ªç¯ç”Ÿæˆï¼ˆextendï¼‰ï¼š <code>repeat 5</code></li><li>ç”Ÿæˆå¼ï¼š <code>boomBangs xs = [ if x &lt; 10 then &quot;BOOM!&quot; else &quot;BANG!&quot; | x &lt;- xs, odd x]</code></li></ul><h3 id="_1-4-å…ƒç»„" tabindex="-1"><a class="header-anchor" href="#_1-4-å…ƒç»„" aria-hidden="true">#</a> 1.4 å…ƒç»„</h3><p>ç±»å‹éšæ„ï¼Œ</p><ul><li>fstï¼š <code>fst (&quot;Wow&quot;, False) </code></li><li>sndï¼š <code>snd (&quot;Wow&quot;, False)</code></li></ul><h3 id="_1-5-é‡è¦" tabindex="-1"><a class="header-anchor" href="#_1-5-é‡è¦" aria-hidden="true">#</a> 1.5 é‡è¦</h3><ul><li>zip<div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token builtin">zip</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token string">&quot;im&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;turtle&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">&quot;im&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;turtle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token builtin">zip</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;orange&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cherry&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mango&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;orange&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;cherry&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">&quot;mango&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul><h2 id="_2-ç±»å‹ç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#_2-ç±»å‹ç³»ç»Ÿ" aria-hidden="true">#</a> 2. ç±»å‹ç³»ç»Ÿ</h2><p><strong>Types and Typeclasses</strong></p><h3 id="_2-1-æŸ¥çœ‹ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_2-1-æŸ¥çœ‹ç±»å‹" aria-hidden="true">#</a> 2.1 æŸ¥çœ‹ç±»å‹</h3><p>ghciæŸ¥çœ‹</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code>ï¼š<span class="token hvariable">t</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;qqq&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="_2-2-typeclasses-101" tabindex="-1"><a class="header-anchor" href="#_2-2-typeclasses-101" aria-hidden="true">#</a> 2.2 Typeclasses 101</h3><p>æ‰€æœ‰çš„ <code>== + - * / </code> éƒ½æ˜¯function</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">t</span> <span class="token punctuation">(</span><span class="token operator">==</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token operator">==</span><span class="token punctuation">)</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Eq</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Bool</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>Everything before the =&gt; symbol is called a <em>class constraint</em>. We can read the previous type declaration like this: the equality function takes any two values that are of the same type and returns a Bool. The type of those two values must be a member of the Eq class (this was the class constraint).</p></blockquote><ul><li><code>=&gt;</code> ä¹‹å‰çš„è¢«å«åšç±»å‹çº¦æŸ</li></ul><p><strong>Type variables</strong></p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">t</span> <span class="token builtin">head</span>
<span class="token builtin">head</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>a å°±æ˜¯ç±»å‹å˜é‡ï¼Œ ä½†æ˜¯ç”±äºaä¸æ˜¯æŸä¸€ä¸ªç‰¹å®šçš„ç±»å‹ï¼Œ æ‰€ä»¥æˆ‘ä»¬ç§° head å¤šæ€å‡½æ•°</p><blockquote><p>Functions that have type variables are called <strong>polymorphic functions</strong>.</p></blockquote><p><strong>Typeclasses</strong> å°±æ˜¯ç±»å‹çº¦æŸ</p><p>ä¸‹é¢ä¸¾å‡ºäº†ä¸€ç³»åˆ—å¸¸ç”¨çš„Typeclasses</p><h4 id="_2-2-1-eq" tabindex="-1"><a class="header-anchor" href="#_2-2-1-eq" aria-hidden="true">#</a> 2.2.1 Eq</h4><blockquote><p>The Eq typeclass provides an interface for testing for equality. Any type where it makes sense to test for equality between two values of that type should be a member of the Eq class. All standard Haskell types except for IO (the type for dealing with input and output) and functions are a part of the Eq typeclass.</p></blockquote><p>Eqæä¾›äº†ä¸€ä¸ªæ¯”è¾ƒçš„æ¥å£ï¼Œ ä»»ä½•èƒ½å¤Ÿæ¯”è¾ƒè¯¥ç±»å‹çš„ä¸¤ä¸ªå€¼ä¹‹é—´ç›¸ç­‰æ€§çš„éƒ½åº”è¯¥æ˜¯Eqç±»çš„æˆå‘˜</p><h4 id="_2-2-2-ord" tabindex="-1"><a class="header-anchor" href="#_2-2-2-ord" aria-hidden="true">#</a> 2.2.2 Ord</h4><blockquote><p>All the types we covered so far except for functions are part of Ord. Ord covers all the standard comparing functions such as &gt;, &lt;, &gt;= and &lt;=. The compare function takes two Ord members of the same type and returns an ordering. Ordering is a type that can be GT, LT or EQ, meaning <em>greater than</em>, <em>lesser than</em> and <em>equal</em>, respectively.</p></blockquote><p>OrdåŒ…å«äº†æ‰€æœ‰æ ‡å‡†çš„æ¯”è¾ƒå‡½æ•°ï¼Œ ä¾‹å¦‚ &gt; &lt; &gt;= &lt;=, æ¯”è¾ƒå‡½æ•°æ¥å—ä¸¤ä¸ªç±»å‹ç›¸åŒçš„Ordæˆå‘˜ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ’åºï¼Œæ’åºæ˜¯GTï¼Œ LTï¼Œ EQï¼Œåˆ†åˆ«è¡¨ç¤ºå¤§äºï¼Œå°äºï¼Œç­‰äº</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token string">&quot;Abrakadabra&quot;</span> <span class="token operator">&lt;</span> <span class="token string">&quot;Zebra&quot;</span>
<span class="token constant">True</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token string">&quot;Abrakadabra&quot;</span> <span class="token operator">`compare`</span> <span class="token string">&quot;Zebra&quot;</span>
<span class="token constant">LT</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token number">5</span> <span class="token operator">&gt;=</span> <span class="token number">2</span>
<span class="token constant">True</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token number">5</span> <span class="token operator">`compare`</span> <span class="token number">3</span>
<span class="token constant">GT</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_2-2-3-show" tabindex="-1"><a class="header-anchor" href="#_2-2-3-show" aria-hidden="true">#</a> 2.2.3 Show</h4><blockquote><p>Members of Show can be presented as strings. All types covered so far except for functions are a part of Show. The most used function that deals with the Show typeclass is show. It takes a value whose type is a member of Show and presents it to us as a string.</p></blockquote><p>Showçš„æˆå‘˜å¯ä»¥è¢«æ‰“å°ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œé™¤äº†å‡½æ•°ä¹‹å¤–çš„æ‰€æœ‰ç±»å‹éƒ½æ˜¯ Show çš„ä¸€éƒ¨åˆ†ã€‚</p><p>showå‡½æ•°æ¥å—ä¸€ä¸ªç±»å‹ä¸ºShowæˆå‘˜çš„å€¼ï¼Œå¹¶å°†å…¶ä½œä¸ºå­—ç¬¦ä¸²å‘ˆç°</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">t</span> <span class="token builtin">read</span>
<span class="token builtin">read</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Read</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">String</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_2-2-4-read" tabindex="-1"><a class="header-anchor" href="#_2-2-4-read" aria-hidden="true">#</a> 2.2.4 Read</h4><blockquote><p>Read is sort of the opposite typeclass of Show. The read function takes a string and returns a type which is a member of Read.</p></blockquote><p>readå‡½æ•°æ¥å—ä¸€ä¸ªStringï¼Œå¹¶è¿”å›ä¸€ä¸ªReadçš„æˆå‘˜çš„ç±»å‹</p><p><strong>é—®é¢˜</strong></p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">read</span> <span class="token string">&quot;4&quot;</span>
    <span class="token operator">&lt;</span><span class="token hvariable">interactive</span><span class="token operator">&gt;:</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">0</span><span class="token operator">:</span>
        <span class="token constant">Ambiguous</span> <span class="token keyword">type</span> <span class="token hvariable">variable</span> `<span class="token hvariable">a&#39;</span> <span class="token keyword">in</span> <span class="token hvariable">the</span> <span class="token hvariable">constraint</span><span class="token operator">:</span>
        	`<span class="token constant">Read</span> <span class="token hvariable">a&#39;</span> <span class="token hvariable">arising</span> <span class="token hvariable">from</span> <span class="token hvariable">a</span> <span class="token hvariable">use</span> <span class="token keyword">of</span> `<span class="token builtin">read</span>&#39; <span class="token hvariable">at</span> <span class="token operator">&lt;</span><span class="token hvariable">interactive</span><span class="token operator">&gt;:</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">7</span>
        <span class="token constant">Probable</span> <span class="token hvariable">fix</span><span class="token operator">:</span> <span class="token hvariable">add</span> <span class="token hvariable">a</span> <span class="token keyword">type</span> <span class="token hvariable">signature</span> <span class="token hvariable">that</span> <span class="token hvariable">fixes</span> <span class="token hvariable">these</span> <span class="token keyword">type</span> <span class="token hvariable">variable</span><span class="token punctuation">(</span><span class="token hvariable">s</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>æŒ‡å®šreturnç±»å‹</strong></p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">read</span> <span class="token string">&quot;5&quot;</span> <span class="token operator">::</span> <span class="token constant">Int</span>
<span class="token number">5</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">read</span> <span class="token string">&quot;5&quot;</span> <span class="token operator">::</span> <span class="token constant">Float</span>
<span class="token number">5.0</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token builtin">read</span> <span class="token string">&quot;5&quot;</span> <span class="token operator">::</span> <span class="token constant">Float</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span>
<span class="token number">20.0</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">read</span> <span class="token string">&quot;[1,2,3,4]&quot;</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token constant">Int</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">read</span> <span class="token string">&quot;(3, &#39;a&#39;)&quot;</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Int</span><span class="token punctuation">,</span> <span class="token constant">Char</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token char string">&#39;a&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_2-2-5-enum" tabindex="-1"><a class="header-anchor" href="#_2-2-5-enum" aria-hidden="true">#</a> 2.2.5 Enum</h4><blockquote><p>Enum members are sequentially ordered types â€” they can be enumerated. The main advantage of the Enum typeclass is that we can use its types in list ranges. They also have defined successors and predecesors, which you can get with the succ and pred functions. Types in this class: (), Bool, Char, Ordering, Int, Integer, Float and Double.</p></blockquote><p>æšä¸¾ç±»å‹æ˜¯æŒ‰ç…§é¡ºåºæ’åºçš„ç±»å‹ï¼Œä»–ä»¬å¯ä»¥è¢«æšä¸¾ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ—è¡¨ä¸­ä½¿ç”¨å®ƒçš„æ‰€æœ‰ç±»å‹ã€‚</p><p>ä»–ä»¬è¿˜è¢«å®šä¹‰äº†å‰é©±å’Œåç»§ï¼Œå› æ­¤å¯ä»¥å¯¹å®ƒçš„ç±»å‹ä½¿ç”¨ <code>succ</code> å’Œ <code>pred</code> å‡½æ•°</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token char string">&#39;a&#39;</span><span class="token operator">..</span><span class="token char string">&#39;e&#39;</span><span class="token punctuation">]</span>
<span class="token string">&quot;abcde&quot;</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token constant">LT</span> <span class="token operator">..</span> <span class="token constant">GT</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token constant">LT</span><span class="token punctuation">,</span><span class="token constant">EQ</span><span class="token punctuation">,</span><span class="token constant">GT</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token number">3</span> <span class="token operator">..</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">succ</span> <span class="token char string">&#39;B&#39;</span>
<span class="token char string">&#39;C&#39;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_2-2-6-bounded" tabindex="-1"><a class="header-anchor" href="#_2-2-6-bounded" aria-hidden="true">#</a> 2.2.6 Bounded</h4><blockquote><p>Bounded members have an upper and a lower bound.</p></blockquote><p>Boundedç±»å‹æœ‰ä¸Šç•Œå’Œä¸‹ç•Œ</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">minBound</span> <span class="token operator">::</span> <span class="token constant">Int</span>
<span class="token operator">-</span><span class="token number">2147483648</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">maxBound</span> <span class="token operator">::</span> <span class="token constant">Char</span>
<span class="token char string">&#39;\1114111&#39;</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">maxBound</span> <span class="token operator">::</span> <span class="token constant">Bool</span>
<span class="token constant">True</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">minBound</span> <span class="token operator">::</span> <span class="token constant">Bool</span>
<span class="token constant">False</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>minBound and maxBound are interesting because they have a type of (Bounded a) =&gt; a. In a sense they are polymorphic constants.</p></blockquote><p>ä»–ä»¬æ˜¯å¤šæ€æ€§å¸¸é‡ï¼Œè§ä¸‹æ–‡</p><p>å¦‚æœå…ƒç»„çš„å…ƒç´ ä¹Ÿåœ¨å…ƒç»„ä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç»„ä¹Ÿæ˜¯Boundedçš„æˆå‘˜ã€‚</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">maxBound</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Bool</span><span class="token punctuation">,</span> <span class="token constant">Int</span><span class="token punctuation">,</span> <span class="token constant">Char</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token constant">True</span><span class="token punctuation">,</span><span class="token number">2147483647</span><span class="token punctuation">,</span><span class="token char string">&#39;\1114111&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_2-2-7-num" tabindex="-1"><a class="header-anchor" href="#_2-2-7-num" aria-hidden="true">#</a> 2.2.7 Num</h4><p>Numä¹Ÿæ˜¯ä¸€ä¸ªå¤šæ€æ€§å¸¸é‡ï¼Œä»–èƒ½è¡¨ç°çš„å‘ä»»ä½•Numç±»çš„æˆå‘˜ï¼ˆåŒ…æ‹¬ Int, Integer, Float, Doubleï¼‰</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">t</span> <span class="token number">20</span>
<span class="token number">20</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Num</span> <span class="token hvariable">t</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">t</span>

<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token number">20</span> <span class="token operator">::</span> <span class="token constant">Int</span>
<span class="token number">20</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token number">20</span> <span class="token operator">::</span> <span class="token constant">Integer</span>
<span class="token number">20</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token number">20</span> <span class="token operator">::</span> <span class="token constant">Float</span>
<span class="token number">20.0</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token number">20</span> <span class="token operator">::</span> <span class="token constant">Double</span>
<span class="token number">20.0</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><code>(5 :: Int) * (6 :: Integer)</code> will errorï¼Œ while <code>5 * (6 :: Integer)</code> will work just fine</p><h4 id="_2-2-9-integral-floating" tabindex="-1"><a class="header-anchor" href="#_2-2-9-integral-floating" aria-hidden="true">#</a> 2.2.9 Integral &amp; Floating</h4><ul><li><code>Integral </code>contains <code> Int</code> and <code>Integer</code></li><li><code>Floating</code> contains <code>Float</code> and <code>Double</code>.</li></ul><p><code>fromIntegral</code>å¯ä»¥å¸®æˆ‘ä»¬å®ç°ç±»å‹è½¬æ¢</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- It has a type declaration of</span>
<span class="token builtin">fromIntegral</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Num</span> <span class="token hvariable">b</span><span class="token punctuation">,</span> <span class="token constant">Integral</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span>
<span class="token comment">-- so, you can use it as</span>
<span class="token builtin">fromIntegral</span> <span class="token punctuation">(</span><span class="token builtin">length</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3.2</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_3-å‡½æ•°è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#_3-å‡½æ•°è¯­æ³•" aria-hidden="true">#</a> 3. å‡½æ•°è¯­æ³•</h2><p><strong>Syntax in Functions</strong></p><h3 id="_3-1-matchè¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#_3-1-matchè¡¨è¾¾å¼" aria-hidden="true">#</a> 3.1 Matchè¡¨è¾¾å¼</h3><p><strong>Pattern marching</strong></p><ol><li><p>åœ¨ ghci ä¸­å£°æ˜ç±»å‹éœ€è¦ä½¿ç”¨å¤šè¡Œå—ä¸­</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token operator">:</span><span class="token punctuation">{</span>
<span class="token hvariable">lucky</span> <span class="token operator">::</span> <span class="token constant">Int</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
<span class="token hvariable">lucky</span> <span class="token hvariable">a</span> <span class="token operator">=</span> <span class="token builtin">show</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">)</span>
<span class="token operator">:</span><span class="token punctuation">}</span>

<span class="token operator">:</span><span class="token keyword">type</span> <span class="token hvariable">lucky</span>
<span class="token hvariable">lucky</span> <span class="token operator">::</span> <span class="token constant">Int</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li><p>åŒ¹é…åˆ—è¡¨é•¿åº¦</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">tell</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Show</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
<span class="token hvariable">tell</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;The list is empty&quot;</span>
<span class="token hvariable">tell</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">&quot;The list has one element: &quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">x</span>
<span class="token hvariable">tell</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">y</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">&quot;The list has two elements: &quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">x</span> <span class="token operator">++</span> <span class="token string">&quot; and &quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">y</span>
<span class="token hvariable">tell</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">y</span><span class="token operator">:</span><span class="token hvariable">_</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">&quot;This list is long. The first two elements are: &quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">x</span> <span class="token operator">++</span> <span class="token string">&quot; and &quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">y</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>ä¸€ä¸ª length å‡½æ•°çš„å®ç°</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token builtin">length</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Num</span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span>
<span class="token builtin">length</span>&#39; <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token builtin">length</span>&#39; <span class="token punctuation">(</span><span class="token hvariable">_</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token builtin">length</span>&#39; <span class="token hvariable">xs</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol><h3 id="_3-2-guard" tabindex="-1"><a class="header-anchor" href="#_3-2-guard" aria-hidden="true">#</a> 3.2 Guard</h3><ol><li><p>æ ‡å‡†</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">bmiTell</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">RealFloat</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
<span class="token hvariable">bmiTell</span> <span class="token hvariable">bmi</span>
   <span class="token operator">|</span> <span class="token hvariable">bmi</span> <span class="token operator">&lt;=</span> <span class="token number">18.5</span> <span class="token operator">=</span> <span class="token string">&quot;You&#39;re underweight, you emo, you!&quot;</span>
   <span class="token operator">|</span> <span class="token hvariable">bmi</span> <span class="token operator">&lt;=</span> <span class="token number">25.0</span> <span class="token operator">=</span> <span class="token string">&quot;You&#39;re supposedly normal. Pffft, I bet you&#39;re ugly!&quot;</span>
   <span class="token operator">|</span> <span class="token hvariable">bmi</span> <span class="token operator">&lt;=</span> <span class="token number">30.0</span> <span class="token operator">=</span> <span class="token string">&quot;You&#39;re fat! Lose some weight, fatty!&quot;</span>
   <span class="token operator">|</span> <span class="token builtin">otherwise</span>   <span class="token operator">=</span> <span class="token string">&quot;You&#39;re a whale, congratulations!&quot;</span>

<span class="token hvariable">myCompare</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Ord</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Ordering</span>
<span class="token hvariable">a</span> <span class="token operator">`myCompare`</span> <span class="token hvariable">b</span>
    <span class="token operator">|</span> <span class="token hvariable">a</span> <span class="token operator">&gt;</span> <span class="token hvariable">b</span>     <span class="token operator">=</span> <span class="token constant">GT</span>
    <span class="token operator">|</span> <span class="token hvariable">a</span> <span class="token operator">==</span> <span class="token hvariable">b</span>    <span class="token operator">=</span> <span class="token constant">EQ</span>
    <span class="token operator">|</span> <span class="token builtin">otherwise</span> <span class="token operator">=</span> <span class="token constant">LT</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li><li><p>inline ç‰ˆï¼ˆå¯è¯»æ€§å·®ï¼‰</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token builtin">max</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Ord</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
<span class="token builtin">max</span>&#39; <span class="token hvariable">a</span> <span class="token hvariable">b</span> <span class="token operator">|</span> <span class="token hvariable">a</span> <span class="token operator">&gt;</span> <span class="token hvariable">b</span> <span class="token operator">=</span> <span class="token hvariable">a</span> <span class="token operator">|</span> <span class="token builtin">otherwise</span> <span class="token operator">=</span> <span class="token hvariable">b</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol><h3 id="_3-3-where" tabindex="-1"><a class="header-anchor" href="#_3-3-where" aria-hidden="true">#</a> 3.3 where</h3><ol><li><p>ä½œç”¨åœ¨guardä¸Š</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code>    <span class="token hvariable">bmiTell</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">RealFloat</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
    <span class="token hvariable">bmiTell</span> <span class="token hvariable">weight</span> <span class="token hvariable">height</span>
        <span class="token operator">|</span> <span class="token hvariable">bmi</span> <span class="token operator">&lt;=</span> <span class="token hvariable">skinny</span> <span class="token operator">=</span> <span class="token string">&quot;You&#39;re underweight, you emo, you!&quot;</span>
        <span class="token operator">|</span> <span class="token hvariable">bmi</span> <span class="token operator">&lt;=</span> <span class="token hvariable">normal</span> <span class="token operator">=</span> <span class="token string">&quot;You&#39;re supposedly normal. Pffft, I bet you&#39;re ugly!&quot;</span>
        <span class="token operator">|</span> <span class="token hvariable">bmi</span> <span class="token operator">&lt;=</span> <span class="token hvariable">fat</span>    <span class="token operator">=</span> <span class="token string">&quot;You&#39;re fat! Lose some weight, fatty!&quot;</span>
        <span class="token operator">|</span> <span class="token builtin">otherwise</span>     <span class="token operator">=</span> <span class="token string">&quot;You&#39;re a whale, congratulations!&quot;</span>
        <span class="token keyword">where</span> <span class="token hvariable">bmi</span> <span class="token operator">=</span> <span class="token hvariable">weight</span> <span class="token operator">/</span> <span class="token hvariable">height</span> <span class="token operator">^</span> <span class="token number">2</span>
              <span class="token hvariable">skinny</span> <span class="token operator">=</span> <span class="token number">18.5</span>
              <span class="token hvariable">normal</span> <span class="token operator">=</span> <span class="token number">25.0</span>
              <span class="token hvariable">fat</span> <span class="token operator">=</span> <span class="token number">30.0</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p><em>where</em> bindings aren&#39;t shared across function bodies of different patterns. If you want several patterns of one function to access some shared name, you have to define it globally.</p></blockquote><p>where çš„ç»‘å®šä¸èƒ½åœ¨å‡½æ•°ä½“é‡Œå…±äº«ï¼Œé™¤éä»¥å…¨å±€æ–¹å¼å®šä¹‰</p></li><li><p>ä½œç”¨åœ¨ pattern match ä¸Š</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code>    <span class="token hvariable">initials</span> <span class="token operator">::</span> <span class="token constant">String</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
    <span class="token hvariable">initials</span> <span class="token hvariable">firstname</span> <span class="token hvariable">lastname</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token hvariable">f</span><span class="token punctuation">]</span> <span class="token operator">++</span> <span class="token string">&quot;. &quot;</span> <span class="token operator">++</span> <span class="token punctuation">[</span><span class="token hvariable">l</span><span class="token punctuation">]</span> <span class="token operator">++</span> <span class="token string">&quot;.&quot;</span>
        <span class="token keyword">where</span> <span class="token punctuation">(</span><span class="token hvariable">f</span><span class="token operator">:</span><span class="token hvariable">_</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">firstname</span>
              <span class="token punctuation">(</span><span class="token hvariable">l</span><span class="token operator">:</span><span class="token hvariable">_</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">lastname</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>ä½¿ç”¨ where å®šä¹‰ function</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code>    <span class="token hvariable">calcBmis</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">RealFloat</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span> <span class="token hvariable">a</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span>
    <span class="token hvariable">calcBmis</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token hvariable">bmi</span> <span class="token hvariable">w</span> <span class="token hvariable">h</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token hvariable">w</span><span class="token punctuation">,</span> <span class="token hvariable">h</span><span class="token punctuation">)</span> <span class="token operator">&lt;-</span> <span class="token hvariable">xs</span><span class="token punctuation">]</span>
        <span class="token keyword">where</span> <span class="token hvariable">bmi</span> <span class="token hvariable">weight</span> <span class="token hvariable">height</span> <span class="token operator">=</span> <span class="token hvariable">weight</span> <span class="token operator">/</span> <span class="token hvariable">height</span> <span class="token operator">^</span> <span class="token number">2</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol><h3 id="_3-4-let-it-be" tabindex="-1"><a class="header-anchor" href="#_3-4-let-it-be" aria-hidden="true">#</a> 3.4 Let it be</h3><p>** <code>let &lt;bindings&gt; in &lt;expression&gt; </code>**</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code>    <span class="token hvariable">cylinder</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">RealFloat</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
    <span class="token hvariable">cylinder</span> <span class="token hvariable">r</span> <span class="token hvariable">h</span> <span class="token operator">=</span>
        <span class="token keyword">let</span> <span class="token hvariable">sideArea</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token builtin">pi</span> <span class="token operator">*</span> <span class="token hvariable">r</span> <span class="token operator">*</span> <span class="token hvariable">h</span>
            <span class="token hvariable">topArea</span> <span class="token operator">=</span> <span class="token builtin">pi</span> <span class="token operator">*</span> <span class="token hvariable">r</span> <span class="token operator">^</span><span class="token number">2</span>
        <span class="token keyword">in</span>  <span class="token hvariable">sideArea</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token hvariable">topArea</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>The difference is that <em>let</em> bindings are expressions themselves. <em>where</em> bindings are just syntactic constructs.</p></blockquote><p>Let æŠŠç»‘å®šæ”¾åœ¨å‰é¢ï¼Œwhere æŠŠç»‘å®šæ”¾åœ¨åé¢ï¼Œ ä½†æ˜¯ Let æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œ Whereåªæ˜¯ä¸ªè¯­æ³•ç»“æ„</p><h3 id="_3-5-case-expression" tabindex="-1"><a class="header-anchor" href="#_3-5-case-expression" aria-hidden="true">#</a> 3.5 Case Expression</h3><ul><li><p>ç¤ºä¾‹ 1</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">describeList</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
<span class="token hvariable">describeList</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token string">&quot;The list is &quot;</span> <span class="token operator">++</span> <span class="token keyword">case</span> <span class="token hvariable">xs</span> <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;empty.&quot;</span>
                                               <span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;a singleton list.&quot;</span>
                                               <span class="token hvariable">xs</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;a longer list.&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>ç¤ºä¾‹ 2</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">describeList</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
<span class="token hvariable">describeList</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token string">&quot;The list is &quot;</span> <span class="token operator">++</span> <span class="token hvariable">what</span> <span class="token hvariable">xs</span>
    <span class="token keyword">where</span> <span class="token hvariable">what</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;empty.&quot;</span>
          <span class="token hvariable">what</span> <span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;a singleton list.&quot;</span>
          <span class="token hvariable">what</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token string">&quot;a longer list.&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul><h2 id="_4-é€’å½’" tabindex="-1"><a class="header-anchor" href="#_4-é€’å½’" aria-hidden="true">#</a> 4. é€’å½’</h2><p><strong>Recursion</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>### 4.1 maxium
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- ç¬¬ä¸€ç§</span>
<span class="token builtin">maximum</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Ord</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
<span class="token builtin">maximum</span>&#39; <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">error</span> <span class="token string">&quot;maximum of empty list&quot;</span>
<span class="token builtin">maximum</span>&#39; <span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token hvariable">x</span>
<span class="token builtin">maximum</span>&#39; <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&gt;</span> <span class="token hvariable">maxTail</span> <span class="token operator">=</span> <span class="token hvariable">x</span>
    <span class="token operator">|</span> <span class="token builtin">otherwise</span> <span class="token operator">=</span> <span class="token hvariable">maxTail</span>
    <span class="token keyword">where</span> <span class="token hvariable">maxTail</span> <span class="token operator">=</span> <span class="token builtin">maximum</span>&#39; <span class="token hvariable">xs</span>
<span class="token comment">-- ç¬¬äºŒç§</span>
<span class="token builtin">maximum</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Ord</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
<span class="token builtin">maximum</span>&#39; <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">error</span> <span class="token string">&quot;maximum of empty list&quot;</span>
<span class="token builtin">maximum</span>&#39; <span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token hvariable">x</span>
<span class="token builtin">maximum</span>&#39; <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token builtin">max</span> <span class="token hvariable">x</span> <span class="token punctuation">(</span><span class="token builtin">maximum</span>&#39; <span class="token hvariable">xs</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_4-2-replicate" tabindex="-1"><a class="header-anchor" href="#_4-2-replicate" aria-hidden="true">#</a> 4.2 replicate</h3><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token builtin">replicate</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Num</span> <span class="token hvariable">i</span><span class="token punctuation">,</span> <span class="token constant">Ord</span> <span class="token hvariable">i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">i</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span>
<span class="token builtin">replicate</span>&#39; <span class="token hvariable">n</span> <span class="token hvariable">x</span>
    <span class="token operator">|</span> <span class="token hvariable">n</span> <span class="token operator">&lt;=</span> <span class="token number">0</span>    <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token operator">|</span> <span class="token builtin">otherwise</span> <span class="token operator">=</span> <span class="token hvariable">x</span><span class="token operator">:</span><span class="token builtin">replicate</span>&#39; <span class="token punctuation">(</span><span class="token hvariable">n</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token hvariable">x</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_4-3-take" tabindex="-1"><a class="header-anchor" href="#_4-3-take" aria-hidden="true">#</a> 4.3 take</h3><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token builtin">take</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Num</span> <span class="token hvariable">i</span><span class="token punctuation">,</span> <span class="token constant">Ord</span> <span class="token hvariable">i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">i</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span>
<span class="token builtin">take</span>&#39; <span class="token hvariable">n</span> <span class="token hvariable">_</span>
    <span class="token operator">|</span> <span class="token hvariable">n</span> <span class="token operator">&lt;=</span> <span class="token number">0</span>   <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token builtin">take</span>&#39; <span class="token hvariable">_</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>     <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token builtin">take</span>&#39; <span class="token hvariable">n</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">x</span> <span class="token operator">:</span> <span class="token builtin">take</span>&#39; <span class="token punctuation">(</span><span class="token hvariable">n</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token hvariable">xs</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_4-4-zip" tabindex="-1"><a class="header-anchor" href="#_4-4-zip" aria-hidden="true">#</a> 4.4 zip</h3><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token builtin">elem</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Eq</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Bool</span>
<span class="token builtin">elem</span>&#39; <span class="token hvariable">a</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">False</span>
<span class="token builtin">elem</span>&#39; <span class="token hvariable">a</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token hvariable">a</span> <span class="token operator">==</span> <span class="token hvariable">x</span>    <span class="token operator">=</span> <span class="token constant">True</span>
    <span class="token operator">|</span> <span class="token builtin">otherwise</span> <span class="token operator">=</span> <span class="token hvariable">a</span> <span class="token operator">`elem&#39;`</span> <span class="token hvariable">xs</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_4-5-quick-sort" tabindex="-1"><a class="header-anchor" href="#_4-5-quick-sort" aria-hidden="true">#</a> 4.5 quick sort</h3><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">quicksort</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Ord</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span>
<span class="token hvariable">quicksort</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token hvariable">quicksort</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token operator">=</span>
    <span class="token keyword">let</span> <span class="token hvariable">smallerSorted</span> <span class="token operator">=</span> <span class="token hvariable">quicksort</span> <span class="token punctuation">[</span><span class="token hvariable">a</span> <span class="token operator">|</span> <span class="token hvariable">a</span> <span class="token operator">&lt;-</span> <span class="token hvariable">xs</span><span class="token punctuation">,</span> <span class="token hvariable">a</span> <span class="token operator">&lt;=</span> <span class="token hvariable">x</span><span class="token punctuation">]</span>
        <span class="token hvariable">biggerSorted</span> <span class="token operator">=</span> <span class="token hvariable">quicksort</span> <span class="token punctuation">[</span><span class="token hvariable">a</span> <span class="token operator">|</span> <span class="token hvariable">a</span> <span class="token operator">&lt;-</span> <span class="token hvariable">xs</span><span class="token punctuation">,</span> <span class="token hvariable">a</span> <span class="token operator">&gt;</span> <span class="token hvariable">x</span><span class="token punctuation">]</span>
    <span class="token keyword">in</span>  <span class="token hvariable">smallerSorted</span> <span class="token operator">++</span> <span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span> <span class="token operator">++</span> <span class="token hvariable">biggerSorted</span>
<span class="token hvariable">quicksort</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">quicksort</span> <span class="token punctuation">[</span><span class="token hvariable">a</span> <span class="token operator">|</span> <span class="token hvariable">a</span> <span class="token operator">&lt;-</span> <span class="token hvariable">xs</span><span class="token punctuation">,</span> <span class="token hvariable">a</span> <span class="token operator">&lt;=</span> <span class="token hvariable">x</span><span class="token punctuation">]</span> <span class="token operator">++</span> <span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span> <span class="token operator">++</span> <span class="token hvariable">quicksort</span> <span class="token punctuation">[</span><span class="token hvariable">a</span> <span class="token operator">|</span> <span class="token hvariable">a</span> <span class="token operator">&lt;-</span> <span class="token hvariable">xs</span><span class="token punctuation">,</span> <span class="token hvariable">a</span> <span class="token operator">&gt;</span> <span class="token hvariable">x</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_5-é«˜é˜¶å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#_5-é«˜é˜¶å‡½æ•°" aria-hidden="true">#</a> 5. é«˜é˜¶å‡½æ•°</h2><p><em>Higher order functions</em></p><p>èƒ½å¤Ÿä»¥å‡½æ•°ä½œä¸ºå‚æ•°, æˆ–è€…è¿”å›ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°éƒ½æ˜¯é«˜é˜¶å‡½æ•°, å‘Šè¯«å‡½æ•°å°±æ˜¯Haskellçš„ä½“éªŒ</p><h3 id="_5-1-curried-functions" tabindex="-1"><a class="header-anchor" href="#_5-1-curried-functions" aria-hidden="true">#</a> 5.1 Curried functions</h3><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">max</span> <span class="token number">4</span> <span class="token number">5</span>
<span class="token number">5</span>
<span class="token comment">-- maxæœ¬èº«å¯ä»¥è¿™æ ·å†™</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token builtin">max</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token number">5</span>
<span class="token number">5</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è®©æˆ‘ä»¬çœ‹çœ‹maxçš„ç±»å‹</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token builtin">max</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Ord</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span><span class="token punctuation">.</span>
<span class="token comment">-- ä¹Ÿèƒ½å†™ä½œ</span>
<span class="token builtin">max</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Ord</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ‰€ä»¥maxè¿™ä¸ªå‡½æ•°èƒ½å¤Ÿè¿”å›ä¸€ä¸ªå‡½æ•°</p><p>åŒæ—¶</p><h3 id="_5-2-ä¸€äº›é«˜é˜¶å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#_5-2-ä¸€äº›é«˜é˜¶å‡½æ•°" aria-hidden="true">#</a> 5.2 ä¸€äº›é«˜é˜¶å‡½æ•°</h3><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">applyTwice</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
<span class="token hvariable">applyTwice</span> <span class="token hvariable">f</span> <span class="token hvariable">x</span> <span class="token operator">=</span> <span class="token hvariable">f</span> <span class="token punctuation">(</span><span class="token hvariable">f</span> <span class="token hvariable">x</span><span class="token punctuation">)</span>

<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">applyTwice</span> <span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">10</span>
<span class="token number">16</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token builtin">zipWith</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span> <span class="token operator">-&gt;</span> <span class="token hvariable">c</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">b</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">c</span><span class="token punctuation">]</span>
<span class="token builtin">zipWith</span>&#39; <span class="token hvariable">_</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token hvariable">_</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token builtin">zipWith</span>&#39; <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token builtin">zipWith</span>&#39; <span class="token hvariable">f</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">y</span><span class="token operator">:</span><span class="token hvariable">ys</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">f</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span> <span class="token operator">:</span> <span class="token builtin">zipWith</span>&#39; <span class="token hvariable">f</span> <span class="token hvariable">xs</span> <span class="token hvariable">ys</span>

<span class="token builtin">zipWith</span>&#39; <span class="token punctuation">(</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bbb&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token string">&quot;ccc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ddd&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token string">&quot;aaaccc&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bbbddd&quot;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>flip</strong></p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token builtin">flip</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span> <span class="token operator">-&gt;</span> <span class="token hvariable">c</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">c</span>
<span class="token builtin">flip</span>&#39; <span class="token hvariable">f</span> <span class="token hvariable">y</span> <span class="token hvariable">x</span> <span class="token operator">=</span> <span class="token hvariable">f</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_5-3-map" tabindex="-1"><a class="header-anchor" href="#_5-3-map" aria-hidden="true">#</a> 5.3 Map</h3><blockquote><p><code>map (+3) [1,5,3,1,6] </code>is the same as writing <code>[x+3 | x &lt;- [1,5,3,1,6]].</code></p></blockquote><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code>    <span class="token builtin">map</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">b</span><span class="token punctuation">]</span>
    <span class="token builtin">map</span> <span class="token hvariable">_</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token builtin">map</span> <span class="token hvariable">f</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">f</span> <span class="token hvariable">x</span> <span class="token operator">:</span> <span class="token builtin">map</span> <span class="token hvariable">f</span> <span class="token hvariable">xs</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5-4-filter" tabindex="-1"><a class="header-anchor" href="#_5-4-filter" aria-hidden="true">#</a> 5.4 Filter</h3><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code>    <span class="token builtin">filter</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Bool</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span>
    <span class="token builtin">filter</span> <span class="token hvariable">_</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token builtin">filter</span> <span class="token hvariable">p</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span>
        <span class="token operator">|</span> <span class="token hvariable">p</span> <span class="token hvariable">x</span>       <span class="token operator">=</span> <span class="token hvariable">x</span> <span class="token operator">:</span> <span class="token builtin">filter</span> <span class="token hvariable">p</span> <span class="token hvariable">xs</span>
        <span class="token operator">|</span> <span class="token builtin">otherwise</span> <span class="token operator">=</span> <span class="token builtin">filter</span> <span class="token hvariable">p</span> <span class="token hvariable">xs</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_5-5-takewhile" tabindex="-1"><a class="header-anchor" href="#_5-5-takewhile" aria-hidden="true">#</a> 5.5 takeWhile</h3><p>takeç›´åˆ°é™åˆ¶æ¡ä»¶åˆ°</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token builtin">sum</span> <span class="token punctuation">(</span><span class="token builtin">takeWhile</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token number">10000</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">filter</span> <span class="token builtin">odd</span> <span class="token punctuation">(</span><span class="token builtin">map</span> <span class="token punctuation">(</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token builtin">sum</span> <span class="token punctuation">(</span><span class="token builtin">takeWhile</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token number">10000</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token hvariable">n</span><span class="token operator">^</span><span class="token number">2</span> <span class="token operator">|</span> <span class="token hvariable">n</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">odd</span> <span class="token punctuation">(</span><span class="token hvariable">n</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5-6-chain" tabindex="-1"><a class="header-anchor" href="#_5-6-chain" aria-hidden="true">#</a> 5.6 Chain</h3><p>ç”Ÿæˆ Collatz sequences</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">chain</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Integral</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span>
<span class="token hvariable">chain</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token hvariable">chain</span> <span class="token hvariable">n</span>
    <span class="token operator">|</span> <span class="token builtin">even</span> <span class="token hvariable">n</span> <span class="token operator">=</span>  <span class="token hvariable">n</span><span class="token operator">:</span><span class="token hvariable">chain</span> <span class="token punctuation">(</span><span class="token hvariable">n</span> <span class="token operator">`div`</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token builtin">odd</span> <span class="token hvariable">n</span>  <span class="token operator">=</span>  <span class="token hvariable">n</span><span class="token operator">:</span><span class="token hvariable">chain</span> <span class="token punctuation">(</span><span class="token hvariable">n</span><span class="token operator">*</span><span class="token number">3</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">-- å°ç»ƒä¹ </span>
<span class="token hvariable">numLongChains</span> <span class="token operator">::</span> <span class="token constant">Int</span>
<span class="token hvariable">numLongChains</span> <span class="token operator">=</span> <span class="token builtin">length</span> <span class="token punctuation">(</span><span class="token builtin">filter</span> <span class="token hvariable">isLong</span> <span class="token punctuation">(</span><span class="token builtin">map</span> <span class="token hvariable">chain</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">where</span> <span class="token hvariable">isLong</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token builtin">length</span> <span class="token hvariable">xs</span> <span class="token operator">&gt;</span> <span class="token number">15</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_5-7-map-0" tabindex="-1"><a class="header-anchor" href="#_5-7-map-0" aria-hidden="true">#</a> 5.7 map (*) [0..]</h3><blockquote><p>If we map <code>*</code> over the list <code> [0..]</code>, we get back a list of functions that only take one parameter, so <code>(Num a) =&gt; [a -&gt; a]</code>. <code>map (*) [0..]</code> produces a list like the one we&#39;d get by writing <code>[(0*),(1*),(2*),(3*),(4*),(5*)...</code></p></blockquote><p>å®ä¾‹ä»£ç </p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token keyword">let</span> <span class="token hvariable">listOfFuns</span> <span class="token operator">=</span> <span class="token builtin">map</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">..</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token hvariable">listOfFuns</span> <span class="token operator">!!</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token number">5</span>
<span class="token number">20</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5-8-lambdas" tabindex="-1"><a class="header-anchor" href="#_5-8-lambdas" aria-hidden="true">#</a> 5.8 Lambdas</h3><p>è¯­æ³•: ä¸€èˆ¬ä»¥å°æ‹¬å·é˜”èµ·æ¥, ä»¥ <code>\</code> å¼€å¤´</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">numLongChains</span> <span class="token operator">::</span> <span class="token constant">Int</span>
<span class="token hvariable">numLongChains</span> <span class="token operator">=</span> <span class="token builtin">length</span> <span class="token punctuation">(</span><span class="token builtin">filter</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">xs</span> <span class="token operator">-&gt;</span> <span class="token builtin">length</span> <span class="token hvariable">xs</span> <span class="token operator">&gt;</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">map</span> <span class="token hvariable">chain</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ç”¨å‘</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token builtin">flip</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span> <span class="token operator">-&gt;</span> <span class="token hvariable">c</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">c</span>
<span class="token builtin">flip</span>&#39; <span class="token hvariable">f</span> <span class="token operator">=</span> <span class="token operator">\</span><span class="token hvariable">x</span> <span class="token hvariable">y</span> <span class="token operator">-&gt;</span> <span class="token hvariable">f</span> <span class="token hvariable">y</span> <span class="token hvariable">x</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_5-9-fold" tabindex="-1"><a class="header-anchor" href="#_5-9-fold" aria-hidden="true">#</a> 5.9 Fold</h3><p>æˆ‘ä»¬ç”¨ <em>fold</em> å†æ¬¡å®ç° <code>sum</code> å‡½æ•°</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token builtin">sum</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Num</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
<span class="token builtin">sum</span>&#39; <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token builtin">foldl</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">acc</span> <span class="token hvariable">x</span> <span class="token operator">-&gt;</span> <span class="token hvariable">acc</span> <span class="token operator">+</span> <span class="token hvariable">x</span><span class="token punctuation">)</span> <span class="token number">0</span> <span class="token hvariable">xs</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">sum</span>&#39; <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token number">11</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol><li><strong>foldl</strong> æ¥å—2ä¸ªå‚æ•°, åˆ†åˆ«æ˜¯å‡½æ•°å’Œä¸€ä¸ªåˆå§‹å€¼(æˆ–è€…è¯´ç´¯åŠ å™¨), accå¼€å§‹ä¸º0, ä¹‹åä¾æ¬¡åŠ  3, 5, 2, 1</li></ol><p>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç´¯åŠ å™¨, ç¬¬äºŒä¸ªæ˜¯å½“å‰çš„å€¼</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- å†æ¬¡å®ç° elem</span>
<span class="token builtin">elem</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Eq</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Bool</span>
<span class="token builtin">elem</span>&#39; <span class="token hvariable">x</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token builtin">foldl</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">acc</span> <span class="token hvariable">el</span> <span class="token operator">-&gt;</span> <span class="token keyword">if</span> <span class="token hvariable">el</span> <span class="token operator">==</span> <span class="token hvariable">x</span> <span class="token keyword">then</span> <span class="token constant">True</span> <span class="token keyword">else</span> <span class="token hvariable">acc</span><span class="token punctuation">)</span> <span class="token constant">False</span> <span class="token hvariable">xs</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li><p><strong>foldr</strong> ä¸ foldl ç›¸ä¼¼, ä¸è¿‡æ˜¯ä»å³ä¾§å¼€å§‹éå†å…ƒç´ , å…¶ä¸­, foldrçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰å…ƒç´ , ç¬¬äºŒä¸ªå…ƒç´ æ˜¯ acc ç´¯åŠ å™¨</p></li><li><p><strong>ä¸¤ç§mapçš„å®ç°</strong></p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- foldr</span>
<span class="token builtin">map</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">b</span><span class="token punctuation">]</span>
<span class="token builtin">map</span>&#39; <span class="token hvariable">f</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token builtin">foldr</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">x</span> <span class="token hvariable">acc</span> <span class="token operator">-&gt;</span> <span class="token hvariable">f</span> <span class="token hvariable">x</span> <span class="token operator">:</span> <span class="token hvariable">acc</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token hvariable">xs</span>
<span class="token comment">-- foldl</span>
<span class="token builtin">map</span>&#39; <span class="token hvariable">f</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token builtin">foldl</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">acc</span> <span class="token hvariable">x</span> <span class="token operator">-&gt;</span> <span class="token hvariable">acc</span> <span class="token operator">++</span> <span class="token punctuation">[</span><span class="token hvariable">f</span> <span class="token hvariable">x</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token hvariable">xs</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>åœ¨ä¸Šé¢çš„æ¡ˆä¾‹ä¸­, <code>foldr</code> å®ç°çš„æ›´å¥½, å› ä¸º <code>:</code> çš„å¼€é”€æ¯” <code>++</code> å°çš„å¤š</p></li><li><p>è¦æ³¨æ„çš„æ˜¯ foldr å¯ä»¥ä½œç”¨åœ¨æ— çº¿åˆ—è¡¨ä¸Š, foldl ä¸èƒ½</p></li><li><p><strong>foldl1</strong> å’Œ <strong>foldr1</strong> ä½¿ç”¨ç¬¬ä¸€ä¸ªæˆ–è€…æœ€åä¸€ä¸ªä½œä¸ºåˆå€¼, ä¸éœ€è¦é‚£ä¸ªå‚æ•°äº†</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- è¿™é‡Œæ˜¯ä¸€å †ä¾‹å­</span>
<span class="token builtin">maximum</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Ord</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
<span class="token builtin">maximum</span>&#39; <span class="token operator">=</span> <span class="token builtin">foldr1</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">x</span> <span class="token hvariable">acc</span> <span class="token operator">-&gt;</span> <span class="token keyword">if</span> <span class="token hvariable">x</span> <span class="token operator">&gt;</span> <span class="token hvariable">acc</span> <span class="token keyword">then</span> <span class="token hvariable">x</span> <span class="token keyword">else</span> <span class="token hvariable">acc</span><span class="token punctuation">)</span>

<span class="token builtin">reverse</span>&#39; <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span>
<span class="token builtin">reverse</span>&#39; <span class="token operator">=</span> <span class="token builtin">foldl</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">acc</span> <span class="token hvariable">x</span> <span class="token operator">-&gt;</span> <span class="token hvariable">x</span> <span class="token operator">:</span> <span class="token hvariable">acc</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token builtin">product</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Num</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
<span class="token builtin">product</span>&#39; <span class="token operator">=</span> <span class="token builtin">foldr1</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>

<span class="token builtin">filter</span>&#39; <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Bool</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span>
<span class="token builtin">filter</span>&#39; <span class="token hvariable">p</span> <span class="token operator">=</span> <span class="token builtin">foldr</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">x</span> <span class="token hvariable">acc</span> <span class="token operator">-&gt;</span> <span class="token keyword">if</span> <span class="token hvariable">p</span> <span class="token hvariable">x</span> <span class="token keyword">then</span> <span class="token hvariable">x</span> <span class="token operator">:</span> <span class="token hvariable">acc</span> <span class="token keyword">else</span> <span class="token hvariable">acc</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token builtin">head</span>&#39; <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
<span class="token builtin">head</span>&#39; <span class="token operator">=</span> <span class="token builtin">foldr1</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">x</span> <span class="token hvariable">_</span> <span class="token operator">-&gt;</span> <span class="token hvariable">x</span><span class="token punctuation">)</span>

<span class="token builtin">last</span>&#39; <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
<span class="token builtin">last</span>&#39; <span class="token operator">=</span> <span class="token builtin">foldl1</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">_</span> <span class="token hvariable">x</span> <span class="token operator">-&gt;</span> <span class="token hvariable">x</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li><li><p><strong>scanl</strong> å’Œ <strong>scanr</strong> å’Œfoldç±»ä¼¼, ä¸è¿‡ä¼šæŠŠä¸­é—´çš„çŠ¶æ€ä¿ç•™, å¹¶è¿”å›ä¸€ä¸ªåˆ—è¡¨</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">scanl</span> <span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token number">0</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">scanr</span> <span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token number">0</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">scanl1</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">acc</span> <span class="token hvariable">x</span> <span class="token operator">-&gt;</span> <span class="token keyword">if</span> <span class="token hvariable">x</span> <span class="token operator">&gt;</span> <span class="token hvariable">acc</span> <span class="token keyword">then</span> <span class="token hvariable">x</span> <span class="token keyword">else</span> <span class="token hvariable">acc</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">scanl</span> <span class="token punctuation">(</span><span class="token builtin">flip</span> <span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol><h3 id="_5-10-è¿ç®—ç¬¦" tabindex="-1"><a class="header-anchor" href="#_5-10-è¿ç®—ç¬¦" aria-hidden="true">#</a> 5.10 $ è¿ç®—ç¬¦</h3><blockquote><p>Whereas normal function application (putting a space between two things) has a really high precedence, the $ function has the lowest precedence. Function application with a space is left-associative (so f a b c is the same as ((f a) b) c)), function application with $ is right-associative.</p></blockquote><p>ç©ºæ ¼å…·æœ‰è¾ƒé«˜çš„ä¼˜å…ˆçº§, ä½†æ˜¯ <code>$</code> å…·æœ‰æœ€ä½çš„ä¼˜å…ˆçº§</p><p>ä½¿ç”¨ç©ºæ ¼åˆ†å‰²çš„æ˜¯å·¦å…³è”çš„, è€Œä½¿ç”¨ <code>$</code> åˆ†å‰²çš„æ˜¯å³å…³è”çš„</p><p>æœ‰ä»€ä¹ˆç”¨?</p><ol><li><p>å°‘äº›æ‹¬å·</p><p><code>sum (map sqrt [1..130])</code> å¯ä»¥ç”¨ <code>sum $ map sqrt [1..130]</code> ä»£æ›¿, <code>sqrt 3 + 4 + 9</code>æ˜¯13+æ ¹å·3, ä½†æ˜¯ <code>sqrt $ 3 + 4 + 9</code> å°±æ­£å¸¸</p><p>[]:</p><blockquote><p>How about sum (filter (&gt; 10) (map (*2) [2..10]))? Well, because $ is right-associative, f (g (z x)) is equal to f $ g $ z x. And so, we can rewrite sum (filter (&gt; 10) (map (*2) [2..10])) as sum $ filter (&gt; 10) $ map (*2) [2..10].</p></blockquote></li><li><p>å¢åŠ ç‰¹æ€§</p></li></ol><p>åŠ äº† <code>$</code> æ„å‘³ç€å¯ä»¥è¢«å½“ä½œå‡½æ•°æ¥å¯¹å¾…ï¼Œ æ‰€ä»¥ä¸‹é¢çš„å†™æ³•æ˜¯å¯è¡Œçš„</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">map</span> <span class="token punctuation">(</span><span class="token operator">$</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">sqrt</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">7.0</span><span class="token punctuation">,</span><span class="token number">30.0</span><span class="token punctuation">,</span><span class="token number">9.0</span><span class="token punctuation">,</span><span class="token number">1.7320508075688772</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_5-11-å‡½æ•°ç»„åˆ" tabindex="-1"><a class="header-anchor" href="#_5-11-å‡½æ•°ç»„åˆ" aria-hidden="true">#</a> 5.11 å‡½æ•°ç»„åˆ</h3><p><code>.</code> æ˜¯ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œ ä»–çš„å®šä¹‰å¦‚ä¸‹</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">b</span> <span class="token operator">-&gt;</span> <span class="token hvariable">c</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">c</span>
<span class="token hvariable">f</span> <span class="token operator">.</span> <span class="token hvariable">g</span> <span class="token operator">=</span> <span class="token operator">\</span><span class="token hvariable">x</span> <span class="token operator">-&gt;</span> <span class="token hvariable">f</span> <span class="token punctuation">(</span><span class="token hvariable">g</span> <span class="token hvariable">x</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æœ‰äº†è¿™ä¸ªåï¼Œ ä¸€äº›åµŒå¥—çš„å‡½æ•°å°±èƒ½ç®€å†™ï¼Œ ä¾‹å¦‚</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- before</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">map</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">x</span> <span class="token operator">-&gt;</span> <span class="token builtin">negate</span> <span class="token punctuation">(</span><span class="token builtin">abs</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">24</span><span class="token punctuation">]</span>
<span class="token comment">-- now</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">map</span> <span class="token punctuation">(</span><span class="token builtin">negate</span> <span class="token operator">.</span> <span class="token builtin">abs</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">24</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_6-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_6-æ¨¡å—" aria-hidden="true">#</a> 6. æ¨¡å—</h2><p><strong>Modules</strong></p><h3 id="_6-1-å¯¼å…¥æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_6-1-å¯¼å…¥æ¨¡å—" aria-hidden="true">#</a> 6.1 å¯¼å…¥æ¨¡å—</h3><ol><li>å¯¼å…¥</li></ol><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- 1. å¯¼å…¥ä¸€ä¸ªæ¨¡å—</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">import</span> <span class="token constant">Data<span class="token punctuation">.</span>List</span>
<span class="token comment">-- 2. å¯¼å…¥å¤šä¸ªæ¨¡å—</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">m</span> <span class="token operator">+</span> <span class="token constant">Data<span class="token punctuation">.</span>List</span> <span class="token constant">Data<span class="token punctuation">.</span>Map</span> <span class="token constant">Data<span class="token punctuation">.</span>Set</span>
<span class="token comment">-- 3. å¯¼å…¥æŸäº›å‡½æ•°</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">import</span> <span class="token constant">Data<span class="token punctuation">.</span>List</span> <span class="token punctuation">(</span><span class="token hvariable">nub</span><span class="token punctuation">,</span> <span class="token builtin">sort</span><span class="token punctuation">)</span>
<span class="token comment">-- 4. ä¸å¯¼å…¥æŸäº›æŒ‡å®šçš„å‡½æ•°</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">import</span> <span class="token constant">Data<span class="token punctuation">.</span>List</span> <span class="token hvariable">hiding</span> <span class="token punctuation">(</span><span class="token hvariable">nub</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="2"><li>As</li></ol><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- é¿å…é‡åï¼Œ ä½†æ˜¯ä½¿ç”¨æ—¶å¿…é¡»æŒ‡å®š Data.Map.filter</span>
<span class="token import-statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Data<span class="token punctuation">.</span>Map</span>
<span class="token comment">-- æ¢åï¼Œ å¯ä»¥ç”¨ M.filter</span>
<span class="token import-statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Data<span class="token punctuation">.</span>Map <span class="token keyword">as</span> M</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_6-2-data-list" tabindex="-1"><a class="header-anchor" href="#_6-2-data-list" aria-hidden="true">#</a> 6.2 Data.List</h3><ol><li><p>intersperse</p><p>å‘Listä¸­å¡«å……å…ƒç´ *, ç±»ä¼¼ä¸pythonä¸­çš„ join</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">intersperse</span> <span class="token char string">&#39;.&#39;</span> <span class="token string">&quot;MONKEY&quot;</span>
<span class="token string">&quot;M.O.N.K.E.Y&quot;</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">intersperse</span> <span class="token number">0</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>intercalate</p><p>joinåè¿›è¡Œconcat, å¡«å……ååˆå¹¶è¿”å›,</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">intersperse</span> <span class="token char string">&#39;.&#39;</span> <span class="token string">&quot;MONKEY&quot;</span>
<span class="token string">&quot;M.O.N.K.E.Y&quot;</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">intersperse</span> <span class="token number">0</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>transpose</p><p>çŸ©é˜µè½¬ç½®</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">transpose</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">transpose</span> <span class="token punctuation">[</span><span class="token string">&quot;hey&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;there&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;guys&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token string">&quot;htg&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ehu&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;yey&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;rs&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;e&quot;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>foldl&#39; foldl1&#39;</p><p>èƒ½å¤Ÿç«‹å³è¿ç®—ï¼Œ é˜²æ­¢å †æ ˆæº¢å‡º</p><blockquote><p>foldl&#39; and foldl1&#39; are stricter versions of their respective lazy incarnations. When using lazy folds on really big lists, you might often get a stack overflow error. The culprit for that is that due to the lazy nature of the folds, the accumulator value isn&#39;t actually updated as the folding happens. What actually happens is that the accumulator kind of makes a promise that it will compute its value when asked to actually produce the result (also called a thunk). That happens for every intermediate accumulator and all those thunks overflow your stack. The strict folds aren&#39;t lazy buggers and actually compute the intermediate values as they go along instead of filling up your stack with thunks. So if you ever get stack overflow errors when doing lazy folds, try switching to their strict versions.</p></blockquote></li><li><p>concat</p><p>å’Œå¹¶æ‰€æœ‰å…ƒç´ å¹¶è¿”å›</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">concat</span> <span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;car&quot;</span><span class="token punctuation">]</span>
<span class="token string">&quot;foobarcar&quot;</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">concat</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>concatMap == concat map</strong></p></li><li><p>and &amp; or</p><p>éœ€è¦é…åˆmapä½¿ç”¨</p><blockquote><p>and takes a list of boolean values and returns True only if all the values in the list are True.</p></blockquote><p>å…¨ä¸ºçœŸè¿”å›True</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">and</span> <span class="token operator">$</span> <span class="token builtin">map</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span>
<span class="token constant">True</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">and</span> <span class="token operator">$</span> <span class="token builtin">map</span> <span class="token punctuation">(</span><span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token constant">False</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>or is like and, only it returns True if any of the boolean values in a list is True.</p></blockquote><p>æœ‰çœŸå°±è¿”å›True</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">or</span> <span class="token operator">$</span> <span class="token builtin">map</span> <span class="token punctuation">(</span><span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token constant">True</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">or</span> <span class="token operator">$</span> <span class="token builtin">map</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token constant">False</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>all &amp; any</p><p>and å’Œ or çš„æ›¿ä»£å“</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">any</span> <span class="token punctuation">(</span><span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token constant">True</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">all</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span>
<span class="token constant">True</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">all</span> <span class="token punctuation">(</span><span class="token operator">`elem`</span> <span class="token punctuation">[</span><span class="token char string">&#39;A&#39;</span><span class="token operator">..</span><span class="token char string">&#39;Z&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token string">&quot;HEYGUYSwhatsup&quot;</span>
<span class="token constant">False</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">any</span> <span class="token punctuation">(</span><span class="token operator">`elem`</span> <span class="token punctuation">[</span><span class="token char string">&#39;A&#39;</span><span class="token operator">..</span><span class="token char string">&#39;Z&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token string">&quot;HEYGUYSwhatsup&quot;</span>
<span class="token constant">True</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li><li><p>iterate</p><p>æ ¹æ®æ¯æ¬¡çš„ç»“æœç”Ÿæˆä¸‹ä¸€æ¬¡çš„å€¼</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token builtin">take</span> <span class="token number">10</span> <span class="token punctuation">(</span><span class="token builtin">iterate</span> <span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">]</span>
<span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token builtin">take</span> <span class="token number">5</span> <span class="token operator">$</span> <span class="token builtin">iterate</span> <span class="token punctuation">(</span><span class="token operator">++</span> <span class="token string">&quot;haha&quot;</span><span class="token punctuation">)</span> <span class="token string">&quot;haha&quot;</span>
<span class="token punctuation">[</span><span class="token string">&quot;haha&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hahahaha&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hahahahahaha&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hahahahahahahaha&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hahahahahahahahahaha&quot;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>splitAt</p><p>åˆ†å‰²ç”Ÿæˆåˆ—è¡¨</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">splitAt</span> <span class="token number">3</span> <span class="token string">&quot;heyman&quot;</span>
<span class="token punctuation">(</span><span class="token string">&quot;hey&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;man&quot;</span><span class="token punctuation">)</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">splitAt</span> <span class="token number">100</span> <span class="token string">&quot;heyman&quot;</span>
<span class="token punctuation">(</span><span class="token string">&quot;heyman&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">splitAt</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;heyman&quot;</span>
<span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;heyman&quot;</span><span class="token punctuation">)</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token builtin">splitAt</span> <span class="token number">3</span> <span class="token string">&quot;foobar&quot;</span> <span class="token keyword">in</span> <span class="token hvariable">b</span> <span class="token operator">++</span> <span class="token hvariable">a</span>
<span class="token string">&quot;barfoo&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li><li><p>takeWhile &amp; dropWhile</p><p>æ ¹æ®æ¡ä»¶ takeæˆ–drop</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">takeWhile</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">takeWhile</span> <span class="token punctuation">(</span><span class="token operator">/=</span><span class="token char string">&#39; &#39;</span><span class="token punctuation">)</span> <span class="token string">&quot;This is a sentence&quot;</span>
<span class="token string">&quot;This&quot;</span>

<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">dropWhile</span> <span class="token punctuation">(</span><span class="token operator">/=</span><span class="token char string">&#39; &#39;</span><span class="token punctuation">)</span> <span class="token string">&quot;This is a sentence&quot;</span>
<span class="token string">&quot; is a sentence&quot;</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">dropWhile</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p>break &amp; span</p><p>å°±æ˜¯æŠŠtakeWhileçš„ååŠéƒ¨åˆ†ä¹Ÿè¿”å›äº†</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">break</span> <span class="token punctuation">(</span><span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span>
<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">span</span> <span class="token punctuation">(</span><span class="token operator">/=</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span>
<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>sort</p><p>æ’åºå‘—</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">sort</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">sort</span> <span class="token string">&quot;This will be sorted soon&quot;</span>
<span class="token string">&quot;    Tbdeehiillnooorssstw&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>group</p><p>åˆ†ç»„ä½†ä¸æ’åº</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">group</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>inits &amp; tails</p><p>ç”Ÿæˆä¸€ä¸ªå‰ç¼€å’Œ</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">inits</span> <span class="token string">&quot;w00t&quot;</span>
<span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;w&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;w0&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;w00&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;w00t&quot;</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">tails</span> <span class="token string">&quot;w00t&quot;</span>
<span class="token punctuation">[</span><span class="token string">&quot;w00t&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;00t&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0t&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;t&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token keyword">let</span> <span class="token hvariable">w</span> <span class="token operator">=</span> <span class="token string">&quot;w00t&quot;</span> <span class="token keyword">in</span> <span class="token builtin">zip</span> <span class="token punctuation">(</span><span class="token hvariable">inits</span> <span class="token hvariable">w</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">tails</span> <span class="token hvariable">w</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;w00t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;w&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;00t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;w0&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;w00&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;w00t&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><p>isInfixOf &amp; isPrefixOf &amp; isSuffixOf</p><p>æ˜¯å¦æ˜¯sublist, æ˜¯å¦åœ¨å¼€å¤´, æ˜¯å¦åœ¨ç»“å°¾</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token string">&quot;cat&quot;</span> <span class="token operator">`isInfixOf`</span> <span class="token string">&quot;im a cat burglar&quot;</span>
<span class="token constant">True</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token string">&quot;Cat&quot;</span> <span class="token operator">`isInfixOf`</span> <span class="token string">&quot;im a cat burglar&quot;</span>
<span class="token constant">False</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token string">&quot;cats&quot;</span> <span class="token operator">`isInfixOf`</span> <span class="token string">&quot;im a cat burglar&quot;</span>
<span class="token constant">False</span>

<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token string">&quot;hey&quot;</span> <span class="token operator">`isPrefixOf`</span> <span class="token string">&quot;hey there!&quot;</span>
<span class="token constant">True</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token string">&quot;hey&quot;</span> <span class="token operator">`isPrefixOf`</span> <span class="token string">&quot;oh hey there!&quot;</span>
<span class="token constant">False</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token string">&quot;there!&quot;</span> <span class="token operator">`isSuffixOf`</span> <span class="token string">&quot;oh hey there!&quot;</span>
<span class="token constant">True</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token string">&quot;there!&quot;</span> <span class="token operator">`isSuffixOf`</span> <span class="token string">&quot;oh hey there&quot;</span>
<span class="token constant">False</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li><li><p>elem &amp; notElem &amp; partition</p></li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>åˆ¤æ–­æ˜¯å¦æ˜¯, åˆ†ä¸ºä¸¤ç»„

```haskell
ghci&gt; partition (`elem` [&#39;A&#39;..&#39;Z&#39;]) &quot;BOBsidneyMORGANeddy&quot;
(&quot;BOBMORGAN&quot;,&quot;sidneyeddy&quot;)
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>
17. find &amp; findIndex &amp; findIndices

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>findè¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆçš„å…ƒç´ </p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">find</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>
<span class="token constant">Just</span> <span class="token number">5</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">find</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>
<span class="token constant">Nothing</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">t</span> <span class="token hvariable">find</span>
<span class="token hvariable">find</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Bool</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Maybe</span> <span class="token hvariable">a</span>

<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">findIndex</span> <span class="token punctuation">(</span><span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token constant">Just</span> <span class="token number">5</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">findIndex</span> <span class="token punctuation">(</span><span class="token operator">==</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token constant">Nothing</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">findIndices</span> <span class="token punctuation">(</span><span class="token operator">`elem`</span> <span class="token punctuation">[</span><span class="token char string">&#39;A&#39;</span><span class="token operator">..</span><span class="token char string">&#39;Z&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token string">&quot;Where Are The Caps?&quot;</span>
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>
18. elemIndex  &amp; elemIndIces

    è¿”å›å…ƒç´ çš„index

    ```haskell
    ghci&gt; :t elemIndex
    elemIndex :: (Eq a) =&gt; a -&gt; [a] -&gt; Maybe Int
    ghci&gt; 4 `elemIndex` [1,2,3,4,5,6]
    Just 3
    ghci&gt; 10 `elemIndex` [1,2,3,4,5,6]
    Nothing

    ghci&gt; &#39; &#39; `elemIndices` &quot;Where are the spaces?&quot;
    [5,9,13]
    ```
19. more zip

    ä¸€ç›´æä¾›åˆ°7

    ```haskell
    ghci&gt; zipWith3 (\x y z -&gt; x + y + z) [1,2,3] [4,5,2,2] [2,2,3]
    [7,9,8]
    ghci&gt; zip4 [2,3,3] [2,2,2] [5,5,3] [2,2,2]
    [(2,2,5,2),(3,2,5,2),(3,2,3,2)]
    ```
20. line &amp; word

    line åˆ‡å‡ºæ²¡ä¸€è¡Œ, wordåˆ‡å‡ºæ¯ä¸ªå•è¯

    ```haskell
    ghci&gt; lines &quot;first line\nsecond line\nthird line&quot;
    [&quot;first line&quot;,&quot;second line&quot;,&quot;third line&quot;]
    ghci&gt; unlines [&quot;first line&quot;, &quot;second line&quot;, &quot;third line&quot;]
    &quot;first line\nsecond line\nthird line\n&quot;
    ghci&gt; words &quot;hey these are the words in this sentence&quot;
    [&quot;hey&quot;,&quot;these&quot;,&quot;are&quot;,&quot;the&quot;,&quot;words&quot;,&quot;in&quot;,&quot;this&quot;,&quot;sentence&quot;]
    ghci&gt; words &quot;hey these           are    the words in this\nsentence&quot;
    [&quot;hey&quot;,&quot;these&quot;,&quot;are&quot;,&quot;the&quot;,&quot;words&quot;,&quot;in&quot;,&quot;this&quot;,&quot;sentence&quot;]
    ghci&gt; unwords [&quot;hey&quot;,&quot;there&quot;,&quot;mate&quot;]
    &quot;hey there mate&quot;
    ```
21. nub

    å…ƒç´ å»é‡

    ```haskell
    ghci&gt; nub [1,2,3,4,3,2,1,2,3,4,3,2,1]
    [1,2,3,4]
    ghci&gt; nub &quot;Lots of words and stuff&quot;
    &quot;Lots fwrdanu&quot;
    ```
22. delete

    åˆ æ‰åœ°ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ 

    ```haskell
    -- delete takes an element and a list and deletes the first occurence of that element in the list.

    ghci&gt; delete &#39;h&#39; &quot;hey there ghang!&quot;
    &quot;ey there ghang!&quot;
    ghci&gt; delete &#39;h&#39; . delete &#39;h&#39; $ &quot;hey there ghang!&quot;
    &quot;ey tere ghang!&quot;
    ghci&gt; delete &#39;h&#39; . delete &#39;h&#39; . delete &#39;h&#39; $ &quot;hey there ghang!&quot;
    &quot;ey tere gang!&quot;
    ```
23. \\\\

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><p>åˆ æ‰æ›´å¤š</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- \\ is the list difference function. It acts like a set difference, basically. For every element in the right-hand list, it removes a matching element in the left one.</span>

<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">\\</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token string">&quot;Im a big baby&quot;</span> <span class="token operator">\\</span> <span class="token string">&quot;big&quot;</span>
<span class="token string">&quot;Im a  baby&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>
24. union

    æ±‚å¹¶é›†

    ```haskell
    ghci&gt; &quot;hey man&quot; `union` &quot;man what&#39;s up&quot;
    &quot;hey manwt&#39;sup&quot;
    ghci&gt; [1..7] `union` [5..10]
    [1,2,3,4,5,6,7,8,9,10]
    ```
25. intersect

    æ±‚äº¤é›†

    ```haskell
    ghci&gt; [1..7] `intersect` [5..10]
    [5,6,7]
    ```
26. insert

    æ’å…¥å‘—

    ```haskell
    ghci&gt; insert 4 [3,5,1,2,8,2]
    [3,4,5,1,2,8,2]
    ghci&gt; insert 4 [1,3,4,4,1]
    [1,3,4,4,4,1]
    ```
27. deleteBy, unionBy, intersectBy and groupBy

    ä»¥ä¸€ä¸ªæ•°å¼€å§‹ï¼Œ ä»¥æ­¤æ¯”è¾ƒä»–åé¢çš„æ•°ï¼ŒçŸ¥é“ä¸åŒ¹é…ï¼Œ ç»„æˆæ•°ç»„

    æ¥ç€ä»¥ç¬¬ä¸€ä¸ªä¸åŒ¹é…çš„æ•°å¼€å§‹ï¼Œé‡å¤æ¯”è¾ƒ

    ```haskell
    ghci&gt; let values = [-4.3, -2.4, -1.2, 0.4, 2.3, 5.9, 10.5, 29.1, 5.3, -2.4, -14.5, 2.9, 2.3]
    ghci&gt; groupBy (\x y -&gt; (x &gt; 0) == (y &gt; 0)) values
    -- ä¹Ÿå¯ä»¥å†™æˆ \x y -&gt; (x &gt; 0) &amp;&amp; (y &gt; 0) || (x &lt;= 0) &amp;&amp; (y &lt;= 0)
    [[-4.3,-2.4,-1.2],[0.4,2.3,5.9,10.5,29.1,5.3],[-2.4,-14.5],[2.9,2.3]]
    ghci&gt; groupBy (\x y -&gt; (x&gt;0) == (y&lt;0)) values
    -- ç¬¬ä¸€ä¸ªæ•°å’Œåé¢çš„ç¬¦å·éƒ½ä¸åŒ
    [[-4.3],[-2.4],[-1.2,0.4,2.3,5.9,10.5,29.1,5.3],[-2.4],[-14.5,2.9,2.3]]
    ```
28. on

    è¿˜æœ‰æ›´å¥½çš„æ–¹æ³•å†™ä¸Šé¢çš„ lambada è¡¨è¾¾å¼

    on éœ€è¦ä» Data.Function å¯¼å…¥

    onæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªä¼šå¯¹å‚æ•°åšçš„è¿ç®—ï¼Œ ç¬¬ä¸€ä¸ªæ˜¯å‡½æ•°ä¼šæ¯”è¾ƒä¸¤ä¸ªè¿ç®—åç»“æœ

    ```haskell
    on :: (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
    f `on` g = \x y -&gt; f (g x) (g y)
    ```

### 6.3 Data.Char

Data.Char æä¾›äº†ä¸€ç³»åˆ—å¤„ç†å­—ç¬¦çš„å‡½æ•°ï¼Œé…åˆ map å’Œ filter ä½¿ç”¨ä¹Ÿå¯ä»¥ç”¨æ¥å¤„ç†å­—ç¬¦ä¸²

**1. åˆ¤æ–­ç±»**

1. isControl checks whether a character is a control character.
2. isSpace checks whether a character is a white-space characters. That includes spaces, tab characters, newlines, etc.
3. isLower checks whether a character is lower-cased.
4. isUpper checks whether a character is upper-cased.
5. isAlpha checks whether a character is a letter.
6. isAlphaNum checks whether a character is a letter or a number.
7. isPrint checks whether a character is printable. Control characters, for instance, are not printable.
8. isDigit checks whether a character is a digit.
9. isOctDigit checks whether a character is an octal digit.
10. isHexDigit checks whether a character is a hex digit.
11. isLetter checks whether a character is a letter.
12. isMark checks for Unicode mark characters. Those are characters that combine with preceding letters to form latters with accents. Use this if you are French.
13. isNumber checks whether a character is numeric.
14. isPunctuation checks whether a character is punctuation.
15. isSymbol checks whether a character is a fancy mathematical or currency symbol.
16. isSeparator checks for Unicode spaces and separators.
17. isAscii checks whether a character falls into the first 128 characters of the Unicode character set.
18. isLatin1 checks whether a character falls into the first 256 characters of Unicode.
19. isAsciiUpper checks whether a character is ASCII and upper-case.
20. isAsciiLower checks whether a character is ASCII and lower-case.

**2. è½¬æ¢ç±»**

1. toUpper converts a character to upper-case. Spaces, numbers, and the like remain unchanged.
2. toLower converts a character to lower-case.
3. toTitle converts a character to title-case. For most characters, title-case is the same as upper-case.
4. digitToInt converts a character to an Int. To succeed, the character must be in the ranges &#39;0&#39;..&#39;9&#39;, &#39;a&#39;..&#39;f&#39; or &#39;A&#39;..&#39;F&#39;.
5. intToDigit is the inverse function of digitToInt. It takes an Int in the range of 0..15 and converts it to a lower-case character.
6. ord and chr convert characters to their corresponding numbers and vice versa:

   ```haskell
   ghci&gt; ord &#39;a&#39;
   97
   ghci&gt; chr 97
   &#39;a&#39;
   ghci&gt; map ord &quot;abcdefgh&quot;
   [97,98,99,100,101,102,103,104]
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br></div></div><ol start="7"><li><p>encode</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- ä¸€ç§ç¼–ç æ–¹å¼</span>
<span class="token hvariable">encode</span> <span class="token operator">::</span> <span class="token constant">Int</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
<span class="token hvariable">encode</span> <span class="token hvariable">shift</span> <span class="token hvariable">msg</span> <span class="token operator">=</span>
	<span class="token keyword">let</span> <span class="token hvariable">ords</span> <span class="token operator">=</span> <span class="token builtin">map</span> <span class="token builtin">ord</span> <span class="token hvariable">msg</span>
		<span class="token hvariable">shifted</span> <span class="token operator">=</span> <span class="token builtin">map</span> <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token hvariable">shift</span><span class="token punctuation">)</span> <span class="token hvariable">ords</span>
	<span class="token keyword">in</span>  <span class="token builtin">map</span> <span class="token builtin">chr</span> <span class="token hvariable">shifted</span>
<span class="token comment">-- å¦ä¸€ç§å®ç°</span>
<span class="token builtin">map</span> <span class="token punctuation">(</span><span class="token builtin">chr</span> <span class="token operator">.</span> <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token hvariable">shift</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token builtin">ord</span><span class="token punctuation">)</span> <span class="token hvariable">msg</span><span class="token punctuation">.</span>
<span class="token comment">-- å®ä¾‹ä»£ç </span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">encode</span> <span class="token number">3</span> <span class="token string">&quot;Heeeeey&quot;</span>
<span class="token string">&quot;Khhhhh|&quot;</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">encode</span> <span class="token number">4</span> <span class="token string">&quot;Heeeeey&quot;</span>
<span class="token string">&quot;Liiiii}&quot;</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">encode</span> <span class="token number">1</span> <span class="token string">&quot;abcd&quot;</span>
<span class="token string">&quot;bcde&quot;</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">encode</span> <span class="token number">5</span> <span class="token string">&quot;Marry Christmas! Ho ho ho!&quot;</span>
<span class="token string">&quot;Rfww~%Hmwnxyrfx&amp;%Mt%mt%mt&amp;&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ol><h3 id="_6-4-data-map" tabindex="-1"><a class="header-anchor" href="#_6-4-data-map" aria-hidden="true">#</a> 6.4 Data.Map</h3><p>ä¸‹é¢ç»™å‡ºäº†å‡ ç§å†™mapçš„æ–¹æ³•</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- ç¬¬ä¸€ç§ filterå®ç°</span>
<span class="token hvariable">findKey</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Eq</span> <span class="token hvariable">k</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">k</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">k</span><span class="token punctuation">,</span> <span class="token hvariable">v</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token hvariable">v</span>
<span class="token hvariable">findKey</span> <span class="token hvariable">key</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token builtin">snd</span> <span class="token operator">.</span> <span class="token builtin">head</span> <span class="token operator">.</span> <span class="token builtin">filter</span> <span class="token punctuation">(</span><span class="token operator">\</span> <span class="token punctuation">(</span><span class="token hvariable">k</span><span class="token punctuation">,</span> <span class="token hvariable">v</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token hvariable">key</span> <span class="token operator">==</span> <span class="token hvariable">k</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token hvariable">xs</span>

<span class="token comment">-- ç¬¬äºŒç§ Maybeéç©ºæ ¡éªŒ</span>
<span class="token hvariable">findKey</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Eq</span> <span class="token hvariable">k</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">k</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">k</span><span class="token punctuation">,</span> <span class="token hvariable">v</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Maybe</span> <span class="token hvariable">v</span>
<span class="token hvariable">findKey</span> <span class="token hvariable">_</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">Nothing</span>
<span class="token hvariable">findKey</span> <span class="token hvariable">key</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token hvariable">k</span><span class="token punctuation">,</span> <span class="token hvariable">v</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token hvariable">k</span> <span class="token operator">==</span> <span class="token hvariable">key</span>
                                                        <span class="token keyword">then</span> <span class="token constant">Just</span> <span class="token hvariable">v</span>
                                                        <span class="token keyword">else</span> <span class="token hvariable">findKey</span> <span class="token hvariable">key</span> <span class="token hvariable">xs</span>

<span class="token comment">-- ç¬¬ä¸‰ç§ ä½¿ç”¨foldrè€Œéé€’å½’ï¼Œå› ä¸ºæ¯”é€’å½’çš„å¯è¯»æ€§æ›´å¥½</span>
<span class="token comment">-- Note: It&#39;s usually better to use folds for this standard list recursion pattern instead of explicitly writing the recursion because they&#39;re easier to read and identify. Everyone knows it&#39;s a fold when they see the foldr call, but it takes some more thinking to read explicit recursion.</span>
<span class="token hvariable">findKey</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Eq</span> <span class="token hvariable">k</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">k</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">k</span><span class="token punctuation">,</span><span class="token hvariable">v</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Maybe</span> <span class="token hvariable">v</span>
<span class="token hvariable">findKey</span> <span class="token hvariable">key</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token builtin">foldr</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token punctuation">(</span><span class="token hvariable">k</span><span class="token punctuation">,</span><span class="token hvariable">v</span><span class="token punctuation">)</span> <span class="token hvariable">acc</span> <span class="token operator">-&gt;</span> <span class="token keyword">if</span> <span class="token hvariable">key</span> <span class="token operator">==</span> <span class="token hvariable">k</span> <span class="token keyword">then</span> <span class="token constant">Just</span> <span class="token hvariable">v</span> <span class="token keyword">else</span> <span class="token hvariable">acc</span><span class="token punctuation">)</span> <span class="token constant">Nothing</span> <span class="token hvariable">xs</span>

<span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
        <span class="token keyword">let</span> <span class="token hvariable">phoneBook</span> <span class="token operator">=</span>
                <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;111&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;bbb&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;222&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;ccc&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;333&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">]</span>
        <span class="token builtin">print</span> <span class="token operator">$</span> <span class="token hvariable">findKey</span> <span class="token string">&quot;bbb&quot;</span> <span class="token hvariable">phoneBook</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>ä¸‹é¢æ˜¯ä¸€å †å‡½æ•°</p><ol><li><p>fromList</p><p>åˆ›å»ºä¸€ä¸ªMap</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">&quot;betty&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;555-2938&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;bonnie&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;452-2928&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;lucille&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;205-2928&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token hvariable">fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">&quot;betty&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;555-2938&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;bonnie&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;452-2928&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;lucille&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;205-2928&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token hvariable">fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è‡ªå·±å®ç°</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- We can implement our own fromList by using the empty map, insert and a fold. Watch:</span>

<span class="token hvariable">fromList&#39;</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Ord</span> <span class="token hvariable">k</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">k</span><span class="token punctuation">,</span><span class="token hvariable">v</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Map<span class="token punctuation">.</span>Map</span> <span class="token hvariable">k</span> <span class="token hvariable">v</span>
<span class="token hvariable">fromList&#39;</span> <span class="token operator">=</span> <span class="token builtin">foldr</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token punctuation">(</span><span class="token hvariable">k</span><span class="token punctuation">,</span><span class="token hvariable">v</span><span class="token punctuation">)</span> <span class="token hvariable">acc</span> <span class="token operator">-&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>insert</span> <span class="token hvariable">k</span> <span class="token hvariable">v</span> <span class="token hvariable">acc</span><span class="token punctuation">)</span> <span class="token hvariable">Map<span class="token punctuation">.</span>empty</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>empty</p><p>è¿”å›ä¸€ä¸ªç©ºMap</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>empty</span> 
<span class="token hvariable">fromList</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>insert</p><p>æ’å…¥ä¸€å¯¹kï¼Œ v</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>empty</span>
<span class="token hvariable">fromList</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>insert</span> <span class="token number">3</span> <span class="token number">100</span> <span class="token hvariable">Map<span class="token punctuation">.</span>empty</span>
<span class="token hvariable">fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>insert</span> <span class="token number">5</span> <span class="token number">600</span> <span class="token punctuation">(</span><span class="token hvariable">Map<span class="token punctuation">.</span>insert</span> <span class="token number">4</span> <span class="token number">200</span> <span class="token punctuation">(</span> <span class="token hvariable">Map<span class="token punctuation">.</span>insert</span> <span class="token number">3</span> <span class="token number">100</span>  <span class="token hvariable">Map<span class="token punctuation">.</span>empty</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token hvariable">fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>insert</span> <span class="token number">5</span> <span class="token number">600</span> <span class="token operator">.</span> <span class="token hvariable">Map<span class="token punctuation">.</span>insert</span> <span class="token number">4</span> <span class="token number">200</span> <span class="token operator">.</span> <span class="token hvariable">Map<span class="token punctuation">.</span>insert</span> <span class="token number">3</span> <span class="token number">100</span> <span class="token operator">$</span> <span class="token hvariable">Map<span class="token punctuation">.</span>empty</span>
<span class="token hvariable">fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li><li><p>null</p><p>æ£€æŸ¥æ˜¯å¦ä¸ºç©º</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token constant">Map</span><span class="token punctuation">.</span><span class="token builtin">null</span> <span class="token hvariable">Map<span class="token punctuation">.</span>empty</span>
<span class="token constant">True</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token constant">Map</span><span class="token punctuation">.</span><span class="token builtin">null</span> <span class="token operator">$</span> <span class="token hvariable">Map<span class="token punctuation">.</span>fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token constant">False</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>size</p><p>è¿”å›mapçš„å¤§å°</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>size</span> <span class="token hvariable">Map<span class="token punctuation">.</span>empty</span>
<span class="token number">0</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>size</span> <span class="token operator">$</span> <span class="token hvariable">Map<span class="token punctuation">.</span>fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token number">5</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>singleton</p><p>é‡å»ºåªæœ‰ä¸€å¯¹kvçš„Map</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>singleton</span> <span class="token number">3</span> <span class="token number">9</span>
<span class="token hvariable">fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>insert</span> <span class="token number">5</span> <span class="token number">9</span> <span class="token operator">$</span> <span class="token hvariable">Map<span class="token punctuation">.</span>singleton</span> <span class="token number">3</span> <span class="token number">9</span>
<span class="token hvariable">fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>lookup</p><p>å°±æ˜¯get</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token constant">Prelude</span> <span class="token constant">Map</span><span class="token operator">&gt;</span> <span class="token constant">Map</span><span class="token punctuation">.</span><span class="token builtin">lookup</span> <span class="token number">4</span> <span class="token hvariable">a</span>
<span class="token constant">Just</span> <span class="token number">200</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>member</p><p>å°±æ˜¯in</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>member</span> <span class="token number">3</span> <span class="token operator">$</span> <span class="token hvariable">Map<span class="token punctuation">.</span>fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token constant">True</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>member</span> <span class="token number">3</span> <span class="token operator">$</span> <span class="token hvariable">Map<span class="token punctuation">.</span>fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token constant">False</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>map and filter</p><p>åªä½œç”¨äº v</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token constant">Map</span><span class="token punctuation">.</span><span class="token builtin">map</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">$</span> <span class="token hvariable">Map<span class="token punctuation">.</span>fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token hvariable">fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">900</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token constant">Map</span><span class="token punctuation">.</span><span class="token builtin">filter</span> <span class="token builtin">isUpper</span> <span class="token operator">$</span> <span class="token hvariable">Map<span class="token punctuation">.</span>fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token char string">&#39;a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token char string">&#39;A&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token char string">&#39;b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token char string">&#39;B&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token hvariable">fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token char string">&#39;A&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token char string">&#39;B&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>toList</p><p>å¦‚å…¶å</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>toList</span> <span class="token operator">.</span> <span class="token hvariable">Map<span class="token punctuation">.</span>insert</span> <span class="token number">9</span> <span class="token number">2</span> <span class="token operator">$</span> <span class="token hvariable">Map<span class="token punctuation">.</span>singleton</span> <span class="token number">4</span> <span class="token number">3</span>
<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>keys and elems</p><p>è¿”å› keys å’Œ values</p></li><li><p>fromListWith</p><p>ç±»ä¼¼ä¸fromListï¼Œ ä¸è¿‡æœ‰ä¸€ä¸ªå‡½æ•°å†³å®šé‡å¤çš„keyåº”è¯¥æ€ä¹ˆåŠ</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- æœ‰é‡å¤çš„é”®</span>
<span class="token hvariable">phoneBook</span> <span class="token operator">=</span>
    <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">&quot;betty&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;555-2938&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;betty&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;342-2492&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;bonnie&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;452-2928&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;patsy&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;493-2928&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;patsy&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;943-2929&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;patsy&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;827-9162&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;lucille&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;205-2928&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;wendy&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;939-8282&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;penny&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;853-2492&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;penny&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;555-2111&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
<span class="token comment">-- é‡å¤çš„é”®çš„å€¼ä¼šè¢«åŠ ä¸€èµ·</span>
<span class="token hvariable">phoneBookToMap</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Ord</span> <span class="token hvariable">k</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">k</span><span class="token punctuation">,</span> <span class="token constant">String</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Map<span class="token punctuation">.</span>Map</span> <span class="token hvariable">k</span> <span class="token constant">String</span>
<span class="token hvariable">phoneBookToMap</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token hvariable">Map<span class="token punctuation">.</span>fromListWith</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">number1</span> <span class="token hvariable">number2</span> <span class="token operator">-&gt;</span> <span class="token hvariable">number1</span> <span class="token operator">++</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">++</span> <span class="token hvariable">number2</span><span class="token punctuation">)</span> <span class="token hvariable">xs</span>

<span class="token comment">-- æŸ¥çœ‹</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token constant">Map</span><span class="token punctuation">.</span><span class="token builtin">lookup</span> <span class="token string">&quot;patsy&quot;</span> <span class="token operator">$</span> <span class="token hvariable">phoneBookToMap</span> <span class="token hvariable">phoneBook</span>
<span class="token string">&quot;827-9162, 943-2929, 493-2928&quot;</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token constant">Map</span><span class="token punctuation">.</span><span class="token builtin">lookup</span> <span class="token string">&quot;wendy&quot;</span> <span class="token operator">$</span> <span class="token hvariable">phoneBookToMap</span> <span class="token hvariable">phoneBook</span>
<span class="token string">&quot;939-8282&quot;</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token constant">Map</span><span class="token punctuation">.</span><span class="token builtin">lookup</span> <span class="token string">&quot;betty&quot;</span> <span class="token operator">$</span> <span class="token hvariable">phoneBookToMap</span> <span class="token hvariable">phoneBook</span>
<span class="token string">&quot;342-2492, 555-2938&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>ä¸‹é¢æ˜¯å¦å¤–ä¸¤ä¸ªä¾‹å­</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>fromListWith</span> <span class="token builtin">max</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token hvariable">fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>fromListWith</span> <span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token hvariable">fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">108</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">62</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">37</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>insertWith</p><p>å·®ä¸å¤šï¼Œ æ¡ä»¶æ’å…¥</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Map<span class="token punctuation">.</span>insertWith</span> <span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token number">3</span> <span class="token number">100</span> <span class="token operator">$</span> <span class="token hvariable">Map<span class="token punctuation">.</span>fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">103</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">339</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token hvariable">fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">104</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">103</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">339</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol><h3 id="_6-5-data-set" tabindex="-1"><a class="header-anchor" href="#_6-5-data-set" aria-hidden="true">#</a> 6.5 Data.Set</h3><ol><li><p>fromList</p><p>å»é‡</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">text1</span> <span class="token operator">=</span> <span class="token string">&quot;I just had an anime dream. Anime... Reality... Are they so different?&quot;</span>
<span class="token hvariable">text2</span> <span class="token operator">=</span> <span class="token string">&quot;The old man left his garbage can out and now his trash is all over my lawn!&quot;</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token keyword">let</span> <span class="token hvariable">set1</span> <span class="token operator">=</span> <span class="token hvariable">Set<span class="token punctuation">.</span>fromList</span> <span class="token hvariable">text1</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token keyword">let</span> <span class="token hvariable">set2</span> <span class="token operator">=</span> <span class="token hvariable">Set<span class="token punctuation">.</span>fromList</span> <span class="token hvariable">text2</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">set1</span>
<span class="token hvariable">fromList</span> <span class="token string">&quot; .?AIRadefhijlmnorstuy&quot;</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">set2</span>
<span class="token hvariable">fromList</span> <span class="token string">&quot; !Tabcdefghilmnorstuvwy&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li><li><p>intersection</p><p>æ±‚äº¤é›†</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Set<span class="token punctuation">.</span>intersection</span> <span class="token hvariable">set1</span> <span class="token hvariable">set2</span>
<span class="token hvariable">fromList</span> <span class="token string">&quot; adefhilmnorstuy&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>difference</p><p>æ±‚ç¬¬ä¸€ä¸ªé›†åˆæœ‰ç¬¬äºŒä¸ªæ²¡æœ‰</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Set<span class="token punctuation">.</span>difference</span> <span class="token hvariable">set1</span> <span class="token hvariable">set2</span>
<span class="token hvariable">fromList</span> <span class="token string">&quot;.?AIRj&quot;</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Set<span class="token punctuation">.</span>difference</span> <span class="token hvariable">set2</span> <span class="token hvariable">set1</span>
<span class="token hvariable">fromList</span> <span class="token string">&quot;!Tbcgvw&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>union</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">Set<span class="token punctuation">.</span>union</span> <span class="token hvariable">set1</span> <span class="token hvariable">set2</span>
<span class="token hvariable">fromList</span> <span class="token string">&quot; !.?AIRTabcdefghijlmnorstuvwy&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>å…¶ä»–</p><p>null, size, member, empty, singleton, insert and delete å°±å’Œä½ æƒ³çš„ä¸€æ ·</p></li></ol><h2 id="_7-è‡ªå®šä¹‰ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_7-è‡ªå®šä¹‰ç±»å‹" aria-hidden="true">#</a> 7. è‡ªå®šä¹‰ç±»å‹</h2><p>ä½¿ç”¨ data å…³é”®å­—å®šä¹‰</p><p>ç­‰å·å·¦è¾¹çš„æ˜¯ <strong>type name</strong>ï¼Œ ç­‰å¥½å³è¾¹çš„æ˜¯ <strong>value constructors</strong></p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">data</span> <span class="token constant">Bool</span> <span class="token operator">=</span> <span class="token constant">False</span> <span class="token operator">|</span> <span class="token constant">True</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Int ç±»å‹å¯èƒ½æœ‰ä¸‹é¢çš„å®šä¹‰</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- çœŸå®ä¸æ˜¯è¿™æ ·çš„ï¼Œåªæ˜¯ä¸ºäº†è¯´æ˜é—®é¢˜</span>
<span class="token keyword">data</span> <span class="token constant">Int</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2147483648</span> <span class="token operator">|</span> <span class="token operator">-</span><span class="token number">2147483647</span> <span class="token operator">|</span> <span class="token operator">...</span> <span class="token operator">|</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token operator">...</span> <span class="token operator">|</span> <span class="token number">2147483647</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_7-1-åŸºæœ¬ç±»å‹å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#_7-1-åŸºæœ¬ç±»å‹å®šä¹‰" aria-hidden="true">#</a> 7.1 åŸºæœ¬ç±»å‹å®šä¹‰</h3><p>ä¸‹é¢è®©æˆ‘ä»¬è¿›è¡Œä¸€ä¸ªå½¢çŠ¶çš„å®šä¹‰</p><p>ä¸€ä¸ªåœ†çš„å®šä¹‰å¯èƒ½éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œ å‰ä¸¤ä¸ªæ˜¯åœ†çš„åæ ‡ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯åŠå¾„ï¼Œ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æƒ³ <code>(43.1, 55.0, 10.4)</code>è¿™æ ·å®šä¹‰ä¸€ä¸ªåœ†ï¼Œ ä½†æ˜¯è¿™ä¸‰ä¸ªå‚æ•°ä¹Ÿèƒ½è¡¨ç¤ºä¸€ä¸ª 3D vectoræˆ–è€…æ˜¯åˆ«çš„ä»€ä¹ˆä¸œè¥¿ï¼Œ æ‰€ä»¥æˆ‘ä»¬æœ€å¥½å®šä¹‰ä¸€ä¸ªå«åš Shape çš„æ–°ç±»å‹</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">data</span> <span class="token constant">Shape</span> <span class="token operator">=</span> <span class="token constant">Circle</span> <span class="token constant">Float</span> <span class="token constant">Float</span> <span class="token constant">Float</span> <span class="token operator">|</span> <span class="token constant">Rectangle</span> <span class="token constant">Float</span> <span class="token constant">Float</span> <span class="token constant">Float</span> <span class="token constant">Float</span>

<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">t</span> <span class="token constant">Circle</span>
<span class="token constant">Circle</span> <span class="token operator">::</span> <span class="token constant">Float</span> <span class="token operator">-&gt;</span> <span class="token constant">Float</span> <span class="token operator">-&gt;</span> <span class="token constant">Float</span> <span class="token operator">-&gt;</span> <span class="token constant">Shape</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">t</span> <span class="token constant">Rectangle</span>
<span class="token constant">Rectangle</span> <span class="token operator">::</span> <span class="token constant">Float</span> <span class="token operator">-&gt;</span> <span class="token constant">Float</span> <span class="token operator">-&gt;</span> <span class="token constant">Float</span> <span class="token operator">-&gt;</span> <span class="token constant">Float</span> <span class="token operator">-&gt;</span> <span class="token constant">Shape</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>new ä¸€ä¸ªå®ä¾‹</strong></p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token constant">Circle</span> <span class="token number">10</span> <span class="token number">20</span> <span class="token number">5</span>
<span class="token constant">Circle</span> <span class="token number">10.0</span> <span class="token number">20.0</span> <span class="token number">5.0</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token constant">Rectangle</span> <span class="token number">50</span> <span class="token number">230</span> <span class="token number">60</span> <span class="token number">90</span>
<span class="token constant">Rectangle</span> <span class="token number">50.0</span> <span class="token number">230.0</span> <span class="token number">60.0</span> <span class="token number">90.0</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>type name å’Œ value constructor é¦–å­—æ¯éœ€è¦å¤§å†™</p><p>ä¸‹é¢å®šä¹‰äº†ä¸€ä¸ªå®Œæ•´çš„Shapeæ¨¡å—</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- Shape(..) ä¼šå°†æ‰€æœ‰çš„æ„é€ å™¨æš´éœ²ç»™å¤–éƒ¨</span>
<span class="token comment">-- ç­‰åŒäº Shape (Rectangle, Circle)</span>
<span class="token keyword">module</span> <span class="token constant">Shapes</span>
<span class="token punctuation">(</span> <span class="token constant">Point</span><span class="token punctuation">(</span><span class="token operator">..</span><span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token constant">Shape</span><span class="token punctuation">(</span><span class="token operator">..</span><span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token hvariable">surface</span>
<span class="token punctuation">,</span> <span class="token hvariable">nudge</span>
<span class="token punctuation">,</span> <span class="token hvariable">baseCircle</span>
<span class="token punctuation">,</span> <span class="token hvariable">baseRect</span>
<span class="token punctuation">)</span> <span class="token keyword">where</span>

<span class="token comment">-- deriving (Show) è‡ªåŠ¨å®ç°Show</span>
<span class="token keyword">data</span> <span class="token constant">Point</span> <span class="token operator">=</span> <span class="token constant">Point</span> <span class="token constant">Float</span> <span class="token constant">Float</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Show</span><span class="token punctuation">)</span>
<span class="token keyword">data</span> <span class="token constant">Shape</span> <span class="token operator">=</span> <span class="token constant">Circle</span> <span class="token constant">Point</span> <span class="token constant">Float</span> <span class="token operator">|</span> <span class="token constant">Rectangle</span> <span class="token constant">Point</span> <span class="token constant">Point</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Show</span><span class="token punctuation">)</span>
<span class="token hvariable">surface</span> <span class="token operator">::</span> <span class="token constant">Shape</span> <span class="token operator">-&gt;</span> <span class="token constant">Float</span>
<span class="token hvariable">surface</span> <span class="token punctuation">(</span><span class="token constant">Circle</span> <span class="token hvariable">_</span> <span class="token hvariable">r</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token builtin">pi</span> <span class="token operator">*</span> <span class="token hvariable">r</span> <span class="token operator">^</span> <span class="token number">2</span>
<span class="token hvariable">surface</span> <span class="token punctuation">(</span><span class="token constant">Rectangle</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token hvariable">x1</span> <span class="token hvariable">y1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token hvariable">x2</span> <span class="token hvariable">y2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token builtin">abs</span> <span class="token operator">$</span> <span class="token hvariable">x2</span> <span class="token operator">-</span> <span class="token hvariable">x1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token builtin">abs</span> <span class="token operator">$</span> <span class="token hvariable">y2</span> <span class="token operator">-</span> <span class="token hvariable">y1</span><span class="token punctuation">)</span>

<span class="token hvariable">nudge</span> <span class="token operator">::</span> <span class="token constant">Shape</span> <span class="token operator">-&gt;</span> <span class="token constant">Float</span> <span class="token operator">-&gt;</span> <span class="token constant">Float</span> <span class="token operator">-&gt;</span> <span class="token constant">Shape</span>
<span class="token hvariable">nudge</span> <span class="token punctuation">(</span><span class="token constant">Circle</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span><span class="token punctuation">)</span> <span class="token hvariable">r</span><span class="token punctuation">)</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span> <span class="token operator">=</span> <span class="token constant">Circle</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">+</span><span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">y</span><span class="token operator">+</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token hvariable">r</span>
<span class="token hvariable">nudge</span> <span class="token punctuation">(</span><span class="token constant">Rectangle</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token hvariable">x1</span> <span class="token hvariable">y1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token hvariable">x2</span> <span class="token hvariable">y2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span> <span class="token operator">=</span> <span class="token constant">Rectangle</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token punctuation">(</span><span class="token hvariable">x1</span><span class="token operator">+</span><span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">y1</span><span class="token operator">+</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token punctuation">(</span><span class="token hvariable">x2</span><span class="token operator">+</span><span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">y2</span><span class="token operator">+</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token hvariable">baseCircle</span> <span class="token operator">::</span> <span class="token constant">Float</span> <span class="token operator">-&gt;</span> <span class="token constant">Shape</span>
<span class="token hvariable">baseCircle</span> <span class="token hvariable">r</span> <span class="token operator">=</span> <span class="token constant">Circle</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token hvariable">r</span>

<span class="token hvariable">baseRect</span> <span class="token operator">::</span> <span class="token constant">Float</span> <span class="token operator">-&gt;</span> <span class="token constant">Float</span> <span class="token operator">-&gt;</span> <span class="token constant">Shape</span>
<span class="token hvariable">baseRect</span> <span class="token hvariable">width</span> <span class="token hvariable">height</span> <span class="token operator">=</span> <span class="token constant">Rectangle</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token hvariable">width</span> <span class="token hvariable">height</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸æš´éœ²Shapeï¼Œè®©ç”¨æˆ·åªèƒ½é€šè¿‡ baseCircleï¼Œ baseRect æ„é€ ï¼Œè®©æˆ‘ä»¬çš„æ¥å£æ›´åŠ æŠ½è±¡</p><h3 id="_7-2-record-syntax-å®šä¹‰ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_7-2-record-syntax-å®šä¹‰ç±»å‹" aria-hidden="true">#</a> 7.2 record syntax å®šä¹‰ç±»å‹</h3><p>ç¬¬ä¸€ç§æ–¹å¼</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">data</span> <span class="token constant">Person</span> <span class="token operator">=</span> <span class="token constant">Person</span> <span class="token constant">String</span> <span class="token constant">String</span> <span class="token constant">Int</span> <span class="token constant">Float</span> <span class="token constant">String</span> <span class="token constant">String</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Show</span><span class="token punctuation">)</span>
<span class="token hvariable">firstName</span> <span class="token operator">::</span> <span class="token constant">Person</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
<span class="token hvariable">firstName</span> <span class="token punctuation">(</span><span class="token constant">Person</span> <span class="token hvariable">firstname</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">firstname</span>

<span class="token hvariable">lastName</span> <span class="token operator">::</span> <span class="token constant">Person</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
<span class="token hvariable">lastName</span> <span class="token punctuation">(</span><span class="token constant">Person</span> <span class="token hvariable">_</span> <span class="token hvariable">lastname</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">lastname</span>

<span class="token hvariable">age</span> <span class="token operator">::</span> <span class="token constant">Person</span> <span class="token operator">-&gt;</span> <span class="token constant">Int</span>
<span class="token hvariable">age</span> <span class="token punctuation">(</span><span class="token constant">Person</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">age</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">age</span>

<span class="token hvariable">height</span> <span class="token operator">::</span> <span class="token constant">Person</span> <span class="token operator">-&gt;</span> <span class="token constant">Float</span>
<span class="token hvariable">height</span> <span class="token punctuation">(</span><span class="token constant">Person</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">height</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">height</span>

<span class="token hvariable">phoneNumber</span> <span class="token operator">::</span> <span class="token constant">Person</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
<span class="token hvariable">phoneNumber</span> <span class="token punctuation">(</span><span class="token constant">Person</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">number</span> <span class="token hvariable">_</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">number</span>

<span class="token hvariable">flavor</span> <span class="token operator">::</span> <span class="token constant">Person</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
<span class="token hvariable">flavor</span> <span class="token punctuation">(</span><span class="token constant">Person</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">_</span> <span class="token hvariable">flavor</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">flavor</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>ä½¿ç”¨ record syntax å®šä¹‰Person</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">data</span> <span class="token constant">Person</span> <span class="token operator">=</span> <span class="token constant">Person</span> <span class="token punctuation">{</span> <span class="token hvariable">firstName</span> <span class="token operator">::</span> <span class="token constant">String</span>
                     <span class="token punctuation">,</span> <span class="token hvariable">lastName</span> <span class="token operator">::</span> <span class="token constant">String</span>
                     <span class="token punctuation">,</span> <span class="token hvariable">age</span> <span class="token operator">::</span> <span class="token constant">Int</span>
                     <span class="token punctuation">,</span> <span class="token hvariable">height</span> <span class="token operator">::</span> <span class="token constant">Float</span>
                     <span class="token punctuation">,</span> <span class="token hvariable">phoneNumber</span> <span class="token operator">::</span> <span class="token constant">String</span>
                     <span class="token punctuation">,</span> <span class="token hvariable">flavor</span> <span class="token operator">::</span> <span class="token constant">String</span>
                     <span class="token punctuation">}</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Show</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>haskellä¼šè‡ªåŠ¨ç”Ÿæˆä¸Šé¢çš„å‡½æ•°</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">t</span> <span class="token hvariable">flavor</span>
<span class="token hvariable">flavor</span> <span class="token operator">::</span> <span class="token constant">Person</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">t</span> <span class="token hvariable">firstName</span>
<span class="token hvariable">firstName</span> <span class="token operator">::</span> <span class="token constant">Person</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>new ä¸€ä¸ªå®ä¾‹</strong></p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token constant">Car</span> <span class="token punctuation">{</span><span class="token hvariable">company</span><span class="token operator">=</span><span class="token string">&quot;Ford&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">model</span><span class="token operator">=</span><span class="token string">&quot;Mustang&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">year</span><span class="token operator">=</span><span class="token number">1967</span><span class="token punctuation">}</span>
<span class="token constant">Car</span> <span class="token punctuation">{</span><span class="token hvariable">company</span> <span class="token operator">=</span> <span class="token string">&quot;Ford&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">model</span> <span class="token operator">=</span> <span class="token string">&quot;Mustang&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">year</span> <span class="token operator">=</span> <span class="token number">1967</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_7-3-ç±»å‹å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_7-3-ç±»å‹å‚æ•°" aria-hidden="true">#</a> 7.3 ç±»å‹å‚æ•°</h3><h4 id="_7-3-1-maybe" tabindex="-1"><a class="header-anchor" href="#_7-3-1-maybe" aria-hidden="true">#</a> 7.3.1 Maybe</h4><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">data</span> <span class="token constant">Maybe</span> <span class="token hvariable">a</span> <span class="token operator">=</span> <span class="token constant">Nothing</span> <span class="token operator">|</span> <span class="token constant">Just</span> <span class="token hvariable">a</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>ç±»å‹æ„é€ å™¨</strong></p><p>a æ˜¯ä¸€ä¸ªç±»å‹å‚æ•°ï¼Œ å› ä¸ºè¿™ä¸ªç±»å‹ aï¼Œ æ‰€ä»¥æˆ‘ä»¬ç§° Maybeæ˜¯ä¸€ä¸ª type constructorï¼ˆç±»å‹æ„é€ å™¨ï¼‰ï¼ˆæ³¨æ„ï¼šå’Œä¹‹å‰çš„ value constructor ä¸ä¸€æ ·ï¼‰ï¼Œ æ‰€ä»¥ Maybe ä¸æ˜¯ä¸€ä¸ªç±»å‹</p><p>æˆ‘ä»¬èƒ½å¤Ÿä¼ å…¥ Char æˆ–è€… Intï¼Œ å°±èƒ½çš„åˆ°ä¸€ä¸ª Maybe Char æˆ–è€… Maybe Int ç±»å‹</p><h4 id="_7-3-2-car" tabindex="-1"><a class="header-anchor" href="#_7-3-2-car" aria-hidden="true">#</a> 7.3.2 Car</h4><p>ä¸‹é¢ä¸¾äº†ä¸€ä¸ª Car çš„ä¾‹å­ï¼Œä»–å°±å¯èƒ½æ˜¯ (Car String String Int) ç±»å‹</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code>    <span class="token keyword">data</span> <span class="token constant">Car</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span> <span class="token hvariable">c</span> <span class="token operator">=</span> <span class="token constant">Car</span> <span class="token punctuation">{</span> <span class="token hvariable">company</span> <span class="token operator">::</span> <span class="token hvariable">a</span>
                         <span class="token punctuation">,</span> <span class="token hvariable">model</span> <span class="token operator">::</span> <span class="token hvariable">b</span>
                         <span class="token punctuation">,</span> <span class="token hvariable">year</span> <span class="token operator">::</span> <span class="token hvariable">c</span>
                         <span class="token punctuation">}</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Show</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä½†æ˜¯ç”¨è¿™ç§å½¢å¼å£°æ˜å¹¶æ²¡æœ‰å¤ªå¤šå¥½å¤„ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹æˆ‘ä»¬åªéœ€è¦ä¸€ç§çŠ¶æ€ <code>Car String String Int</code> å°±å¤Ÿäº†</p><p>æ‰€ä»¥æˆ‘ä»¬ä¼šç”¨ä¸‹é¢çš„æ–¹å¼</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">data</span> <span class="token constant">Car</span> <span class="token operator">=</span> <span class="token constant">Car</span> <span class="token punctuation">{</span> <span class="token hvariable">company</span> <span class="token operator">::</span> <span class="token constant">String</span>
               <span class="token punctuation">,</span> <span class="token hvariable">model</span> <span class="token operator">::</span> <span class="token constant">String</span>
               <span class="token punctuation">,</span> <span class="token hvariable">year</span> <span class="token operator">::</span> <span class="token constant">Int</span>
               <span class="token punctuation">}</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Show</span><span class="token punctuation">)</span>
<span class="token hvariable">tellCar</span> <span class="token operator">::</span> <span class="token constant">Car</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
<span class="token hvariable">tellCar</span> <span class="token punctuation">(</span><span class="token constant">Car</span> <span class="token punctuation">{</span><span class="token hvariable">company</span> <span class="token operator">=</span> <span class="token hvariable">c</span><span class="token punctuation">,</span> <span class="token hvariable">model</span> <span class="token operator">=</span> <span class="token hvariable">m</span><span class="token punctuation">,</span> <span class="token hvariable">year</span> <span class="token operator">=</span> <span class="token hvariable">y</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">&quot;This &quot;</span> <span class="token operator">++</span> <span class="token hvariable">c</span> <span class="token operator">++</span> <span class="token string">&quot; &quot;</span> <span class="token operator">++</span> <span class="token hvariable">m</span> <span class="token operator">++</span> <span class="token string">&quot; was made in &quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">y</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æˆ‘ä»¬ä¹‹å‰ä¹Ÿè§è¿‡ä¸€ä¸ªä½¿ç”¨ç±»å‹å‚æ•°çš„ä¾‹å­ï¼Œå°±æ˜¯ Mapï¼Œ kï¼Œ v åˆ†åˆ«æ˜¯keyå’Œvalueçš„ç±»å‹</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">data</span> <span class="token punctuation">(</span><span class="token constant">Ord</span> <span class="token hvariable">k</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">Map</span> <span class="token hvariable">k</span> <span class="token hvariable">v</span> <span class="token operator">=</span> <span class="token operator">...</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="_7-3-3-vector" tabindex="-1"><a class="header-anchor" href="#_7-3-3-vector" aria-hidden="true">#</a> 7.3.3 Vector</h4><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">data</span> <span class="token constant">Vector2</span> <span class="token hvariable">a</span> <span class="token operator">=</span> <span class="token constant">Vector2</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Show</span><span class="token punctuation">)</span>
<span class="token hvariable">vplus</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Char</span> <span class="token hvariable">t</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">Vector2</span> <span class="token hvariable">t</span> <span class="token operator">-&gt;</span> <span class="token constant">Vector2</span> <span class="token hvariable">t</span> <span class="token operator">-&gt;</span> <span class="token constant">Vector2</span> <span class="token hvariable">t</span>
<span class="token punctuation">(</span><span class="token constant">Vector2</span> <span class="token hvariable">a1</span> <span class="token hvariable">a2</span> <span class="token hvariable">a3</span><span class="token punctuation">)</span> <span class="token operator">`vplus`</span> <span class="token punctuation">(</span><span class="token constant">Vector2</span> <span class="token hvariable">b1</span> <span class="token hvariable">b2</span> <span class="token hvariable">b3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">Vector2</span> <span class="token hvariable">a1</span><span class="token operator">++</span><span class="token hvariable">b1</span> <span class="token hvariable">a2</span><span class="token operator">++</span><span class="token hvariable">b2</span> <span class="token hvariable">a3</span><span class="token operator">++</span><span class="token hvariable">b3</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_7-4-æ´¾ç”Ÿå®ä¾‹" tabindex="-1"><a class="header-anchor" href="#_7-4-æ´¾ç”Ÿå®ä¾‹" aria-hidden="true">#</a> 7.4 æ´¾ç”Ÿå®ä¾‹</h3><p><strong>Derived instances</strong></p><h4 id="_7-4-1-derive" tabindex="-1"><a class="header-anchor" href="#_7-4-1-derive" aria-hidden="true">#</a> 7.4.1 derive</h4><p>Typeclasses æ›´åƒæ˜¯æ¥å£ï¼Œ æˆ‘ä»¬ä½¿ç”¨ <code>derive</code> å…³é”®å­—å¯ä»¥è‡ªåŠ¨æ´¾ç”Ÿå‡ºè¡Œä¸º</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code>    <span class="token keyword">data</span> <span class="token constant">Person</span> <span class="token operator">=</span> <span class="token constant">Person</span> <span class="token punctuation">{</span> <span class="token hvariable">firstName</span> <span class="token operator">::</span> <span class="token constant">String</span>
                         <span class="token punctuation">,</span> <span class="token hvariable">lastName</span> <span class="token operator">::</span> <span class="token constant">String</span>
                         <span class="token punctuation">,</span> <span class="token hvariable">age</span> <span class="token operator">::</span> <span class="token constant">Int</span>
                         <span class="token punctuation">}</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Eq</span><span class="token punctuation">,</span> <span class="token constant">Show</span><span class="token punctuation">,</span> <span class="token constant">Read</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è¯¥ç±»å‹æ´¾ç”Ÿè‡ªEqï¼Œæ‰€ä»¥å®ç°äº† <code>==</code> å’Œ <code>/=</code>, è¿˜èƒ½å¤Ÿåº”ç”¨åœ¨ä»»ä½•åœ¨ç±»å‹ç­¾åä¸Šå…·æœ‰ <code>Eq a</code> çš„å‡½æ•°</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token keyword">let</span> <span class="token hvariable">mikeD</span> <span class="token operator">=</span> <span class="token constant">Person</span> <span class="token punctuation">{</span><span class="token hvariable">firstName</span> <span class="token operator">=</span> <span class="token string">&quot;Michael&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">lastName</span> <span class="token operator">=</span> <span class="token string">&quot;Diamond&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">age</span> <span class="token operator">=</span> <span class="token number">43</span><span class="token punctuation">}</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token keyword">let</span> <span class="token hvariable">adRock</span> <span class="token operator">=</span> <span class="token constant">Person</span> <span class="token punctuation">{</span><span class="token hvariable">firstName</span> <span class="token operator">=</span> <span class="token string">&quot;Adam&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">lastName</span> <span class="token operator">=</span> <span class="token string">&quot;Horovitz&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">age</span> <span class="token operator">=</span> <span class="token number">41</span><span class="token punctuation">}</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token keyword">let</span> <span class="token hvariable">mca</span> <span class="token operator">=</span> <span class="token constant">Person</span> <span class="token punctuation">{</span><span class="token hvariable">firstName</span> <span class="token operator">=</span> <span class="token string">&quot;Adam&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">lastName</span> <span class="token operator">=</span> <span class="token string">&quot;Yauch&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">age</span> <span class="token operator">=</span> <span class="token number">44</span><span class="token punctuation">}</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">mca</span> <span class="token operator">==</span> <span class="token hvariable">adRock</span>
<span class="token constant">False</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">mikeD</span> <span class="token operator">==</span> <span class="token constant">Person</span> <span class="token punctuation">{</span><span class="token hvariable">firstName</span> <span class="token operator">=</span> <span class="token string">&quot;Michael&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">lastName</span> <span class="token operator">=</span> <span class="token string">&quot;Diamond&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">age</span> <span class="token operator">=</span> <span class="token number">43</span><span class="token punctuation">}</span>
<span class="token constant">True</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Read å’Œ Showèƒ½å®ç°ç±»å‹å’Œå­—ç¬¦ä¸²é—´çš„ç›¸äº’è½¬åŒ–ï¼Œ å½“æˆ‘ä»¬ä½¿ç”¨ Read æ—¶ï¼Œéœ€è¦æŒ‡å®šç»“æœçš„ç±»å‹</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token builtin">read</span> <span class="token string">&quot;Person {firstName =\&quot;Michael\&quot;, lastName =\&quot;Diamond\&quot;, age = 43}&quot;</span> <span class="token operator">::</span> <span class="token constant">Person</span>
<span class="token constant">Person</span> <span class="token punctuation">{</span><span class="token hvariable">firstName</span> <span class="token operator">=</span> <span class="token string">&quot;Michael&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">lastName</span> <span class="token operator">=</span> <span class="token string">&quot;Diamond&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">age</span> <span class="token operator">=</span> <span class="token number">43</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å¶ä»¬ä¹Ÿèƒ½å¤Ÿè¯»å–å‚æ•°åŒ–ç±»å‹ï¼ˆparameterized typesï¼‰ï¼Œä½†æ˜¯å¿…é¡»å¡«ä¸Šç±»å‹</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- So we can&#39;t do</span>
<span class="token builtin">read</span> <span class="token string">&quot;Just &#39;t&#39;&quot;</span> <span class="token operator">::</span> <span class="token constant">Maybe</span> <span class="token hvariable">a</span>
<span class="token comment">-- but we can do</span>
<span class="token builtin">read</span> <span class="token string">&quot;Just &#39;t&#39;&quot;</span> <span class="token operator">::</span> <span class="token constant">Maybe</span> <span class="token constant">Char</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_7-4-2-å®ç°ä¸€äº›typeclasses" tabindex="-1"><a class="header-anchor" href="#_7-4-2-å®ç°ä¸€äº›typeclasses" aria-hidden="true">#</a> 7.4.2 å®ç°ä¸€äº›Typeclasses</h4><ol><li><p>Ord çš„æ¯”è¾ƒè§„åˆ™ï¼Œåœ¨å‰é¢çš„æ¯”è¾ƒå°ï¼Œä¸Charæ¯”è¾ƒæ— å…³</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">data</span> <span class="token constant">Day</span> <span class="token operator">=</span> <span class="token constant">Monday</span> <span class="token operator">|</span> <span class="token constant">Tuesday</span> <span class="token operator">|</span> <span class="token constant">Wednesday</span> <span class="token operator">|</span> <span class="token constant">Thursday</span> <span class="token operator">|</span> <span class="token constant">Friday</span> <span class="token operator">|</span> <span class="token constant">Saturday</span> <span class="token operator">|</span> <span class="token constant">Sunday</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Eq</span><span class="token punctuation">,</span> <span class="token constant">Ord</span><span class="token punctuation">,</span> <span class="token constant">Show</span><span class="token punctuation">,</span> <span class="token constant">Read</span><span class="token punctuation">,</span> <span class="token constant">Bounded</span><span class="token punctuation">,</span> <span class="token constant">Enum</span><span class="token punctuation">)</span>

<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token constant">Saturday</span> <span class="token operator">&gt;</span> <span class="token constant">Friday</span>
<span class="token constant">True</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol><h4 id="_7-4-3-ç±»å‹åŒä¹‰è¯" tabindex="-1"><a class="header-anchor" href="#_7-4-3-ç±»å‹åŒä¹‰è¯" aria-hidden="true">#</a> 7.4.3 ç±»å‹åŒä¹‰è¯</h4><p><strong>Type synonyms</strong></p><p>å°±æ˜¯æ¢ä¸ªåè€Œå·²</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- ä¸‹é¢æ˜¯Stringçš„å®šä¹‰</span>
<span class="token keyword">type</span> <span class="token constant">String</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">Char</span><span class="token punctuation">]</span>

<span class="token keyword">type</span> <span class="token constant">IntMap</span> <span class="token hvariable">v</span> <span class="token operator">=</span> <span class="token constant">Map</span> <span class="token constant">Int</span> <span class="token hvariable">v</span>
<span class="token keyword">type</span> <span class="token constant">IntMap</span> <span class="token operator">=</span> <span class="token constant">Map</span> <span class="token constant">Int</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>éœ€è¦åˆ†æ¸…ç±»å‹æ„é€ å™¨å’Œå€¼æ„é€ å™¨ï¼ˆ type constructors and value constructorsï¼‰çš„åŒºåˆ«</p><h4 id="_7-4-4-either" tabindex="-1"><a class="header-anchor" href="#_7-4-4-either" aria-hidden="true">#</a> 7.4.4 Either</h4><p>ä¸‹é¢æˆ‘ä»¬åœ¨ä»‹ç»ä¸€ç§ç±»å‹ Either</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- å®šä¹‰</span>
<span class="token keyword">data</span> <span class="token constant">Either</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span> <span class="token operator">=</span> <span class="token constant">Left</span> <span class="token hvariable">a</span> <span class="token operator">|</span> <span class="token constant">Right</span> <span class="token hvariable">b</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Eq</span><span class="token punctuation">,</span> <span class="token constant">Ord</span><span class="token punctuation">,</span> <span class="token constant">Read</span><span class="token punctuation">,</span> <span class="token constant">Show</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>So far, we&#39;ve seen that Maybe a was mostly used to represent the results of computations that could have either failed or not. But somtimes, Maybe a isn&#39;t good enough because Nothing doesn&#39;t really convey much information other than that something has failed. That&#39;s cool for functions that can fail in only one way or if we&#39;re just not interested in how and why they failed. A Data.Map lookup fails only if the key we were looking for wasn&#39;t in the map, so we know exactly what happened. However, when we&#39;re interested in how some function failed or why, we usually use the result type of Either a b, where a is some sort of type that can tell us something about the possible failure and b is the type of a successful computation. Hence, errors use the Left value constructor while results use Right.</p></blockquote><p>Maybe ä¸èƒ½æ»¡è¶³æ‰€æœ‰çš„éœ€è¦ï¼Œ Either é€šå¸¸ç”¨äºé”™è¯¯å¤„ç†ï¼Œ å·¦å€¼ä¸€èˆ¬è¡¨ç¤ºé”™è¯¯åŸå› ï¼Œ å³å€¼ä¸€èˆ¬æ˜¯æ­£ç¡®çš„ç»“æœ</p><p>ä¸‹é¢ç»™é™¤äº†ä¸€ä¸ªä¾‹å­</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token import-statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Data<span class="token punctuation">.</span>Map <span class="token keyword">as</span> Map</span>

<span class="token comment">-- declear LockerMap</span>
<span class="token keyword">data</span> <span class="token constant">LockerState</span> <span class="token operator">=</span> <span class="token constant">Taken</span> <span class="token operator">|</span> <span class="token constant">Free</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Show</span><span class="token punctuation">,</span> <span class="token constant">Eq</span><span class="token punctuation">)</span>
<span class="token keyword">type</span> <span class="token constant">Code</span> <span class="token operator">=</span> <span class="token constant">String</span>
<span class="token keyword">type</span> <span class="token constant">LockerMap</span> <span class="token operator">=</span> <span class="token constant">Map<span class="token punctuation">.</span>Map</span> <span class="token constant">Int</span> <span class="token punctuation">(</span><span class="token constant">LockerState</span><span class="token punctuation">,</span> <span class="token constant">Code</span><span class="token punctuation">)</span>

<span class="token comment">-- give a LoockerLookUp function</span>
<span class="token hvariable">lockerLookUp</span> <span class="token operator">::</span> <span class="token constant">Int</span> <span class="token operator">-&gt;</span> <span class="token constant">LockerMap</span> <span class="token operator">-&gt;</span> <span class="token constant">Either</span> <span class="token constant">String</span> <span class="token constant">Code</span>
<span class="token hvariable">lockerLookUp</span> <span class="token hvariable">lockerNum</span> <span class="token builtin">map</span> <span class="token operator">=</span> <span class="token keyword">case</span> <span class="token constant">Map</span><span class="token punctuation">.</span><span class="token builtin">lookup</span> <span class="token hvariable">lockerNum</span> <span class="token builtin">map</span> <span class="token keyword">of</span>
        <span class="token constant">Nothing</span>  <span class="token operator">-&gt;</span> <span class="token constant">Left</span> <span class="token operator">$</span> <span class="token string">&quot;Locker Number&quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">lockerNum</span> <span class="token operator">++</span> <span class="token string">&quot;doesn&#39;t exist&quot;</span>
        <span class="token constant">Just</span> <span class="token punctuation">(</span><span class="token hvariable">lockerState</span><span class="token punctuation">,</span> <span class="token hvariable">code</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">if</span> <span class="token hvariable">lockerState</span> <span class="token operator">==</span> <span class="token constant">Taken</span>
                                 <span class="token keyword">then</span> <span class="token constant">Left</span> <span class="token operator">$</span> <span class="token string">&quot;Locker Number&quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">lockerNum</span> <span class="token operator">++</span> <span class="token string">&quot;is already taken!&quot;</span>
                                 <span class="token keyword">else</span> <span class="token constant">Right</span> <span class="token hvariable">code</span>

<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
    <span class="token keyword">let</span> <span class="token hvariable">lockers</span> <span class="token operator">=</span> <span class="token hvariable">Map<span class="token punctuation">.</span>fromList</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token constant">Taken</span><span class="token punctuation">,</span> <span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token constant">Free</span><span class="token punctuation">,</span> <span class="token string">&quot;bbb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token constant">Taken</span><span class="token punctuation">,</span> <span class="token string">&quot;ccc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token builtin">print</span> <span class="token operator">$</span> <span class="token hvariable">lockerLookUp</span> <span class="token number">1</span> <span class="token hvariable">lockers</span>
    <span class="token builtin">print</span> <span class="token operator">$</span> <span class="token hvariable">lockerLookUp</span> <span class="token number">2</span> <span class="token hvariable">lockers</span>
    <span class="token builtin">print</span> <span class="token operator">$</span> <span class="token hvariable">lockerLookUp</span> <span class="token number">3</span> <span class="token hvariable">lockers</span>
    <span class="token builtin">print</span> <span class="token operator">$</span> <span class="token hvariable">lockerLookUp</span> <span class="token number">4</span> <span class="token hvariable">lockers</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="_7-4-5-é€’å½’" tabindex="-1"><a class="header-anchor" href="#_7-4-5-é€’å½’" aria-hidden="true">#</a> 7.4.5 é€’å½’</h4><p>ä¸‹é¢çš„ä¾‹å­å®ç°äº†ä¸€ä¸ªList å’Œä¸€ä¸ª Tree</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">infixr</span> <span class="token number">5</span> <span class="token operator">:-:</span>
<span class="token keyword">data</span> <span class="token constant">List</span> <span class="token hvariable">a</span> <span class="token operator">=</span> <span class="token constant">Empty</span> <span class="token operator">|</span> <span class="token hvariable">a</span> <span class="token operator">:-:</span> <span class="token punctuation">(</span><span class="token constant">List</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Show</span><span class="token punctuation">,</span> <span class="token constant">Read</span><span class="token punctuation">,</span> <span class="token constant">Ord</span><span class="token punctuation">,</span> <span class="token constant">Eq</span><span class="token punctuation">)</span>
<span class="token comment">-- æˆ–è€…æ˜¯record syntex</span>
<span class="token comment">-- data Lsit = Empty | Cons {listHead :: a, listTail :: List a} deriving (Show, Read, Eq, Ord)</span>

<span class="token comment">-- infixr 5 ++</span>
<span class="token comment">-- (++) :: [a] -&gt; [a] -&gt; [a]</span>
<span class="token comment">-- [] ++ ys = ys</span>
<span class="token comment">-- (x:xs) ++ ys = x:(xs ++ ys)</span>
<span class="token keyword">infixr</span> <span class="token number">5</span> <span class="token operator">.++</span>
<span class="token punctuation">(</span><span class="token operator">.++</span><span class="token punctuation">)</span> <span class="token operator">::</span> <span class="token constant">List</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">List</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">List</span> <span class="token hvariable">a</span>
<span class="token constant">Empty</span> <span class="token operator">.++</span> <span class="token hvariable">ys</span> <span class="token operator">=</span> <span class="token hvariable">ys</span>
<span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">:-:</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token operator">.++</span> <span class="token hvariable">ys</span> <span class="token operator">=</span> <span class="token hvariable">x</span> <span class="token operator">:-:</span> <span class="token punctuation">(</span><span class="token hvariable">xs</span> <span class="token operator">.++</span> <span class="token hvariable">ys</span><span class="token punctuation">)</span>

<span class="token keyword">data</span> <span class="token constant">Tree</span> <span class="token hvariable">a</span> <span class="token operator">=</span> <span class="token constant">EmptyTree</span> <span class="token operator">|</span> <span class="token constant">Node</span> <span class="token hvariable">a</span> <span class="token punctuation">(</span><span class="token constant">Tree</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">Tree</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Show</span><span class="token punctuation">,</span> <span class="token constant">Read</span><span class="token punctuation">,</span> <span class="token constant">Eq</span><span class="token punctuation">,</span> <span class="token constant">Ord</span><span class="token punctuation">)</span>

<span class="token hvariable">singleton</span> <span class="token operator">::</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Tree</span> <span class="token hvariable">a</span>
<span class="token hvariable">singleton</span> <span class="token hvariable">x</span> <span class="token operator">=</span> <span class="token constant">Node</span> <span class="token hvariable">x</span> <span class="token constant">EmptyTree</span> <span class="token constant">EmptyTree</span>

<span class="token hvariable">treeInsert</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Ord</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Tree</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Tree</span> <span class="token hvariable">a</span>
<span class="token hvariable">treeInsert</span> <span class="token hvariable">x</span> <span class="token constant">EmptyTree</span> <span class="token operator">=</span> <span class="token hvariable">singleton</span> <span class="token hvariable">x</span>
<span class="token hvariable">treeInsert</span> <span class="token hvariable">x</span> <span class="token punctuation">(</span><span class="token constant">Node</span> <span class="token hvariable">a</span> <span class="token hvariable">left</span> <span class="token hvariable">right</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">==</span> <span class="token hvariable">a</span> <span class="token operator">=</span> <span class="token constant">Node</span> <span class="token hvariable">x</span> <span class="token hvariable">left</span> <span class="token hvariable">right</span>
    <span class="token operator">|</span> <span class="token hvariable">x</span>  <span class="token operator">&lt;</span> <span class="token hvariable">a</span> <span class="token operator">=</span> <span class="token constant">Node</span> <span class="token hvariable">a</span> <span class="token punctuation">(</span><span class="token hvariable">treeInsert</span> <span class="token hvariable">x</span> <span class="token hvariable">left</span><span class="token punctuation">)</span> <span class="token hvariable">right</span>
    <span class="token operator">|</span> <span class="token hvariable">x</span>  <span class="token operator">&gt;</span> <span class="token hvariable">a</span> <span class="token operator">=</span> <span class="token constant">Node</span> <span class="token hvariable">a</span> <span class="token hvariable">left</span> <span class="token punctuation">(</span><span class="token hvariable">treeInsert</span> <span class="token hvariable">x</span> <span class="token hvariable">right</span><span class="token punctuation">)</span>

<span class="token hvariable">treeElem</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Ord</span><span class="token punctuation">)</span> <span class="token hvariable">a</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Tree</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Bool</span>
<span class="token hvariable">treeElem</span> <span class="token hvariable">x</span> <span class="token constant">EmptyTree</span> <span class="token operator">=</span> <span class="token constant">False</span>
<span class="token hvariable">treeElem</span> <span class="token hvariable">x</span> <span class="token punctuation">(</span><span class="token constant">Node</span> <span class="token hvariable">a</span> <span class="token hvariable">left</span> <span class="token hvariable">right</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">==</span> <span class="token hvariable">a</span> <span class="token operator">=</span> <span class="token constant">True</span>
    <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;</span> <span class="token hvariable">a</span> <span class="token operator">=</span> <span class="token hvariable">treeElem</span> <span class="token hvariable">x</span> <span class="token hvariable">left</span>
    <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&gt;</span> <span class="token hvariable">a</span> <span class="token operator">=</span> <span class="token hvariable">treeElem</span> <span class="token hvariable">x</span> <span class="token hvariable">right</span>


<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
    <span class="token builtin">putStrLn</span> <span class="token string">&quot;start...&quot;</span>
    <span class="token keyword">let</span> <span class="token hvariable">a</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">:-:</span> <span class="token number">4</span> <span class="token operator">:-:</span> <span class="token number">5</span> <span class="token operator">:-:</span> <span class="token constant">Empty</span>
    <span class="token builtin">print</span> <span class="token hvariable">a</span>
    <span class="token keyword">let</span> <span class="token hvariable">b</span> <span class="token operator">=</span> <span class="token number">6</span> <span class="token operator">:-:</span> <span class="token number">7</span> <span class="token operator">:-:</span> <span class="token constant">Empty</span>
    <span class="token builtin">print</span><span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">.++</span> <span class="token hvariable">b</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> <span class="token hvariable">nums</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
    <span class="token keyword">let</span> <span class="token hvariable">numsTree</span> <span class="token operator">=</span> <span class="token builtin">foldr</span> <span class="token hvariable">treeInsert</span> <span class="token constant">EmptyTree</span> <span class="token hvariable">nums</span>
    <span class="token builtin">print</span> <span class="token hvariable">numsTree</span>
    <span class="token builtin">print</span> <span class="token operator">$</span> <span class="token hvariable">treeElem</span> <span class="token number">4</span> <span class="token hvariable">numsTree</span>
    <span class="token builtin">putStrLn</span> <span class="token string">&quot;end...&quot;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h4 id="_7-4-6-typeclasses-102" tabindex="-1"><a class="header-anchor" href="#_7-4-6-typeclasses-102" aria-hidden="true">#</a> 7.4.6 Typeclasses 102</h4><blockquote><p>A quick recap on typeclasses: typeclasses are like interfaces. A typeclass defines some behavior (like comparing for equality, comparing for ordering, enumeration) and then types that can behave in that way are made instances of that typeclass. The behavior of typeclasses is achieved by defining functions or just type declarations that we then implement. So when we say that a type is an instance of a typeclass, we mean that we can use the functions that the typeclass defines with that type.</p></blockquote><p>å¯¹typeclassesçš„ç®€è¦å›é¡¾ï¼štypeclasseså°±åƒæ¥å£ã€‚ä¸€ä¸ªtypeclasseså®šä¹‰äº†ä¸€äº›è¡Œä¸ºï¼ˆæ¯”å¦‚æ¯”è¾ƒï¼Œæ’åºï¼‰ï¼Œå¯ä»¥å®ç°è¿™äº›è¡Œä¸ºçš„ç±»å‹å°±æ˜¯è¿™äº›typeclassçš„å®ä¾‹ï¼Œé€šè¿‡å®šä¹‰å‡½æ•°æˆ–è€…å£°æ˜å»å®ç°è¿™äº›è¡Œä¸ºï¼Œå› æ­¤ï¼Œå½“æˆ‘ä»¬è¯´ç±»å‹æ˜¯ç±»å‹çš„ä¸€ä¸ªç±»å‹çš„å®ä¾‹æ—¶ï¼Œæˆ‘ä»¬çš„æ„æ€æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨TypeClasså®šä¹‰è¯¥ç±»å‹çš„å‡½æ•°ã€‚</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- ä½¿ç”¨ :info Num å¯ä»¥æŸ¥çœ‹ typeclasså®šä¹‰</span>
<span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">info</span> <span class="token constant">Num</span>
<span class="token keyword">type</span> <span class="token constant">Num</span> <span class="token operator">::</span> <span class="token operator">*</span> <span class="token operator">-&gt;</span> <span class="token constant">Constraint</span>
<span class="token keyword">class</span> <span class="token constant">Num</span> <span class="token hvariable">a</span> <span class="token keyword">where</span>
  <span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token operator">::</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
  <span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">)</span> <span class="token operator">::</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
  <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">::</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
  <span class="token builtin">negate</span> <span class="token operator">::</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
  <span class="token builtin">abs</span> <span class="token operator">::</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
  <span class="token builtin">signum</span> <span class="token operator">::</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
  <span class="token builtin">fromInteger</span> <span class="token operator">::</span> <span class="token constant">Integer</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
  <span class="token comment">{-# MINIMAL (+), (*), abs, signum, fromInteger, (negate | (-)) #-}</span>
        <span class="token comment">-- Defined in â€˜GHC.Numâ€™</span>
<span class="token keyword">instance</span> <span class="token constant">Num</span> <span class="token constant">Word</span> <span class="token comment">-- Defined in â€˜GHC.Numâ€™</span>
<span class="token keyword">instance</span> <span class="token constant">Num</span> <span class="token constant">Integer</span> <span class="token comment">-- Defined in â€˜GHC.Numâ€™</span>
<span class="token keyword">instance</span> <span class="token constant">Num</span> <span class="token constant">Int</span> <span class="token comment">-- Defined in â€˜GHC.Numâ€™</span>
<span class="token keyword">instance</span> <span class="token constant">Num</span> <span class="token constant">Float</span> <span class="token comment">-- Defined in â€˜GHC.Floatâ€™</span>
<span class="token keyword">instance</span> <span class="token constant">Num</span> <span class="token constant">Double</span> <span class="token comment">-- Defined in â€˜GHC.Floatâ€™</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>1. å®šä¹‰typeclasses</strong></p><p>ä¸‹é¢æ˜¯Eqåœ¨æ ‡å‡†åº“çš„å®šä¹‰</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">class</span> <span class="token constant">Eq</span> <span class="token hvariable">a</span> <span class="token keyword">where</span>
    <span class="token punctuation">(</span><span class="token operator">==</span><span class="token punctuation">)</span> <span class="token operator">::</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Bool</span>
    <span class="token punctuation">(</span><span class="token operator">/=</span><span class="token punctuation">)</span> <span class="token operator">::</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Bool</span>
    <span class="token hvariable">x</span> <span class="token operator">==</span> <span class="token hvariable">y</span> <span class="token operator">=</span> <span class="token builtin">not</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">/=</span> <span class="token hvariable">y</span><span class="token punctuation">)</span>
    <span class="token hvariable">x</span> <span class="token operator">/=</span> <span class="token hvariable">y</span> <span class="token operator">=</span> <span class="token builtin">not</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">==</span> <span class="token hvariable">y</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>classå®šä¹‰äº†ä¸€ä¸ªtypeclassï¼Œ Eqæ˜¯åå­—ï¼Œ aæ˜¯å®ä¾‹ï¼Œaåªè¦æ˜¯ä¸€ä¸ªå°å†™çš„å•è¯å°±è¡Œ</p><p>æ¥ç€æˆ‘ä»¬å®šä¹‰äº†ä¸€äº›å‡½æ•°ï¼Œåœ¨classé‡Œå®ç°å‡½æ•°ä¸æ˜¯å¼ºåˆ¶çš„ï¼Œåªéœ€è¦ä¸€ä¸ªå®šä¹‰å°±å¤Ÿäº†</p><blockquote><p>Some people might understand this better if we wrote class Eq equatable where and then specified the type declarations like <code>(==) :: equatable -&gt; equatable -&gt; Bool</code>.</p><p>è¿™ç§å†™æ³•å¯èƒ½æ›´å¥½ç†è§£ï¼š<code>(==) :: equatable -&gt; equatable -&gt; Bool</code></p></blockquote><blockquote><p>If we have say class Eq a where and then define a type declaration within that class like (==) :: a -&gt; -a -&gt; Bool, then when we examine the type of that function later on, it will have the type of <code>(Eq a) =&gt; a -&gt; a -&gt; Bool</code>.</p><p>å½“æˆ‘ä»¬åœ¨classä¸­å®šä¹‰è¿™ä¸ªå‡½æ•°åï¼Œåœ¨æŸ¥çœ‹è¿™ä¸ªå‡½æ•°çš„ç±»å‹æ—¶ï¼Œå°±ä¼šæ˜¾ç¤ºå‡ºtypeclasses</p></blockquote><p><strong>2. å®ç° typeclass</strong></p><p>ä¸‹é¢æˆ‘ä»¬å®ç°ä¸€ä¸ª <code>TrafficLight</code></p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">data</span> <span class="token constant">TrafficLight</span> <span class="token operator">=</span> <span class="token constant">Red</span> <span class="token operator">|</span> <span class="token constant">Yellow</span> <span class="token operator">|</span> <span class="token constant">Green</span>
<span class="token comment">-- å®ç°æ¯”è¾ƒ</span>
<span class="token keyword">instance</span> <span class="token constant">Eq</span> <span class="token constant">TrafficLight</span> <span class="token keyword">where</span>
    <span class="token constant">Red</span> <span class="token operator">==</span> <span class="token constant">Red</span> <span class="token operator">=</span> <span class="token constant">True</span>
    <span class="token constant">Green</span> <span class="token operator">==</span> <span class="token constant">Green</span> <span class="token operator">=</span> <span class="token constant">True</span>
    <span class="token constant">Yellow</span> <span class="token operator">==</span> <span class="token constant">Yellow</span> <span class="token operator">=</span> <span class="token constant">True</span>
    <span class="token hvariable">_</span> <span class="token operator">==</span> <span class="token hvariable">_</span> <span class="token operator">=</span> <span class="token constant">False</span>
<span class="token comment">-- æ‰‹åŠ¨å®ç°å­—ç¬¦ä¸²è½¬æ¢</span>
<span class="token keyword">instance</span> <span class="token constant">Show</span> <span class="token constant">TrafficLight</span> <span class="token keyword">where</span>
    <span class="token builtin">show</span> <span class="token constant">Red</span> <span class="token operator">=</span> <span class="token string">&quot;Red light&quot;</span>
    <span class="token builtin">show</span> <span class="token constant">Yellow</span> <span class="token operator">=</span> <span class="token string">&quot;Yellow light&quot;</span>
    <span class="token builtin">show</span> <span class="token constant">Green</span> <span class="token operator">=</span> <span class="token string">&quot;Green light&quot;</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
    <span class="token builtin">putStrLn</span> <span class="token string">&quot;start...&quot;</span>
    <span class="token builtin">print</span> <span class="token operator">$</span> <span class="token constant">Red</span> <span class="token operator">==</span> <span class="token constant">Red</span>
    <span class="token builtin">print</span> <span class="token operator">$</span> <span class="token builtin">show</span> <span class="token punctuation">[</span><span class="token constant">Red</span><span class="token punctuation">,</span> <span class="token constant">Yellow</span><span class="token punctuation">,</span> <span class="token constant">Green</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>3. subtypeclasses</strong></p><p>ä¸‹é¢æ˜¯ Num åœ¨æ ‡å‡†åº“ä¸­çš„å®šä¹‰ï¼ˆç¬¬ä¸€è¡Œï¼‰</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">class</span> <span class="token punctuation">(</span><span class="token constant">Eq</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">Num</span> <span class="token hvariable">a</span> <span class="token keyword">where</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>åœ¨å®ç°Numå‰ï¼Œå¿…é¡»ä¿è¯ a å®ç°äº† Eq</p><p><strong>å¯¹äºå¤šæ€ç±»å‹</strong></p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">instance</span> <span class="token constant">Eq</span> <span class="token punctuation">(</span><span class="token constant">Maybe</span> <span class="token hvariable">m</span><span class="token punctuation">)</span> <span class="token keyword">where</span>
    <span class="token constant">Just</span> <span class="token hvariable">x</span> <span class="token operator">==</span> <span class="token constant">Just</span> <span class="token hvariable">y</span> <span class="token operator">=</span> <span class="token hvariable">x</span> <span class="token operator">==</span> <span class="token hvariable">y</span>
    <span class="token constant">Nothing</span> <span class="token operator">==</span> <span class="token constant">Nothing</span> <span class="token operator">=</span> <span class="token constant">True</span>
    <span class="token hvariable">_</span> <span class="token operator">==</span> <span class="token hvariable">_</span> <span class="token operator">=</span> <span class="token constant">False</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä¸Šé¢çš„ä¾‹å­å¥½åƒè§£å†³äº†é—®é¢˜ï¼Œ ä½†æ˜¯ä¸èƒ½ç¡®å®š m çš„ç±»å‹å®ç°äº† Eqï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä¿®æ”¹ä¸Šé¢çš„å£°æ˜ï¼š</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">instance</span> <span class="token punctuation">(</span><span class="token constant">Eq</span> <span class="token hvariable">m</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">Eq</span> <span class="token punctuation">(</span><span class="token constant">Maybe</span> <span class="token hvariable">m</span><span class="token punctuation">)</span> <span class="token keyword">where</span>
	<span class="token constant">Just</span> <span class="token hvariable">x</span> <span class="token operator">==</span> <span class="token constant">Just</span> <span class="token hvariable">y</span> <span class="token operator">=</span> <span class="token hvariable">x</span> <span class="token operator">==</span> <span class="token hvariable">y</span>
	<span class="token constant">Nothing</span> <span class="token operator">==</span> <span class="token constant">Nothing</span> <span class="token operator">=</span> <span class="token constant">True</span>
	<span class="token hvariable">_</span> <span class="token operator">==</span> <span class="token hvariable">_</span> <span class="token operator">=</span> <span class="token constant">False</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è¿™æ¬¡æˆ‘ä»¬å¢åŠ äº†ä¸€ä¸ªç±»å‹é™å®šï¼Œæˆ‘ä»¬é™å®šäº†æ‰€æœ‰Maybe mç±»å‹éƒ½æ˜¯Eqï¼Œé™¤é m ä¹Ÿæ˜¯ Eq</p><p>ğŸ</p><blockquote><p>Take into account that the type you&#39;re trying to make an instance of will replace the parameter in the <em>class</em> declaration. The a from class Eq a where will be replaced with a real type when you make an instance, so try mentally putting your type into the function type declarations as well. (==) :: Maybe -&gt; Maybe -&gt; Bool doesn&#39;t make much sense but (==) :: (Eq m) =&gt; Maybe m -&gt; Maybe m -&gt; Bool does. But this is just something to think about, because == will always have a type of (==) :: (Eq a) =&gt; a -&gt; a -&gt; Bool, no matter what instances we make.</p><p>ä¸€å®šè¦ æ³¨æ„ &#39;a&#39; åœ¨å®ç°æ—¶éœ€è¦è¢«æ›¿æ¢ä¸ºconcrete type</p></blockquote><p><strong>4. å®ç°ä¸€ä¸ªç©å…·</strong></p><p>åœ¨ js ä¸­ï¼Œä»»ä½•éç©ºç±»å‹éƒ½è¢«å½“æˆæ˜¯ true</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;YEAH!&quot;</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;NO!&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token function">alert</span> <span class="token punctuation">(</span><span class="token string">&quot;YEAH!&quot;</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;NO!&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;YEAH&quot;</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token function">alert</span><span class="token punctuation">(</span>&quot;<span class="token constant">NO</span><span class="token operator">!</span><span class="token punctuation">)</span>
<span class="token comment">//etc. and all of these will throw an alert of NO!. If you do</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;WHAT&quot;</span><span class="token punctuation">)</span> <span class="token function">alert</span> <span class="token punctuation">(</span><span class="token string">&quot;YEAH&quot;</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;NO!&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// it will alert a &quot;YEAH!&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><em>A yesno typeclass</em></p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">class</span> <span class="token constant">YesNo</span> <span class="token hvariable">a</span> <span class="token keyword">where</span>
    <span class="token hvariable">yesno</span> <span class="token operator">::</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Bool</span>

<span class="token keyword">instance</span> <span class="token constant">YesNo</span> <span class="token constant">Int</span> <span class="token keyword">where</span>
    <span class="token hvariable">yesno</span> <span class="token number">0</span> <span class="token operator">=</span> <span class="token constant">False</span>
    <span class="token hvariable">yesno</span> <span class="token hvariable">_</span> <span class="token operator">=</span> <span class="token constant">True</span>

<span class="token keyword">instance</span> <span class="token constant">YesNo</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token keyword">where</span>
    <span class="token hvariable">yesno</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">False</span>
    <span class="token hvariable">yesno</span> <span class="token hvariable">_</span> <span class="token operator">=</span> <span class="token constant">True</span>

<span class="token comment">-- Bool ä¹Ÿä¸è¦å¿˜äº†</span>
<span class="token keyword">instance</span> <span class="token constant">YesNo</span> <span class="token constant">Bool</span> <span class="token keyword">where</span>
    <span class="token hvariable">yesno</span> <span class="token operator">=</span> <span class="token builtin">id</span>

<span class="token comment">-- å› ä¸ºæˆ‘ä»¬å¹¶ä¸å…³å¿ƒMaybe åŒ…å«ä»€ä¹ˆç±»å‹ï¼Œåªè¦ä»–æœ‰ä¸œè¥¿å°±è¡Œäº†ï¼Œæ‰€ä»¥æ²¡æœ‰åŠ ç±»å‹é™å®š</span>
<span class="token keyword">instance</span> <span class="token constant">YesNo</span> <span class="token punctuation">(</span><span class="token constant">Maybe</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token keyword">where</span>
    <span class="token hvariable">yesno</span> <span class="token punctuation">(</span><span class="token constant">Just</span> <span class="token hvariable">_</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">True</span>
    <span class="token hvariable">yesno</span> <span class="token constant">Nothing</span> <span class="token operator">=</span> <span class="token constant">False</span>

<span class="token comment">-- ä»¿ç…§ç€å†™ä¸€ä¸ª if</span>
<span class="token hvariable">yesnoIf</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">YesNo</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span>
<span class="token hvariable">yesnoIf</span> <span class="token hvariable">a</span> <span class="token hvariable">onyes</span> <span class="token hvariable">onno</span> <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token hvariable">yesno</span> <span class="token hvariable">a</span> <span class="token keyword">then</span> <span class="token hvariable">onyes</span> <span class="token keyword">else</span> <span class="token hvariable">onno</span>

<span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
    <span class="token builtin">putStrLn</span> <span class="token string">&quot;start...&quot;</span>
    <span class="token builtin">print</span> <span class="token operator">$</span> <span class="token builtin">length</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token builtin">print</span> <span class="token operator">$</span> <span class="token hvariable">yesno</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token builtin">print</span> <span class="token operator">$</span> <span class="token hvariable">yesno</span> <span class="token constant">Nothing</span>
    <span class="token builtin">print</span> <span class="token operator">$</span> <span class="token hvariable">yesno</span> <span class="token constant">True</span>
    <span class="token builtin">putStrLn</span> <span class="token operator">$</span> <span class="token hvariable">yesnoIf</span> <span class="token punctuation">(</span><span class="token constant">Just</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;yes !&quot;</span> <span class="token string">&quot;No -_-&quot;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h4 id="_7-4-7-functor-å’Œ-kinds" tabindex="-1"><a class="header-anchor" href="#_7-4-7-functor-å’Œ-kinds" aria-hidden="true">#</a> 7.4.7 Functor å’Œ Kinds</h4><p><strong>1. ä»€ä¹ˆæ˜¯ Kind</strong></p><blockquote><p>We used :k on a type to get its kind, just like we can use :t on a value to get its type. Like we said, types are the labels of values and kinds are the labels of types and there are parallels between the two.</p></blockquote><p>æˆ‘ä»¬èƒ½ç”¨ <code>:t</code> æŸ¥çœ‹ä¸€ä¸ªå€¼(value)çš„ç±»å‹(type)</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- &#39;=&gt;&#39;æ˜¯ç±»å‹é™å®š !!!</span>
<span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">t</span> <span class="token number">1</span>
<span class="token number">1</span> <span class="token operator">::</span> <span class="token constant">Num</span> <span class="token hvariable">p</span> <span class="token operator">=&gt;</span> <span class="token hvariable">p</span>

<span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">t</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">::</span> <span class="token constant">Num</span> <span class="token hvariable">a</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span>

<span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">t</span> <span class="token constant">Just</span> <span class="token number">1</span>
<span class="token constant">Just</span> <span class="token number">1</span> <span class="token operator">::</span> <span class="token constant">Num</span> <span class="token hvariable">a</span> <span class="token operator">=&gt;</span> <span class="token constant">Maybe</span> <span class="token hvariable">a</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä¹Ÿèƒ½ç”¨ <code>:k</code> æŸ¥çœ‹ä¸€ä¸ªç±»å‹(type)çš„Kind</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">k</span> <span class="token constant">Int</span>
<span class="token constant">Int</span> <span class="token operator">::</span> <span class="token operator">*</span>

<span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">k</span> <span class="token constant">Num</span>
<span class="token constant">Num</span> <span class="token operator">::</span> <span class="token operator">*</span> <span class="token operator">-&gt;</span> <span class="token constant">Constraint</span>

<span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">k</span> <span class="token constant">Maybe</span>
<span class="token constant">Maybe</span> <span class="token operator">::</span> <span class="token operator">*</span> <span class="token operator">-&gt;</span> <span class="token operator">*</span>

<span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">k</span> <span class="token constant">Either</span>
<span class="token constant">Either</span> <span class="token operator">::</span> <span class="token operator">*</span> <span class="token operator">-&gt;</span> <span class="token operator">*</span> <span class="token operator">-&gt;</span> <span class="token operator">*</span>

<span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">k</span> <span class="token constant">Functor</span>
<span class="token constant">Functor</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token operator">*</span> <span class="token operator">-&gt;</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token constant">Constraint</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>&#39;*&#39; æ˜¯ä»€ä¹ˆ</strong></p><blockquote><p>A * means that the type is a concrete type. A concrete type is a type that doesn&#39;t take any type parameters and values can only have types that are concrete types. If I had to read * out loud (I haven&#39;t had to do that so far), I&#39;d say <em>star</em> or just <em>type</em>.</p></blockquote><p><code>*</code> å°±æ˜¯ä¸€ä¸ªå›ºå®šçš„ç±»å‹, ä¸èƒ½æºå¸¦Type parameter</p><p><code>* -&gt; *</code> å°±æ˜¯æ¥å—ä¸€ä¸ªtype parameter, è¿”å›ä¸€ä¸ªç±»å‹, æ¯”å¦‚ Maybe å’Œ Maybe Int</p><p><code>* -&gt; * -&gt; *</code> åŒç†</p><p>æ‰€ä»¥Functorçš„ç±»å‹å°±å¥½ç†è§£äº†</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">class</span> <span class="token constant">Functor</span> <span class="token hvariable">f</span> <span class="token keyword">where</span>
    <span class="token builtin">fmap</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token hvariable">f</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">f</span> <span class="token hvariable">b</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2. ä»€ä¹ˆæ˜¯Functor</strong></p><p>çœ‹ä¸€çœ¼fmapçš„å®šä¹‰, å®ç°äº†Functorçš„ç±»å‹,fmap èƒ½å¤ŸæŠŠè¿™äº›ç±»å‹<em>é‡Œé¢</em>çš„ä¸œè¥¿è½¬æ¢åˆ°å¦ä¸€ç§ä¸œè¥¿, å°±æ˜¯è¯´fmapåªä½œç”¨äºboxé‡Œé¢çš„ä¸œè¥¿</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">class</span> <span class="token constant">Functor</span> <span class="token hvariable">f</span> <span class="token keyword">where</span>
    <span class="token builtin">fmap</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token hvariable">f</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">f</span> <span class="token hvariable">b</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è¿™ä¸ªæ˜¯mapçš„å®šä¹‰</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token builtin">map</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">b</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>mapå°±æ˜¯ç‰¹æ®ŠåŒ–çš„ fmap ,åªèƒ½ç”¨äº [],ä¸èƒ½ç”¨äº Maybe, Ehtherç­‰ç±»å‹</p><blockquote><p>anything like a box that can hold something can impl Functor, lsuch as Maybe, [], Tree = Empty | Tree a left rght, Either</p></blockquote><p>æ‰€æœ‰èƒ½å¤Ÿæ‰¿è½½å…¶ä»–ç±»å‹çš„ä¸œè¥¿éƒ½èƒ½å®ç°Functor,æ¯”å¦‚Maybe, [], Tree, Either</p><p>ä¸‹é¢æ˜¯å…³äºEitherçš„Functorå®ç°</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">instance</span> <span class="token constant">Functor</span> <span class="token punctuation">(</span><span class="token constant">Either</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token keyword">where</span>
    <span class="token builtin">fmap</span> <span class="token hvariable">f</span> <span class="token punctuation">(</span><span class="token constant">Right</span> <span class="token hvariable">x</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">Right</span> <span class="token punctuation">(</span><span class="token hvariable">f</span> <span class="token hvariable">x</span><span class="token punctuation">)</span>
    <span class="token builtin">fmap</span> <span class="token hvariable">f</span> <span class="token punctuation">(</span><span class="token constant">Left</span> <span class="token hvariable">x</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">Left</span> <span class="token hvariable">x</span>
<span class="token comment">-- (b -&gt; c) -&gt; Either a b -&gt; Ether a c</span>
<span class="token comment">-- å’Œä¸‹é¢çš„ä¸€æ ·</span>
<span class="token comment">-- (b -&gt; c) -&gt; (Either a) b -&gt; (Either a) c</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>-- in this case, we only mapped the right value constructor, -- well, if we look at the define of Either: -- data Either a b = Left a | Right b -- we can&#39;t make sure f can handle both type a and type b -- Another example is Map.Map, where fmap just map a function v -&gt; v&#39; over a Map k v, and return Map k v&#39;</p></blockquote><p>åœ¨è¿™ä¸ªä¾‹å­é‡Œ,æˆ‘ä»¬åªmapäº†Eitherçš„å³å€¼,å› ä¸ºä¸èƒ½ä¿è¯Either a bçš„ç±»å‹ç›¸åŒ, Map.Mapä¹Ÿæ˜¯,åªæœ‰valueæ”¹å˜</p><p><strong>3. å®ç°ä¸€ä¸ª Tofu</strong></p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">class</span> <span class="token constant">Tofu</span> <span class="token hvariable">t</span> <span class="token keyword">where</span>
    <span class="token hvariable">tofu</span> <span class="token operator">::</span> <span class="token hvariable">j</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">t</span> <span class="token hvariable">a</span> <span class="token hvariable">j</span>

<span class="token keyword">data</span> <span class="token constant">Frank</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span> <span class="token operator">=</span> <span class="token constant">Frank</span> <span class="token punctuation">{</span><span class="token hvariable">frankField</span> <span class="token operator">::</span> <span class="token hvariable">b</span> <span class="token hvariable">a</span><span class="token punctuation">}</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Show</span><span class="token punctuation">)</span>

<span class="token keyword">instance</span> <span class="token constant">Tofu</span> <span class="token constant">Frank</span> <span class="token keyword">where</span>
    <span class="token hvariable">tofu</span> <span class="token hvariable">x</span> <span class="token operator">=</span> <span class="token constant">Frank</span> <span class="token hvariable">x</span>

<span class="token keyword">data</span> <span class="token constant">Barry</span> <span class="token hvariable">t</span> <span class="token hvariable">k</span> <span class="token hvariable">p</span> <span class="token operator">=</span> <span class="token constant">Barry</span> <span class="token punctuation">{</span> <span class="token hvariable">yabba</span> <span class="token operator">::</span> <span class="token hvariable">p</span><span class="token punctuation">,</span> <span class="token hvariable">dabba</span> <span class="token operator">::</span> <span class="token hvariable">t</span> <span class="token hvariable">k</span> <span class="token punctuation">}</span>

<span class="token keyword">instance</span> <span class="token constant">Functor</span> <span class="token punctuation">(</span><span class="token constant">Barry</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token keyword">where</span>
    <span class="token builtin">fmap</span> <span class="token hvariable">f</span> <span class="token punctuation">(</span><span class="token constant">Barry</span> <span class="token punctuation">{</span> <span class="token hvariable">yabba</span> <span class="token operator">=</span> <span class="token hvariable">x</span><span class="token punctuation">,</span> <span class="token hvariable">dabba</span> <span class="token operator">=</span> <span class="token hvariable">y</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">Barry</span> <span class="token punctuation">{</span><span class="token hvariable">yabba</span> <span class="token operator">=</span> <span class="token hvariable">f</span> <span class="token hvariable">x</span><span class="token punctuation">,</span> <span class="token hvariable">dabba</span> <span class="token operator">=</span> <span class="token hvariable">y</span> <span class="token punctuation">}</span>

<span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
    <span class="token keyword">let</span> <span class="token hvariable">a</span> <span class="token operator">=</span> <span class="token constant">Frank</span> <span class="token punctuation">{</span> <span class="token hvariable">frankField</span> <span class="token operator">=</span> <span class="token constant">Just</span> <span class="token char string">&#39;c&#39;</span> <span class="token punctuation">}</span>
    <span class="token builtin">print</span> <span class="token hvariable">a</span>
    <span class="token keyword">let</span> <span class="token hvariable">b</span> <span class="token operator">=</span> <span class="token hvariable">tofu</span> <span class="token punctuation">(</span><span class="token constant">Just</span> <span class="token char string">&#39;a&#39;</span><span class="token punctuation">)</span> <span class="token operator">::</span> <span class="token constant">Frank</span> <span class="token constant">Char</span> <span class="token constant">Maybe</span>
    <span class="token builtin">print</span> <span class="token hvariable">b</span>
    <span class="token keyword">let</span> <span class="token hvariable">c</span> <span class="token operator">=</span> <span class="token hvariable">tofu</span> <span class="token punctuation">[</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">]</span> <span class="token operator">::</span> <span class="token constant">Frank</span> <span class="token punctuation">[</span><span class="token constant">Char</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token builtin">print</span> <span class="token hvariable">c</span>
    <span class="token builtin">putStrLn</span> <span class="token string">&quot;start...&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="_8-io" tabindex="-1"><a class="header-anchor" href="#_8-io" aria-hidden="true">#</a> 8. IO</h2><h3 id="_8-1-cmd-å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_8-1-cmd-å‚æ•°" aria-hidden="true">#</a> 8.1 cmd å‚æ•°</h3><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token import-statement"><span class="token keyword">import</span> System<span class="token punctuation">.</span>Environment</span>
<span class="token import-statement"><span class="token keyword">import</span> Data<span class="token punctuation">.</span>List</span>

<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
    <span class="token comment">-- è·å–å‚æ•°</span>
    <span class="token hvariable">args</span> <span class="token operator">&lt;-</span> <span class="token hvariable">getArgs</span>
    <span class="token comment">-- è·å–åå­—</span>
    <span class="token hvariable">progName</span> <span class="token operator">&lt;-</span> <span class="token hvariable">getProgName</span>
    <span class="token builtin">putStrLn</span> <span class="token hvariable">progName</span>
    <span class="token builtin">mapM_</span> <span class="token builtin">putStrLn</span> <span class="token hvariable">args</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_8-2-è¾“å…¥" tabindex="-1"><a class="header-anchor" href="#_8-2-è¾“å…¥" aria-hidden="true">#</a> 8.2 è¾“å…¥</h3><ol><li><p>è·å–è¾“å…¥</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
    <span class="token builtin">putStrLn</span> <span class="token string">&quot;start...&quot;</span>
    <span class="token comment">-- è·å–è¾“å…¥æ•°æ®</span>
    <span class="token hvariable">line</span> <span class="token operator">&lt;-</span> <span class="token builtin">getLine</span>
    <span class="token comment">-- åˆ¤æ–­ä¸ä¸ºç©ºå°±åè½¬</span>
    <span class="token keyword">if</span> <span class="token builtin">null</span> <span class="token hvariable">line</span>
        <span class="token keyword">then</span> <span class="token builtin">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span> <span class="token keyword">do</span>
            <span class="token builtin">putStrLn</span> <span class="token operator">$</span> <span class="token hvariable">reverseWords</span> <span class="token hvariable">line</span>
            <span class="token hvariable">main</span>
<span class="token hvariable">reverseWords</span> <span class="token operator">::</span> <span class="token constant">String</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
<span class="token hvariable">reverseWords</span> <span class="token operator">=</span> <span class="token builtin">unwords</span> <span class="token operator">.</span> <span class="token builtin">map</span> <span class="token builtin">reverse</span> <span class="token operator">.</span> <span class="token builtin">words</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li><li><p>æ–‡ä»¶äº¤äº’</p></li></ol><ul><li>openFile (fileName, openMode): æ‰“å¼€æ–‡ä»¶è¿”å›handleå¯¹è±¡</li><li>hGetContents (handle)ï¼šè¯»å–æ–‡ä»¶å†…å®¹</li><li>with è¯­æ³•</li><li>appendFile(fileName, content)ï¼šè¿½åŠ å†…å®¹</li><li>readBuffer: è®¾ç½®ç¼“å†²åŒº</li></ul><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token import-statement"><span class="token keyword">import</span> System<span class="token punctuation">.</span>IO</span>

<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
    <span class="token hvariable">handle</span> <span class="token operator">&lt;-</span> <span class="token hvariable">openFile</span> <span class="token string">&quot;haiku.txt&quot;</span> <span class="token constant">ReadMode</span>
    <span class="token comment">-- Lazy, don&#39;t read and stored in memory an once</span>
    <span class="token hvariable">contents</span> <span class="token operator">&lt;-</span> <span class="token hvariable">hGetContents</span> <span class="token hvariable">handle</span>
    <span class="token builtin">putStrLn</span> <span class="token hvariable">contents</span>
    <span class="token hvariable">hClose</span> <span class="token hvariable">handle</span>

    <span class="token hvariable">withFile</span> <span class="token string">&quot;haiku.txt&quot;</span> <span class="token constant">ReadMode</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">handle</span> <span class="token operator">-&gt;</span> <span class="token keyword">do</span>
    <span class="token hvariable">contents</span> <span class="token operator">&lt;-</span> <span class="token hvariable">hGetContents</span> <span class="token hvariable">handle</span>
    <span class="token builtin">putStrLn</span> <span class="token hvariable">contents</span><span class="token punctuation">)</span>

    <span class="token comment">-- withOpen&#39;s define</span>
    <span class="token comment">-- openFle :: FilePath -&gt; IOMode -&gt; (Handle -&gt; IO a) -&gt; IO a</span>
    <span class="token comment">-- openFile path mode f = do</span>
    <span class="token comment">--     handle &lt;- openFile path mode</span>
    <span class="token comment">--     result &lt;- f handle</span>
    <span class="token comment">--     hClose f</span>
    <span class="token comment">--     return result</span>

    <span class="token comment">-- More function</span>
    <span class="token comment">-- hGetLine hPutStr hPutStrLn hGetChar</span>
    <span class="token hvariable">contents</span> <span class="token operator">&lt;-</span> <span class="token builtin">readFile</span> <span class="token string">&quot;todo.txt&quot;</span>
    <span class="token builtin">putStrLn</span> <span class="token hvariable">contents</span>

    <span class="token hvariable">todo</span> <span class="token operator">&lt;-</span> <span class="token builtin">getLine</span>
    <span class="token builtin">appendFile</span> <span class="token string">&quot;todo.txt&quot;</span> <span class="token operator">$</span> <span class="token hvariable">todo</span> <span class="token operator">++</span> <span class="token string">&quot;\n&quot;</span>

    <span class="token comment">-- set buffering manualy</span>
    <span class="token comment">-- BufferMode = NoBuffering | LineBuffering | BlockBuffering (Maybe Int)</span>
    <span class="token hvariable">withFile</span> <span class="token string">&quot;todo.txt&quot;</span> <span class="token constant">ReadMode</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">handle</span> <span class="token operator">-&gt;</span> <span class="token keyword">do</span>
        <span class="token hvariable">hSetBuffering</span> <span class="token hvariable">handle</span> <span class="token operator">$</span> <span class="token constant">BlockBuffering</span> <span class="token punctuation">(</span><span class="token constant">Just</span> <span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token hvariable">contents</span> <span class="token operator">&lt;-</span> <span class="token hvariable">hGetContents</span> <span class="token hvariable">handle</span>
        <span class="token builtin">putStrLn</span> <span class="token hvariable">contents</span><span class="token punctuation">)</span>
    <span class="token comment">-- read file in big chunks can help to minimize disk access or when our file is actually a slow network resource</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h3 id="_8-3-å¾ªç¯" tabindex="-1"><a class="header-anchor" href="#_8-3-å¾ªç¯" aria-hidden="true">#</a> 8.3. å¾ªç¯</h3><ol><li>forever(loop)</li></ol><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token import-statement"><span class="token keyword">import</span> Control<span class="token punctuation">.</span>Monad</span>
<span class="token import-statement"><span class="token keyword">import</span> Data<span class="token punctuation">.</span>Char</span>

<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token hvariable">forever</span> <span class="token operator">$</span> <span class="token keyword">do</span>
    <span class="token builtin">putStr</span> <span class="token string">&quot;Give a input: &quot;</span>
    <span class="token hvariable">l</span> <span class="token operator">&lt;-</span> <span class="token builtin">getLine</span>
    <span class="token builtin">putStrLn</span> <span class="token operator">$</span> <span class="token builtin">map</span> <span class="token builtin">toUpper</span> <span class="token hvariable">l</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="2"><li>when(while)</li></ol><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token import-statement"><span class="token keyword">import</span> Control<span class="token punctuation">.</span>Monad</span>

<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
  <span class="token builtin">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">-- aaa &lt;- return &quot;aaavvv&quot;</span>
  <span class="token comment">-- putStrLn aaa</span>

  <span class="token hvariable">c</span> <span class="token operator">&lt;-</span> <span class="token builtin">getChar</span>
  <span class="token hvariable">when</span> <span class="token punctuation">(</span><span class="token hvariable">c</span> <span class="token operator">/=</span> <span class="token char string">&#39; &#39;</span><span class="token punctuation">)</span> <span class="token operator">$</span> <span class="token keyword">do</span>
    <span class="token builtin">putChar</span> <span class="token hvariable">c</span>
    <span class="token hvariable">main</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_8-4-map-io-action" tabindex="-1"><a class="header-anchor" href="#_8-4-map-io-action" aria-hidden="true">#</a> 8.4 map IO action</h3><p>mapM &amp; mapM_ &amp; sequence</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
  <span class="token comment">-- 1.1 sequence can run erery IO action in it, and return their result as a list</span>
  <span class="token comment">-- rs &lt;- sequence [getLine, getLine, getLine]</span>
  <span class="token comment">-- print rs</span>

  <span class="token comment">-- 1.2</span>
  <span class="token comment">-- map print [1, 2, 3]</span>
  <span class="token comment">-- [print 1, print 2, print 3]</span>
  <span class="token hvariable">res</span> <span class="token operator">&lt;-</span> <span class="token builtin">sequence</span> <span class="token operator">$</span> <span class="token builtin">map</span> <span class="token builtin">print</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
  <span class="token comment">-- `print 1` just return a `()`</span>
  <span class="token comment">-- so res is [(), (), ()]</span>
  <span class="token builtin">print</span> <span class="token hvariable">res</span>

  <span class="token comment">-- 2.1 mapM can be used to map a function that return IO action</span>
  <span class="token hvariable">mapm</span> <span class="token operator">&lt;-</span> <span class="token builtin">mapM</span> <span class="token builtin">print</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
  <span class="token builtin">print</span> <span class="token hvariable">mapm</span>
  <span class="token comment">-- 2.2 mapM_ just abundon the results</span>
  <span class="token hvariable">mapm_</span> <span class="token operator">&lt;-</span> <span class="token builtin">mapM_</span> <span class="token builtin">print</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
  <span class="token builtin">print</span> <span class="token hvariable">mapm_</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_8-6-todo-list" tabindex="-1"><a class="header-anchor" href="#_8-6-todo-list" aria-hidden="true">#</a> 8.6 todo list</h3><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token import-statement"><span class="token keyword">import</span> Data<span class="token punctuation">.</span>List</span>
<span class="token import-statement"><span class="token keyword">import</span> System<span class="token punctuation">.</span>Directory</span>
<span class="token import-statement"><span class="token keyword">import</span> System<span class="token punctuation">.</span>Environment</span>
<span class="token import-statement"><span class="token keyword">import</span> System<span class="token punctuation">.</span>IO</span>

<span class="token hvariable">dispatch</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token constant">String</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token hvariable">dispatch</span> <span class="token operator">=</span>
  <span class="token punctuation">[</span> <span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">add</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">&quot;view&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">view</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">&quot;remove&quot;</span><span class="token punctuation">,</span> <span class="token hvariable">remove</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>

<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
  <span class="token punctuation">(</span><span class="token hvariable">command</span> <span class="token operator">:</span> <span class="token hvariable">args</span><span class="token punctuation">)</span> <span class="token operator">&lt;-</span> <span class="token hvariable">getArgs</span>
  <span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token constant">Just</span> <span class="token hvariable">action</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token builtin">lookup</span> <span class="token hvariable">command</span> <span class="token hvariable">dispatch</span>
  <span class="token hvariable">action</span> <span class="token hvariable">args</span>

<span class="token hvariable">add</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">add</span> <span class="token punctuation">[</span><span class="token hvariable">fileName</span><span class="token punctuation">,</span> <span class="token hvariable">todoItem</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">appendFile</span> <span class="token hvariable">fileName</span> <span class="token punctuation">(</span><span class="token hvariable">todoItem</span> <span class="token operator">++</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span>
<span class="token hvariable">add</span> <span class="token hvariable">_</span> <span class="token operator">=</span> <span class="token builtin">putStrLn</span> <span class="token string">&quot;Plz input [filename, todoItem]&quot;</span>

<span class="token hvariable">view</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">view</span> <span class="token punctuation">[</span><span class="token hvariable">fileName</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">do</span>
  <span class="token hvariable">contents</span> <span class="token operator">&lt;-</span> <span class="token builtin">readFile</span> <span class="token hvariable">fileName</span>
  <span class="token keyword">let</span> <span class="token hvariable">todoTasks</span> <span class="token operator">=</span> <span class="token builtin">lines</span> <span class="token hvariable">contents</span>
      <span class="token hvariable">numberedTasks</span> <span class="token operator">=</span> <span class="token builtin">zipWith</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">n</span> <span class="token hvariable">line</span> <span class="token operator">-&gt;</span> <span class="token builtin">show</span> <span class="token hvariable">n</span> <span class="token operator">++</span> <span class="token string">&quot; - &quot;</span> <span class="token operator">++</span> <span class="token hvariable">line</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">0</span> <span class="token operator">..</span><span class="token punctuation">]</span> <span class="token hvariable">todoTasks</span>
  <span class="token builtin">putStr</span> <span class="token operator">$</span> <span class="token builtin">unlines</span> <span class="token hvariable">numberedTasks</span>
<span class="token hvariable">view</span> <span class="token hvariable">_</span> <span class="token operator">=</span> <span class="token builtin">putStrLn</span> <span class="token string">&quot;Plz input [filename]&quot;</span>

<span class="token hvariable">remove</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">remove</span> <span class="token punctuation">[</span><span class="token hvariable">fileName</span><span class="token punctuation">,</span> <span class="token hvariable">numberString</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">do</span>
  <span class="token hvariable">handle</span> <span class="token operator">&lt;-</span> <span class="token hvariable">openFile</span> <span class="token hvariable">fileName</span> <span class="token constant">ReadMode</span>
  <span class="token punctuation">(</span><span class="token hvariable">tempName</span><span class="token punctuation">,</span> <span class="token hvariable">tempHandle</span><span class="token punctuation">)</span> <span class="token operator">&lt;-</span> <span class="token hvariable">openTempFile</span> <span class="token string">&quot;.&quot;</span> <span class="token string">&quot;temp&quot;</span>
  <span class="token hvariable">contents</span> <span class="token operator">&lt;-</span> <span class="token hvariable">hGetContents</span> <span class="token hvariable">handle</span>
  <span class="token keyword">let</span> <span class="token hvariable">number</span> <span class="token operator">=</span> <span class="token builtin">read</span> <span class="token hvariable">numberString</span>
      <span class="token hvariable">todoTasks</span> <span class="token operator">=</span> <span class="token builtin">lines</span> <span class="token hvariable">contents</span>
      <span class="token hvariable">newTodoItems</span> <span class="token operator">=</span> <span class="token hvariable">delete</span> <span class="token punctuation">(</span><span class="token hvariable">todoTasks</span> <span class="token operator">!!</span> <span class="token hvariable">number</span><span class="token punctuation">)</span> <span class="token hvariable">todoTasks</span>
  <span class="token hvariable">hPutStr</span> <span class="token hvariable">tempHandle</span> <span class="token operator">$</span> <span class="token builtin">unlines</span> <span class="token hvariable">newTodoItems</span>
  <span class="token hvariable">hClose</span> <span class="token hvariable">handle</span>
  <span class="token hvariable">hClose</span> <span class="token hvariable">tempHandle</span>
  <span class="token hvariable">removeFile</span> <span class="token hvariable">fileName</span>
  <span class="token hvariable">renameFile</span> <span class="token hvariable">tempName</span> <span class="token hvariable">fileName</span>
<span class="token hvariable">remove</span> <span class="token hvariable">_</span> <span class="token operator">=</span> <span class="token builtin">putStrLn</span> <span class="token string">&quot;Plz input [filename, numberString]&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h3 id="_8-7-error-handle" tabindex="-1"><a class="header-anchor" href="#_8-7-error-handle" aria-hidden="true">#</a> 8.7 Error Handle</h3><ol><li>try &amp; catch</li></ol><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token import-statement"><span class="token keyword">import</span> Control<span class="token punctuation">.</span>Exception</span>
<span class="token import-statement"><span class="token keyword">import</span> System<span class="token punctuation">.</span>Environment</span>
<span class="token import-statement"><span class="token keyword">import</span> System<span class="token punctuation">.</span>IO</span>
<span class="token import-statement"><span class="token keyword">import</span> System<span class="token punctuation">.</span>IO<span class="token punctuation">.</span>Error</span>

<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token hvariable">toTry</span> <span class="token operator">`catch`</span> <span class="token hvariable">handler</span>

<span class="token hvariable">toTry</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">toTry</span> <span class="token operator">=</span> <span class="token keyword">do</span>
  <span class="token punctuation">(</span><span class="token hvariable">fileName</span> <span class="token operator">:</span> <span class="token hvariable">_</span><span class="token punctuation">)</span> <span class="token operator">&lt;-</span> <span class="token hvariable">getArgs</span>
  <span class="token hvariable">contents</span> <span class="token operator">&lt;-</span> <span class="token builtin">readFile</span> <span class="token hvariable">fileName</span>
  <span class="token builtin">putStrLn</span> <span class="token operator">$</span> <span class="token string">&quot;The file has &quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token punctuation">(</span><span class="token builtin">length</span> <span class="token punctuation">(</span><span class="token builtin">lines</span> <span class="token hvariable">contents</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">++</span> <span class="token string">&quot; lines!&quot;</span>

<span class="token hvariable">handler</span> <span class="token operator">::</span> <span class="token constant">IOError</span> <span class="token operator">-&gt;</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">handler</span> <span class="token hvariable">e</span> <span class="token operator">=</span> <span class="token builtin">putStrLn</span> <span class="token string">&quot;Whoops, had some trouble!&quot;</span>

<span class="token comment">-- main = do</span>
<span class="token comment">--   toTry `catch` handler1</span>
<span class="token comment">--   thenTryThis `catch` handler2</span>
<span class="token comment">--   launchRockets</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ol start="2"><li>error kind</li></ol><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code>
<span class="token import-statement"><span class="token keyword">import</span> System<span class="token punctuation">.</span>Environment</span>
<span class="token import-statement"><span class="token keyword">import</span> System<span class="token punctuation">.</span>IO</span>
<span class="token import-statement"><span class="token keyword">import</span> System<span class="token punctuation">.</span>IO<span class="token punctuation">.</span>Error</span>
<span class="token import-statement"><span class="token keyword">import</span> Control<span class="token punctuation">.</span>Exception</span>

<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token hvariable">toTry</span> <span class="token operator">`catch`</span> <span class="token hvariable">handler</span>

<span class="token hvariable">toTry</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">toTry</span> <span class="token operator">=</span> <span class="token keyword">do</span> <span class="token punctuation">(</span><span class="token hvariable">fileName</span><span class="token operator">:</span><span class="token hvariable">_</span><span class="token punctuation">)</span> <span class="token operator">&lt;-</span> <span class="token hvariable">getArgs</span>
           <span class="token hvariable">contents</span> <span class="token operator">&lt;-</span> <span class="token builtin">readFile</span> <span class="token hvariable">fileName</span>
           <span class="token builtin">putStrLn</span> <span class="token operator">$</span> <span class="token string">&quot;The file has &quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token punctuation">(</span><span class="token builtin">length</span> <span class="token punctuation">(</span><span class="token builtin">lines</span> <span class="token hvariable">contents</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">++</span> <span class="token string">&quot; lines!&quot;</span>

<span class="token hvariable">handler</span> <span class="token operator">::</span> <span class="token constant">IOError</span> <span class="token operator">-&gt;</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">handler</span> <span class="token hvariable">e</span>
    <span class="token operator">|</span> <span class="token hvariable">isDoesNotExistError</span> <span class="token hvariable">e</span> <span class="token operator">=</span> <span class="token builtin">putStrLn</span> <span class="token string">&quot;The file doesn&#39;t exist!&quot;</span>
    <span class="token operator">|</span> <span class="token builtin">otherwise</span> <span class="token operator">=</span> <span class="token builtin">ioError</span> <span class="token hvariable">e</span>

<span class="token comment">-- isAlreadyExistsError</span>
<span class="token comment">-- isDoesNotExistError</span>
<span class="token comment">-- isAlreadyInUseError</span>
<span class="token comment">-- isFullError</span>
<span class="token comment">-- isEOFError</span>
<span class="token comment">-- isIllegalOperation</span>
<span class="token comment">-- isPermissionError</span>
<span class="token comment">-- isUserError</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="_9-solve-some-problems" tabindex="-1"><a class="header-anchor" href="#_9-solve-some-problems" aria-hidden="true">#</a> 9. Solve Some Problems</h2><h3 id="_9-1è®¡ç®—åç¼€è¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#_9-1è®¡ç®—åç¼€è¡¨è¾¾å¼" aria-hidden="true">#</a> 9.1è®¡ç®—åç¼€è¡¨è¾¾å¼</h3><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token import-statement"><span class="token keyword">import</span> Data<span class="token punctuation">.</span>List</span>

<span class="token hvariable">solveRPN</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Num</span> <span class="token hvariable">a</span><span class="token punctuation">,</span> <span class="token constant">Read</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">String</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
<span class="token hvariable">solveRPN</span> <span class="token operator">=</span> <span class="token builtin">head</span> <span class="token operator">.</span> <span class="token builtin">foldl</span> <span class="token hvariable">foldingFunction</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token builtin">words</span>
    <span class="token keyword">where</span>
        <span class="token hvariable">foldingFunction</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">y</span><span class="token operator">:</span><span class="token hvariable">ys</span><span class="token punctuation">)</span> <span class="token string">&quot;*&quot;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">*</span> <span class="token hvariable">y</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token hvariable">ys</span>
        <span class="token hvariable">foldingFunction</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">y</span><span class="token operator">:</span><span class="token hvariable">ys</span><span class="token punctuation">)</span> <span class="token string">&quot;+&quot;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">+</span> <span class="token hvariable">y</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token hvariable">ys</span>
        <span class="token hvariable">foldingFunction</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">y</span><span class="token operator">:</span><span class="token hvariable">ys</span><span class="token punctuation">)</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">-</span> <span class="token hvariable">y</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token hvariable">ys</span>
        <span class="token hvariable">foldingFunction</span> <span class="token hvariable">xs</span> <span class="token hvariable">numString</span> <span class="token operator">=</span> <span class="token builtin">read</span> <span class="token hvariable">numString</span><span class="token operator">:</span><span class="token hvariable">xs</span>

<span class="token hvariable">solveRPN2</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Num</span> <span class="token hvariable">a</span><span class="token punctuation">,</span> <span class="token constant">Read</span> <span class="token hvariable">a</span><span class="token punctuation">,</span> <span class="token constant">Floating</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">String</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
<span class="token hvariable">solveRPN2</span> <span class="token operator">=</span> <span class="token builtin">head</span> <span class="token operator">.</span> <span class="token builtin">foldl</span> <span class="token hvariable">foldingFunction</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token builtin">words</span>
    <span class="token keyword">where</span>
        <span class="token hvariable">foldingFunction</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">y</span><span class="token operator">:</span><span class="token hvariable">ys</span><span class="token punctuation">)</span> <span class="token string">&quot;*&quot;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">*</span> <span class="token hvariable">y</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token hvariable">ys</span>
        <span class="token hvariable">foldingFunction</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">y</span><span class="token operator">:</span><span class="token hvariable">ys</span><span class="token punctuation">)</span> <span class="token string">&quot;+&quot;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">+</span> <span class="token hvariable">y</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token hvariable">ys</span>
        <span class="token hvariable">foldingFunction</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">y</span><span class="token operator">:</span><span class="token hvariable">ys</span><span class="token punctuation">)</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">-</span> <span class="token hvariable">y</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token hvariable">ys</span>
        <span class="token hvariable">foldingFunction</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">y</span><span class="token operator">:</span><span class="token hvariable">ys</span><span class="token punctuation">)</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token hvariable">y</span> <span class="token operator">/</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token hvariable">ys</span>
        <span class="token hvariable">foldingFunction</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">y</span><span class="token operator">:</span><span class="token hvariable">ys</span><span class="token punctuation">)</span> <span class="token string">&quot;^&quot;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token hvariable">y</span> <span class="token operator">**</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token hvariable">ys</span>
        <span class="token hvariable">foldingFunction</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token string">&quot;ln&quot;</span> <span class="token operator">=</span> <span class="token builtin">log</span> <span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span>
        <span class="token hvariable">foldingFunction</span> <span class="token hvariable">xs</span> <span class="token string">&quot;sum&quot;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">sum</span> <span class="token hvariable">xs</span><span class="token punctuation">]</span>
        <span class="token hvariable">foldingFunction</span> <span class="token hvariable">xs</span> <span class="token hvariable">numString</span> <span class="token operator">=</span> <span class="token builtin">read</span> <span class="token hvariable">numString</span><span class="token operator">:</span><span class="token hvariable">xs</span>


<span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
    <span class="token builtin">putStrLn</span> <span class="token string">&quot;start...&quot;</span>
    <span class="token builtin">print</span> <span class="token operator">$</span> <span class="token hvariable">solveRPN</span> <span class="token string">&quot;90 34 12 33 55 66 + * - + -&quot;</span>
    <span class="token builtin">putStrLn</span> <span class="token string">&quot;end...&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_9-2-è®¡ç®—æœ€çŸ­è·¯" tabindex="-1"><a class="header-anchor" href="#_9-2-è®¡ç®—æœ€çŸ­è·¯" aria-hidden="true">#</a> 9.2 è®¡ç®—æœ€çŸ­è·¯</h3><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token comment">-- newtype Road = Road Int Node</span>
<span class="token comment">-- newtype Node = Node Road Road | EndNode Road</span>

<span class="token comment">-- newtype Road = Road Int Node</span>
<span class="token comment">-- newtype Node = Node Road (Maybe Road)</span>

<span class="token keyword">data</span> <span class="token constant">Section</span> <span class="token operator">=</span> <span class="token constant">Section</span>
  <span class="token punctuation">{</span> <span class="token hvariable">getA</span> <span class="token operator">::</span> <span class="token constant">Int</span><span class="token punctuation">,</span>
    <span class="token hvariable">getB</span> <span class="token operator">::</span> <span class="token constant">Int</span><span class="token punctuation">,</span>
    <span class="token hvariable">getC</span> <span class="token operator">::</span> <span class="token constant">Int</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Show</span><span class="token punctuation">)</span>

<span class="token keyword">type</span> <span class="token constant">RoadSystem</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">Section</span><span class="token punctuation">]</span>

<span class="token hvariable">headthrowToLondon</span> <span class="token operator">::</span> <span class="token constant">RoadSystem</span>
<span class="token hvariable">headthrowToLondon</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">Section</span> <span class="token number">50</span> <span class="token number">10</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token constant">Section</span> <span class="token number">5</span> <span class="token number">90</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token constant">Section</span> <span class="token number">40</span> <span class="token number">2</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token constant">Section</span> <span class="token number">10</span> <span class="token number">8</span> <span class="token number">0</span><span class="token punctuation">]</span>

<span class="token keyword">data</span> <span class="token constant">Label</span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token operator">|</span> <span class="token constant">B</span> <span class="token operator">|</span> <span class="token constant">C</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Show</span><span class="token punctuation">)</span>

<span class="token keyword">type</span> <span class="token constant">Path</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token constant">Label</span><span class="token punctuation">,</span> <span class="token constant">Int</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token hvariable">roadStep</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Path</span><span class="token punctuation">,</span> <span class="token constant">Path</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token constant">Section</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token constant">Path</span><span class="token punctuation">,</span> <span class="token constant">Path</span><span class="token punctuation">)</span>
<span class="token hvariable">roadStep</span> <span class="token punctuation">(</span><span class="token hvariable">pathA</span><span class="token punctuation">,</span> <span class="token hvariable">pathB</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">Section</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span> <span class="token hvariable">c</span><span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">let</span> <span class="token hvariable">priceA</span> <span class="token operator">=</span> <span class="token builtin">sum</span> <span class="token operator">$</span> <span class="token builtin">map</span> <span class="token builtin">snd</span> <span class="token hvariable">pathA</span>
      <span class="token hvariable">priceB</span> <span class="token operator">=</span> <span class="token builtin">sum</span> <span class="token operator">$</span> <span class="token builtin">map</span> <span class="token builtin">snd</span> <span class="token hvariable">pathB</span>
      <span class="token hvariable">forwardPriceToA</span> <span class="token operator">=</span> <span class="token hvariable">priceA</span> <span class="token operator">+</span> <span class="token hvariable">a</span>
      <span class="token hvariable">crossPriceToA</span> <span class="token operator">=</span> <span class="token hvariable">priceB</span> <span class="token operator">+</span> <span class="token hvariable">b</span> <span class="token operator">+</span> <span class="token hvariable">c</span>
      <span class="token hvariable">forwardPriceToB</span> <span class="token operator">=</span> <span class="token hvariable">priceB</span> <span class="token operator">+</span> <span class="token hvariable">b</span>
      <span class="token hvariable">crossPriceToB</span> <span class="token operator">=</span> <span class="token hvariable">priceA</span> <span class="token operator">+</span> <span class="token hvariable">a</span> <span class="token operator">+</span> <span class="token hvariable">c</span>
      <span class="token hvariable">newPathToA</span> <span class="token operator">=</span>
        <span class="token keyword">if</span> <span class="token hvariable">forwardPriceToA</span> <span class="token operator">&lt;=</span> <span class="token hvariable">crossPriceToA</span>
          <span class="token keyword">then</span> <span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token hvariable">pathA</span>
          <span class="token keyword">else</span> <span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">,</span> <span class="token hvariable">c</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">,</span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token hvariable">pathB</span>
      <span class="token hvariable">newPathToB</span> <span class="token operator">=</span>
        <span class="token keyword">if</span> <span class="token hvariable">forwardPriceToB</span> <span class="token operator">&lt;=</span> <span class="token hvariable">crossPriceToB</span>
          <span class="token keyword">then</span> <span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">,</span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token hvariable">pathB</span>
          <span class="token keyword">else</span> <span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">,</span> <span class="token hvariable">c</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token hvariable">pathA</span>
   <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token hvariable">newPathToA</span><span class="token punctuation">,</span> <span class="token hvariable">newPathToB</span><span class="token punctuation">)</span>

<span class="token hvariable">optimalPath</span> <span class="token operator">::</span> <span class="token constant">RoadSystem</span> <span class="token operator">-&gt;</span> <span class="token constant">Path</span>
<span class="token hvariable">optimalPath</span> <span class="token hvariable">roadSystem</span> <span class="token operator">=</span>
  <span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token hvariable">bestAPath</span><span class="token punctuation">,</span> <span class="token hvariable">bestBPath</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token builtin">foldl</span> <span class="token hvariable">roadStep</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token hvariable">roadSystem</span>
   <span class="token keyword">in</span> <span class="token keyword">if</span> <span class="token builtin">sum</span> <span class="token punctuation">(</span><span class="token builtin">map</span> <span class="token builtin">snd</span> <span class="token hvariable">bestAPath</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token builtin">sum</span> <span class="token punctuation">(</span><span class="token builtin">map</span> <span class="token builtin">snd</span> <span class="token hvariable">bestBPath</span><span class="token punctuation">)</span>
        <span class="token keyword">then</span> <span class="token builtin">reverse</span> <span class="token hvariable">bestAPath</span>
        <span class="token keyword">else</span> <span class="token builtin">reverse</span> <span class="token hvariable">bestBPath</span>

<span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
  <span class="token builtin">print</span> <span class="token operator">$</span> <span class="token hvariable">roadStep</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">head</span> <span class="token hvariable">headthrowToLondon</span><span class="token punctuation">)</span>
  <span class="token builtin">print</span> <span class="token operator">$</span> <span class="token hvariable">optimalPath</span> <span class="token hvariable">headthrowToLondon</span>


  <span class="token hvariable">contents</span> <span class="token operator">&lt;-</span> <span class="token builtin">getContents</span>
  <span class="token keyword">let</span> <span class="token hvariable">threes</span> <span class="token operator">=</span> <span class="token hvariable">groupOf</span> <span class="token number">3</span> <span class="token punctuation">(</span><span class="token builtin">map</span> <span class="token builtin">read</span> <span class="token operator">$</span> <span class="token builtin">lines</span> <span class="token hvariable">contents</span><span class="token punctuation">)</span>
      <span class="token hvariable">roadSystem</span> <span class="token operator">=</span> <span class="token builtin">map</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">,</span><span class="token hvariable">c</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Section</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span> <span class="token hvariable">c</span><span class="token punctuation">)</span> <span class="token hvariable">threes</span>
      <span class="token hvariable">path</span> <span class="token operator">=</span> <span class="token hvariable">optimalPath</span> <span class="token hvariable">roadSystem</span>
      <span class="token hvariable">pathString</span> <span class="token operator">=</span> <span class="token builtin">concat</span> <span class="token operator">$</span> <span class="token builtin">map</span> <span class="token punctuation">(</span><span class="token builtin">show</span> <span class="token operator">.</span> <span class="token builtin">fst</span><span class="token punctuation">)</span> <span class="token hvariable">path</span>
      <span class="token hvariable">pathPrice</span> <span class="token operator">=</span> <span class="token builtin">sum</span> <span class="token operator">$</span> <span class="token builtin">map</span> <span class="token builtin">snd</span> <span class="token hvariable">path</span>
  <span class="token builtin">putStrLn</span> <span class="token operator">$</span> <span class="token string">&quot;The best path to take is: &quot;</span> <span class="token operator">++</span> <span class="token hvariable">pathString</span>
  <span class="token builtin">putStrLn</span> <span class="token operator">$</span> <span class="token string">&quot;The price is: &quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">pathPrice</span>


<span class="token hvariable">groupOf</span> <span class="token operator">::</span> <span class="token constant">Int</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token hvariable">groupOf</span> <span class="token number">0</span> <span class="token hvariable">_</span> <span class="token operator">=</span> <span class="token builtin">undefined</span>
<span class="token hvariable">groupOf</span> <span class="token hvariable">_</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token hvariable">groupOf</span> <span class="token hvariable">n</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token builtin">take</span> <span class="token hvariable">n</span> <span class="token hvariable">xs</span> <span class="token operator">:</span> <span class="token hvariable">groupOf</span> <span class="token hvariable">n</span> <span class="token punctuation">(</span><span class="token builtin">drop</span> <span class="token hvariable">n</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><h2 id="_10-functors-applicative-functors-and-monoids" tabindex="-1"><a class="header-anchor" href="#_10-functors-applicative-functors-and-monoids" aria-hidden="true">#</a> 10. Functors, Applicative Functors and Monoids</h2><p>æåº¦å»ºè®®å‚è€ƒä¸‹é¢çš„æ–‡ç« ï¼Œå›¾æ–‡è§£é‡Šååˆ†ç›´è§‚ <a href="https://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html" target="_blank" rel="noopener noreferrer">Functors, Applicatives, And Monads In Pictures<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_10-1-functor" tabindex="-1"><a class="header-anchor" href="#_10-1-functor" aria-hidden="true">#</a> 10.1 Functor</h3><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token builtin">fmap</span> <span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">Just</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202022316684.png" alt=""></p><h3 id="_10-2-applicatives" tabindex="-1"><a class="header-anchor" href="#_10-2-applicatives" aria-hidden="true">#</a> 10.2 Applicatives</h3><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token constant">Just</span> <span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">&lt;*&gt;</span> <span class="token constant">Just</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token constant">Just</span> <span class="token number">5</span>

<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&lt;*&gt;</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202022317350.png" alt=""></p><h3 id="_10-3-monads" tabindex="-1"><a class="header-anchor" href="#_10-3-monads" aria-hidden="true">#</a> 10.3 Monads</h3><p>åˆ¤æ–­ä¸€ä¸ªæ•°çš„å¥‡å¶</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token hvariable">half</span> <span class="token hvariable">x</span> <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token builtin">even</span> <span class="token hvariable">x</span>
           <span class="token keyword">then</span> <span class="token constant">Just</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">`div`</span> <span class="token number">2</span><span class="token punctuation">)</span>
           <span class="token keyword">else</span> <span class="token constant">Nothing</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>åŠ å…¥xç°åœ¨æ˜¯ä¸€ä¸ªwrappedçš„æ¯”å¦‚è¯´Maybe, è¿™é‡Œå¼•å…¥ä¸€ä¸ªæ–°çš„æ“ä½œç¬¦ <code>&gt;&gt;=</code></p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token operator">&gt;</span> <span class="token constant">Just</span> <span class="token number">3</span> <span class="token operator">&gt;&gt;=</span> <span class="token hvariable">half</span>
<span class="token constant">Nothing</span>
<span class="token operator">&gt;</span> <span class="token constant">Just</span> <span class="token number">4</span> <span class="token operator">&gt;&gt;=</span> <span class="token hvariable">half</span>
<span class="token constant">Just</span> <span class="token number">2</span>
<span class="token operator">&gt;</span> <span class="token constant">Nothing</span> <span class="token operator">&gt;&gt;=</span> <span class="token hvariable">half</span>
<span class="token constant">Nothing</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ä¹‹æ‰€ä»¥èƒ½åƒä¸Šé¢ä¸€æ ·æ“ä½œæ˜¯å› ä¸ºï¼ŒMaybeæ˜¯ä¸ªMonad</p><div class="language-haskell ext-haskell line-numbers-mode"><pre class="language-haskell"><code><span class="token keyword">instance</span> <span class="token constant">Monad</span> <span class="token constant">Maybe</span> <span class="token keyword">where</span>
    <span class="token constant">Nothing</span> <span class="token operator">&gt;&gt;=</span> <span class="token hvariable">func</span> <span class="token operator">=</span> <span class="token constant">Nothing</span>
    <span class="token constant">Just</span> <span class="token hvariable">val</span> <span class="token operator">&gt;&gt;=</span> <span class="token hvariable">func</span>  <span class="token operator">=</span> <span class="token hvariable">func</span> <span class="token hvariable">val</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Just <img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202022324827.png" alt=""> Nothing <img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202022324432.png" alt=""></p><h3 id="_10-4-æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_10-4-æ€»ç»“" aria-hidden="true">#</a> 10.4 æ€»ç»“</h3><p><img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202022325497.png" alt=""></p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/trdthg/edit/main/magic/haskell.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: trdthg@outlook.com">trdthg</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.21cc12ca.js" defer></script>
  </body>
</html>
