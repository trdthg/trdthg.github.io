<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Rust-å…­è¾¹å½¢æ¶æ„-7-é•¿æœŸå­˜å‚¨åº“ - Trdthg&#x27;s Self</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../../favicon.svg">
                        <link rel="shortcut icon" href="../../favicon.png">
                <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
                <link rel="stylesheet" href="../../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">trans</li><li class="chapter-item expanded "><a href="../../trans/2022-04-20-è¯‘-ä½¿ç”¨-Tokio-å¤„ç†-CPU-å¯†é›†å‹ä»»åŠ¡.html"><strong aria-hidden="true">1.</strong> 2022-04-20-è¯‘-ä½¿ç”¨-Tokio-å¤„ç†-CPU-å¯†é›†å‹ä»»åŠ¡</a></li><li class="chapter-item expanded "><a href="../../trans/2023-01-03-è¯‘-Rustå†’é™©:-æ»¥ç”¨-Serde.html"><strong aria-hidden="true">2.</strong> 2023-01-03-è¯‘-Rustå†’é™©:-æ»¥ç”¨-Serde</a></li><li class="chapter-item expanded "><a href="../../trans/2023-01-01-è¯‘-æ‹“å±•-Rust-ä¸­çš„-Map.html"><strong aria-hidden="true">3.</strong> 2023-01-01-è¯‘-æ‹“å±•-Rust-ä¸­çš„-Map</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-01-è¯‘-search_engine.html"><strong aria-hidden="true">4.</strong> 2022-04-01-è¯‘-search_engine</a></li><li class="chapter-item expanded "><a href="../../trans/2022-05-04-è¯‘-å¯è§†åŒ–-Rust-å„æ•°æ®ç±»å‹çš„å†…å­˜å¸ƒå±€.html"><strong aria-hidden="true">5.</strong> 2022-05-04-è¯‘-å¯è§†åŒ–-Rust-å„æ•°æ®ç±»å‹çš„å†…å­˜å¸ƒå±€</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-13-è¯‘-tail_latency.html"><strong aria-hidden="true">6.</strong> 2022-04-13-è¯‘-tail_latency</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-30-è¯‘-ä»€ä¹ˆæ—¶å€™ä¸åº”è¯¥ä½¿ç”¨-Rust-ï¼Ÿ.html"><strong aria-hidden="true">7.</strong> 2022-04-30-è¯‘-ä»€ä¹ˆæ—¶å€™ä¸åº”è¯¥ä½¿ç”¨-Rust-ï¼Ÿ</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-11-è¯‘-å¼‚æ­¥-Rustï¼šåä½œä¸æŠ¢å å¼è°ƒåº¦.html"><strong aria-hidden="true">8.</strong> 2022-04-11-è¯‘-å¼‚æ­¥-Rustï¼šåä½œä¸æŠ¢å å¼è°ƒåº¦</a></li><li class="chapter-item expanded "><a href="../../trans/2023-01-02-è¯‘-æœªåˆå§‹åŒ–å†…å­˜:-unsafe-Rustå¤ªéš¾äº†.html"><strong aria-hidden="true">9.</strong> 2023-01-02-è¯‘-æœªåˆå§‹åŒ–å†…å­˜:-unsafe-Rustå¤ªéš¾äº†</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/index.html"><strong aria-hidden="true">10.</strong> 2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-4-é‡æ„.html"><strong aria-hidden="true">10.1.</strong> Rust-å…­è¾¹å½¢æ¶æ„-4-é‡æ„</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-2-å†…å­˜å­˜å‚¨åº“.html"><strong aria-hidden="true">10.2.</strong> Rust-å…­è¾¹å½¢æ¶æ„-2-å†…å­˜å­˜å‚¨åº“</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-7-é•¿æœŸå­˜å‚¨åº“.html" class="active"><strong aria-hidden="true">10.3.</strong> Rust-å…­è¾¹å½¢æ¶æ„-7-é•¿æœŸå­˜å‚¨åº“</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-1-åŸŸ.html"><strong aria-hidden="true">10.4.</strong> Rust-å…­è¾¹å½¢æ¶æ„-1-åŸŸ</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-5-å…¶ä»–ç”¨ä¾‹.html"><strong aria-hidden="true">10.5.</strong> Rust-å…­è¾¹å½¢æ¶æ„-5-å…¶ä»–ç”¨ä¾‹</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-6-CLI.html"><strong aria-hidden="true">10.6.</strong> Rust-å…­è¾¹å½¢æ¶æ„-6-CLI</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-3-HTTP-API.html"><strong aria-hidden="true">10.7.</strong> Rust-å…­è¾¹å½¢æ¶æ„-3-HTTP-API</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/index.html"><strong aria-hidden="true">10.8.</strong> README</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">note</li><li class="chapter-item expanded "><a href="../../note/java/index.html"><strong aria-hidden="true">11.</strong> java</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../note/java/java.html"><strong aria-hidden="true">11.1.</strong> java</a></li><li class="chapter-item expanded "><a href="../../note/java/springboot.html"><strong aria-hidden="true">11.2.</strong> springboot</a></li><li class="chapter-item expanded "><a href="../../note/java/spring.html"><strong aria-hidden="true">11.3.</strong> spring</a></li><li class="chapter-item expanded "><a href="../../note/java/sourceread.html"><strong aria-hidden="true">11.4.</strong> sourceread</a></li><li class="chapter-item expanded "><a href="../../note/java/index.html"><strong aria-hidden="true">11.5.</strong> README</a></li></ol></li><li class="chapter-item expanded "><a href="../../note/frontend/index.html"><strong aria-hidden="true">12.</strong> frontend</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../note/frontend/mini_bundle.html"><strong aria-hidden="true">12.1.</strong> mini_bundle</a></li><li class="chapter-item expanded "><a href="../../note/frontend/js_advanced.html"><strong aria-hidden="true">12.2.</strong> js_advanced</a></li><li class="chapter-item expanded "><a href="../../note/frontend/mini_vue.html"><strong aria-hidden="true">12.3.</strong> mini_vue</a></li><li class="chapter-item expanded "><a href="../../note/frontend/vue.html"><strong aria-hidden="true">12.4.</strong> vue</a></li><li class="chapter-item expanded "><a href="../../note/frontend/list.html"><strong aria-hidden="true">12.5.</strong> list</a></li><li class="chapter-item expanded "><a href="../../note/frontend/http.html"><strong aria-hidden="true">12.6.</strong> http</a></li><li class="chapter-item expanded "><a href="../../note/frontend/flutter.html"><strong aria-hidden="true">12.7.</strong> flutter</a></li><li class="chapter-item expanded "><a href="../../note/frontend/css.html"><strong aria-hidden="true">12.8.</strong> css</a></li><li class="chapter-item expanded "><a href="../../note/frontend/vdom.html"><strong aria-hidden="true">12.9.</strong> vdom</a></li><li class="chapter-item expanded "><a href="../../note/frontend/index.html"><strong aria-hidden="true">12.10.</strong> README</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">blog</li><li class="chapter-item expanded "><a href="../../blog/index.html"><strong aria-hidden="true">13.</strong> README</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">docs</li><li class="chapter-item expanded "><a href="../../docs/log.html"><strong aria-hidden="true">14.</strong> log</a></li><li class="chapter-item expanded "><a href="../../docs/intro.html"><strong aria-hidden="true">15.</strong> intro</a></li><li class="chapter-item expanded "><a href="../../docs/magic/index.html"><strong aria-hidden="true">16.</strong> magic</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../docs/magic/riscv.html"><strong aria-hidden="true">16.1.</strong> riscv</a></li><li class="chapter-item expanded "><a href="../../docs/magic/haskell.html"><strong aria-hidden="true">16.2.</strong> haskell</a></li><li class="chapter-item expanded "><a href="../../docs/magic/bash.html"><strong aria-hidden="true">16.3.</strong> bash</a></li><li class="chapter-item expanded "><a href="../../docs/magic/memory_ordering.html"><strong aria-hidden="true">16.4.</strong> memory_ordering</a></li><li class="chapter-item expanded "><a href="../../docs/magic/linuxIO.html"><strong aria-hidden="true">16.5.</strong> linuxIO</a></li><li class="chapter-item expanded "><a href="../../docs/magic/cicd.html"><strong aria-hidden="true">16.6.</strong> cicd</a></li><li class="chapter-item expanded "><a href="../../docs/magic/fd.html"><strong aria-hidden="true">16.7.</strong> fd</a></li><li class="chapter-item expanded "><a href="../../docs/magic/hadoop.html"><strong aria-hidden="true">16.8.</strong> hadoop</a></li><li class="chapter-item expanded "><a href="../../docs/magic/go.html"><strong aria-hidden="true">16.9.</strong> go</a></li><li class="chapter-item expanded "><a href="../../docs/magic/async.html"><strong aria-hidden="true">16.10.</strong> async</a></li><li class="chapter-item expanded "><a href="../../docs/magic/index.html"><strong aria-hidden="true">16.11.</strong> README</a></li><li class="chapter-item expanded "><a href="../../docs/magic/software_arch.html"><strong aria-hidden="true">16.12.</strong> software_arch</a></li></ol></li><li class="chapter-item expanded "><a href="../../docs/riscv/index.html"><strong aria-hidden="true">17.</strong> riscv</a></li><li class="chapter-item expanded "><a href="../../docs/common/index.html"><strong aria-hidden="true">18.</strong> common</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../docs/common/pgsql.html"><strong aria-hidden="true">18.1.</strong> pgsql</a></li><li class="chapter-item expanded "><a href="../../docs/common/git.html"><strong aria-hidden="true">18.2.</strong> git</a></li><li class="chapter-item expanded "><a href="../../docs/common/linux.html"><strong aria-hidden="true">18.3.</strong> linux</a></li><li class="chapter-item expanded "><a href="../../docs/common/datastructure.html"><strong aria-hidden="true">18.4.</strong> datastructure</a></li><li class="chapter-item expanded "><a href="../../docs/common/docker.html"><strong aria-hidden="true">18.5.</strong> docker</a></li><li class="chapter-item expanded "><a href="../../docs/common/analyze.html"><strong aria-hidden="true">18.6.</strong> analyze</a></li><li class="chapter-item expanded "><a href="../../docs/common/oci.html"><strong aria-hidden="true">18.7.</strong> oci</a></li><li class="chapter-item expanded "><a href="../../docs/common/unsorted.html"><strong aria-hidden="true">18.8.</strong> unsorted</a></li><li class="chapter-item expanded "><a href="../../docs/common/oauth2.html"><strong aria-hidden="true">18.9.</strong> oauth2</a></li><li class="chapter-item expanded "><a href="../../docs/common/vim.html"><strong aria-hidden="true">18.10.</strong> vim</a></li><li class="chapter-item expanded "><a href="../../docs/common/python.html"><strong aria-hidden="true">18.11.</strong> python</a></li><li class="chapter-item expanded "><a href="../../docs/common/index.html"><strong aria-hidden="true">18.12.</strong> README</a></li></ol></li><li class="chapter-item expanded "><a href="../../docs/rust/index.html"><strong aria-hidden="true">19.</strong> rust</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../docs/rust/mini_tokio.html"><strong aria-hidden="true">19.1.</strong> mini_tokio</a></li><li class="chapter-item expanded "><a href="../../docs/rust/wasm.html"><strong aria-hidden="true">19.2.</strong> wasm</a></li><li class="chapter-item expanded "><a href="../../docs/rust/rust_quiz.html"><strong aria-hidden="true">19.3.</strong> rust_quiz</a></li><li class="chapter-item expanded "><a href="../../docs/rust/rust.html"><strong aria-hidden="true">19.4.</strong> rust</a></li><li class="chapter-item expanded "><a href="../../docs/rust/print_into_detail.html"><strong aria-hidden="true">19.5.</strong> print_into_detail</a></li><li class="chapter-item expanded "><a href="../../docs/rust/net-piercer.html"><strong aria-hidden="true">19.6.</strong> net-piercer</a></li><li class="chapter-item expanded "><a href="../../docs/rust/rs_channel.html"><strong aria-hidden="true">19.7.</strong> rs_channel</a></li><li class="chapter-item expanded "><a href="../../docs/rust/lists.html"><strong aria-hidden="true">19.8.</strong> lists</a></li><li class="chapter-item expanded "><a href="../../docs/rust/index.html"><strong aria-hidden="true">19.9.</strong> README</a></li></ol></li><li class="chapter-item expanded "><a href="../../docs/riscv/index.html"><strong aria-hidden="true">20.</strong> riscv</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../docs/riscv/index.html"><strong aria-hidden="true">20.1.</strong> README</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">other</li><li class="chapter-item expanded "><a href="../../other/2023-04-12-remote-usb.html"><strong aria-hidden="true">21.</strong> 2023-04-12-remote-usb</a></li><li class="chapter-item expanded "><a href="../../other/resources.html"><strong aria-hidden="true">22.</strong> resources</a></li><li class="chapter-item expanded "><a href="../../other/i3wm.html"><strong aria-hidden="true">23.</strong> i3wm</a></li><li class="chapter-item expanded "><a href="../../other/lsm.html"><strong aria-hidden="true">24.</strong> lsm</a></li><li class="chapter-item expanded "><a href="../../other/site_update_log.html"><strong aria-hidden="true">25.</strong> site_update_log</a></li><li class="chapter-item expanded "><a href="../../other/ioclub/index.html"><strong aria-hidden="true">26.</strong> ioclub</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../other/ioclub/share_1.html"><strong aria-hidden="true">26.1.</strong> share_1</a></li><li class="chapter-item expanded "><a href="../../other/ioclub/index.html"><strong aria-hidden="true">26.2.</strong> README</a></li></ol></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/index.html"><strong aria-hidden="true">27.</strong> 2021-åç«¯</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_1.html"><strong aria-hidden="true">27.1.</strong> backend_1</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_2.html"><strong aria-hidden="true">27.2.</strong> backend_2</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_3.html"><strong aria-hidden="true">27.3.</strong> backend_3</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_4.html"><strong aria-hidden="true">27.4.</strong> backend_4</a></li></ol></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/index.html"><strong aria-hidden="true">28.</strong> 2021-åç«¯</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_1.html"><strong aria-hidden="true">28.1.</strong> backend_1</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_2.html"><strong aria-hidden="true">28.2.</strong> backend_2</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_3.html"><strong aria-hidden="true">28.3.</strong> backend_3</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_4.html"><strong aria-hidden="true">28.4.</strong> backend_4</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/index.html"><strong aria-hidden="true">28.5.</strong> README</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">draft</li><li class="chapter-item expanded "><a href="../../draft/ç»„æˆåŸç†.html"><strong aria-hidden="true">29.</strong> ç»„æˆåŸç†</a></li><li class="chapter-item expanded "><a href="../../draft/è®¡ç®—æœºç½‘ç»œ.html"><strong aria-hidden="true">30.</strong> è®¡ç®—æœºç½‘ç»œ</a></li><li class="chapter-item expanded "><a href="../../draft/è¯‘-pkg_mng.html"><strong aria-hidden="true">31.</strong> è¯‘-pkg_mng</a></li><li class="chapter-item expanded "><a href="../../draft/DistributedSystem.html"><strong aria-hidden="true">32.</strong> DistributedSystem</a></li><li class="chapter-item expanded "><a href="../../draft/oscamp2022.html"><strong aria-hidden="true">33.</strong> oscamp2022</a></li><li class="chapter-item expanded "><a href="../../draft/compile.html"><strong aria-hidden="true">34.</strong> compile</a></li><li class="chapter-item expanded "><a href="../../draft/test.html"><strong aria-hidden="true">35.</strong> test</a></li><li class="chapter-item expanded "><a href="../../draft/ld.html"><strong aria-hidden="true">36.</strong> ld</a></li><li class="chapter-item expanded "><a href="../../draft/æ•°æ®åº“è®¾è®¡.html"><strong aria-hidden="true">37.</strong> æ•°æ®åº“è®¾è®¡</a></li><li class="chapter-item expanded "><a href="../../draft/index.html"><strong aria-hidden="true">38.</strong> README</a></li><li class="chapter-item expanded "><a href="../../draft/computer_network/index.html"><strong aria-hidden="true">39.</strong> computer_network</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../draft/computer_network/index.html"><strong aria-hidden="true">39.1.</strong> README</a></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Trdthg&#x27;s Self</h1>

                    <div class="right-buttons">
                                                <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <blockquote>
<p>åŸæ–‡é“¾æ¥ï¼šhttps://alexis-lozano.com/hexagonal-architecture-in-rust-7/</p>
<p>ç¿»è¯‘ï¼š<a href="https://github.com/trdthg">trdthg</a></p>
<p>é€‰é¢˜ï¼š<a href="https://github.com/trdthg">trdthg</a></p>
<p>æœ¬æ–‡ç”± <a href="https://Rustt.org">Rustt</a> ç¿»è¯‘ï¼Œ<a href="https://studyrust.org">StudyRust</a> è£èª‰æ¨å‡º</p>
</blockquote>
<h1 id="2021-10-17---rust-å…­è¾¹å½¢æ¶æ„-7---é•¿æœŸå­˜å‚¨åº“"><a class="header" href="#2021-10-17---rust-å…­è¾¹å½¢æ¶æ„-7---é•¿æœŸå­˜å‚¨åº“">2021-10-17 - Rust å…­è¾¹å½¢æ¶æ„ #7 - é•¿æœŸå­˜å‚¨åº“</a></h1>
<p>è¿™é‡Œæ˜¯æœ¬ç³»åˆ—çš„æœ€åä¸€ç¯‡æ–‡ç« äº†ã€‚éå¸¸æ„Ÿè°¢ä½ ï¼Œåœ¨ä¸ƒç¯‡æ–‡ç« ä¹‹åä»ç„¶åœ¨è¿™é‡Œçš„åŒ¿åè¯»è€…ã€‚æˆ‘ä»¬å·²ç»ä»‹ç»äº†å¾ˆå¤šä¸œè¥¿ï¼šæˆ‘ä»¬æœ‰ä¸€ä¸ªåŸŸï¼Œæˆ‘ä»¬èƒ½å¤Ÿå­˜å‚¨æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ CLI å’Œ
HTTP æœåŠ¡å™¨æ¥æ“ä½œæˆ‘ä»¬çš„ç¨‹åºã€‚é‚£ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦åšä»€ä¹ˆå‘¢ï¼Ÿå“¦ï¼Œæˆ‘çœ‹åˆ°å®¢æˆ·äº†ï¼Œæˆ‘ä»¬é—®é—®ä»–å§ã€‚</p>
<ul>
<li>å˜¿ï¼Œæœ€è¿‘å¥½å—ï¼Ÿ</li>
<li>æˆ‘å¾ˆå¥½ï¼Œä½†ä½ çš„è½¯ä»¶ä¸æ˜¯å¾ˆå¥½ã€‚</li>
<li>å“¦... æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</li>
<li>å½“æˆ‘é‡å¯ç¨‹åºæ—¶ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½ä¸¢å¤±äº†ã€‚</li>
<li>å•Šï¼Œå¯¹ï¼Œé‚£å¾ˆæ­£å¸¸ã€‚æˆ‘ä»¬ç°åœ¨ä¾ç„¶æ˜¯åœ¨ç›´æ¥æ“ä½œå†…å­˜ã€‚</li>
<li>ä½ èƒ½è®©è¿™äº›æ•°æ®å¾—ä»¥é•¿æœŸä¿å­˜å—ï¼Ÿ</li>
<li>è¿™äº›æ•°æ®ï¼Ÿå½“ç„¶å¯ä»¥ã€‚æ‚¨èƒ½ç»™æˆ‘ä»¬æä¾›ä¿å­˜çš„åœ°æ–¹å—ï¼Ÿ</li>
<li>å—¯ï¼Œæˆ‘ä¸çŸ¥é“ã€‚æˆ‘è¦å»æ‰¾äººé—®é—®ã€‚ä½ èƒ½ä¸èƒ½è®©ç¨‹åºæš‚æ—¶æŠŠæ•°æ®å­˜å‚¨å†ç¡¬ç›˜ä¸Šï¼Ÿ</li>
<li>é©¬ä¸Šå®Œæˆï¼</li>
</ul>
<p>å¥½çš„ï¼Œæˆ‘ä»¬æƒ³è¦æŠŠæ•°æ®ä¿å­˜åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå½“ç¨‹åºé‡å¯åä¹Ÿä¸ä¼šè¢«åˆ é™¤ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨æ–‡ä»¶ï¼ŒåŒæ—¶å› ä¸ºæˆ‘ä»¬æƒ³è¦ä½¿ç”¨ä¸€ç§å¯é çš„æ–¹å¼å»æŸ¥è¯¢æ•°æ®ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ SQLã€‚æ–‡ä»¶å’Œ
SQL... æœ‰ä¸œè¥¿åœ¨æˆ‘è„‘æµ·é‡Œå°–å«è€… <strong>SQLite</strong></p>
<p>æœ‰ä¸€ç‚¹å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»å®ç°äº†ä¸€ä¸ªå­˜å‚¨åº“ç³»ç»Ÿï¼Œæˆ‘ä»¬åªéœ€è¦å¡«åŠ ä¸€ä¸ªæ–°çš„å­˜å‚¨åº“ï¼Œä»¥åŠä¸€ä¸ªå‘½ä»¤è¡Œå¼€å…³å»å†³å®šä½¿ç”¨é‚£ç§å­˜å‚¨åº“å³å¯ã€‚å› ä¸ºæœ‰å…­è¾¹å½¢æ¶æ„ï¼Œæˆ‘ä»¬çš„åŸŸå®Œå…¨ä¸ç”¨ä¿®æ”¹
: D</p>
<h2 id="ä½¿ç”¨-sqlite-ä½œä¸ºæœ¬åœ°å­˜å‚¨"><a class="header" href="#ä½¿ç”¨-sqlite-ä½œä¸ºæœ¬åœ°å­˜å‚¨">ä½¿ç”¨ SQLite ä½œä¸ºæœ¬åœ°å­˜å‚¨</a></h2>
<h3 id="åˆ›å»ºæ•°æ®åº“"><a class="header" href="#åˆ›å»ºæ•°æ®åº“">åˆ›å»ºæ•°æ®åº“</a></h3>
<p>é¦–å…ˆæˆ‘ä»¬è¦ä½¿ç”¨ sqlite3 æä¾›çš„å‘½ä»¤è¡Œå·¥å…·åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼š</p>
<pre><code>sqlite3 path/to/the/database.sqlite
</code></pre>
<p>ä½ åº”è¯¥å·²ç»å¾—åˆ°äº† SQLite çš„æç¤ºã€‚ç°åœ¨æˆ‘ä»¬è¦åˆ›å»ºä¸¤å¼ è¡¨ã€‚ä¸ºä»€ä¹ˆæ˜¯ä¸¤å¼ ï¼Ÿå› ä¸ºä¸€ä¸ªå®å¯æ¢¦æœ‰å¾ˆå¤šç§ç±»å‹ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½å†ä¸€åˆ—ä¸­å­˜å‚¨æ‰€æœ‰çš„ç±»å‹ã€‚</p>
<p>å®é™…ä¸Šï¼Œå®å¯æ¢¦è¡¨ä¸ç±»å‹è¡¨æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼š</p>
<ul>
<li>ä¸€åªå®å¯æ¢¦æœ‰å¤šç§ç±»å‹</li>
<li>ä¸€ä¸ªç±»å‹å¯ä»¥å¯¹åº”å¤šä¸ªå®å¯æ¢¦</li>
</ul>
<p>æ‰€ä»¥å®Œæ•´çš„æ•°æ®åº“åº”è¯¥æ˜¯ä¸‹é¢çš„æ ·å­ï¼Œå®ƒä¸€å…±æœ‰ 3 å¼ è¡¨ï¼š</p>
<pre><code>pokemons           | number          | name     |

types              | id              | name     |

pokemons_to_types  | pokemons.number | types.id |
</code></pre>
<p>ä½†æ˜¯åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œå› ä¸ºæˆ‘ä»¬æœ‰ç±»å‹çš„ <code>id</code>ï¼Œæš‚æ—¶æˆ‘ä»¬åªéœ€è¦ä¸¤å¼ è¡¨ï¼š</p>
<pre><code>pokemons | number          | name |

types    | pokemons.number | name |
</code></pre>
<p>è®©æˆ‘ä»¬å›åˆ° SQLite çš„å‘½ä»¤è¡Œä¸­ã€‚é¦–å…ˆæˆ‘ä»¬è¦æ¿€æ´»å¤–é”® (é»˜è®¤æ˜¯å…³é—­çš„)ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šè¿™ä¸ªæ“ä½œåªä¼šåœ¨æœ¬æ¬¡è¿æ¥ä¸­ç”Ÿæ•ˆï¼Œ</p>
</blockquote>
<pre><code class="language-sql">pragma foreign_keys = 1;
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬å¼€å§‹åˆ›å»ºæ•°æ®è¡¨ï¼š</p>
<pre><code class="language-sql">create table pokemons (
    number integer primary key,
    name text
);

create table types (
    pokemon_number integer,
    name text,
    foreign key (pokemon_number) references pokemons (number) on delete cascade,
    primary key (pokemon_number, name)
);
</code></pre>
<p><code>on delete cascade</code> çš„æ•ˆæœæ˜¯å½“ä¸€ä¸ªå®å¯æ¢¦è¢«åˆ é™¤æ—¶ï¼Œç±»å‹è¡¨ä¸­æ‰€æœ‰ <code>pokemon_number</code> å’Œ <code>number</code>
ç›¸åŒçš„è¡Œä¹Ÿä¼šè¢«åˆ é™¤ã€‚è¿™æ ·æˆ‘ä»¬åœ¨ç¨‹åºä¸­å°±ä¸ç”¨åœ¨å…³å¿ƒäº†ï¼š) ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨ Ctrl-D é€€å‡º SQLite äº†ã€‚</p>
<h2 id="æ·»åŠ é€‰æ‹©å­˜å‚¨åº“çš„å¼€å…³"><a class="header" href="#æ·»åŠ é€‰æ‹©å­˜å‚¨åº“çš„å¼€å…³">æ·»åŠ é€‰æ‹©å­˜å‚¨åº“çš„å¼€å…³</a></h2>
<p>ç°åœ¨æˆ‘ä»¬æœ‰ SQLite ä½œä¸ºæ•°æ®åº“ï¼Œæˆ‘ä»¬è¦å†æ·»åŠ ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°å‘Šè¯‰ç¨‹åºæˆ‘ä»¬æƒ³ä½¿ç”¨ SQLiteã€‚å¤§æ¦‚æ•ˆæœæ˜¯è¿™æ ·</p>
<pre><code>pokedex --sqlite path/to/the/database.sqlite
</code></pre>
<p>å½“ä½ ä½¿ç”¨ cargo run æ—¶éœ€è¦æ”¹ä¸ºè¿™æ ·ï¼š</p>
<pre><code>cargo run -- --sqlite path/to/the/database.sqlite
</code></pre>
<pre><code class="language-rs">fn main() { let repo = Arc::new(InMemoryRepository::new());

    let matches = App::new(crate_name!())
        .version(crate_version!())
        .author(crate_authors!())
        .arg(Arg::with_name(&quot;cli&quot;).long(&quot;cli&quot;).help(&quot;Runs in CLI mode&quot;))
        .arg(Arg::with_name(&quot;sqlite&quot;).long(&quot;sqlite&quot;).value_name(&quot;PATH&quot;))
        .get_matches();

    match matches.occurrences_of(&quot;cli&quot;) {
        0 =&gt; api::serve(&quot;localhost:8000&quot;, repo),
        _ =&gt; cli::run(repo),
    }
}
</code></pre>
<p>ç°åœ¨æ•°æ®åº“å¼€å…³å·²ç»åŠ ä¸Šäº†ï¼Œé€šè¿‡ <code>--help</code> æŸ¥çœ‹ï¼š</p>
<pre><code>OPTIONS: --sqlite &lt;PATH&gt;
</code></pre>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å»åˆå§‹åŒ–ä¸€ä¸ªæš‚æ—¶è¿˜æ²¡æœ‰å®ç°çš„ <code>SqliteRepository</code>ï¼š</p>
<pre><code class="language-rs">use repositories::pokemon::{..., SqliteRepository};

fn main() {
    let matches = ...

    let repo = build_repo(matches.value_of(&quot;sqlite&quot;));

    match matches.occurrences_of(&quot;cli&quot;) {
        0 =&gt; api::serve(&quot;localhost:8000&quot;, repo),
        _ =&gt; cli::run(repo),
    }

}

fn build_repo(sqlite_value: Option&lt;&amp;str&gt;) -&gt; Arc&lt;dyn Repository&gt; {
    if let Some(path) = sqlite_value {
        match SqliteRepository::try_new(path) {
            Ok(repo) =&gt; return Arc::new(repo),
            _ =&gt; panic!(&quot;Error while creating sqlite repo&quot;),
        }
    }

    Arc::new(InMemoryRepository::new())
}
</code></pre>
<p>å½“ <code>--sqlite</code> æ‰“å¼€æ—¶ï¼Œç¨‹åºä¼šå°è¯•åˆå§‹åŒ– SQLite å­˜å‚¨åº“ã€‚å¦‚æœåˆå§‹åŒ–å¤±è´¥ï¼Œç¨‹åºå°±ä¼šå´©æºƒå¹¶æ‰“å°é”™è¯¯ä¿¡æ¯ã€‚å¦‚æœæ²¡æœ‰å¼€å¯ <code>--sqlite</code>
å°±ä¼šä½¿ç”¨é»˜è®¤çš„å†…å­˜å­˜å‚¨åº“ã€‚</p>
<h2 id="å®ç°-sqlite-å­˜å‚¨åº“"><a class="header" href="#å®ç°-sqlite-å­˜å‚¨åº“">å®ç° SQlite å­˜å‚¨åº“</a></h2>
<p>æˆ‘ä»æ–‡ç« ä¸€å¼€å§‹å°±åœ¨è°ˆè®º SQLiteã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸€ç§ä» Rust è°ƒç”¨æ•°æ®åº“çš„æ–¹æ³•ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ <code>rusqlite</code> å»å®ç°ã€‚è®©æˆ‘ä»¬åœ¨
<code>Cargo.toml</code> ä¸­å¯¼å…¥å®ƒï¼š</p>
<pre><code class="language-toml">[dependencies]
rusqlite = &quot;0.26.0&quot;
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬è¦å®ç° <code>SQLiteRepository</code>ï¼Œæˆ‘è¦åœ¨ <code>InMemoryRepository</code> æ‰€åœ¨çš„æ–‡åŠ ä¸­åˆ›å»º
<code>SQLiteRepository</code>ã€‚å½“ç„¶ï¼Œè¿™ä¸æ˜¯å¼ºåˆ¶çš„ï¼Œä½ ä¹Ÿå¯ä»¥æ ¹æ®å»è¦æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ªæ–°æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="language-rs">use rusqlite::Connection;

pub struct SqliteRepository { connection: Mutex&lt;Connection&gt;, }
</code></pre>
<p><em>main.rs</em> ä¸­çš„ <code>use</code> ç°åœ¨åº”è¯¥ä¸ä¼šæŠ¥é”™äº†ï¼Œæ¥ç€å®ç° <code>try_new</code> æ–¹æ³•ï¼š</p>
<pre><code class="language-rs">use rusqlite::{..., OpenFlags};

impl SqliteRepository {
    pub fn try_new(path: &amp;str) -&gt; Result&lt;Self, ()&gt; {
        let connection = match Connection::open_with_flags(path, OpenFlags::SQLITE_OPEN_READ_WRITE)
        {
            Ok(connection) =&gt; connection,
            _ =&gt; return Err(()),
        };

        match connection.execute(&quot;pragma foreign_keys = 1&quot;, []) {
            Ok(_) =&gt; Ok(Self {
                connection: Mutex::new(connection),
            }),
            _ =&gt; Err(()),
        }
    }

}
</code></pre>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬è°ƒç”¨ <code>rusqlite</code> å»æ–°å»ºä¸€ä¸ªå¯¹æ•°æ®æ–‡ä»¶çš„è¿æ¥ã€‚è€Œä¸”æˆ‘ä»¬é€šè¿‡ <code>OpenFlags</code> å»æ˜ç¡®ç¦æ­¢å½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶ <code>rusqulite</code>
å»è‡ªåŠ¨åˆ›å»ºæ•°æ®æ–‡ä»¶ã€‚å¦‚æœè¿æ¥æˆåŠŸï¼Œæˆ‘ä»¬å°±ä¼šæ‰§è¡Œåªå‰æåˆ°çš„å‘½ä»¤ï¼Œç¡®ä¿å¤–é”®å¼€å¯ã€‚æœ€åæˆ‘ä»¬å»è¿”å›è¿™ä¸ªå­˜å‚¨åº“ã€‚</p>
<p>å¦‚æœä½ ç°åœ¨å°è¯•è¿è¡Œç¨‹åºï¼Œè¿˜ä¸èƒ½é€šè¿‡ç¼–è¯‘ï¼Œä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰å®ç° <code>Repository</code> Trait å®šä¹‰çš„çš„æ‰€æœ‰æ–¹æ³•ï¼š</p>
<pre><code class="language-rs">impl Repository for SqliteRepository {
    fn insert(
        &amp;self,
        number: PokemonNumber,
        name: PokemonName,
        types: PokemonTypes,
    ) -&gt; Result&lt;Pokemon, InsertError&gt; {
        Err(InsertError::Unknown)
    }

    fn fetch_all(&amp;self) -&gt; Result&lt;Vec&lt;Pokemon&gt;, FetchAllError&gt;{
        Err(FetchAllError::Unknown)
    }

    fn fetch_one(&amp;self, number: PokemonNumber) -&gt; Result&lt;Pokemon, FetchOneError&gt; {
        Err(FetchOneError::Unknown)
    }

    fn delete(&amp;self, number: PokemonNumber) -&gt; Result&lt;(), DeleteError&gt; {
        Err(DeleteError::Unknown)
    }
}
</code></pre>
<p>ç¼–è¯‘é€šè¿‡äº†ï¼Œä½†æ˜¯æˆ‘ä»¬çš„å­˜å‚¨åº“ä¾ç„¶æ²¡ä»€ä¹ˆç”¨ç°åœ¨ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¦å®ç°é‚£äº›æ–¹æ³• :)</p>
<h2 id="è¾…åŠ©å‡½æ•°"><a class="header" href="#è¾…åŠ©å‡½æ•°">è¾…åŠ©å‡½æ•°</a></h2>
<p>åœ¨æˆ‘ä»¬å®ç°å­˜å‚¨åº“éœ€è¦çš„å‡½æ•°ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆå®šä¹‰ä¸¤ä¸ªè¾…åŠ©å‡½æ•°ã€‚æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢ä¸€ä¸ªæˆ–è€…æ˜¯æ‰€æœ‰å®å¯æ¢¦ï¼Œç”¨ SQL è¯­å¥æè¿°å°±æ˜¯ä¸€ä¸ª
<code>select</code>ã€‚æˆ‘ä»¬åˆ›å»ºçš„è¾…åŠ©å‡½æ•°èƒ½å¤ŸæŠŠè¿™ä¸¤ä¸ªæŸ¥è¯¢é€»è¾‘æ•´åˆåˆ°ä¸€èµ·ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªèƒ½å¤Ÿæ‹¿åˆ°æ‰€æœ‰å®å¯æ¢¦ç¼–å·å’Œåå­—çš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªå·²ç»æ‹¿åˆ°é”çš„å­˜å‚¨åº“ï¼Œä¹Ÿå¯èƒ½ä¼šéœ€è¦ä¸€ä¸ªå®å¯æ¢¦çš„ç¼–å·ã€‚å¦‚æœå‡½æ•°æ¥æ”¶åˆ°äº†ç¼–å·ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨ SQL
è¯­å¥ä¸Šæ·»åŠ  <code>where</code> å­å¥ã€‚è¿™ä¸ªå‡½æ•°ä¼šè¢«æ·»åŠ åˆ° <code>impl SqliteRepository</code> å—å†…ï¼Œå› ä¸ºå®ƒä¸æ˜¯ <code>Repository Trait</code>
çš„ä¸€éƒ¨åˆ†ã€‚å¦å¤–ï¼Œæˆ‘ä»¬å°†ç›´æ¥è¿”å›åŸå§‹æ•°æ® ( <code>u16</code> å’Œ <code>String</code> )ï¼Œè€Œä¸”è¿™ä¸ªå‡½æ•°åº”è¯¥æ˜¯ç§æœ‰çš„ã€‚</p>
<pre><code class="language-rs">use std::sync::{..., MutexGuard};

fn fetch_pokemon_rows(
    lock: &amp;MutexGuard&lt;'_, Connection&gt;,
    number: Option&lt;u16&gt;,
) -&gt; Result&lt;Vec&lt;(u16, String)&gt;, ()&gt; {
    // code will go here
}
</code></pre>
<p>è®©æˆ‘ä»¬å¼€å§‹å§ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è¦æ ¹æ®æ•°å­—æ˜¯å¦å­˜åœ¨æ¥å®šä¹‰æŸ¥è¯¢è¯­å¥å’ŒæŸ¥è¯¢å‚æ•°ï¼š</p>
<pre><code class="language-rs">let (query, params) = match number {
    Some(number) =&gt; (
        &quot;select number, name from pokemons where number = ?&quot;,
        vec![number],
    ),
    _ =&gt; (&quot;select number, name from pokemons&quot;, vec![]),
};
</code></pre>
<p>ç›¸å½“ç®€å•å§ï¼Ÿç°åœ¨æˆ‘ä»¬å¿…é¡»å‡†å¤‡ä¸€ä¸ª <code>statment</code> å¹¶ä¼ é€’æˆ‘ä»¬çš„å‚æ•°ï¼š</p>
<pre><code class="language-rs">use rusqlite::{..., params_from_iter};

...
let mut stmt = match lock.prepare(query) {
    Ok(stmt) =&gt; stmt,
    _ =&gt; return Err(()),
};

let mut rows = match stmt.query(params_from_iter(params)) {
    Ok(rows) =&gt; rows,
    _ =&gt; return Err(()),
};
</code></pre>
<p>æˆ‘ä»¬å·²ç»å¾—åˆ°æŸ¥è¯¢ç»“æœï¼Œç°åœ¨éœ€è¦æŠŠç»“æœè½¬æ¢ä¸ºä¸€ä¸ª <code>(u16, String)</code> ç±»å‹çš„å…ƒç»„ å†æŠŠä»–ä»¬æ±‡é›†åˆ°ä¸€ä¸ªå‘é‡é‡Œè¿”å›</p>
<pre><code class="language-rs">...
let mut pokemon_rows = vec![];

while let Ok(Some(row)) = rows.next() {
    match (row.get::&lt;usize, u16&gt;(0), row.get::&lt;usize, String&gt;(1)) {
        (Ok(number), Ok(name)) =&gt; pokemon_rows.push((number, name)),
        _ =&gt; return Err(()),
    };
}

Ok(pokemon_rows)
</code></pre>
<p>å¯¹ <code>types</code> è¡¨ä¹Ÿä¸€æ ·ï¼Œè¿™ä¸ªè¾…åŠ©å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ•°æ®åº“è¿æ¥å’Œä¸€ä¸ª <code>number</code>ï¼ŒæŸ¥è¯¢æˆåŠŸä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²å‘é‡ï¼Œè¡¨ç¤ºæŸä¸€åªå®å¯æ¢¦çš„ç±»å‹ï¼š</p>
<pre><code class="language-rs">fn fetch_type_rows(lock: &amp;MutexGuard&lt;'_, Connection&gt;, number: u16) -&gt; Result&lt;Vec&lt;String&gt;, ()&gt; {
    // code will go here
}
</code></pre>
<p>å‡†å¤‡æŸ¥è¯¢è¯­å¥ï¼Œå¸¦ç€å‚æ•°è¿›è¡ŒæŸ¥è¯¢ï¼š</p>
<pre><code class="language-rs">let mut stmt = match lock.prepare(&quot;select name from types where pokemon_number = ?&quot;) {
    Ok(stmt) =&gt; stmt,
    _ =&gt; return Err(()),
};

let mut rows = match stmt.query([number]) {
    Ok(rows) =&gt; rows,
    _ =&gt; return Err(()),
};
</code></pre>
<p>ä¾æ¬¡ä»ç»“æœä¸­æå–å‡ºç±»å‹ï¼š</p>
<pre><code class="language-rs">let mut type_rows = vec![];

while let Ok(Some(row)) = rows.next() {
    match row.get::&lt;usize, String&gt;(0) {
        Ok(name) =&gt; type_rows.push(name),
        _ =&gt; return Err(()),
    };
}
Ok(type_rows)
</code></pre>
<p>Aaaandï¼Œé¡ºåˆ©å®Œæˆï¼è¿™ä¸¤ä¸ªåŠŸèƒ½ç°åœ¨éƒ½å®ç°äº†ã€‚ä½¿ç”¨å®ƒä»¬å»å®ç° <code>fetch_one</code> å’Œ <code>fetch_all</code> ä¼šæ›´å®¹æ˜“:)</p>
<h2 id="æŸ¥è¯¢ä¸€åªå®å¯æ¢¦"><a class="header" href="#æŸ¥è¯¢ä¸€åªå®å¯æ¢¦">æŸ¥è¯¢ä¸€åªå®å¯æ¢¦</a></h2>
<p>æˆ‘ä»¬ä¼šä¸€æ­¥ä¸€æ­¥æ¥ï¼Œé¦–å…ˆå¤„ç†ä¸‹é¢çš„æ–¹æ³•ï¼š</p>
<pre><code class="language-rs">fn fetch_one(&amp;self, number: PokemonNumber) -&gt; Result&lt;Pokemon, FetchOneError&gt; {
    // code will go here
}
</code></pre>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦å…ˆæ‹¿åˆ°é”ï¼Œå¹¶é€šè¿‡è°ƒç”¨ä¹‹å‰çš„è¾…åŠ©å‡½æ•°å»æŸ¥è¯¢å®å¯æ¢¦ï¼š</p>
<pre><code class="language-rs">let lock = match self.connection.lock() {
    Ok(lock) =&gt; lock,
    _ =&gt; return Err(FetchOneError::Unknown),
};

let mut pokemon_rows = match Self::fetch_pokemon_rows(&amp;lock, Some(u16::from(number.clone()))) {
    Ok(pokemon_rows) =&gt; pokemon_rows,
    _ =&gt; return Err(FetchOneError::Unknown),
};
</code></pre>
<p>å½“æŸ¥è¯¢ç»“æœä¸ºç©ºæ—¶ï¼Œæˆ‘ä»¬å°±è¿”å› <code>NotFound</code>ï¼Œå¦åˆ™è¿”å›æŸ¥è¯¢ç»“æœçš„ç¬¬ä¸€ä¸ªï¼š</p>
<pre><code class="language-rs">...
if pokemon_rows.is_empty() {
    return Err(FetchOneError::NotFound);
}

let pokemon_row = pokemon_rows.remove(0);
</code></pre>
<p>ä¸é”™ã€‚ç°åœ¨æˆ‘ä»¬å»æŸ¥è¯¢å®å¯æ¢¦ç±»å‹ï¼š</p>
<pre><code class="language-rs">let type_rows = match Self::fetch_type_rows(&amp;lock, pokemon_row.0) {
    Ok(type_rows) =&gt; type_rows,
    _ =&gt; return Err(FetchOneError::Unknown),
};
</code></pre>
<p>æˆ‘ä»¬å·²ç»æœ‰å®å¯æ¢¦çš„ç¼–å·ã€åç§°å’Œç±»å‹ã€‚æ€»æ˜¯æ—¶å€™æŠŠä»–ä»¬å°è£…ä¸º <code>Response</code> äº†ï¼š</p>
<pre><code class="language-rs">...
match (
    PokemonNumber::try_from(pokemon_row.0),
    PokemonName::try_from(pokemon_row.1),
    PokemonTypes::try_from(type_rows),
) {
    (Ok(number), Ok(name), Ok(types)) =&gt; Ok(Pokemon::new(number, name, types)),
    _ =&gt; Err(FetchOneError::Unknown),
}
</code></pre>
<h2 id="æŸ¥è¯¢æ‰€æœ‰å®å¯æ¢¦"><a class="header" href="#æŸ¥è¯¢æ‰€æœ‰å®å¯æ¢¦">æŸ¥è¯¢æ‰€æœ‰å®å¯æ¢¦</a></h2>
<pre><code class="language-rs">fn fetch_all(&amp;self) -&gt; Result&lt;Vec&lt;Pokemon&gt;, FetchAllError&gt; {
    // code will go here
}
</code></pre>
<p>é¦–å…ˆè·å–é”å¹¶æŸ¥è¯¢æ‰€æœ‰å®å¯æ¢¦ï¼š</p>
<pre><code class="language-rs">let lock = match self.connection.lock() {
    Ok(lock) =&gt; lock,
    _ =&gt; return Err(FetchAllError::Unknown),
};

let pokemon_rows = match Self::fetch_pokemon_rows(&amp;lock, None) {
    Ok(pokemon_rows) =&gt; pokemon_rows,
    _ =&gt; return Err(FetchAllError::Unknown),
};
</code></pre>
<p>ä½ å¯ä»¥æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬æŠŠ <code>number</code> å‚æ•°è®¾ç½®ä¸ºäº† <code>None</code>ï¼Œå¯¹æ¯ä¸ªå®å¯æ¢¦ï¼Œæˆ‘ä»¬ä¼šå•ç‹¬æŸ¥è¯¢å®ƒçš„ç±»å‹ï¼Œæœ€ç»ˆå°è£…ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼š</p>
<pre><code class="language-rs">...
let mut pokemons = vec![];

for pokemon_row in pokemon_rows {
    let type_rows = match Self::fetch_type_rows(&amp;lock, pokemon_row.0) {
        Ok(type_rows) =&gt; type_rows,
        _ =&gt; return Err(FetchAllError::Unknown),
    };

    let pokemon = match (
        PokemonNumber::try_from(pokemon_row.0),
        PokemonName::try_from(pokemon_row.1),
        PokemonTypes::try_from(type_rows),
    ) {
        (Ok(number), Ok(name), Ok(types)) =&gt; Pokemon::new(number, name, types),
        _ =&gt; return Err(FetchAllError::Unknown),
    };

    pokemons.push(pokemon);
}

Ok(pokemons)
</code></pre>
<h2 id="æ’å…¥ä¸€åªå®å¯æ¢¦"><a class="header" href="#æ’å…¥ä¸€åªå®å¯æ¢¦">æ’å…¥ä¸€åªå®å¯æ¢¦</a></h2>
<pre><code class="language-rs">fn insert(
    &amp;self,
    number: PokemonNumber,
    name: PokemonName,
    types: PokemonTypes,
) -&gt; Result&lt;Pokemon, InsertError&gt; {
    // code will go here
}
</code></pre>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬ä»è¿æ¥ä¸­è·å–é”ï¼š</p>
<pre><code class="language-rs">let mut lock = match self.connection.lock() {
    Ok(lock) =&gt; lock,
    _ =&gt; return Err(InsertError::Unknown),
};
</code></pre>
<p>æ¥ç€æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªäº‹åŠ¡ã€‚ä¸ºä»€ä¹ˆæˆ‘ä»¬æ²¡æœ‰ç›´æ¥æ‰§è¡Œä¸€æ¡å‘½ä»¤ï¼Ÿå› ä¸ºæˆ‘ä»¬éœ€è¦å‘ <code>pokemons</code> ä¸­æ’å…¥ä¸€åªå®å¯æ¢¦ï¼ŒåŒæ—¶è¦æƒ³ <code>types</code>
ä¸­æ’å…¥å®ƒçš„ç±»å‹ã€‚å¦‚æœè¿™ä¸¤æ¬¡æ’å…¥æœ‰ä¸€ä¸ªå¤±è´¥äº†ï¼Œè¿™æ¬¡æ’å…¥æœ€å¥½èƒ½å›æ»šã€‚ä½¿ç”¨äº‹åŠ¡æ—¶ï¼Œä½ éœ€è¦å…ˆåˆ›å»º <code>SQL</code> è¯­å¥ï¼Œä¹‹åæäº¤ã€‚å¦‚æœæœ‰é”™è¯¯å‘ç”Ÿï¼Œ<code>rusqlite</code>
ä¼šè‡ªåŠ¨å®Œæˆå›æ»šã€‚</p>
<pre><code class="language-rs">let transaction = match lock.transaction() {
    Ok(transaction) =&gt; transaction,
    _ =&gt; return Err(InsertError::Unknown),
};
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬è¦å‘äº‹åŠ¡ä¸­æ·»åŠ ç¬¬ä¸€æ¡å‘½ä»¤ã€‚æˆ‘ä»¬è¦æ’å…¥ä¸€åªå®å¯æ¢¦ã€‚å¦‚æœå·²ç»å­˜åœ¨ï¼Œæˆ‘ä»¬å¸Œæœ›å‡½æ•°æ‰§è¡Œå¤±è´¥å¹¶è¿”å›ä¸€ä¸ªé”™è¯¯ï¼š</p>
<pre><code class="language-rs">use rusqlite::{..., Error::SqliteFailure, params};

...
match transaction.execute(
    &quot;insert into pokemons (number, name) values (?, ?)&quot;,
    params![u16::from(number.clone()), String::from(name.clone())],
) {
    Ok(_) =&gt; {}
    Err(SqliteFailure(_, Some(message))) =&gt; {
        if message == &quot;UNIQUE constraint failed: pokemons.number&quot; {
            return Err(InsertError::Conflict);
        } else {
            return Err(InsertError::Unknown);
        }
    }
    _ =&gt; return Err(InsertError::Unknown),
};
</code></pre>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>rusqlite</code> è¿”å›çš„é”™è¯¯ä¿¡æ¯æ¥æ£€æŸ¥é”™è¯¯æ˜¯å¦æ˜¯ç”±äºå†²çªå¼•èµ·çš„ã€‚ç°åœ¨å®å¯æ¢¦çš„æ’å…¥é€»è¾‘å®Œæˆäº†ã€‚</p>
<p>æ¥ä¸‹æ¥è¦å¤„ç†æ’å…¥ç±»å‹ã€‚æˆ‘ä»¬éœ€è¦ä¸º <code>PokemonTypes</code> å‚æ•°ä¸­çš„æ¯ç§ç±»å‹éƒ½åˆ†åˆ«æ‰§è¡Œä¸€æ¬¡æ’å…¥æ“ä½œï¼š</p>
<pre><code class="language-rs">...
for _type in Vec::&lt;String&gt;::from(types.clone()) {
    if let Err(_) = transaction.execute(
        &quot;insert into types (pokemon_number, name) values (?, ?)&quot;,
        params![u16::from(number.clone()), _type],
    ) {
        return Err(InsertError::Unknown);
    }
}
</code></pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æäº¤è¿™ä¸ªäº‹åŠ¡ï¼Œå¹¶è¿”å›ç»“æœã€‚</p>
<pre><code class="language-rs">...
match transaction.commit() {
    Ok(_) =&gt; Ok(Pokemon::new(number, name, types)),
    _ =&gt; Err(InsertError::Unknown),
}
</code></pre>
<h2 id="åˆ é™¤ä¸€åªå®å¯æ¢¦"><a class="header" href="#åˆ é™¤ä¸€åªå®å¯æ¢¦">åˆ é™¤ä¸€åªå®å¯æ¢¦</a></h2>
<pre><code class="language-rs">fn delete(&amp;self, number: PokemonNumber) -&gt; Result&lt;(), DeleteError&gt; {
    // code will go here
}
</code></pre>
<pre><code class="language-rs">let lock = match self.connection.lock() {
    Ok(lock) =&gt; lock,
    _ =&gt; return Err(DeleteError::Unknown),
};
</code></pre>
<pre><code class="language-rs">match lock.execute(
    &quot;delete from pokemons where number = ?&quot;,
    params![u16::from(number)],
) {
    Ok(0) =&gt; Err(DeleteError::NotFound),
    Ok(_) =&gt; Ok(()),
    _ =&gt; Err(DeleteError::Unknown),
}
</code></pre>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼šç¬¬ä¸€ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†å…³æ³¨åˆ é™¤å®å¯æ¢¦æ—¶è®°å¾—åˆ é™¤ç±»å‹ä¿¡æ¯ï¼Œåœ¨åˆ›å»ºæ•°æ®è¡¨æ—¶æˆ‘ä»¬å·²ç»è®¾ç½®äº† <code>on delete cascade</code> è®© sqlite
å»è‡ªåŠ¨å¤„ç†ã€‚ç¬¬äºŒï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ é™¤æ“ä½œè¿”å›çš„è¡Œæ•°å»åˆ¤æ–­æ˜¯å¦åˆ é™¤æˆåŠŸï¼Œå¦‚æœæ•°é‡æ˜¯ 0ï¼Œå°±è¡¨ç¤ºåˆ é™¤å¤±è´¥ã€‚</p>
<p>ä½ ç°åœ¨åº”è¯¥èƒ½ä½¿ç”¨ä½ çš„ SQLite æ•°æ®åº“ä½œä¸ºå­˜å‚¨åº“äº†ï¼Œè€Œä¸”èƒ½é€šè¿‡ CLI å’Œ HTTP API ä¸¤ç§æ–¹å¼è®¿é—®ã€‚ä½ å¯ä»¥å°è¯•ä» CLI åˆ›å»ºä¸€äº›æ–°çš„å®å¯æ¢¦ï¼Œå¹¶ä»
HTTP API å»è·å–ä»–ä»¬ :)</p>
<h2 id="å°æ’æ›²"><a class="header" href="#å°æ’æ›²">å°æ’æ›²</a></h2>
<p>ğŸ™€ æˆ‘çœ‹åˆ°å®¢æˆ·äº†ï¼Œä»–æ­£æœç€æˆ‘è¿™è¾¹æ¥ã€‚</p>
<ul>
<li>ä½ å¥½ Alexisï¼</li>
<li>ä½ å¥½ å®¢æˆ·ï¼æˆ‘å·²ç»å®ç°äº†ä¸€ä¸ªæŒä¹…åŒ–çš„å­˜å‚¨åº“ï¼Œå®ƒæŠŠæ•°æ®å­˜å‚¨åœ¨è®¡ç®—æœºçš„ç¡¬ç›˜ä¸Šã€‚</li>
<li>å“¦ï¼Œå¤ªå¥½äº†ï¼è™½ç„¶ç°åœ¨æˆ‘çŸ¥é“äº†æˆ‘ä»¬å°†ä½¿ç”¨ä»€ä¹ˆä½œä¸ºå­˜å‚¨åº“ã€‚</li>
<li>ä¸é”™ï¼Œé€Ÿåº¦å¾ˆå¿«ã€‚æ˜¯ PostgreSQL å—ï¼Ÿè¿˜æ˜¯ Mysqlï¼Ÿ</li>
<li>éƒ½ä¸æ˜¯ï¼Œæˆ‘ä»¬çš„å…¬å¸å¸Œæœ›å®ƒæ˜¯æ°´å¹³å¯æ‹“å±•çš„ã€‚</li>
<li>å—¯ï¼Œè¿™è®©æˆ‘æƒ³èµ·äº†ä¸€ä¸ª<a href="https://www.youtube.com/watch?v=b2F-DItXtZs">ææ€–æ•…äº‹</a>ã€‚é‚£å¥½å§ï¼Œä½ ä»¬å…¬å¸æ‰“ç®—ä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯ï¼Ÿ</li>
<li>ä»–ä»¬æƒ³ä½¿ç”¨ Airtableï¼Œä¸€ä¸ªç±»ä¼¼äº Excel çš„åœ¨çº¿è¡¨æ ¼ã€‚</li>
<li>å“¦... è®©æˆ‘çœ‹çœ‹æˆ‘èƒ½åšçš„ã€‚</li>
</ul>
<h2 id="ä½¿ç”¨-airtable-å®ç°å¼¹æ€§å­˜å‚¨åº“"><a class="header" href="#ä½¿ç”¨-airtable-å®ç°å¼¹æ€§å­˜å‚¨åº“">ä½¿ç”¨ Airtable å®ç°å¼¹æ€§å­˜å‚¨åº“</a></h2>
<p>å¥½å§ï¼Œç°åœ¨æˆ‘ä»¬å¿…é¡»åˆ›å»ºå¦ä¸€ä¸ªå­˜å‚¨åº“äº†ã€‚ç”Ÿæ´»å°±æ˜¯å¦‚æ­¤ã€‚æ‰€ä»¥æˆ‘ä»¬ç°åœ¨å¯ä»¥å» Airtable
ç½‘ç«™çœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆä½¿ç”¨çš„ã€‚ä½ å¿…é¡»åˆ›å»ºä¸€ä¸ªè´¦æˆ·ï¼Œå¹¶ä¸”æ–°å»ºä¸€ä¸ªå·¥ä½œåŒºã€‚åœ¨è¿™ä¸ªå·¥ä½œåŒºé‡Œï¼Œä½ åº”è¯¥æœ‰ä¸€ä¸ªé»˜è®¤çš„å·¥ä½œè¡¨ã€‚æŠŠä»–é‡å‘½åä¸º
<code>pokemons</code>ã€‚ä½ å¯ä»¥æŠŠè¡¨æ ¼çš„åˆ—æ”¹ä¸ºä¸‹é¢çš„æ ·å­ï¼š</p>
<pre><code>number:
    é€‰æ‹© Number ç±»å‹
    é€‰æ‹© Integer å­ç±»å‹
    å…³é—­å…è®¸è´Ÿæ•°
name:
    é€‰æ‹© Single line text ç±»å‹
types:
    é€‰æ‹© Multiple select ç±»å‹
    å†é€‰é¡¹é‡Œæ·»åŠ  Electric å’Œ Fire
</code></pre>
<p>æˆ‘ä»¬èƒ½ç”¨ä¸€å¼ æ•°æ®è¡¨å»ä¸ºæˆ‘ä»¬çš„æ•°æ®å»ºæ¨¡äº† : )</p>
<p>ç°åœ¨æˆ‘ä»¬éœ€è¦çŸ¥é“æˆ‘ä»¬çš„ç¨‹åºæ€æ ·å’Œ Airtable è¿›è¡Œäº¤äº’ã€‚è®©æˆ‘ä»¬å»é˜…è¯»ä¸€ä¸‹ API æ–‡æ¡£ã€‚åœ¨é‚£é‡Œä½ åº”è¯¥èƒ½çœ‹åˆ° Airtable
ç°åœ¨æ”¯æŒçš„å®¢æˆ·ç«¯ï¼Œæ’°å†™æœ¬æ–‡æ—¶å¹¶æ²¡æœ‰æä¾› Rust çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å°è¯•ä½¿ç”¨å®ƒä»¬çš„ HTTP APIã€‚æˆ‘ä»¬çš„ç¨‹åºç°åœ¨éœ€è¦ä¸€ä¸ª HTTP å®¢æˆ·ç«¯ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨
<code>ureq</code>:</p>
<pre><code class="language-toml">[dependencies]
ureq = { version = &quot;2.2.0&quot;, features = [&quot;json&quot;] }
</code></pre>
<p>å¼€å¯ <code>json</code> ç‰¹æ€§èƒ½å¤Ÿå¸®æˆ‘ä»¬æŠŠ HTTP å“åº”è½¬åŒ–ä¸º ç»“æ„ä½“ ( æ„Ÿè°¢ <code>serde</code> )ã€‚ä½†æ˜¯å†æˆ‘ä»¬å®ç°å­˜å‚¨åº“ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å†ç¨‹åºå¼€å§‹å‰è®©ç”¨æˆ·èƒ½å¤Ÿé€‰æ‹©ä½¿ç”¨
Airtable ä½œä¸ºå­˜å‚¨åº“ã€‚</p>
<h3 id="æ·»åŠ å¯åŠ¨å¼€å…³"><a class="header" href="#æ·»åŠ å¯åŠ¨å¼€å…³">æ·»åŠ å¯åŠ¨å¼€å…³</a></h3>
<p>é¦–å…ˆè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ APIã€‚è¿™é‡Œæ˜¯æ–‡æ¡£ç»™å‡ºçš„ä¸€ä¸ªè¯·æ±‚ç¤ºä¾‹ï¼š</p>
<pre><code>curl https://api.airtable.com/v0/&lt;WORKSPACE_ID&gt;/pokemons -H &quot;Authorization: Bearer &lt;API_KEY&gt;&quot;
</code></pre>
<p>å¥½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç¨‹åºéœ€è¦ä¸¤ä¸ªå‚æ•° <code>api_key</code> å’Œ <code>workspace_id</code>ï¼š</p>
<pre><code class="language-rs">fn main() {
    let matches = App::new(crate_name!())
        .version(crate_version!())
        .author(crate_authors!())
        .arg(Arg::with_name(&quot;cli&quot;).long(&quot;cli&quot;).help(&quot;Runs in CLI mode&quot;))
        .arg(Arg::with_name(&quot;sqlite&quot;).long(&quot;sqlite&quot;).value_name(&quot;PATH&quot;))
        .arg(
            Arg::with_name(&quot;airtable&quot;)
                .long(&quot;airtable&quot;)
                .value_names(&amp;[&quot;API_KEY&quot;, &quot;WORKSPACE_ID&quot;]),
        )
        .get_matches();
}
</code></pre>
<p>ç°åœ¨ï¼Œè¿è¡Œ <code>pokedex --airtable &lt;API_KEY&gt; &lt;WORKSPACE_ID&gt;</code> å°±èƒ½è®¾ç½® Airtable ä½œä¸ºå­˜å‚¨åº“ï¼Œä½¿ç”¨ cargo
run å¯åŠ¨çš„è¯ï¼Œä½ å¯ä»¥è¾“å…¥ <code>cargo run -- --airtable &lt;API_KEY&gt; &lt;WORKSPACE_ID&gt;</code>ã€‚å¯ä»¥ä½¿ç”¨ <code>--help</code>
æ£€æŸ¥æ˜¯å¦ç”Ÿæ•ˆï¼š</p>
<pre><code>OPTIONS:
        --airtable &lt;API_KEY&gt; &lt;WORKSPACE_ID&gt;
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ›´æ–° build_repo å‡½æ•°ï¼Œä½¿å®ƒèƒ½å¤Ÿåˆ›å»ºä¸€ä¸ª AirtableRepositoryï¼š</p>
<pre><code class="language-rs">use clap::{..., Values};
use repositories::pokemon::{AirtableRepository, ...};

fn main() {
    ...
    let repo = build_repo(matches.value_of(&quot;sqlite&quot;), matches.values_of(&quot;airtable&quot;));
    ...
}

fn build_repo(sqlite_value: Option&lt;&amp;str&gt;, airtable_values: Option&lt;Values&gt;) -&gt; Arc&lt;dyn Repository&gt; {
    if let Some(values) = airtable_values {
        if let [api_key, workspace_id] = values.collect::&lt;Vec&lt;&amp;str&gt;&gt;()[..] {
            match AirtableRepository::try_new(api_key, workspace_id) {
                Ok(repo) =&gt; return Arc::new(repo),
                _ =&gt; panic!(&quot;Error while creating airtable repo&quot;),
            }
        }
    }
    ...
}
</code></pre>
<p>æ‰€ä»¥ç°åœ¨å¦‚æœè®¾ç½®äº† <code>--airtable</code> æ ‡å¿—ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Airtable ä½œä¸ºå­˜å‚¨åº“ã€‚å¦‚æœè®¾ç½®äº† <code>--sqlite</code> æ ‡å¿—ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨
SQLiteã€‚å¦åˆ™æˆ‘ä»¬ä½¿ç”¨å†…å­˜å­˜å‚¨åº“ã€‚ç°åœ¨è®©æˆ‘ä»¬å®ç°å­˜å‚¨åº“ï¼›ï¼‰</p>
<h3 id="å®ç°å­˜å‚¨åº“"><a class="header" href="#å®ç°å­˜å‚¨åº“">å®ç°å­˜å‚¨åº“</a></h3>
<blockquote>
<p>æ³¨æ„ï¼šç½‘ç«™çš„ API ç»å¸¸å‘ç”Ÿå˜åŠ¨ï¼Œå¦‚æœä¸‹é¢çš„æµ‹è¯•å¤±è´¥äº†ï¼Œè¯·åˆ°<a href="https://airtable.com/api/meta">å®˜ç½‘</a>æŸ¥çœ‹æœ€æ–°çš„ APIã€‚</p>
</blockquote>
<p>æˆ‘å°†åœ¨ <em>repositories/pokemon.rs</em> ä¸­æ·»åŠ 
<code>AirtableRepository</code>ã€‚åƒä»¥å‰ä¸€æ ·ï¼Œæ‚¨å¯ä»¥å°†å…¶æ”¾åœ¨æ–°çš„æ–‡ä»¶ä¸­ã€‚è®©æˆ‘ä»¬é¦–å…ˆåˆ›å»ºç»“æ„ä½“ï¼š</p>
<pre><code class="language-rs">pub struct AirtableRepository {
    url: String,
    auth_header: String,
}
</code></pre>
<p>æˆ‘ä»¬ä¾ç„¶éœ€è¦å®ç° <code>try_new</code> å‡½æ•°ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ <code>workspace_id</code> åˆ›å»º <code>url</code>ï¼Œä½¿ç”¨ <code>api_key</code> åˆ›å»º
<code>auth_header</code>ã€‚æ¥ç€è¿˜è¦å‘å‡ºè¯·æ±‚ä»¥ç¡®ä¿æˆ‘ä»¬å¯ä»¥è¿æ¥åˆ°æˆ‘ä»¬çš„æ•°æ®åº“ï¼š</p>
<pre><code class="language-rs">impl AirtableRepository {
    pub fn try_new(api_key: &amp;str, workspace_id: &amp;str) -&gt; Result&lt;Self, ()&gt; {
        let url = format!(&quot;https://api.airtable.com/v0/{}/pokemons&quot;, workspace_id);
        let auth_header = format!(&quot;Bearer {}&quot;, api_key);

        if let Err(_) = ureq::get(&amp;url).set(&quot;Authorization&quot;, &amp;auth_header).call() {
            return Err(());
        }

        Ok(Self { url, auth_header })
    }
}
</code></pre>
<p>æ¥ç€æˆ‘ä»¬è¦ä¸ºå®ƒå®ç° <code>Repository</code> Traitï¼š</p>
<pre><code class="language-rs">impl Repository for AirtableRepository {
    fn insert(
        &amp;self,
        number: PokemonNumber,
        name: PokemonName,
        types: PokemonTypes,
    ) -&gt; Result&lt;Pokemon, InsertError&gt; {
        Err(InsertError::Unknown)
    }

    fn fetch_all(&amp;self) -&gt; Result&lt;Vec&lt;Pokemon&gt;, FetchAllError&gt; {
        Err(FetchAllError::Unknown)
    }

    fn fetch_one(&amp;self, number: PokemonNumber) -&gt; Result&lt;Pokemon, FetchOneError&gt; {
        Err(FetchOneError::Unknown)
    }

    fn delete(&amp;self, number: PokemonNumber) -&gt; Result&lt;(), DeleteError&gt; {
        Err(DeleteError::Unknown)
    }
}
</code></pre>
<h4 id="è¾…åŠ©å‡½æ•°-1"><a class="header" href="#è¾…åŠ©å‡½æ•°-1">è¾…åŠ©å‡½æ•°</a></h4>
<p>ä½ ç°åœ¨åº”è¯¥å·²ç»ä¹ æƒ¯äº†ï¼Œè¿™æ¬¡æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªè¾…åŠ©å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°èƒ½è®©æˆ‘ä»¬ä» Airtable ä¸­è·å–æŸä¸€è¡Œæˆ–è€…å¤šè¡Œæ•°æ®ã€‚å®ƒçš„å‚æ•° <code>&amp;self</code> å’Œ ä¸€ä¸ªå¯é€‰çš„
<code>number</code>ã€‚å®ƒçš„è¿”å›å€¼å¯èƒ½æ˜¯ä¸ª <code>json</code> æˆ–è€…æ˜¯ä¸ª <code>Error</code>ã€‚å®ƒä¾ç„¶æ˜¯ä¸ªç§æœ‰çš„æ–¹æ³•ï¼Œå† <code>impl AirtableRepository</code>
å—ä¸­å®ç°ã€‚æœ‰äº† <code>serde</code> æˆ‘ä»¬èƒ½å°† <code>json</code> ç›´æ¥è½¬åŒ–ä¸ºç»“æ„ä½“ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å®šä¹‰å¯¹åº”çš„ç»“æ„ä½“ï¼š</p>
<pre><code class="language-rs">#[derive(Deserialize)]
struct AirtableJson {
    records: Vec&lt;AirtableRecord&gt;,
}

#[derive(Deserialize)]
struct AirtableRecord {
    id: String,
    fields: AirtableFields,
}

#[derive(Deserialize)]
struct AirtableFields {
    number: u16,
    name: String,
    types: Vec&lt;String&gt;,
}
</code></pre>
<p>æ¥ç€æ˜¯è¾…åŠ©å‡½æ•°ï¼š</p>
<pre><code class="language-rs">fn fetch_pokemon_rows(&amp;self, number: Option&lt;u16&gt;) -&gt; Result&lt;AirtableJson, ()&gt; {
    // code will go here
}
</code></pre>
<p>ç¬¬ä¸€æ­¥è¦æ ¹æ®ç”¨æˆ·ä¼ æ¥çš„ <code>number</code> å»åˆ›å»ºè¯·æ±‚é“¾æ¥ï¼š</p>
<pre><code class="language-rs">let url = match number {
    Some(number) =&gt; format!(&quot;{}?filterByFormula=number%3D{}&quot;, self.url, number),
    None =&gt; format!(&quot;{}?sort%5B0%5D%5Bfield%5D=number&quot;, self.url),
};
</code></pre>
<p>è¯·æ±‚å‚æ•°çœ‹èµ·æ¥ç¨å¾®æœ‰ä¸€ç‚¹å¥‡æ€ªã€‚ç¬¬ä¸€ä¸ªæ˜¯ä¾é  <code>number</code> è¿›è¡Œè¿‡æ»¤ï¼Œç¬¬äºŒä¸ªæ˜¯æ ¹æ® <code>number</code> å¯¹æ•°æ®æ’åºã€‚ç°åœ¨æˆ‘ä»¬èƒ½ç”¨ <code>ureq</code> å°è¯•å‘å‡ºè¯·æ±‚äº†ï¼š</p>
<pre><code class="language-rs">let res = match ureq::get(&amp;url)
    .set(&quot;Authorization&quot;, &amp;self.auth_header)
    .call()
{
    Ok(res) =&gt; res,
    _ =&gt; return Err(()),
};
</code></pre>
<p>æˆ‘ä»¬åœ¨è¿”å›å€¼ä¸­æ¥æ”¶åˆ°äº† <code>json</code> ï¼Œæ¥ç€æˆ‘ä»¬æŠŠå®ƒè½¬æ¢ä¸º <code>AirtableJson</code>:</p>
<pre><code class="language-rs">match res.into_json::&lt;AirtableJson&gt;() {
    Ok(json) =&gt; Ok(json),
    _ =&gt; Err(()),
}
</code></pre>
<p>è¾…åŠ©å‡½æ•°å®Œæˆäº† : )</p>
<h4 id="æŸ¥è¯¢ä¸€ä¸ªå®å¯æ¢¦"><a class="header" href="#æŸ¥è¯¢ä¸€ä¸ªå®å¯æ¢¦">æŸ¥è¯¢ä¸€ä¸ªå®å¯æ¢¦</a></h4>
<pre><code class="language-rs">fn fetch_one(&amp;self, number: PokemonNumber) -&gt; Result&lt;Pokemon, FetchOneError&gt; {
    // code will go here
}
</code></pre>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬è®©ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰å®ç°çš„å‡½æ•°è·å– <code>json</code> ï¼š</p>
<pre><code class="language-rs">let mut json = match self.fetch_pokemon_rows(Some(u16::from(number.clone()))) {
    Ok(json) =&gt; json,
    _ =&gt; return Err(FetchOneError::Unknown),
};
</code></pre>
<p>ç°åœ¨ï¼Œå¦‚æœ <code>json</code> è®°å½•ä¸ºç©ºï¼Œåˆ™æ„å‘³ç€æˆ‘ä»¬æƒ³è¦çš„å®å¯æ¢¦ä¸å­˜åœ¨ã€‚æ‰€ä»¥æˆ‘ä»¬ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å–ç¬¬ä¸€æ¡è®°å½•ï¼š</p>
<pre><code class="language-rs">...
if json.records.is_empty() {
    return Err(FetchOneError::NotFound);
}

let record = json.records.remove(0);
</code></pre>
<p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦åšçš„æ˜¯æŠŠè¿™æ¡è®°å½•è½¬æ¢ä¸ºå®å¯æ¢¦ï¼š</p>
<pre><code class="language-rs">...
match (
    PokemonNumber::try_from(record.fields.number),
    PokemonName::try_from(record.fields.name),
    PokemonTypes::try_from(record.fields.types),
) {
    (Ok(number), Ok(name), Ok(types)) =&gt; Ok(Pokemon::new(number, name, types)),
    _ =&gt; Err(FetchOneError::Unknown),
}
</code></pre>
<h4 id="è·å–æ‰€æœ‰å®å¯æ¢¦"><a class="header" href="#è·å–æ‰€æœ‰å®å¯æ¢¦">è·å–æ‰€æœ‰å®å¯æ¢¦</a></h4>
<pre><code class="language-rs">fn fetch_all(&amp;self) -&gt; Result&lt;Vec&lt;Pokemon&gt;, FetchAllError&gt; {
    // code will go here
}
</code></pre>
<p>é¦–å…ˆï¼Œä¾ç„¶æ˜¯ä½¿ç”¨è¾…åŠ©å‡½æ•°è·å– <code>json</code> ï¼š</p>
<pre><code class="language-rs">let json = match self.fetch_pokemon_rows(None) {
    Ok(json) =&gt; json,
    _ =&gt; return Err(FetchAllError::Unknown),
};
</code></pre>
<p>è¿™ä¸€æ¬¡ï¼Œæˆ‘æ²¡æœ‰ç»™è¾…åŠ©å‡½æ•°æä¾› <code>number</code> ã€‚ç°åœ¨è®©æˆ‘ä»¬å°†è¿™äº›è®°å½•è½¬æ¢ä¸º <code>Pokemons</code> å¹¶è¿”å›ï¼š</p>
<pre><code class="language-rs">...
let mut pokemons = vec![];

for record in json.records.into_iter() {
    match (
        PokemonNumber::try_from(record.fields.number),
        PokemonName::try_from(record.fields.name),
        PokemonTypes::try_from(record.fields.types),
    ) {
        (Ok(number), Ok(name), Ok(types)) =&gt; {
            pokemons.push(Pokemon::new(number, name, types))
        }
        _ =&gt; return Err(FetchAllError::Unknown),
    }
}

Ok(pokemons)
</code></pre>
<h4 id="æ’å…¥ä¸€åªå®å¯æ¢¦-1"><a class="header" href="#æ’å…¥ä¸€åªå®å¯æ¢¦-1">æ’å…¥ä¸€åªå®å¯æ¢¦</a></h4>
<pre><code class="language-rs">fn insert(
    &amp;self,
    number: PokemonNumber,
    name: PokemonName,
    types: PokemonTypes,
) -&gt; Result&lt;Pokemon, InsertError&gt; {
    // code will go here
}
</code></pre>
<p>Airtable æœ¬èº«å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼š<code>AirtableRecord</code> çš„ä¸»é”®å¹¶ä¸èƒ½ä¿è¯æ•°æ®çš„å”¯ä¸€æ€§ã€‚æˆ–è®¸ä½ å·²ç»æ³¨æ„åˆ°äº† <code>AirtableRecord</code> ä¸­çš„
<code>id</code> å­—æ®µ :) å› æ­¤ï¼Œæˆ‘ä»¬ä¸èƒ½å°è¯•æ’å…¥è®°å½•å¹¶ç­‰å¾…è¿”å›é”™è¯¯ï¼ŒAirtable
åªä¼šè´Ÿè´£åœ¨è¡¨ä¸­æ·»åŠ æ–°è¡Œã€‚ç„¶åæˆ‘ä»¬è¦åšçš„æ˜¯é¦–å…ˆå°è¯•è·å–ç›¸åŒç¼–å·çš„å®å¯æ¢¦ï¼Œå¦‚æœæ­¤è¯·æ±‚çš„ç»“æœä¸ä¸ºç©ºï¼Œåˆ™è¿”å›é”™è¯¯ã€‚</p>
<pre><code class="language-rs">let json = match self.fetch_pokemon_rows(Some(u16::from(number.clone()))) {
    Ok(json) =&gt; json,
    _ =&gt; return Err(InsertError::Unknown),
};

if !json.records.is_empty() {
    return Err(InsertError::Conflict);
}
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»åšåˆ°äº†ï¼Œæˆ‘ä»¬èƒ½ä¿è¯æ²¡æœ‰è®°å½•å…±äº«ç›¸åŒçš„ <code>number</code> ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ’å…¥æˆ‘ä»¬çš„å®å¯æ¢¦ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª <code>json</code> è¯·æ±‚ï¼š</p>
<pre><code class="language-rs">...
let body = ureq::json!({
    &quot;records&quot;: [{
        &quot;fields&quot;: {
            &quot;number&quot;: u16::from(number.clone()),
            &quot;name&quot;: String::from(name.clone()),
            &quot;types&quot;: Vec::&lt;String&gt;::from(types.clone()),
        },
    }],
});
</code></pre>
<p>æœ€åï¼Œæˆ‘ä»¬è¦å¸¦ä¸Š <code>body</code> å‘å‡ºè¯·æ±‚ï¼Œå¹¶åœ¨æˆåŠŸæ—¶è¿”å› <code>Pokemon</code> ï¼š</p>
<pre><code class="language-rs">...
if let Err(_) = ureq::post(&amp;self.url)
    .set(&quot;Authorization&quot;, &amp;self.auth_header)
    .send_json(body)
{
    return Err(InsertError::Unknown);
}

Ok(Pokemon::new(number, name, types))
</code></pre>
<h4 id="åˆ é™¤ä¸€åªå®å¯æ¢¦-1"><a class="header" href="#åˆ é™¤ä¸€åªå®å¯æ¢¦-1">åˆ é™¤ä¸€åªå®å¯æ¢¦</a></h4>
<pre><code class="language-rs">fn delete(&amp;self, number: PokemonNumber) -&gt; Result&lt;(), DeleteError&gt; {
    // code will go here
}
</code></pre>
<p>å’Œæ’å…¥æ—¶ä¸€æ ·ï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆå°è¯•æŸ¥è¯¢ä¸æˆ‘ä»¬ä¼ é€’çš„ <code>number</code> ç›¸åŒçš„è®°å½•ã€‚å½“è®°å½•ä¸ºç©ºæ—¶ï¼Œæˆ‘ä»¬ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ï¼Œæˆ‘ä»¬ä¸èƒ½åˆ é™¤ä¸å­˜åœ¨çš„è®°å½• : )
å¦åˆ™ï¼Œæˆ‘ä»¬å°†æ‹¿åˆ°ç¬¬ä¸€æ¡è®°å½•ã€‚</p>
<pre><code class="language-rs">let mut json = match self.fetch_pokemon_rows(Some(u16::from(number.clone()))) {
    Ok(json) =&gt; json,
    _ =&gt; return Err(DeleteError::Unknown),
};

if json.records.is_empty() {
    return Err(DeleteError::NotFound);
}

let record = json.records.remove(0);
</code></pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è®°å½•çš„ id å­—æ®µæ¥åˆ é™¤è®°å½•ï¼š</p>
<pre><code class="language-rs">...
match ureq::delete(&amp;format!(&quot;{}/{}&quot;, self.url, record.id))
    .set(&quot;Authorization&quot;, &amp;self.auth_header)
    .call()
{
    Ok(_) =&gt; Ok(()),
    _ =&gt; Err(DeleteError::Unknown),
}
</code></pre>
<h2 id="æ€»ç»“"><a class="header" href="#æ€»ç»“">æ€»ç»“</a></h2>
<p>ä½ ç°åœ¨åº”è¯¥èƒ½ä½¿ç”¨ å†…å­˜ï¼ŒAirtableï¼Œæˆ–è€…æ˜¯ä¸€ä¸ª SQLite æ•°æ®åº“ä½œä¸ºç¨‹åºçš„å­˜å‚¨åº“ã€‚è€Œä¸”ä½ èƒ½é€šè¿‡ CLI å’Œ HTTP API ä¸¤ç§æ–¹å¼å»æ“ä½œ :D</p>
<p>é‚£æ˜¯æœ¬ç³»åˆ—çš„æœ€åä¸€ç¯‡æ–‡ç« ã€‚æ„Ÿè°¢æ‚¨ä¸€ç›´çœ‹åˆ°è¿™é‡Œ :) æˆ‘å¸Œæœ›è¿™äº›æ–‡ç« å¯¹æ‚¨æœ‰ç”¨ã€‚</p>
<p>è¯¥ä»£ç ä¾ç„¶åœ¨ <a href="https://github.com/alexislozano/pokedex/tree/article-7">github</a> ä¸ŠæŸ¥çœ‹ã€‚</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-2-å†…å­˜å­˜å‚¨åº“.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-1-åŸŸ.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-2-å†…å­˜å­˜å‚¨åº“.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-1-åŸŸ.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
