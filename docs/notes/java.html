<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-notes/java/java">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Java | Trdthg&#x27;s blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://trdthg.github.io//docs/notes/java"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Java | Trdthg&#x27;s blog"><meta data-rh="true" name="description" content="åŸºç¡€çŸ¥è¯†"><meta data-rh="true" property="og:description" content="åŸºç¡€çŸ¥è¯†"><link data-rh="true" rel="icon" href="/img/logo_png.png"><link data-rh="true" rel="canonical" href="https://trdthg.github.io//docs/notes/java"><link data-rh="true" rel="alternate" href="https://trdthg.github.io//docs/notes/java" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://trdthg.github.io//docs/notes/java" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Trdthg&#39;s blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Trdthg&#39;s blog Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4TM86KZ83J"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-4TM86KZ83J",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.6b28552f.css">
<link rel="preload" href="/assets/js/runtime~main.4d830454.js" as="script">
<link rel="preload" href="/assets/js/main.916d2c7b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a href="#" class="skipToContent_fXgn">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_png.png" alt="Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_png.png" alt="Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Trdthg</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">æ–‡æ¡£</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/trdthg" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/category/-æ‹“å±•">ğŸ”® æ‹“å±•</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒğŸ”® æ‹“å±•ã€" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/async">åç¨‹ä¸å¼‚æ­¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/bash">Bash</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/cicd">CI/CD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/fd">æ–‡ä»¶ç³»ç»Ÿ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/go">Go è¯­è¨€</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/hadoop">å¤§æ•°æ®</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/haskell">Haskell è¯­è¨€</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/linuxIO">IO å¤šè·¯å¤ç”¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/memory_ordering">åŸå­æ“ä½œä¸å†…å­˜é¡ºåº</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/software_arch">è½¯ä»¶æ¶æ„</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/category/-rust-è¯­è¨€">ğŸ¦€ Rust è¯­è¨€</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒğŸ¦€ Rust è¯­è¨€ã€" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item green"><a class="menu__link" tabindex="0" href="/docs/rust">Rust è¯­è¨€</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/lists">Too-Many-Lists</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/mini_tokio">å¼‚æ­¥è¿è¡Œæ—¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/net-piercer">å†…ç½‘ç©¿é€å·¥å…·</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/print_into_detail">Rust print! å®</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/rs_channel">Channel æºç å‰–æ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/rust_quiz">Rust Quiz</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/wasm">Wasm å®ç°ç”Ÿå‘½æ¸¸æˆ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/-å­¦ä¹ ç¬”è®°">ğŸ“š å­¦ä¹ ç¬”è®°</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒğŸ“š å­¦ä¹ ç¬”è®°ã€" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/å‰ç«¯">å‰ç«¯</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€Œå‰ç«¯ã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/java-å­¦ä¹ ">Java å­¦ä¹ </a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒJava å­¦ä¹ ã€" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/notes/java">Java</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notes/java/sourceread">é›†åˆæ¡†æ¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notes/java/spring">Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notes/java/springboot">SprintBoot</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/-èµ„æ–™åº“">ğŸ“¦ èµ„æ–™åº“</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒğŸ“¦ èµ„æ–™åº“ã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/-io-club">âš½ IO Club</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€Œâš½ IO Clubã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">æ–‡æ¡£é¡µ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/log">æ—¥å¿—</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/-å­¦ä¹ ç¬”è®°"><span itemprop="name">ğŸ“š å­¦ä¹ ç¬”è®°</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/java-å­¦ä¹ "><span itemprop="name">Java å­¦ä¹ </span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Java</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><h1>Java</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŸºç¡€çŸ¥è¯†">åŸºç¡€çŸ¥è¯†<a class="hash-link" href="#åŸºç¡€çŸ¥è¯†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="for-å’Œ-whiletrue-çš„åŒºåˆ«">for(;;) å’Œ while(true) çš„åŒºåˆ«<a class="hash-link" href="#for-å’Œ-whiletrue-çš„åŒºåˆ«" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è™½ç„¶ä¸¤è€…éƒ½èƒ½å®ç°æ­»å¾ªç¯ï¼Œä½†æ˜¯æºç ä¸­éƒ½æ˜¯é€‰æ‹© for(;;) åŸå› ï¼š</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ç¼–è¯‘å‰              ç¼–è¯‘å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while (1)           mov eax,1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    test eax,eax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    je foo+23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    jmp foo+18h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ç¼–è¯‘å‰              ç¼–è¯‘å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (;;)          jmp foo+23h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯¹æ¯”ä¹‹ä¸‹ï¼Œfor (;;) æŒ‡ä»¤å°‘ï¼Œä¸å ç”¨å¯„å­˜å™¨ï¼Œè€Œä¸”æ²¡æœ‰åˆ¤æ–­è·³è½¬ï¼Œæ¯” while (1) å¥½ã€‚
ä¹Ÿå°±æ˜¯è¯´ä¸¤è€…åœ¨åœ¨å®è§‚ä¸Šå®Œå…¨ä¸€æ ·çš„é€»è¾‘ï¼Œä½†æ˜¯åº•å±‚å®Œå…¨ä¸ä¸€æ ·ï¼Œfor ç›¸å¯¹äºæ¥è¯´æ›´åŠ ç®€æ´æ˜äº†ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="equal-ä¸çš„åŒºåˆ«">equal ä¸==çš„åŒºåˆ«<a class="hash-link" href="#equal-ä¸çš„åŒºåˆ«" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>åŒºåˆ«</li></ol><ul><li>==æ˜¯è¿ç®—ç¬¦ï¼Œequal æ˜¯æ–¹æ³•ï¼Œ</li><li>æ¯”è¾ƒåŸºæœ¬ç±»å‹ï¼šåªèƒ½ç”¨==, ä¸èƒ½ç”¨ equal</li><li>æ¯”è¾ƒåŒ…è£…ç±»å‹ï¼š==æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€ï¼Œè€Œ equal æ¯”è¾ƒçš„æ˜¯å€¼</li><li>æ¯”è¾ƒå¯¹è±¡ï¼š==å’Œ equal æ¯”è¾ƒçš„éƒ½æ˜¯å†…å­˜åœ°å€ï¼Œå› ä¸º equal æ²¡æœ‰è¢«é‡å†™ï¼Œæ²¡æœ‰è¢«é‡å†™çš„ equal éƒ½æ˜¯ object çš„ equal æ–¹æ³• ::: warning
æ³¨æ„ Stringï¼ˆè¿˜æœ‰ Dateï¼ŒIntegerï¼‰ç±»å‹é‡å†™äº† equals æ–¹æ³•ï¼Œä½¿å…¶æ¯”è¾ƒçš„æ˜¯å­˜å‚¨å¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼Œè€Œä¸æ˜¯å †å†…å­˜åœ°å€ã€‚ :::</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="classthis-å’Œ-this-çš„åŒºåˆ«">Class.this å’Œ this çš„åŒºåˆ«<a class="hash-link" href="#classthis-å’Œ-this-çš„åŒºåˆ«" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å½“ inner classï¼ˆå†…éƒ¨ç±»ï¼‰å¿…é¡ºä½¿ç”¨åˆ° outer classï¼ˆå¤–éƒ¨ç±»ï¼‰çš„ this instanceï¼ˆå®ä¾‹ï¼‰æ—¶ï¼Œæˆ–è€…åŒ¿åå†…éƒ¨ç±»è¦ä½¿ç”¨å¤–éƒ¨ç±»çš„å®ä¾‹ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¾…ç»­">å¾…ç»­...<a class="hash-link" href="#å¾…ç»­" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŒ…è£…ç±»">åŒ…è£…ç±»<a class="hash-link" href="#åŒ…è£…ç±»" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="int-vs-integer">int VS Integer<a class="hash-link" href="#int-vs-integer" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h5 class="anchor anchorWithStickyNavbar_LWe7" id="åˆå§‹åŒ–">åˆå§‹åŒ–<a class="hash-link" href="#åˆå§‹åŒ–" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><ul><li>1 int ç±»çš„å˜é‡åˆå§‹ä¸º 0. Integer çš„å˜é‡åˆ™åˆå§‹åŒ–ä¸º null.</li><li>2 Integer å˜é‡å¿…é¡»å®ä¾‹åŒ–åæ‰èƒ½ä½¿ç”¨ï¼Œint å˜é‡ä¸éœ€è¦ .</li><li>3 åœ¨ Int æ˜¯å°†å€¼ç›´æ¥å­˜å‚¨ï¼ŒInteger å¯¹è±¡æ˜¯ç”ŸæˆæŒ‡é’ˆæŒ‡å‘æ­¤å¯¹è±¡ã€‚</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="æ¯”è¾ƒ">æ¯”è¾ƒ<a class="hash-link" href="#æ¯”è¾ƒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><ol><li>Integer ? int <code>&lt;br/&gt;</code> åªè¦ä¸¤ä¸ªå˜é‡çš„å€¼æ˜¯å‘ç­‰çš„ï¼Œåˆ™ç»“æœä¸º trueã€‚
å› ä¸ºåŒ…è£…ç±» Integer å’ŒåŸºæœ¬æ•°æ®ç±»å‹ int æ¯”è¾ƒæ—¶ï¼Œjava ä¼šè‡ªåŠ¨æ‹†åŒ…è£…ä¸º intï¼Œç„¶åè¿›è¡Œæ¯”è¾ƒï¼Œå®é™…ä¸Šå°±å˜ä¸ºä¸¤ä¸ª int å˜é‡çš„æ¯”è¾ƒã€‚</li><li>new Integer() ? !new Integer()ï¼Œ<code>&lt;br/&gt;</code> ç»“æœä¸º false ! new
Integer() å½“å˜é‡å€¼åœ¨ -128~127 ä¹‹é—´æ—¶ï¼Œé new ç”Ÿæˆçš„ Integer å˜é‡æŒ‡å‘çš„æ˜¯ java å¸¸é‡æ± ä¸­ cache æ•°ç»„ä¸­å­˜å‚¨çš„æŒ‡å‘äº†å †ä¸­çš„ Integer å¯¹è±¡ï¼Œ
è€Œ new Integer() ç”Ÿæˆçš„å˜é‡æŒ‡å‘å †ä¸­æ–°å»ºçš„å¯¹è±¡ï¼Œä¸¤è€…åœ¨å†…å­˜ä¸­çš„åœ°å€ä¸åŒï¼›</li><li>new Interger() ? new Integer() <code>&lt;br/&gt;</code> false</li><li>!new Integer() ? !new Integer() <code>&lt;br/&gt;</code> å¦‚æœä¸¤ä¸ªå€¼ç›¸ç­‰ï¼Œä¸”åœ¨åŒºé—´ -128 åˆ° 127 ä¹‹é—´åˆ™ true
åªè¦ä¸åŒæˆ–è€…æœ‰å€¼åœ¨åŒºé—´å¤–å°±ä¸ç›¸åŒ</li></ol><h5 class="anchor anchorWithStickyNavbar_LWe7" id="åº”ç”¨">åº”ç”¨<a class="hash-link" href="#åº”ç”¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Integer a = Integer.parseInt(&quot;1&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Integer b = Integer.parseInt(&quot;1&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">synchronized(i)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ææ„å‡½æ•°">&quot;ææ„å‡½æ•°&quot;<a class="hash-link" href="#ææ„å‡½æ•°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>java æä¾› finalize() æ–¹æ³•ï¼Œåƒåœ¾å›æ”¶å™¨å‡†å¤‡é‡Šæ”¾å†…å­˜çš„æ—¶å€™ï¼Œä¼šå…ˆè°ƒç”¨ finalize()ã€‚</p><ul><li>ç‰¹å¾</li></ul><ol><li>å¯¹è±¡ä¸ä¸€å®šä¼šè¢«å›æ”¶ã€‚</li><li>åƒåœ¾å›æ”¶ä¸æ˜¯ææ„å‡½æ•°ã€‚</li><li>åƒåœ¾å›æ”¶åªä¸å†…å­˜æœ‰å…³ã€‚</li><li>åƒåœ¾å›æ”¶å’Œ finalize() éƒ½æ˜¯é ä¸ä½çš„ï¼Œåªè¦ JVM è¿˜æ²¡æœ‰å¿«åˆ°è€—å°½å†…å­˜çš„åœ°æ­¥ï¼Œå®ƒæ˜¯ä¸ä¼šæµªè´¹æ—¶é—´è¿›è¡Œåƒåœ¾å›æ”¶çš„ã€‚</li></ol><ul><li>åº”å¯¹æ–¹æ³•</li></ul><ol><li>ä¸»åŠ¨è°ƒç”¨ System.gc() æ–¹æ³•å¼ºåˆ¶åƒåœ¾å›æ”¶å™¨æ¥é‡Šæ”¾è¿™äº›å¯¹è±¡çš„å†…å­˜ã€‚</li><li>Java 1.1 é€šè¿‡æä¾›ä¸€ä¸ª System.runFinalizersOnExit() æ–¹æ³•ï¼Œä¸è±¡ System.gc()
æ–¹æ³•é‚£æ ·ï¼ŒSystem.runFinalizersOnExit() æ–¹æ³•å¹¶ä¸ç«‹å³è¯•å›¾å¯åŠ¨åƒåœ¾å›æ”¶å™¨ã€‚è€Œæ˜¯å½“åº”ç”¨ç¨‹åºæˆ– Applet
é€€å‡ºæ—¶ï¼Œå®ƒè°ƒç”¨æ¯ä¸ªå¯¹è±¡çš„ finalize() æ–¹æ³•ã€‚</li><li>ç»§æ‰¿ finalize()</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ³›å‹">æ³›å‹<a class="hash-link" href="#æ³›å‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="t-çš„ä½ç½®">T çš„ä½ç½®<a class="hash-link" href="#t-çš„ä½ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>ç¤ºä¾‹</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">static &lt;T&gt; void show(Collection&lt;T&gt; C) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println(&quot;ä½¿ç”¨æ³›å‹ -------&gt;&quot; + C);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>è§£é‡Š</li></ol><ul><li>ç¬¬ä¸€å¤„ï¼šé™æ€æ–¹æ³•ä¸èƒ½ç›´æ¥å¼•ç”¨ç±»å®šä¹‰å¤„çš„æ³›å‹ï¼Œéœ€è¦æå‰å®šä¹‰å¥½æ³›å‹æ‰èƒ½ä½¿ç”¨</li><li>ç¬¬äºŒå¤„ï¼šæŒ‡å®š Collection çš„å…ƒç´ ç±»å‹ä¸º T</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¾¹ç•Œé€šé…ç¬¦">è¾¹ç•Œé€šé…ç¬¦<a class="hash-link" href="#è¾¹ç•Œé€šé…ç¬¦" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;? extends T&gt;å’Œ&lt;? super T&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>å¼•ä¾‹</li></ol><ul><li>è¿™ç§æƒ…å†µä¸‹æ˜¯å¯è¡Œçš„</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Plate&lt;Fruit&gt; plate = new Plate&lt;&gt;(apple);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>è¿™ç§æƒ…å†µä¸‹ï¼Œè™½ç„¶è‹¹æœå’Œæ°´æœæœ‰ç»§æ‰¿å…³ç³»ï¼Œä½†ç›˜å­é—´æ²¡æœ‰ç»§æ‰¿å…³ç³»ä¼šæŠ¥é”™</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Plate&lt;Fruit&gt; plate = new Plate&lt;Apple&gt;(apple);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>ä¸Šä¸‹ç•Œé€šé…ç¬¦</li></ol><ul><li>Apple -&gt; Fruit -&gt; Food</li><li><code>&lt;? extends T&gt;</code> å¯ä»¥æ˜¯ä»»ä½• T çš„å­ç±»</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Plate&lt;? extends Food&gt; plate = new Plate&lt;Fruit&gt;(apple);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>&lt;? super T&gt;</code> å¯ä»¥æ˜¯ä»»ä½• T çš„çˆ¶ç±»</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Plate&lt;? super Apple&gt; plate = new Plate&lt;Food&gt;(fruit);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>ä¸Šä¸‹ç•Œé€šé…ç¬¦çš„å‰¯ä½œç”¨</li></ol><ul><li>ä¸Šç•Œ<code>&lt;? extends T&gt;</code>ä¸èƒ½å¾€é‡Œå­˜ï¼Œåªèƒ½å¾€å¤–å–</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Plate&lt;? extends Food&gt; plate = new Plate&lt;Fruit&gt;(apple);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Food a = plate.getItem();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// plate.setItem(food);  å¤±æ•ˆ</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>ä¸‹ç•Œ&lt;? super T&gt;ä¸å½±å“å¾€é‡Œå­˜ï¼Œä½†å¾€å¤–å–åªèƒ½æ”¾åœ¨ Object å¯¹è±¡é‡Œ</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Plate&lt;? super Apple&gt; plate = new Plate&lt;Food&gt;(fruit);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">plate2.setItem(apple);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Apple b = plate2.getItem(); å¤±æ•ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å…ƒç´ çš„ç±»å‹ä¿¡æ¯å…¨éƒ¨ä¸¢å¤±ã€‚</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>::: tip è¡¥å……</p><ul><li>?ä¸ T çš„åŒºåˆ«</li><li>å¯¹ç¼–è¯‘å™¨æ¥è¯´æ‰€æœ‰çš„ T éƒ½ä»£è¡¨åŒä¸€ç§ç±»å‹ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªæ³›å‹æ–¹æ³•é‡Œï¼Œä¸‰ä¸ª T éƒ½æŒ‡ä»£åŒä¸€ä¸ªç±»å‹ï¼Œè¦ä¹ˆéƒ½æ˜¯ Stringï¼Œè¦ä¹ˆéƒ½æ˜¯ Integerã€‚</li><li>ä½†é€šé…ç¬¦<code>&lt;?&gt;æ²¡æœ‰è¿™ç§çº¦æŸï¼ŒPlate&lt;?&gt;</code>å•çº¯çš„å°±è¡¨ç¤ºï¼šç›˜å­é‡Œæ”¾äº†ä¸€ä¸ªä¸œè¥¿ï¼Œæ˜¯ä»€ä¹ˆæˆ‘ä¸çŸ¥é“ã€‚æ‰€ä»¥é¢˜ä¸»é—®é¢˜é‡Œçš„é”™è¯¯å°±åœ¨è¿™é‡Œï¼ŒPlate&lt;ï¼Ÿ
extends Fruit&gt;é‡Œä»€ä¹ˆéƒ½æ”¾ä¸è¿›å»ã€‚ :::</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ³¨è§£">æ³¨è§£<a class="hash-link" href="#æ³¨è§£" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>æ³¨è§£ä¼šå½±å“ç¨‹åºçš„ç¼–è¯‘å’Œè¿è¡Œ</li><li>æ³¨è§£æœ¬èº«åªæ˜¯ä¸€ä¸ªæ ‡æ³¨ï¼Œæœ¬èº«ä¸ç”¨åŒ…å«é€»è¾‘å¤„ç†å†…å®¹</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä½œç”¨èŒƒå›´">ä½œç”¨èŒƒå›´<a class="hash-link" href="#ä½œç”¨èŒƒå›´" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>RUNTIMEï¼šç¨‹åºè¿è¡Œæ—¶èµ·ä½œç”¨ï¼Œä¾‹å¦‚ï¼š<code>@WebServlet</code></li><li>SOURCEï¼šç¼–è¯‘æ—¶æœŸä½œç”¨ï¼Œä¾‹å¦‚ <code>@Override</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="target">@Target<a class="hash-link" href="#target" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æŒ‡å®šæ³¨è§£é’ˆå¯¹çš„ç›®æ ‡</p><ul><li>ElementType.Type ç±»ã€æ–¹æ³•</li><li>ElementType.Field æˆå‘˜å˜é‡</li><li>ElementType.METHOD æˆå‘˜æ–¹æ³•</li><li>ElementType.PARAMETER æ–¹æ³•å‚æ•°</li><li>ElementType.CONSTRUCTOR æ„é€ å™¨</li><li>ElementType.PACKAGE åŒ…</li><li>ElementType.ANNOTATION_TYPE æ³¨è§£</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="retention">@Retention<a class="hash-link" href="#retention" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æŒ‡å®šæ³¨è§£çš„ä¿ç•™åŸŸ</p><ul><li>RetentionPolicy.SOURCE æºä»£ç çº§åˆ«ï¼Œç”±ç¼–è¯‘å™¨å¤„ç†ï¼Œå¤„ç†åä¸å†ä¿ç•™</li><li>RetentionPolicy.CLASS æ³¨è§£ä¿¡æ¯ä¿ç•™åˆ° class æ–‡ä»¶ä¸­</li><li>RetentionPolicy.RUNTION ç”± jvm è¯»å–ï¼Œè¿è¡Œæ—¶ä½¿ç”¨</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤ºä¾‹">ç¤ºä¾‹<a class="hash-link" href="#ç¤ºä¾‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>æ³¨è§£ç±»</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Target(ElementType.METHOD)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Retention(RetentionPolicy.RUNTIME)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public @interface InitAnno {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>è¢«æ³¨è§£ç±»</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class Foo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @InitAnno</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void bar() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;è¿›å…¥äº† bar æ–¹æ³•&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Main</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Class&lt;?&gt; clazz = Class.forName(&quot;Foo&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Annotation annotation = clazz.getAnnotation(InitAnno.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (annotation == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;ç±»å‰æ²¡æœ‰ InitAnno æ³¨è§£&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Method[] methods = clazz.getMethods();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (Method method : methods) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        boolean isInitAnno = method.isAnnotationPresent(InitAnno.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (isInitAnno) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            method.invoke(clazz.getConstructor(null).newInstance(null), null);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¤šçº¿ç¨‹">å¤šçº¿ç¨‹<a class="hash-link" href="#å¤šçº¿ç¨‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å®ç°">å®ç°<a class="hash-link" href="#å®ç°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>ç»§æ‰¿ Thread ç±»</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MyThread thread = new MyThread();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">thread.start();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>å®ç° Runnable æ¥å£</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MyRunnable runnable = new MyRunnable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Thread thread = new Thread(runnable);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Thread thread = new Thread(new MyRunnable() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for(int i = 0;i&lt;100;i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;MyRunnable1&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">thread.start();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>::: tip æç¤º Runnable ç›¸æ¯” Thread è€¦åˆä½ï¼Œlambda è¡¨è¾¾å¼æ›´ä½ ::: 3. å®ç° Callable æ¥å£</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Callable&lt;String&gt; callable = () -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println(&quot;è¿›å»äº†&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &quot;Hello&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FutureTask&lt;String&gt; featureTask = new FutureTask&lt;&gt;(callable);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Thread thread = new Thread(featureTask);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(featureTask.get());</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>æ³¨æ„ï¼Callable ä¸ Thread æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œéœ€è¦é—´æ¥å®ç°</p></blockquote><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface RunnableFuture&lt;V&gt; extends Runnable, Future&lt;V&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Sets this Future to the result of its computation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * unless it has been cancelled.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void run();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class FutureTask&lt;V&gt; implements RunnableFuture&lt;V&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Callable&lt;V&gt; callable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">graph LR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A[Callable] --&gt;B(FutureTask) --&gt; C(RunnableFuture) --&gt; D(Runnable) --&gt; E(Thread)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¸¸ç”¨æ–¹æ³•">å¸¸ç”¨æ–¹æ³•<a class="hash-link" href="#å¸¸ç”¨æ–¹æ³•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. ä¼‘çœ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">thread.sleep(3000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. åˆå¹¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">thread.join(3000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. ç¤¼è®©</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yield();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="çº¿ç¨‹åŒæ­¥">çº¿ç¨‹åŒæ­¥<a class="hash-link" href="#çº¿ç¨‹åŒæ­¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ¯ä¸ª java å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…ç½®é”ï¼Œå†…ç½®é”ä¼šä¿æŠ¤ä½¿ç”¨ synchronized å…³é”®å­—ä¿®é¥°çš„æ–¹æ³• è¦è°ƒç”¨è¯¥æ–¹æ³•å¿…é¡»å…ˆè·å–é”ï¼Œå¦åˆ™å°±å¤„äºå µå¡çŠ¶æ€</p><ul><li>é™æ€å˜é‡</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class SameRunnable implements Runnable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static int num = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public synchronized void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ++num;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread.sleep(10);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;ç¬¬&quot; + Thread.currentThread().getName() + &quot;ä½è®¿å®¢æ˜¯ç¬¬&quot; + num + &quot;ä¸ª&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>é™æ€ä»£ç å—ï¼Œé”å®šç±» synchronized å…³é”®å­—ä¹Ÿèƒ½ä¿®é¥°ä»£ç å—ï¼Œä»¥ä¸‹ä¾‹å­ä¹Ÿèƒ½æœ‰ç›¸åŒçš„æ•ˆæœ</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class Test {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; 5; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread thread = new Thread(new Runnable() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Test test = new Test();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    test.print();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }).start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public synchronized void print() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        synchronized (Test.class) {    // é”å®šç±» (éé™æ€å¯ this), ä¸èƒ½æ˜¯ç±»çš„å®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;å¼€å§‹&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.currentThread().sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;ç»“æŸ&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>é”å®šå®ä¾‹æ–¹æ³• ::: danger æ³¨æ„ synchronized å…³é”®å­—åªæ˜¯ä¿®é¥°å…±äº«çš„èµ„æºï¼Œä¸‹é¢çš„ä¾‹å­ä¸èƒ½å¾—åˆ°æƒ³è¦çš„æ•ˆæœ :::</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public synchronized void print() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println(&quot;å¼€å§‹&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Thread.currentThread().sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println(&quot;ç»“æŸ&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼">çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼<a class="hash-link" href="#çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>é”å®šç±»</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public volatile class Runner {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static Runner runner;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è®°å¾—åŠ å…³é”®å­—ï¼Œé˜²æ­¢å¤šä¸ªçº¿ç¨‹è®¿é—®æ—¶è¿˜æ²¡åˆ›å»ºè¿‡å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 1. ğŸ”’æ•´ä¸ªæ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public synchronized static Runner getRunner() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (runner == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            runner = new Runner();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return runner;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // åªé”ä»£ç å—ï¼Œä¸å½±å“è¯¥æ–¹æ³•å†…çš„å…¶ä»–ä¸šåŠ¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static Runner getRunner() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        synchronized(Runner.class) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (runner == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                runner = new Runner();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return runner;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>::: tip å…¶ä»–é”å®šå¯¹è±¡</p><ol><li>synchronized(runner): n ä¸ªç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä¸èƒ½é”ç©ºå¯¹è±¡</li><li>Integer i = Integer.parseInt(&quot;1&quot;); synchronized(i): ä¹Ÿå¯ä»¥</li><li>Integer a = Integer.parseInt(&quot;1&quot;); Integer b = Integer.parseInt(&quot;1&quot;);
synchronized(i) å¼€å¯ä¸¤ä¸ªçº¿ç¨‹ï¼Œè‹¥ a,b å€¼ (è¯¦æƒ…è§ Integer åŒ…è£…ç±») ç›¸åŒï¼Œåˆ™çº¿ç¨‹å®‰å…¨ï¼Œå¦åˆ™ä¸å®‰å…¨ :::</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="voletile-å…³é”®å­—">voletile å…³é”®å­—<a class="hash-link" href="#voletile-å…³é”®å­—" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>å¼•ä¾‹</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class exam {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int num = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int finalNum = num;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new Thread(() -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            while (finalNum == 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }).start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TimeUnit.SECONDS.sleep(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(num);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>åœ¨è¯¥ä¾‹å­ä¸­ï¼Œå¾ªç¯ä¸ä¼šåœæ­¢ new Thread ä¸ main åŒæ—¶æ“ä½œ numï¼Œä»–ä»¬åˆ†åˆ«ä»ä¸»å†…å­˜å¤åˆ¶åˆ°å·¥ä½œå†…å­˜ï¼Œå¯¹å„è‡ªçš„å·¥ä½œå†…å­˜ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œï¼Œ
main çº¿ç¨‹å¯¹ num+1ï¼ŒåŒæ­¥åˆ°ä¸»çº¿ç¨‹ï¼Œä½† new Thread çš„ä»»åŠ¡æœªåœæ­¢ï¼Œæ²¡æœ‰ä¸ä¸»å†…å­˜åŒæ­¥ï¼Œå¾ªç¯ä¸ä¼šç»ˆæ­¢</li><li>è‹¥å¾ªç¯ä¸­åŠ ä¸€ä¸ªæ‰§è¡Œè¯­å¥ï¼Œå¾ªç¯ä¼šç»ˆæ­¢ï¼Œå·¥ä½œå†…å­˜ä¼šå³ä½¿ä¸ä¸»å†…å­˜è¿›è¡ŒåŒæ­¥</li></ul><p>å½“å„ä¸ªçº¿ç¨‹æ“ä½œæ—¶ï¼Œæ•°æ®æ²¡æœ‰è¿›è¡ŒåŒæ­¥åˆ°ä¸»å†…å­˜ï¼Œäº§ç”Ÿé”™è¯¯ voletile å…³é”®å­—ä½¿å¤šä¸ªçº¿ç¨‹ç›´æ¥æ“ä½œä¸»å†…å­˜ï¼Œä¸åœ¨ç»è¿‡å·¥ä½œå†…å­˜</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¾…ç»­-1">å¾…ç»­...<a class="hash-link" href="#å¾…ç»­-1" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="juc">JUC<a class="hash-link" href="#juc" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç‰¹å¾">ç‰¹å¾<a class="hash-link" href="#ç‰¹å¾" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>synchronized ä¸ Lock å¯¹æ¯”</p><ol><li>synchronized è‡ªåŠ¨ä¸Šé”è§£é”ï¼ŒLock æ‰‹åŠ¨ä¸Šé”è§£é”</li><li>synchronized æ— æ³•åˆ¤æ–­æ˜¯å¦è·å–åˆ°é”ï¼ŒLock å¯ä»¥</li><li>synchronized æ‹¿ä¸åˆ°é”ä¼šä¸€ç›´ç­‰å¾…ï¼ŒLock ä¸ä¼š</li><li>synchronized æ˜¯å…³é”®å­—ï¼Œjvm å®ç°ï¼ŒLock æ˜¯æ¥å£ï¼Œjdk å®ç°</li><li>synchronized æ˜¯éå…¬å¹³é”ï¼ŒLock è‡ªç”±è®¾ç½®</li></ol><blockquote><p>å…¬å¹³é”ï¼šå¤šä¸ªçº¿ç¨‹æ’é˜ŸåŠ é”<code>&lt;br/&gt;</code> éå…¬å¹³é”ï¼šä¸åˆ¤æ–­æ˜¯å¦æœ‰å…¶ä»–ç­‰å¾…çº¿ç¨‹ï¼Œç›´æ¥å ç”¨</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŸºæœ¬æ“ä½œ">åŸºæœ¬æ“ä½œ<a class="hash-link" href="#åŸºæœ¬æ“ä½œ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private Lock lock = new ReentrantLock();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lock.lock();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lock.unlock();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ­»é”">æ­»é”<a class="hash-link" href="#æ­»é”" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* num = 1 çš„äººæ‹¿åˆ° chopsticks1ï¼Œç­‰å¾… chopsticks2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* num = 2 çš„äººæ‹¿åˆ° chopsticks2ï¼Œç­‰å¾… chopsticks1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (num == 1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        synchronized (chopsticks1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(100);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            synchronized (chopsticks2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(&quot;1 åƒå®Œäº†&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (num == 2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        synchronized (chopsticks2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            synchronized (chopsticks1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(&quot;2 åƒå®Œäº†&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç”Ÿäº§è€…æ¶ˆè´¹è€…">ç”Ÿäº§è€…æ¶ˆè´¹è€…<a class="hash-link" href="#ç”Ÿäº§è€…æ¶ˆè´¹è€…" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 1. synchronize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Container {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int num = 5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public synchronized void add() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (num != 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.wait();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num += 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TimeUnit.SECONDS.sleep(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(Thread.currentThread().getName() + &quot;ç”Ÿäº§äº† 1 ä¸ªï¼Œè¿˜æœ‰&quot; + num + &quot;ä¸ª&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.notify();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public synchronized void pop(int i) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (num == 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.wait();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num -= 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(i + &quot;è´­ä¹°äº† 1 ä¸ªï¼Œè¿˜æœ‰&quot; + num + &quot;ä¸ª&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.notify();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 2. Lock è¦ä»¥ condition.await å’Œ condition.singal ä»£æ›¿ wait å’Œ notify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Container2 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int num = 5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ReentrantLock lock = new ReentrantLock();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Condition condition = lock.newCondition();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void add() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lock.lock();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (num != 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            condition.await();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num += 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TimeUnit.SECONDS.sleep(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(Thread.currentThread().getName() + &quot;ç”Ÿäº§äº† 1 ä¸ªï¼Œè¿˜æœ‰&quot; + num + &quot;ä¸ª&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        condition.signal();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lock.unlock();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="trylock">tryLock<a class="hash-link" href="#trylock" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class TimeLock {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final ReentrantLock lock = new ReentrantLock();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void tryLock() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (lock.tryLock(3, TimeUnit.SECONDS)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(&quot;3 ç§’å†…æ‹¿åˆ°äº†é”&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                TimeUnit.SECONDS.sleep(5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(&quot;3 ç§’å†…æ²¡æ‹¿åˆ°é”&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } finally {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (lock.isHeldByCurrentThread()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                lock.unlock();  // åªèƒ½ç”±ä¸Šé”è€…å»è§£é”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŒæ—¶è¯»å†™">åŒæ—¶è¯»å†™<a class="hash-link" href="#åŒæ—¶è¯»å†™" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>å¯¹ ArrayList è¯»å†™æ“ä½œåŒæ—¶å­˜åœ¨ä¼šæŠ›å‡ºå¼‚å¸¸</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class ReadAndWrite {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //List&lt;String&gt; list = new Vector&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // List&lt;String&gt; list = Collections.synchronizedList(new ArrayList&lt;&gt;());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // List&lt;String&gt; list = new CopyOnWriteArrayList();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; 10; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new Thread(() -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    TimeUnit.MILLISECONDS.sleep(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                list.add(&quot;a&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(Thread.currentThread().getName() + list);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }, String.valueOf(i)).start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>åŸå›  ArrayList ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public boolean add(E e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensureCapacityInternal(size + 1);  // Increments modCount!!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    elementData[size++] = e;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>è§£å†³æ–¹æ³•</li></ol><ul><li>æ›´æ¢ä¸º Vector</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public synchronized boolean add(E e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    modCount++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensureCapacityHelper(elementCount + 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    elementData[elementCount++] = e;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p>æ›´æ¢ä¸º Collections.synchronizedList()</p></li><li><p>JUC: CopyOnWriteList</p></li></ul><blockquote><p>CopyOnWrite å®ç°äº†è¯»å†™åˆ†ç¦»ï¼Œå½“æˆ‘ä»¬å¾€ä¸€ä¸ªå®¹å™¨æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œä¸æ˜¯ç›´æ¥ç»™å®¹å™¨æ·»åŠ ï¼Œè€Œæ˜¯å…ˆå°†å½“å‰å®¹å™¨å¤åˆ¶ä¸€
ä»½ï¼Œå‘æ–°çš„å®¹å™¨ä¸­æ·»åŠ æ•°æ®ï¼Œæ·»åŠ å®Œæˆä¹‹åï¼Œå†å°†åŸå®¹å™¨çš„å¼•ç”¨æŒ‡å‘æ–°çš„å®¹å™¨ã€‚</p></blockquote><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public boolean add(E e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    final ReentrantLock lock = this.lock;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lock.lock();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object[] elements = getArray();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int len = elements.length;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object[] newElements = Arrays.copyOf(elements, len + 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        newElements[len] = e;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setArray(newElements);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } finally {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lock.unlock();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è®¡æ•°å™¨">è®¡æ•°å™¨<a class="hash-link" href="#è®¡æ•°å™¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>å‡æ³•è®¡æ•°å™¨ countDownLatch å¯ä»¥ç¡®ä¿æŸä¸ªçº¿ç¨‹ä¼˜å…ˆæ‰§è¡Œï¼Œå½“è®¡æ•°å™¨æ¸…é›¶åœ¨å”¤é†’å…¶ä»–çº¿ç¨‹</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class CountDown {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CountDownLatch countDownLatch = new CountDownLatch(80);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new Thread(() -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (int i = 0; i &lt; 100; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                countDownLatch.countDown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }).start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        countDownLatch.await();   // å¿…é¡»å”¤é†’ï¼Œä¸”è®¡æ•°å™¨è¦æ¸…é›¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; 10; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;main&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>::: warning æ³¨æ„ new CountDownLatch(80), countDownLatch.countDown(),
countDownLatch.await() å¿…é¡»é…åˆä½¿ç”¨ï¼Œåªè¦è®¡æ•°å™¨æ²¡æœ‰æ¸…é›¶ï¼Œè®¡æ•°å™¨ä¸ä¼šåœæ­¢ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿä¸èƒ½å”¤é†’ :::</p><ul><li>åŠ æ³•è®¡æ•°å™¨ è¯•å›¾å”¤é†’å½“å‰çº¿ç¨‹ï¼Œå½“åŠ åˆ°ä¸€å®šæ•°é‡æˆåŠŸå”¤é†’ï¼Œä¹‹åæ¸…é›¶ï¼Œå†æ¬¡ç´¯åŠ å¾ªç¯</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// æ„é€ å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public CyclicBarrier(int parties, Runnable barrierAction) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (parties &lt;= 0) throw new IllegalArgumentException();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.parties = parties;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.count = parties;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.barrierCommand = barrierAction;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class CyclicBarrier_ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CyclicBarrier cyclicBarrier = new CyclicBarrier(5, () -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;æ”¾è¡Œ&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; 10; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            final int temp = i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new Thread(() -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                cyclicBarrier.await();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }).start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>è®¡æ•°çº¿ç¨‹é™æµ é™åˆ¶åŒæ—¶è¿›å…¥çš„çº¿ç¨‹æ•°</li></ul><ol><li>åˆå§‹åŒ–</li><li>è·å¾—è®¸å¯</li><li>é‡Šæ”¾</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Semaphore semaphore = new Semaphore(5);   // é™åˆ¶æœ€å¤š 5 äºº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (int i = 0; i &lt; 15; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new Thread(() -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                semaphore.acquire();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(Thread.currentThread().getName() + &quot;è¿›å»äº†&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                TimeUnit.SECONDS.sleep(2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(Thread.currentThread().getName() + &quot;å‡ºå»äº†&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } finally {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                semaphore.release();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }).start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¯»å†™é”">è¯»å†™é”<a class="hash-link" href="#è¯»å†™é”" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è¯»å†™é”ä¹Ÿæ˜¯ä¸ºäº†å®ç°çº¿ç¨‹åŒæ­¥ï¼Œåªä¸è¿‡ç²’åº¦æ›´ç»†ï¼Œå¯ä»¥ä¸ºè¯»å’Œå†™è®¾ç½®ä¸åŒçš„é”</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Cache {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Map&lt;Integer, String&gt; map = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ReadWriteLock readWriteLock = new ReentrantReadWriteLock();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void write(Integer id, String value) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        readWriteLock.writeLock().lock();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;å¼€å§‹å†™å…¥ ID: &quot; + id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        map.put(id, value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;å†™å…¥å®Œæˆ ID: &quot; + id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        readWriteLock.writeLock().unlock();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String read(Integer id) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        readWriteLock.readLock().lock();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;å¼€å§‹è¯»å– ID: &quot; + id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String a = map.get(id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;è¯»å–å®Œæˆ ID: &quot; + id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        readWriteLock.readLock().unlock();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return a;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>::: tip è¡¥å…… å†™å…¥é”ä¹Ÿå«ç‹¬å é”ï¼Œåªèƒ½è¢« 1 ä¸ªçº¿ç¨‹å ç”¨ï¼Œè¯»å–é”ä¹Ÿå«å…±äº«é”ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶å ç”¨ã€‚ :::</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="çº¿ç¨‹æ± ">çº¿ç¨‹æ± <a class="hash-link" href="#çº¿ç¨‹æ± " title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>åŸºæœ¬ä½¿ç”¨</li></ol><p>é¢„å…ˆåˆ›å»ºå¥½ä¸€å®šæ•°é‡çš„çº¿ç¨‹å¯¹è±¡ï¼Œå­˜å…¥ç¼“å†²æ± ä¸­ï¼Œéœ€è¦ç”¨çš„æ—¶å€™ç›´æ¥ä»ç¼“å†²æ± ä¸­å–å‡ºï¼Œç”¨å®Œä¹‹åä¸è¦é”€æ¯ï¼Œè¿˜å›åˆ°ç¼“å†²æ± ä¸­ï¼Œä¸ºäº†æé«˜èµ„æºçš„åˆ©ç”¨ç‡ã€‚ä¼˜åŠ¿ï¼š</p><ul><li>æé«˜çº¿ç¨‹çš„åˆ©ç”¨ç‡</li><li>æé«˜å“åº”é€Ÿåº¦</li><li>ä¾¿äºç»Ÿä¸€ç®¡ç†çº¿ç¨‹å¯¹è±¡</li><li>å¯ä»¥æ§åˆ¶æœ€å¤§çš„å¹¶å‘æ•°</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class ThreadPool_ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // å•ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ExecutorService executorService = Executors.newSingleThreadExecutor();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æŒ‡å®šçº¿ç¨‹æ•°é‡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ExecutorService executorService = Executors.newFixedThreadPool(5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ç¼“å†²çº¿ç¨‹æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ExecutorService executorService = Executors.newCachedThreadPool();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; 60; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            final int temp = i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            executorService.execute(() -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(Thread.currentThread().getName() + &quot; &quot; + temp);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executorService.shutdown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>æ„é€ å‡½æ•°</li></ol><p>ä¸‰ä¸ªå¸¸ç”¨çº¿ç¨‹æ± éƒ½ return new ThreadPoolExecutor(); ThreadPoolExecutor çš„æ„é€ å‡½æ•°å¦‚ä¸‹</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public ThreadPoolExecutor(  int corePoolSize,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            int maximumPoolSize,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            long keepAliveTime,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            TimeUnit unit,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            BlockingQueue&lt;Runnable&gt; workQueue,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            ThreadFactory threadFactory,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            RejectedExecutionHandler handler) {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>corePoolSize: æ ¸å¿ƒæ± æ•°é‡</li><li>maximumPoolSize: çº¿ç¨‹æ± å®¹é‡ä¸Šé™ï¼Œä»»åŠ¡é‡å¢å¤§æ—¶ï¼Œçº¿ç¨‹æ± ä¸»åŠ¨æ‰©å®¹</li><li>keepAliveTime: çº¿ç¨‹å¯¹è±¡å­˜æ´»æ—¶é—´</li><li>unit: çº¿ç¨‹å¯¹è±¡å­˜æ´»æ—¶é—´å•ä½</li><li>workQueue: çº¿ç¨‹é˜Ÿåˆ— (æ–°çš„ä»»åŠ¡åœ¨é˜Ÿåˆ—ä¸­ç­‰å€™è·å–çº¿ç¨‹å¯¹è±¡)</li><li>threadFactory: çº¿ç¨‹å·¥å‚åˆ›å»ºçº¿ç¨‹å¯¹è±¡</li><li>handler: æ‹’ç»ç­–ç•¥</li></ul><ol start="3"><li>æ‹’ç»ç­–ç•¥</li></ol><p>RejectedExecutionHandler æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå‡åœ¨ ThreadPoolExecutor ä¸­å®ç°</p><ul><li>AbortPolicyz:ç›´æ¥æŠ›å‡ºå¼‚å¸¸</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * A handler for rejected tasks that throws a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * {@code RejectedExecutionException}.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static class AbortPolicy implements RejectedExecutionHandler {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>DiscardPolicy: ç›´æ¥æ‹’ç»</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * A handler for rejected tasks that silently discards the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * rejected task.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static class DiscardPolicy implements RejectedExecutionHandler {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>DiscardOldestPolicy: å°è¯•ä¸ç­‰å¾…é˜Ÿåˆ—ä¸­æœ€å¼€å§‹çš„ä»»åŠ¡äº‰å¤ºï¼Œä¸æŠ›å‡ºå¼‚å¸¸</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * A handler for rejected tasks that discards the oldest unhandled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * request and then retries {@code execute}, unless the executor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * is shut down, in which case the task is discarded.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class DiscardOldestPolicy implements RejectedExecutionHandler {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>CallerRunsPolicy ç”±å‘èµ·è¯·æ±‚çº¿ç¨‹å¤„ç†</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * A handler for rejected tasks that runs the rejected task</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * directly in the calling thread of the {@code execute} method,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * unless the executor has been shut down, in which case the task</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * is discarded.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static class CallerRunsPolicy implements RejectedExecutionHandler {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>è‡ªå®šä¹‰çº¿ç¨‹æ± </li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">executorService = new ThreadPoolExecutor(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        2L,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TimeUnit.SECONDS,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new ArrayBlockingQueue&lt;&gt;(20),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Executors.defaultThreadFactory(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new ThreadPoolExecutor.AbortPolicy());</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>4 ç§ workQueue å µå¡é˜Ÿåˆ—ï¼Œç”¨æ¥å­˜å‚¨ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡</p><ul><li>ArrayBlockingQueue: åŸºäºæ•°ç»„çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼Œåˆ›å»ºæ—¶å¿…é¡»æŒ‡å®šå¤§å°ã€‚</li><li>LinkedBlockingQueue: åŸºäºé“¾è¡¨çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼Œåˆ›å»ºæ—¶å¯ä»¥ä¸æŒ‡å®šå¤§å°ï¼Œé»˜è®¤å€¼æ˜¯ Integer.MAX VALUEã€‚æœ€å¤§å€¼ã€‚</li><li>SynchronousQueue: å®ƒä¸ä¼šä¿æŒæäº¤çš„ä»»åŠ¡ï¼Œè€Œæ˜¯ç›´æ¥æ–°å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œæ–°æ¥çš„ä»»åŠ¡ã€‚</li><li>PriorityBlockingQueue: å…·æœ‰ä¼˜å…ˆçº§çš„é˜»å¡é˜Ÿåˆ—ã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="forkjoin">Forkjoin<a class="hash-link" href="#forkjoin" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>æ¦‚å¿µ</li></ol><ul><li>Forkjoin æ˜¯ JDK 1.7 åå‘å¸ƒçš„å¤šçº¿ç¨‹å¹¶å‘å¤„ç†æ¡†æ¶ï¼ŒåŠŸèƒ½ä¸Šå’Œ JUC ç±»ä¼¼ï¼Œ
JUC æ›´å¤šæ—¶å€™æ˜¯ä½¿ç”¨å•ä¸ªç±»å®Œæˆæ“ä½œï¼ŒForkjoin ä½¿ç”¨å¤šä¸ªç±»åŒæ—¶å®ŒæˆæŸé¡¹å·¥ä½œï¼Œå¤„ç†ä¸Šæ¯” JUC æ›´åŠ ä¸°å¯Œï¼Œ</li><li>æœ¬è´¨ä¸Šæ˜¯å¯¹çº¿ç¨‹æ± çš„ä¸€ç§çš„è¡¥å……ï¼Œå¯¹çº¿ç¨‹æ± åŠŸèƒ½çš„ä¸€ç§æ‰©å±•ï¼ŒåŸºäºçº¿ç¨‹æ± ï¼Œ</li><li>å®ƒçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯å°†ä¸€ä¸ªå¤§å‹çš„ä»»åŠ¡æ‹†åˆ†æˆå¾ˆå¤šä¸ªå°ä»»åŠ¡ï¼Œç„¶åç”±å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œæœ€ç»ˆå°†å°ä»»åŠ¡çš„ç»“æœè¿›è¡Œæ±‡æ€»ï¼Œç”Ÿæˆæœ€ç»ˆçš„ç»“æœã€‚</li></ul><ol start="2"><li>åŸºæœ¬ä½¿ç”¨ è®¾ç½®ä¸´ç•Œå€¼ï¼Œé€’å½’åˆ†é…ä»»åŠ¡ï¼ŒçŸ¥é“ä»»åŠ¡ä¸èƒ½è¢«å†åˆ†</li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class FolkJoin_ extends RecursiveTask&lt;Long&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Long start;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Long end;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Long temp = 200_0000L;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public FolkJoin_(Long start, Long end) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.start = start;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.end = end;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected Long compute() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if ((end - start) &lt; temp) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Long sum = 0L;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (Long i = start; i &lt; end ; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                sum += i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return sum;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Long avg = (start + end) / 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            FolkJoin_ tast1 = new FolkJoin_(start, avg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            FolkJoin_ tast2 = new FolkJoin_(avg, end);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            tast1.fork();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            tast2.fork();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return tast1.join()+tast2.join();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Main.java</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Long start = System.currentTimeMillis();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ForkJoinPool folkJoinPool = new ForkJoinPool();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FolkJoin_ task = new FolkJoin_(0L, 10_0000_0000L);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">folkJoinPool.execute(task);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(task.get() + &quot; &quot; + (System.currentTimeMillis() - start) / 1000.0);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¾…ç»­-2">å¾…ç»­...<a class="hash-link" href="#å¾…ç»­-2" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡æ¡£åˆ†é¡µå¯¼èˆª"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/java-å­¦ä¹ "><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">Java å­¦ä¹ </div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/notes/java/sourceread"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">é›†åˆæ¡†æ¶</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#åŸºç¡€çŸ¥è¯†" class="table-of-contents__link toc-highlight">åŸºç¡€çŸ¥è¯†</a><ul><li><a href="#for-å’Œ-whiletrue-çš„åŒºåˆ«" class="table-of-contents__link toc-highlight">for(;;) å’Œ while(true) çš„åŒºåˆ«</a></li><li><a href="#equal-ä¸çš„åŒºåˆ«" class="table-of-contents__link toc-highlight">equal ä¸==çš„åŒºåˆ«</a></li><li><a href="#classthis-å’Œ-this-çš„åŒºåˆ«" class="table-of-contents__link toc-highlight">Class.this å’Œ this çš„åŒºåˆ«</a></li><li><a href="#å¾…ç»­" class="table-of-contents__link toc-highlight">å¾…ç»­...</a></li></ul></li><li><a href="#åŒ…è£…ç±»" class="table-of-contents__link toc-highlight">åŒ…è£…ç±»</a><ul><li><a href="#int-vs-integer" class="table-of-contents__link toc-highlight">int VS Integer</a></li></ul></li><li><a href="#ææ„å‡½æ•°" class="table-of-contents__link toc-highlight">&quot;ææ„å‡½æ•°&quot;</a></li><li><a href="#æ³›å‹" class="table-of-contents__link toc-highlight">æ³›å‹</a><ul><li><a href="#t-çš„ä½ç½®" class="table-of-contents__link toc-highlight">T çš„ä½ç½®</a></li><li><a href="#è¾¹ç•Œé€šé…ç¬¦" class="table-of-contents__link toc-highlight">è¾¹ç•Œé€šé…ç¬¦</a></li></ul></li><li><a href="#æ³¨è§£" class="table-of-contents__link toc-highlight">æ³¨è§£</a><ul><li><a href="#ä½œç”¨èŒƒå›´" class="table-of-contents__link toc-highlight">ä½œç”¨èŒƒå›´</a></li><li><a href="#target" class="table-of-contents__link toc-highlight">@Target</a></li><li><a href="#retention" class="table-of-contents__link toc-highlight">@Retention</a></li><li><a href="#ç¤ºä¾‹" class="table-of-contents__link toc-highlight">ç¤ºä¾‹</a></li></ul></li><li><a href="#å¤šçº¿ç¨‹" class="table-of-contents__link toc-highlight">å¤šçº¿ç¨‹</a><ul><li><a href="#å®ç°" class="table-of-contents__link toc-highlight">å®ç°</a></li><li><a href="#å¸¸ç”¨æ–¹æ³•" class="table-of-contents__link toc-highlight">å¸¸ç”¨æ–¹æ³•</a></li><li><a href="#çº¿ç¨‹åŒæ­¥" class="table-of-contents__link toc-highlight">çº¿ç¨‹åŒæ­¥</a></li><li><a href="#çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼" class="table-of-contents__link toc-highlight">çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼</a></li><li><a href="#voletile-å…³é”®å­—" class="table-of-contents__link toc-highlight">voletile å…³é”®å­—</a></li><li><a href="#å¾…ç»­-1" class="table-of-contents__link toc-highlight">å¾…ç»­...</a></li></ul></li><li><a href="#juc" class="table-of-contents__link toc-highlight">JUC</a><ul><li><a href="#ç‰¹å¾" class="table-of-contents__link toc-highlight">ç‰¹å¾</a></li><li><a href="#åŸºæœ¬æ“ä½œ" class="table-of-contents__link toc-highlight">åŸºæœ¬æ“ä½œ</a></li><li><a href="#æ­»é”" class="table-of-contents__link toc-highlight">æ­»é”</a></li><li><a href="#ç”Ÿäº§è€…æ¶ˆè´¹è€…" class="table-of-contents__link toc-highlight">ç”Ÿäº§è€…æ¶ˆè´¹è€…</a></li><li><a href="#trylock" class="table-of-contents__link toc-highlight">tryLock</a></li><li><a href="#åŒæ—¶è¯»å†™" class="table-of-contents__link toc-highlight">åŒæ—¶è¯»å†™</a></li><li><a href="#è®¡æ•°å™¨" class="table-of-contents__link toc-highlight">è®¡æ•°å™¨</a></li><li><a href="#è¯»å†™é”" class="table-of-contents__link toc-highlight">è¯»å†™é”</a></li><li><a href="#çº¿ç¨‹æ± " class="table-of-contents__link toc-highlight">çº¿ç¨‹æ± </a></li><li><a href="#forkjoin" class="table-of-contents__link toc-highlight">Forkjoin</a></li><li><a href="#å¾…ç»­-2" class="table-of-contents__link toc-highlight">å¾…ç»­...</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.4d830454.js"></script>
<script src="/assets/js/main.916d2c7b.js"></script>
</body>
</html>