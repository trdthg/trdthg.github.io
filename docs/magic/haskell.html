<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-magic/haskell">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Haskell 语言 | Trdthg&#x27;s blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://trdthg.github.io//docs/magic/haskell"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Haskell 语言 | Trdthg&#x27;s blog"><meta data-rh="true" name="description" content="⭐️Learn You a Haskell for Great Good!"><meta data-rh="true" property="og:description" content="⭐️Learn You a Haskell for Great Good!"><link data-rh="true" rel="icon" href="/img/logo_png.png"><link data-rh="true" rel="canonical" href="https://trdthg.github.io//docs/magic/haskell"><link data-rh="true" rel="alternate" href="https://trdthg.github.io//docs/magic/haskell" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://trdthg.github.io//docs/magic/haskell" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Trdthg&#39;s blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Trdthg&#39;s blog Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4TM86KZ83J"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-4TM86KZ83J",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.6b28552f.css">
<link rel="preload" href="/assets/js/runtime~main.71300f81.js" as="script">
<link rel="preload" href="/assets/js/main.dc8abca6.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a href="#" class="skipToContent_fXgn">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_png.png" alt="Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_png.png" alt="Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Trdthg</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">文档</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/trdthg" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/-拓展">🔮 拓展</a><button aria-label="打开/收起侧边栏菜单「🔮 拓展」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/async">协程与异步</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/bash">Bash</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/cicd">CI/CD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/fd">文件系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/go">Go 语言</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/hadoop">大数据</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/magic/haskell">Haskell 语言</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/linuxIO">IO 多路复用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/memory_ordering">原子操作与内存顺序</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/oscamp2022">2022 秋冬季开源操作系统训练营</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/software_arch">软件架构</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/category/-rust-语言">🦀 Rust 语言</a><button aria-label="打开/收起侧边栏菜单「🦀 Rust 语言」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item green"><a class="menu__link" tabindex="0" href="/docs/rust">Rust 语言</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/lists">Too-Many-Lists</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/mini_tokio">异步运行时</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/net-piercer">内网穿透工具</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/print_into_detail">Rust print! 宏</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/rs_channel">Channel 源码剖析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/rust_quiz">Rust Quiz</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/wasm">Wasm 实现生命游戏</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/-学习笔记">📚 学习笔记</a><button aria-label="打开/收起侧边栏菜单「📚 学习笔记」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/-资料库">📦 资料库</a><button aria-label="打开/收起侧边栏菜单「📦 资料库」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/-io-club">⚽ IO Club</a><button aria-label="打开/收起侧边栏菜单「⚽ IO Club」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">文档页</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/log">日志</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/-拓展"><span itemprop="name">🔮 拓展</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Haskell 语言</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>Haskell 语言</h1><p>⭐️<a href="http://learnyouahaskell.com/chapters" target="_blank" rel="noopener noreferrer">Learn You a Haskell for Great Good!</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="0-特性">0. 特性<a class="hash-link" href="#0-特性" title="标题的直接链接">​</a></h2><ol><li><blockquote><p>We usually use &#x27; to either denote a strict  version of a function (one that isn&#x27;t lazy) or a slightly modified  version of a function or a variable. Because &#x27; is a valid character in functions, we can make a function like this.</p></blockquote><p><code>‘</code> 在 haskell 中是声明的合法字符，一般中加 <code>’</code> 的函数代表一个函数的修改版本或者严格版本</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-开始">1. 开始<a class="hash-link" href="#1-开始" title="标题的直接链接">​</a></h2><p><strong>Starting Out</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-基本函数">1.1 基本函数<a class="hash-link" href="#11-基本函数" title="标题的直接链接">​</a></h3><ul><li>最小值：<code>min 1 3</code></li><li>最大值：<code>max 1 3</code></li><li>加一：<code>succ 1</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-列表">1.2 列表<a class="hash-link" href="#12-列表" title="标题的直接链接">​</a></h3><ul><li><p>合并： <code>[1,2,3,4] ++ [9,10,11,12] </code></p></li><li><p>根据索引取值： <code>&quot;Steve Buscemi&quot; !! 6</code></p></li><li><p>开头插入： <code>&#x27;A&#x27;:&quot; SMALL CAT&quot; </code></p><blockquote><p>[1,2,3]<!-- --> is actually just syntactic sugar for 1:2:3:[].</p></blockquote></li><li><p>取表头：<code>head [1, 2, 3, 4, 5]</code></p></li><li><p>取表尾：<code>tail [1, 2, 3, 4, 5] </code></p></li><li><p>取最后一个元素：<code>last [1, 2, 3, 4, 5]</code></p></li><li><p>取除了最后一个元素： <code>init [1, 2, 3, 4, 5]</code></p></li><li><p>长度： <code>length [5,4,3,2,1] </code></p></li><li><p>是否为空： <code>null [1,2,3] </code></p></li><li><p>反转列表： <code>reverse [5,4,3,2,1] </code></p></li><li><p>取前 n 个： <code>take 3 [5,4,3,2,1] </code></p></li><li><p>从第 n 个开始向后取： <code>drop 3 [8,4,2,1,5,6] </code></p></li><li><p>最大元素： <code>maximum [1,9,2,3,4] </code></p></li><li><p>最小元素： <code>minimum [8,4,2,1,5,6]</code></p></li><li><p>加： <code>sum [5,2,1,6,3,2,5,7] </code></p></li><li><p>乘： <code>product [6,2,1,2] </code></p></li><li><p>是否在列表中： <code>4 </code>elem <code>[3,4,5,6]</code></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-生成式">1.3 生成式<a class="hash-link" href="#13-生成式" title="标题的直接链接">​</a></h3><ul><li>循环追加（append）： <code>cycle [1,2,3]</code></li><li>循环生成（extend）： <code>repeat 5</code></li><li>生成式： <code>boomBangs xs = [ if x &lt; 10 then &quot;BOOM!&quot; else &quot;BANG!&quot; | x &lt;- xs, odd x]</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="14-元组">1.4 元组<a class="hash-link" href="#14-元组" title="标题的直接链接">​</a></h3><p>类型随意，</p><ul><li>fst： <code>fst (&quot;Wow&quot;, False) </code></li><li>snd： <code>snd (&quot;Wow&quot;, False)</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="15-重要">1.5 重要<a class="hash-link" href="#15-重要" title="标题的直接链接">​</a></h3><ul><li>zip<div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">zip [5,3,2,6,2,7,2,5,4,6,6] [&quot;im&quot;,&quot;a&quot;,&quot;turtle&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [(5,&quot;im&quot;),(3,&quot;a&quot;),(2,&quot;turtle&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">zip [1..] [&quot;apple&quot;, &quot;orange&quot;, &quot;cherry&quot;, &quot;mango&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [(1,&quot;apple&quot;),(2,&quot;orange&quot;),(3,&quot;cherry&quot;),(4,&quot;mango&quot;)]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-类型系统">2. 类型系统<a class="hash-link" href="#2-类型系统" title="标题的直接链接">​</a></h2><p><strong>Types and Typeclasses</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-查看类型">2.1 查看类型<a class="hash-link" href="#21-查看类型" title="标题的直接链接">​</a></h3><p>ghci 查看</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">：t (1, &quot;qqq&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-typeclasses-101">2.2 Typeclasses 101<a class="hash-link" href="#22-typeclasses-101" title="标题的直接链接">​</a></h3><p>所有的 <code>== + - * / </code> 都是 function</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; :t (==)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(==) :: (Eq a) =&gt; a -&gt; a -&gt; Bool</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Everything before the =&gt; symbol is called a <em>class constraint</em>. We can read the previous type declaration like this: the equality  function takes any two values that are of the same type and returns a Bool. The type of those two values must be a member of the Eq class (this was the class constraint).</p></blockquote><ul><li><code>=&gt;</code> 之前的被叫做类型约束</li></ul><p><strong>Type variables</strong></p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; :t head</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">head :: [a] -&gt; a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>a 就是类型变量，但是由于 a 不是某一个特定的类型，所以我们称 head 多态函数</p><blockquote><p>Functions that have type variables are called <strong>polymorphic functions</strong>.</p></blockquote><p><strong>Typeclasses</strong> 就是类型约束</p><p>下面举出了一系列常用的 Typeclasses</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="221-eq">2.2.1 Eq<a class="hash-link" href="#221-eq" title="标题的直接链接">​</a></h4><blockquote><p>The Eq typeclass provides an interface for  testing for equality. Any type where it makes sense to test for equality between two values of that type should be a member of the Eq class. All standard Haskell types except for IO (the type for dealing with input and output) and functions are a part of the Eq typeclass.</p></blockquote><p>Eq 提供了一个比较的接口，任何能够比较该类型的两个值之间相等性的都应该是 Eq 类的成员</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="222-ord">2.2.2 Ord<a class="hash-link" href="#222-ord" title="标题的直接链接">​</a></h4><blockquote><p>All the types we covered so far except for functions are part of Ord. Ord covers all the standard comparing functions such as &gt;, &lt;, &gt;= and &lt;=. The compare function takes two Ord members of the same type and returns an ordering. Ordering is a type that can be GT, LT or EQ, meaning <em>greater than</em>, <em>lesser than</em> and <em>equal</em>, respectively.</p></blockquote><p>Ord 包含了所有标准的比较函数，例如 &gt; &lt; &gt;= &lt;=, 比较函数接受两个类型相同的 Ord 成员，并返回一个排序，排序是 GT，LT，EQ，分别表示大于，小于，等于</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; &quot;Abrakadabra&quot; &lt; &quot;Zebra&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; &quot;Abrakadabra&quot; `compare` &quot;Zebra&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; 5 &gt;= 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; 5 `compare` 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="223-show">2.2.3 Show<a class="hash-link" href="#223-show" title="标题的直接链接">​</a></h4><blockquote><p>Members of Show can be presented as strings. All types covered so far except for functions are a part of Show. The most used function that deals with the Show typeclass is show. It takes a value whose type is a member of Show and presents it to us as a string.</p></blockquote><p>Show 的成员可以被打印为字符串，到目前为止，除了函数之外的所有类型都是 Show 的一部分。</p><p>show 函数接受一个类型为 Show 成员的值，并将其作为字符串呈现</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; :t read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">read :: (Read a) =&gt; String -&gt; a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="224-read">2.2.4 Read<a class="hash-link" href="#224-read" title="标题的直接链接">​</a></h4><blockquote><p>Read is sort of the opposite typeclass of Show. The read function takes a string and returns a type which is a member of Read.</p></blockquote><p>read 函数接受一个 String，并返回一个 Read 的成员的类型</p><p><strong>问题</strong></p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; read &quot;4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;interactive&gt;:1:0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Ambiguous type variable `a&#x27; in the constraint:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            `Read a&#x27; arising from a use of `read&#x27; at &lt;interactive&gt;:1:0-7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Probable fix: add a type signature that fixes these type variable(s)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>指定 return 类型</strong></p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; read &quot;5&quot; :: Int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; read &quot;5&quot; :: Float</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; (read &quot;5&quot; :: Float) * 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; read &quot;[1,2,3,4]&quot; :: [Int]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[1,2,3,4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; read &quot;(3, &#x27;a&#x27;)&quot; :: (Int, Char)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(3, &#x27;a&#x27;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="225-enum">2.2.5 Enum<a class="hash-link" href="#225-enum" title="标题的直接链接">​</a></h4><blockquote><p>Enum members are sequentially ordered types — they can be enumerated. The main advantage of the Enum typeclass is that we can use its types in list ranges. They also have  defined successors and predecesors, which you can get with the succ and pred functions. Types in this class: (), Bool, Char, Ordering, Int, Integer, Float and Double.</p></blockquote><p>枚举类型是按照顺序排序的类型，他们可以被枚举，我们可以在列表中使用它的所有类型。</p><p>他们还被定义了前驱和后继，因此可以对它的类型使用 <code>succ</code> 和 <code>pred</code> 函数</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; [&#x27;a&#x27;..&#x27;e&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;abcde&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; [LT .. GT]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[LT,EQ,GT]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; [3 .. 5]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[3,4,5]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; succ &#x27;B&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;C&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="226-bounded">2.2.6 Bounded<a class="hash-link" href="#226-bounded" title="标题的直接链接">​</a></h4><blockquote><p>Bounded members have an upper and a lower bound.</p></blockquote><p>Bounded 类型有上界和下界</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; minBound :: Int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-2147483648</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; maxBound :: Char</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;\1114111&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; maxBound :: Bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; minBound :: Bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">False</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>minBound and maxBound are interesting because they have a type of (Bounded a) =&gt; a. In a sense they are polymorphic constants.</p></blockquote><p>他们是多态性常量，见下文</p><p>如果元组的元素也在元组中，那么这个元组也是 Bounded 的成员。</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; maxBound :: (Bool, Int, Char)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(True,2147483647,&#x27;\1114111&#x27;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="227-num">2.2.7 Num<a class="hash-link" href="#227-num" title="标题的直接链接">​</a></h4><p>Num 也是一个多态性常量，他能表现的向任何 Num 类的成员（包括 Int, Integer, Float, Double）</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; :t 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20 :: (Num t) =&gt; t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; 20 :: Int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; 20 :: Integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; 20 :: Float</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; 20 :: Double</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>(5 :: Int) * (6 :: Integer)</code> will error， while <code>5 * (6 :: Integer)</code>  will work just fine</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="229-integral--floating">2.2.9 Integral &amp; Floating<a class="hash-link" href="#229-integral--floating" title="标题的直接链接">​</a></h4><ul><li><code>Integral </code>contains <code> Int</code> and <code>Integer</code></li><li><code>Floating</code> contains <code>Float</code> and <code>Double</code>.</li></ul><p><code>fromIntegral</code>可以帮我们实现类型转换</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- It has a type declaration of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromIntegral :: (Num b, Integral a) =&gt; a -&gt; b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- so, you can use it as</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromIntegral (length [1,2,3,4]) + 3.2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-函数语法">3. 函数语法<a class="hash-link" href="#3-函数语法" title="标题的直接链接">​</a></h2><p><strong>Syntax in Functions</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-match-表达式">3.1 Match 表达式<a class="hash-link" href="#31-match-表达式" title="标题的直接链接">​</a></h3><p><strong>Pattern marching</strong></p><ol><li><p>在 ghci 中声明类型需要使用多行块中</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lucky :: Int -&gt; String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lucky a = show(a)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:type lucky</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lucky :: Int -&gt; String</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>匹配列表长度</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tell :: (Show a) =&gt; [a] -&gt; String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tell [] = &quot;The list is empty&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tell (x:[]) = &quot;The list has one element: &quot; ++ show x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tell (x:y:[]) = &quot;The list has two elements: &quot; ++ show x ++ &quot; and &quot; ++ show y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tell (x:y:_) = &quot;This list is long. The first two elements are: &quot; ++ show x ++ &quot; and &quot; ++ show y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>一个 length 函数的实现</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">length&#x27; :: (Num b) =&gt; [a] -&gt; b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">length&#x27; [] = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">length&#x27; (_:xs) = 1 + length&#x27; xs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-guard">3.2 Guard<a class="hash-link" href="#32-guard" title="标题的直接链接">​</a></h3><ol><li><p>标准</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bmiTell :: (RealFloat a) =&gt; a -&gt; String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bmiTell bmi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   | bmi &lt;= 18.5 = &quot;You&#x27;re underweight, you emo, you!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   | bmi &lt;= 25.0 = &quot;You&#x27;re supposedly normal. Pffft, I bet you&#x27;re ugly!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   | bmi &lt;= 30.0 = &quot;You&#x27;re fat! Lose some weight, fatty!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   | otherwise   = &quot;You&#x27;re a whale, congratulations!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myCompare :: (Ord a) =&gt; a -&gt; a -&gt; Ordering</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a `myCompare` b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | a &gt; b     = GT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | a == b    = EQ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | otherwise = LT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>inline 版（可读性差）</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">max&#x27; :: (Ord a) =&gt; a -&gt; a -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max&#x27; a b | a &gt; b = a | otherwise = b</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-where">3.3 where<a class="hash-link" href="#33-where" title="标题的直接链接">​</a></h3><ol><li><p>作用在 guard 上</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    bmiTell :: (RealFloat a) =&gt; a -&gt; a -&gt; String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bmiTell weight height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        | bmi &lt;= skinny = &quot;You&#x27;re underweight, you emo, you!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        | bmi &lt;= normal = &quot;You&#x27;re supposedly normal. Pffft, I bet you&#x27;re ugly!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        | bmi &lt;= fat    = &quot;You&#x27;re fat! Lose some weight, fatty!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        | otherwise     = &quot;You&#x27;re a whale, congratulations!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        where bmi = weight / height ^ 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              skinny = 18.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              normal = 25.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              fat = 30.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><em>where</em> bindings aren&#x27;t shared across function bodies of different  patterns. If you want several patterns of one function to access some  shared name, you have to define it globally.</p></blockquote><p>where 的绑定不能在函数体里共享，除非以全局方式定义</p></li><li><p>作用在 pattern match 上</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    initials :: String -&gt; String -&gt; String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    initials firstname lastname = [f] ++ &quot;. &quot; ++ [l] ++ &quot;.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        where (f:_) = firstname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              (l:_) = lastname</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>使用 where 定义 function</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    calcBmis :: (RealFloat a) =&gt; [(a, a)] -&gt; [a]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    calcBmis xs = [bmi w h | (w, h) &lt;- xs]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        where bmi weight height = weight / height ^ 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-let-it-be">3.4 Let it be<a class="hash-link" href="#34-let-it-be" title="标题的直接链接">​</a></h3><p><strong> <code>let &lt;bindings&gt; in &lt;expression&gt; </code></strong></p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    cylinder :: (RealFloat a) =&gt; a -&gt; a -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cylinder r h =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let sideArea = 2 * pi * r * h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            topArea = pi * r ^2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        in  sideArea + 2 * topArea</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>The difference is that <em>let</em> bindings are expressions themselves. <em>where</em> bindings are just syntactic constructs.</p></blockquote><p>Let 把绑定放在前面，where 把绑定放在后面，但是 Let 是一个表达式，Where 只是个语法结构</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="35-case-expression">3.5 Case Expression<a class="hash-link" href="#35-case-expression" title="标题的直接链接">​</a></h3><ul><li><p>示例 1</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">describeList :: [a] -&gt; String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">describeList xs = &quot;The list is &quot; ++ case xs of [] -&gt; &quot;empty.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                               [x] -&gt; &quot;a singleton list.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                               xs -&gt; &quot;a longer list.&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>示例 2</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">describeList :: [a] -&gt; String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">describeList xs = &quot;The list is &quot; ++ what xs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    where what [] = &quot;empty.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          what [x] = &quot;a singleton list.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          what xs = &quot;a longer list.&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-递归">4. 递归<a class="hash-link" href="#4-递归" title="标题的直接链接">​</a></h2><p><strong>Recursion</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 4.1 maxium</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- 第一种</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maximum&#x27; :: (Ord a) =&gt; [a] -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maximum&#x27; [] = error &quot;maximum of empty list&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maximum&#x27; [x] = x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maximum&#x27; (x:xs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | x &gt; maxTail = x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | otherwise = maxTail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    where maxTail = maximum&#x27; xs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 第二种</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maximum&#x27; :: (Ord a) =&gt; [a] -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maximum&#x27; [] = error &quot;maximum of empty list&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maximum&#x27; [x] = x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maximum&#x27; (x:xs) = max x (maximum&#x27; xs)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-replicate">4.2 replicate<a class="hash-link" href="#42-replicate" title="标题的直接链接">​</a></h3><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">replicate&#x27; :: (Num i, Ord i) =&gt; i -&gt; a -&gt; [a]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicate&#x27; n x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | n &lt;= 0    = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | otherwise = x:replicate&#x27; (n-1) x</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="43-take">4.3 take<a class="hash-link" href="#43-take" title="标题的直接链接">​</a></h3><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">take&#x27; :: (Num i, Ord i) =&gt; i -&gt; [a] -&gt; [a]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">take&#x27; n _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | n &lt;= 0   = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">take&#x27; _ []     = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">take&#x27; n (x:xs) = x : take&#x27; (n-1) xs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="44-zip">4.4 zip<a class="hash-link" href="#44-zip" title="标题的直接链接">​</a></h3><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">elem&#x27; :: (Eq a) =&gt; a -&gt; [a] -&gt; Bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">elem&#x27; a [] = False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">elem&#x27; a (x:xs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | a == x    = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | otherwise = a `elem&#x27;` xs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="45-quick-sort">4.5 quick sort<a class="hash-link" href="#45-quick-sort" title="标题的直接链接">​</a></h3><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">quicksort :: (Ord a) =&gt; [a] -&gt; [a]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">quicksort [] = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">quicksort (x:xs) =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let smallerSorted = quicksort [a | a &lt;- xs, a &lt;= x]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        biggerSorted = quicksort [a | a &lt;- xs, a &gt; x]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    in  smallerSorted ++ [x] ++ biggerSorted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">quicksort (x:xs) = quicksort [a | a &lt;- xs, a &lt;= x] ++ [x] ++ quicksort [a | a &lt;- xs, a &gt; x]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-高阶函数">5. 高阶函数<a class="hash-link" href="#5-高阶函数" title="标题的直接链接">​</a></h2><p><em>Higher order functions</em></p><p>能够以函数作为参数，或者返回一个函数的函数都是高阶函数，告诫函数就是 Haskell 的体验</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-curried-functions">5.1 Curried functions<a class="hash-link" href="#51-curried-functions" title="标题的直接链接">​</a></h3><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; max 4 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- max 本身可以这样写</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; (max 4) 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>让我们看看 max 的类型</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">max :: (Ord a) =&gt; a -&gt; a -&gt; a.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 也能写作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max :: (Ord a) =&gt; a -&gt; (a -&gt; a).</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>所以 max 这个函数能够返回一个函数</p><p>同时</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-一些高阶函数">5.2 一些高阶函数<a class="hash-link" href="#52-一些高阶函数" title="标题的直接链接">​</a></h3><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">applyTwice :: (a -&gt; a) -&gt; a -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">applyTwice f x = f (f x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; applyTwice (+3) 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">16</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">zipWith&#x27; :: (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">zipWith&#x27; _ [] _ = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">zipWith&#x27; _ _ [] = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">zipWith&#x27; f (x:xs) (y:ys) = f x y : zipWith&#x27; f xs ys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">zipWith&#x27; (++) [&quot;aaa&quot;, &quot;bbb&quot;] [&quot;ccc&quot;, &quot;ddd&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[&quot;aaaccc&quot;,&quot;bbbddd&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>flip</strong></p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flip&#x27; :: (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flip&#x27; f y x = f x y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="53-map">5.3 Map<a class="hash-link" href="#53-map" title="标题的直接链接">​</a></h3><blockquote><p><code>map (+3) [1,5,3,1,6] </code>is the same as writing <code>[x+3 | x &lt;- [1,5,3,1,6]].</code></p></blockquote><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    map :: (a -&gt; b) -&gt; [a] -&gt; [b]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    map _ [] = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    map f (x:xs) = f x : map f xs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="54-filter">5.4 Filter<a class="hash-link" href="#54-filter" title="标题的直接链接">​</a></h3><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    filter :: (a -&gt; Bool) -&gt; [a] -&gt; [a]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filter _ [] = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filter p (x:xs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        | p x       = x : filter p xs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        | otherwise = filter p xs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="55-takewhile">5.5 takeWhile<a class="hash-link" href="#55-takewhile" title="标题的直接链接">​</a></h3><p>take 直到限制条件到</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sum (takeWhile (&lt;10000) (filter odd (map (^2) [1..])))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sum (takeWhile (&lt;10000) [n^2 | n &lt;- [1..], odd (n^2)])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="56-chain">5.6 Chain<a class="hash-link" href="#56-chain" title="标题的直接链接">​</a></h3><p>生成 Collatz sequences</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">chain :: (Integral a) =&gt; a -&gt; [a]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chain 1 = [1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chain n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | even n =  n:chain (n `div` 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | odd n  =  n:chain (n*3 + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 小练习</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">numLongChains :: Int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">numLongChains = length (filter isLong (map chain [1..100]))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    where isLong xs = length xs &gt; 15</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="57-map--0">5.7 map (*) <!-- -->[0..]<a class="hash-link" href="#57-map--0" title="标题的直接链接">​</a></h3><blockquote><p>If we map <code>*</code> over the list <code> [0..]</code>, we get back a list of functions that only take one parameter, so <code>(Num a) =&gt; [a -&gt; a]</code>. <code>map (*) [0..]</code> produces a list like the one we&#x27;d get by writing <code>[(0*),(1*),(2*),(3*),(4*),(5*)...</code></p></blockquote><p>实例代码</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; let listOfFuns = map (*) [0..]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; (listOfFuns !! 4) 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="58-lambdas">5.8 Lambdas<a class="hash-link" href="#58-lambdas" title="标题的直接链接">​</a></h3><p>语法：一般以小括号阔起来，以 <code>\</code> 开头</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">numLongChains :: Int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">numLongChains = length (filter (\xs -&gt; length xs &gt; 15) (map chain [1..100]))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>一个比较好的用发</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flip&#x27; :: (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flip&#x27; f = \x y -&gt; f y x</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="59-fold">5.9 Fold<a class="hash-link" href="#59-fold" title="标题的直接链接">​</a></h3><p>我们用 <em>fold</em> 再次实现 <code>sum</code> 函数</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sum&#x27; :: (Num a) =&gt; [a] -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sum&#x27; xs = foldl (\acc x -&gt; acc + x) 0 xs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; sum&#x27; [3,5,2,1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li><strong>foldl</strong> 接受 2 个参数，分别是函数和一个初始值 (或者说累加器), acc 开始为 0，之后依次加 3, 5, 2, 1</li></ol><p>函数的第一个参数是累加器，第二个是当前的值</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- 再次实现 elem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">elem&#x27; :: (Eq a) =&gt; a -&gt; [a] -&gt; Bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">elem&#x27; x xs = foldl (\acc el -&gt; if el == x then True else acc) False xs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li><p><strong>foldr</strong> 与 foldl 相似，不过是从右侧开始遍历元素，其中，foldr 的第一个参数是当前元素，第二个元素是 acc 累加器</p></li><li><p><strong>两种 map 的实现</strong></p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- foldr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">map&#x27; :: (a -&gt; b) -&gt; [a] -&gt; [b]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">map&#x27; f xs = foldr (\x acc -&gt; f x : acc) [] xs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- foldl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">map&#x27; f xs = foldl (\acc x -&gt; acc ++ [f x]) [] xs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在上面的案例中，<code>foldr</code> 实现的更好，因为 <code>:</code> 的开销比 <code>++</code> 小的多</p></li><li><p>要注意的是 foldr 可以作用在无线列表上，foldl 不能</p></li><li><p><strong>foldl1</strong> 和 <strong>foldr1</strong> 使用第一个或者最后一个作为初值，不需要那个参数了</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- 这里是一堆例子</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maximum&#x27; :: (Ord a) =&gt; [a] -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maximum&#x27; = foldr1 (\x acc -&gt; if x &gt; acc then x else acc)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">reverse&#x27; :: [a] -&gt; [a]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">reverse&#x27; = foldl (\acc x -&gt; x : acc) []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">product&#x27; :: (Num a) =&gt; [a] -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">product&#x27; = foldr1 (*)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">filter&#x27; :: (a -&gt; Bool) -&gt; [a] -&gt; [a]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">filter&#x27; p = foldr (\x acc -&gt; if p x then x : acc else acc) []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">head&#x27; :: [a] -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">head&#x27; = foldr1 (\x _ -&gt; x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">last&#x27; :: [a] -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">last&#x27; = foldl1 (\_ x -&gt; x)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>scanl</strong> 和 <strong>scanr</strong> 和 fold 类似，不过会把中间的状态保留，并返回一个列表</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; scanl (+) 0 [3,5,2,1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0,3,8,10,11]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; scanr (+) 0 [3,5,2,1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[11,8,3,1,0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; scanl1 (\acc x -&gt; if x &gt; acc then x else acc) [3,4,5,3,7,9,2,1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[3,4,5,5,7,9,9,9]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; scanl (flip (:)) [] [3,2,1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[],[3],[2,3],[1,2,3]]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="510--运算符">5.10 $ 运算符<a class="hash-link" href="#510--运算符" title="标题的直接链接">​</a></h3><blockquote><p>Whereas normal function application (putting a space between two things) has a really high precedence, the $ function has the lowest precedence. Function application with a space is left-associative (so f a b c is the same as ((f a) b) c)), function application with $ is right-associative.</p></blockquote><p>空格具有较高的优先级，但是 <code>$</code> 具有最低的优先级</p><p>使用空格分割的是左关联的，而使用 <code>$</code> 分割的是右关联的</p><p>有什么用？</p><ol><li><p>少些括号</p><p><code>sum (map sqrt [1..130])</code> 可以用 <code>sum $ map sqrt [1..130]</code> 代替，<code>sqrt 3 + 4 + 9</code>是 13+ 根号 3，但是 <code>sqrt $ 3 + 4 + 9</code> 就正常</p><p>[]:</p><blockquote><p>How about sum (filter (&gt; 10) (map (<em>2) <!-- -->[2..10]<!-- -->))? Well, because $ is right-associative, f (g (z x)) is equal to f $ g $ z x. And so, we can rewrite sum (filter (&gt; 10) (map (</em>2) <!-- -->[2..10]<!-- -->)) as sum $ filter (&gt; 10) $ map (*2) <!-- -->[2..10]<!-- -->.</p></blockquote></li><li><p>增加特性</p></li></ol><p>加了 <code>$</code> 意味着可以被当作函数来对待，所以下面的写法是可行的</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; map ($ 3) [(4+), (10*), (^2), sqrt]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[7.0,30.0,9.0,1.7320508075688772]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="511-函数组合">5.11 函数组合<a class="hash-link" href="#511-函数组合" title="标题的直接链接">​</a></h3><p><code>.</code> 是一个运算符，他的定义如下</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(.) :: (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f . g = \x -&gt; f (g x)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>有了这个后，一些嵌套的函数就能简写，例如</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- before</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; map (\x -&gt; negate (abs x)) [5,-3,-6,7,-3,2,-19,24]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[-5,-3,-6,-7,-3,-2,-19,-24]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- now</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; map (negate . abs) [5,-3,-6,7,-3,2,-19,24]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[-5,-3,-6,-7,-3,-2,-19,-24]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-模块">6. 模块<a class="hash-link" href="#6-模块" title="标题的直接链接">​</a></h2><p><strong>Modules</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="61-导入模块">6.1 导入模块<a class="hash-link" href="#61-导入模块" title="标题的直接链接">​</a></h3><ol><li>导入</li></ol><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- 1. 导入一个模块</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; import Data.List</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 2. 导入多个模块</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; :m + Data.List Data.Map Data.Set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 3. 导入某些函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; import Data.List (nub, sort)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 4. 不导入某些指定的函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; import Data.List hiding (nub)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>As</li></ol><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- 避免重名， 但是使用时必须指定 Data.Map.filter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import qualified Data.Map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 换名， 可以用 M.filter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import qualified Data.Map as M</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="62-datalist">6.2 Data.List<a class="hash-link" href="#62-datalist" title="标题的直接链接">​</a></h3><ol><li><p>intersperse</p><p>向 List 中填充元素*, 类似与 python 中的 join</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; intersperse &#x27;.&#x27; &quot;MONKEY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;M.O.N.K.E.Y&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; intersperse 0 [1,2,3,4,5,6]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[1,0,2,0,3,0,4,0,5,0,6]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>intercalate</p><p>join 后进行 concat，填充后合并返回，</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; intersperse &#x27;.&#x27; &quot;MONKEY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;M.O.N.K.E.Y&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; intersperse 0 [1,2,3,4,5,6]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[1,0,2,0,3,0,4,0,5,0,6]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>transpose</p><p>矩阵转置</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; transpose [[1,2,3],[4,5,6],[7,8,9]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[1,4,7],[2,5,8],[3,6,9]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; transpose [&quot;hey&quot;,&quot;there&quot;,&quot;guys&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[&quot;htg&quot;,&quot;ehu&quot;,&quot;yey&quot;,&quot;rs&quot;,&quot;e&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>foldl&#x27; foldl1&#x27;</p><p>能够立即运算，防止堆栈溢出</p><blockquote><p>foldl&#x27; and foldl1&#x27; are stricter versions of their respective lazy incarnations. When using lazy folds on really big lists, you might often get a stack overflow  error. The culprit for that is that due to the lazy nature of the folds, the accumulator value isn&#x27;t actually updated as the folding happens.  What actually happens is that the accumulator kind of makes a promise  that it will compute its value when asked to actually produce the result (also called a thunk). That happens for every intermediate accumulator  and all those thunks overflow your stack. The strict folds aren&#x27;t lazy  buggers and actually compute the intermediate values as they go along  instead of filling up your stack with thunks. So if you ever get stack  overflow errors when doing lazy folds, try switching to their strict  versions.</p></blockquote></li><li><p>concat</p><p>和并所有元素并返回</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; concat [&quot;foo&quot;,&quot;bar&quot;,&quot;car&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;foobarcar&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; concat [[3,4,5],[2,3,4],[2,1,1]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[3,4,5,2,3,4,2,1,1]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>concatMap == concat map</strong></p></li><li><p>and &amp; or</p><p>需要配合 map 使用</p><blockquote><p>and takes a list of boolean values and returns True only if all the values in the list are True.</p></blockquote><p>全为真返回 True</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; and $ map (&gt;4) [5,6,7,8]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; and $ map (==4) [4,4,4,3,4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">False</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>or is like and, only it returns True if any of the boolean values in a list is True.</p></blockquote><p>有真就返回 True</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; or $ map (==4) [2,3,4,5,6,1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; or $ map (&gt;4) [1,2,3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">False</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>all &amp; any</p><p>and 和 or 的替代品</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; any (==4) [2,3,5,6,1,4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; all (&gt;4) [6,9,10]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; all (`elem` [&#x27;A&#x27;..&#x27;Z&#x27;]) &quot;HEYGUYSwhatsup&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; any (`elem` [&#x27;A&#x27;..&#x27;Z&#x27;]) &quot;HEYGUYSwhatsup&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">True</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>iterate</p><p>根据每次的结果生成下一次的值</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Prelude&gt; take 10 (iterate (+10) 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0,10,20,30,40,50,60,70,80,90]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prelude&gt; take 5 $ iterate (++ &quot;haha&quot;) &quot;haha&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[&quot;haha&quot;,&quot;hahahaha&quot;,&quot;hahahahahaha&quot;,&quot;hahahahahahahaha&quot;,&quot;hahahahahahahahahaha&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>splitAt</p><p>分割生成列表</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; splitAt 3 &quot;heyman&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(&quot;hey&quot;,&quot;man&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; splitAt 100 &quot;heyman&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(&quot;heyman&quot;,&quot;&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; splitAt (-3) &quot;heyman&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(&quot;&quot;,&quot;heyman&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; let (a,b) = splitAt 3 &quot;foobar&quot; in b ++ a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;barfoo&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>takeWhile &amp; dropWhile</p><p>根据条件 take 或 drop</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; takeWhile (&gt;3) [6,5,4,3,2,1,2,3,4,5,4,3,2,1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[6,5,4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; takeWhile (/=&#x27; &#x27;) &quot;This is a sentence&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;This&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; dropWhile (/=&#x27; &#x27;) &quot;This is a sentence&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot; is a sentence&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; dropWhile (&lt;3) [1,2,2,2,3,4,5,4,3,2,1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[3,4,5,4,3,2,1]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>break &amp; span</p><p>就是把 takeWhile 的后半部分也返回了</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; break (==4) [1,2,3,4,5,6,7]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">([1,2,3],[4,5,6,7])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; span (/=4) [1,2,3,4,5,6,7]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">([1,2,3],[4,5,6,7])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>sort</p><p>排序呗</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; sort [8,5,3,2,1,6,4,2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[1,2,2,3,4,5,6,8]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; sort &quot;This will be sorted soon&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;    Tbdeehiillnooorssstw&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>group</p><p>分组但不排序</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; group [1,1,1,1,2,2,2,2,3,3,2,2,2,5,6,7]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[1,1,1,1],[2,2,2,2],[3,3],[2,2,2],[5],[6],[7]]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>inits &amp; tails</p><p>生成一个前缀和</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; inits &quot;w00t&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[&quot;&quot;,&quot;w&quot;,&quot;w0&quot;,&quot;w00&quot;,&quot;w00t&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; tails &quot;w00t&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[&quot;w00t&quot;,&quot;00t&quot;,&quot;0t&quot;,&quot;t&quot;,&quot;&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; let w = &quot;w00t&quot; in zip (inits w) (tails w)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[(&quot;&quot;,&quot;w00t&quot;),(&quot;w&quot;,&quot;00t&quot;),(&quot;w0&quot;,&quot;0t&quot;),(&quot;w00&quot;,&quot;t&quot;),(&quot;w00t&quot;,&quot;&quot;)]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>isInfixOf &amp; isPrefixOf &amp; isSuffixOf</p><p>是否是 sublist，是否在开头，是否在结尾</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; &quot;cat&quot; `isInfixOf` &quot;im a cat burglar&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; &quot;Cat&quot; `isInfixOf` &quot;im a cat burglar&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; &quot;cats&quot; `isInfixOf` &quot;im a cat burglar&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; &quot;hey&quot; `isPrefixOf` &quot;hey there!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; &quot;hey&quot; `isPrefixOf` &quot;oh hey there!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; &quot;there!&quot; `isSuffixOf` &quot;oh hey there!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; &quot;there!&quot; `isSuffixOf` &quot;oh hey there&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">False</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>elem &amp; notElem &amp; partition</p></li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">判断是否是，分为两组</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```haskell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; partition (`elem` [&#x27;A&#x27;..&#x27;Z&#x27;]) &quot;BOBsidneyMORGANeddy&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(&quot;BOBMORGAN&quot;,&quot;sidneyeddy&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">17. find &amp; findIndex &amp; findIndices</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>find 返回第一个符合的元素</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; find (&gt;4) [1,2,3,4,5,6]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Just 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; find (&gt;9) [1,2,3,4,5,6]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nothing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; :t find</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find :: (a -&gt; Bool) -&gt; [a] -&gt; Maybe a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; findIndex (==4) [5,3,2,1,6,4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Just 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; findIndex (==7) [5,3,2,1,6,4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nothing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; findIndices (`elem` [&#x27;A&#x27;..&#x27;Z&#x27;]) &quot;Where Are The Caps?&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0,6,10,14]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">18. elemIndex  &amp; elemIndIces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    返回元素的 index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```haskell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; :t elemIndex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    elemIndex :: (Eq a) =&gt; a -&gt; [a] -&gt; Maybe Int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; 4 `elemIndex` [1,2,3,4,5,6]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Just 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; 10 `elemIndex` [1,2,3,4,5,6]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Nothing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; &#x27; &#x27; `elemIndices` &quot;Where are the spaces?&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [5,9,13]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">19. more zip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    一直提供到 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```haskell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; zipWith3 (\x y z -&gt; x + y + z) [1,2,3] [4,5,2,2] [2,2,3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [7,9,8]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; zip4 [2,3,3] [2,2,2] [5,5,3] [2,2,2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [(2,2,5,2),(3,2,5,2),(3,2,3,2)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20. line &amp; word</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    line 切出没一行，word 切出每个单词</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```haskell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; lines &quot;first line\nsecond line\nthird line&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [&quot;first line&quot;,&quot;second line&quot;,&quot;third line&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; unlines [&quot;first line&quot;, &quot;second line&quot;, &quot;third line&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;first line\nsecond line\nthird line\n&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; words &quot;hey these are the words in this sentence&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [&quot;hey&quot;,&quot;these&quot;,&quot;are&quot;,&quot;the&quot;,&quot;words&quot;,&quot;in&quot;,&quot;this&quot;,&quot;sentence&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; words &quot;hey these           are    the words in this\nsentence&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [&quot;hey&quot;,&quot;these&quot;,&quot;are&quot;,&quot;the&quot;,&quot;words&quot;,&quot;in&quot;,&quot;this&quot;,&quot;sentence&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; unwords [&quot;hey&quot;,&quot;there&quot;,&quot;mate&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;hey there mate&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">21. nub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    元素去重</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```haskell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; nub [1,2,3,4,3,2,1,2,3,4,3,2,1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [1,2,3,4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; nub &quot;Lots of words and stuff&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Lots fwrdanu&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">22. delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    删掉地一个匹配的元素</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```haskell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- delete takes an element and a list and deletes the first occurence of that element in the list.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; delete &#x27;h&#x27; &quot;hey there ghang!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ey there ghang!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; delete &#x27;h&#x27; . delete &#x27;h&#x27; $ &quot;hey there ghang!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ey tere ghang!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; delete &#x27;h&#x27; . delete &#x27;h&#x27; . delete &#x27;h&#x27; $ &quot;hey there ghang!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ey tere gang!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">23. \\\\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>删掉更多</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- \\ is the list difference function. It acts like a set difference, basically. For every element in the right-hand list, it removes a matching element in the left one.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; [1..10] \\ [2,5,9]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[1,3,4,6,7,8,10]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; &quot;Im a big baby&quot; \\ &quot;big&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Im a  baby&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">24. union</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    求并集</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```haskell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; &quot;hey man&quot; `union` &quot;man what&#x27;s up&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;hey manwt&#x27;sup&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; [1..7] `union` [5..10]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [1,2,3,4,5,6,7,8,9,10]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">25. intersect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    求交集</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```haskell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; [1..7] `intersect` [5..10]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [5,6,7]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">26. insert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    插入呗</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```haskell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; insert 4 [3,5,1,2,8,2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [3,4,5,1,2,8,2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; insert 4 [1,3,4,4,1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [1,3,4,4,4,1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">27. deleteBy, unionBy, intersectBy and groupBy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    以一个数开始， 以此比较他后面的数，知道不匹配， 组成数组</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    接着以第一个不匹配的数开始，重复比较</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```haskell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; let values = [-4.3, -2.4, -1.2, 0.4, 2.3, 5.9, 10.5, 29.1, 5.3, -2.4, -14.5, 2.9, 2.3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; groupBy (\x y -&gt; (x &gt; 0) == (y &gt; 0)) values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- 也可以写成 \x y -&gt; (x &gt; 0) &amp;&amp; (y &gt; 0) || (x &lt;= 0) &amp;&amp; (y &lt;= 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [[-4.3,-2.4,-1.2],[0.4,2.3,5.9,10.5,29.1,5.3],[-2.4,-14.5],[2.9,2.3]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghci&gt; groupBy (\x y -&gt; (x&gt;0) == (y&lt;0)) values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- 第一个数和后面的符号都不同</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [[-4.3],[-2.4],[-1.2,0.4,2.3,5.9,10.5,29.1,5.3],[-2.4],[-14.5,2.9,2.3]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">28. on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    还有更好的方法写上面的 lambada 表达式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on 需要从 Data.Function 导入</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on 接受两个参数，第二个会对参数做的运算， 第一个是函数会比较两个运算后结果</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```haskell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on :: (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f `on` g = \x y -&gt; f (g x) (g y)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 6.3 Data.Char</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Data.Char 提供了一系列处理字符的函数，配合 map 和 filter 使用也可以用来处理字符串</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**1. 判断类**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. isControl checks whether a character is a control character.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. isSpace checks whether a character is a white-space characters. That includes spaces, tab characters, newlines, etc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. isLower checks whether a character is lower-cased.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. isUpper checks whether a character is upper-cased.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5. isAlpha checks whether a character is a letter.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6. isAlphaNum checks whether a character is a letter or a number.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7. isPrint checks whether a character is printable. Control characters, for instance, are not printable.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">8. isDigit checks whether a character is a digit.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">9. isOctDigit checks whether a character is an octal digit.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10. isHexDigit checks whether a character is a hex digit.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11. isLetter checks whether a character is a letter.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12. isMark checks for Unicode mark characters. Those are characters that combine with preceding letters to form latters with accents. Use this if you are French.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">13. isNumber checks whether a character is numeric.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14. isPunctuation checks whether a character is punctuation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15. isSymbol checks whether a character is a fancy mathematical or currency symbol.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">16. isSeparator checks for Unicode spaces and separators.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">17. isAscii checks whether a character falls into the first 128 characters of the Unicode character set.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">18. isLatin1 checks whether a character falls into the first 256 characters of Unicode.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">19. isAsciiUpper checks whether a character is ASCII and upper-case.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20. isAsciiLower checks whether a character is ASCII and lower-case.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**2. 转换类**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. toUpper converts a character to upper-case. Spaces, numbers, and the like remain unchanged.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. toLower converts a character to lower-case.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. toTitle converts a character to title-case. For most characters, title-case is the same as upper-case.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. digitToInt converts a character to an Int. To succeed, the character must be in the ranges &#x27;0&#x27;..&#x27;9&#x27;, &#x27;a&#x27;..&#x27;f&#x27; or &#x27;A&#x27;..&#x27;F&#x27;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5. intToDigit is the inverse function of digitToInt. It takes an Int in the range of 0..15 and converts it to a lower-case character.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6. ord and chr convert characters to their corresponding numbers and vice versa:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ```haskell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ghci&gt; ord &#x27;a&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   97</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ghci&gt; chr 97</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &#x27;a&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ghci&gt; map ord &quot;abcdefgh&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   [97,98,99,100,101,102,103,104]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="7"><li><p>encode</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- 一种编码方式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">encode :: Int -&gt; String -&gt; String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">encode shift msg =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let ords = map ord msg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shifted = map (+ shift) ords</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    in  map chr shifted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 另一种实现</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">map (chr . (+ shift) . ord) msg.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 实例代码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; encode 3 &quot;Heeeeey&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Khhhhh|&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; encode 4 &quot;Heeeeey&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Liiiii}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; encode 1 &quot;abcd&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;bcde&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; encode 5 &quot;Marry Christmas! Ho ho ho!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Rfww~%Hmwnxyrfx&amp;%Mt%mt%mt&amp;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="64-datamap">6.4 Data.Map<a class="hash-link" href="#64-datamap" title="标题的直接链接">​</a></h3><p>下面给出了几种写 map 的方法</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- 第一种 filter 实现</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">findKey :: (Eq k) =&gt; k -&gt; [(k, v)] -&gt; v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">findKey key xs = (snd . head . filter (\ (k, v) -&gt; key == k)) xs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 第二种 Maybe 非空校验</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">findKey :: (Eq k) =&gt; k -&gt; [(k, v)] -&gt; Maybe v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">findKey _ [] = Nothing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">findKey key ((k, v):xs) = if k == key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                        then Just v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                        else findKey key xs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 第三种 使用 foldr 而非递归，因为比递归的可读性更好</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- Note: It&#x27;s usually better to use folds for this standard list recursion pattern instead of explicitly writing the recursion because they&#x27;re easier to read and identify. Everyone knows it&#x27;s a fold when they see the foldr call, but it takes some more thinking to read explicit recursion.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">findKey :: (Eq k) =&gt; k -&gt; [(k,v)] -&gt; Maybe v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">findKey key xs = foldr (\(k,v) acc -&gt; if key == k then Just v else acc) Nothing xs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main :: IO ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let phoneBook =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [(&quot;aaa&quot;,&quot;111&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ,(&quot;bbb&quot;,&quot;222&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ,(&quot;ccc&quot;,&quot;333&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print $ findKey &quot;bbb&quot; phoneBook</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>下面是一堆函数</p><ol><li><p>fromList</p><p>创建一个 Map</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.fromList [(&quot;betty&quot;,&quot;555-2938&quot;),(&quot;bonnie&quot;,&quot;452-2928&quot;),(&quot;lucille&quot;,&quot;205-2928&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList [(&quot;betty&quot;,&quot;555-2938&quot;),(&quot;bonnie&quot;,&quot;452-2928&quot;),(&quot;lucille&quot;,&quot;205-2928&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.fromList [(1,2),(3,4),(3,2),(5,5)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList [(1,2),(3,2),(5,5)]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>自己实现</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- We can implement our own fromList by using the empty map, insert and a fold. Watch:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList&#x27; :: (Ord k) =&gt; [(k,v)] -&gt; Map.Map k v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList&#x27; = foldr (\(k,v) acc -&gt; Map.insert k v acc) Map.empty</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>empty</p><p>返回一个空 Map</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.empty </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList []  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>insert</p><p>插入一对 k，v</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.insert 3 100 Map.empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList [(3,100)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.insert 5 600 (Map.insert 4 200 ( Map.insert 3 100  Map.empty))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList [(3,100),(4,200),(5,600)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.insert 5 600 . Map.insert 4 200 . Map.insert 3 100 $ Map.empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList [(3,100),(4,200),(5,600)]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>null</p><p>检查是否为空</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.null Map.empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.null $ Map.fromList [(2,3),(5,5)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">False</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>size</p><p>返回 map 的大小</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.size Map.empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.size $ Map.fromList [(2,4),(3,3),(4,2),(5,4),(6,4)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>singleton</p><p>重建只有一对 kv 的 Map</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.singleton 3 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList [(3,9)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.insert 5 9 $ Map.singleton 3 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList [(3,9),(5,9)]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>lookup</p><p>就是 get</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Prelude Map&gt; Map.lookup 4 a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Just 200</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>member</p><p>就是 in</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.member 3 $ Map.fromList [(3,6),(4,3),(6,9)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.member 3 $ Map.fromList [(2,5),(4,5)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">False</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>map and filter</p><p>只作用于 v</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.map (*100) $ Map.fromList [(1,1),(2,4),(3,9)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList [(1,100),(2,400),(3,900)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.filter isUpper $ Map.fromList [(1,&#x27;a&#x27;),(2,&#x27;A&#x27;),(3,&#x27;b&#x27;),(4,&#x27;B&#x27;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList [(2,&#x27;A&#x27;),(4,&#x27;B&#x27;)]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>toList</p><p>如其名</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.toList . Map.insert 9 2 $ Map.singleton 4 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[(4,3),(9,2)]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>keys and elems</p><p>返回 keys 和 values</p></li><li><p>fromListWith</p><p>类似与 fromList， 不过有一个函数决定重复的 key 应该怎么办</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- 有重复的键</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">phoneBook =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [(&quot;betty&quot;,&quot;555-2938&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ,(&quot;betty&quot;,&quot;342-2492&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ,(&quot;bonnie&quot;,&quot;452-2928&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ,(&quot;patsy&quot;,&quot;493-2928&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ,(&quot;patsy&quot;,&quot;943-2929&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ,(&quot;patsy&quot;,&quot;827-9162&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ,(&quot;lucille&quot;,&quot;205-2928&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ,(&quot;wendy&quot;,&quot;939-8282&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ,(&quot;penny&quot;,&quot;853-2492&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ,(&quot;penny&quot;,&quot;555-2111&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 重复的键的值会被加一起</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">phoneBookToMap :: (Ord k) =&gt; [(k, String)] -&gt; Map.Map k String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">phoneBookToMap xs = Map.fromListWith (\number1 number2 -&gt; number1 ++ &quot;, &quot; ++ number2) xs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 查看</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.lookup &quot;patsy&quot; $ phoneBookToMap phoneBook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;827-9162, 943-2929, 493-2928&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.lookup &quot;wendy&quot; $ phoneBookToMap phoneBook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;939-8282&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.lookup &quot;betty&quot; $ phoneBookToMap phoneBook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;342-2492, 555-2938&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>下面是另外两个例子</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.fromListWith max [(2,3),(2,5),(2,100),(3,29),(3,22),(3,11),(4,22),(4,15)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList [(2,100),(3,29),(4,22)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.fromListWith (+) [(2,3),(2,5),(2,100),(3,29),(3,22),(3,11),(4,22),(4,15)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList [(2,108),(3,62),(4,37)]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>insertWith</p><p>差不多， 条件插入</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Map.insertWith (+) 3 100 $ Map.fromList [(3,4),(5,103),(6,339)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList [(3,104),(5,103),(6,339)]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="65-dataset">6.5 Data.Set<a class="hash-link" href="#65-dataset" title="标题的直接链接">​</a></h3><ol><li><p>fromList</p><p>去重</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">text1 = &quot;I just had an anime dream. Anime... Reality... Are they so different?&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">text2 = &quot;The old man left his garbage can out and now his trash is all over my lawn!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; let set1 = Set.fromList text1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; let set2 = Set.fromList text2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; set1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList &quot; .?AIRadefhijlmnorstuy&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; set2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList &quot; !Tabcdefghilmnorstuvwy&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>intersection</p><p>求交集</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Set.intersection set1 set2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList &quot; adefhilmnorstuy&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>difference</p><p>求第一个集合有第二个没有</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Set.difference set1 set2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList &quot;.?AIRj&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Set.difference set2 set1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList &quot;!Tbcgvw&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>union</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Set.union set1 set2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fromList &quot; !.?AIRTabcdefghijlmnorstuvwy&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>其他</p><p>null, size, member, empty, singleton, insert and delete 就和你想的一样</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-自定义类型">7. 自定义类型<a class="hash-link" href="#7-自定义类型" title="标题的直接链接">​</a></h2><p>使用 data 关键字定义</p><p>等号左边的是 <strong>type name</strong>，等好右边的是 <strong>value constructors</strong></p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data Bool = False | True</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Int 类型可能有下面的定义</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- 真实不是这样的，只是为了说明问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data Int = -2147483648 | -2147483647 | ... | -1 | 0 | 1 | 2 | ... | 2147483647</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="71-基本类型定义">7.1 基本类型定义<a class="hash-link" href="#71-基本类型定义" title="标题的直接链接">​</a></h3><p>下面让我们进行一个形状的定义</p><p>一个圆的定义可能需要三个参数，前两个是圆的坐标，第三个参数是半径，所以我们可以想 <code>(43.1, 55.0, 10.4)</code>这样定义一个圆，但是这三个参数也能表示一个 3D vector 或者是别的什么东西，所以我们最好定义一个叫做 Shape 的新类型</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data Shape = Circle Float Float Float | Rectangle Float Float Float Float</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; :t Circle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Circle :: Float -&gt; Float -&gt; Float -&gt; Shape</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; :t Rectangle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Rectangle :: Float -&gt; Float -&gt; Float -&gt; Float -&gt; Shape</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>new 一个实例</strong></p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Circle 10 20 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Circle 10.0 20.0 5.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Rectangle 50 230 60 90</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Rectangle 50.0 230.0 60.0 90.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>type name 和 value constructor 首字母需要大写</p><p>下面定义了一个完整的 Shape 模块</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- Shape(..) 会将所有的构造器暴露给外部</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 等同于 Shape (Rectangle, Circle)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module Shapes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">( Point(..)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">, Shape(..)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">, surface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">, nudge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">, baseCircle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">, baseRect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- deriving (Show) 自动实现 Show</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data Point = Point Float Float deriving (Show)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data Shape = Circle Point Float | Rectangle Point Point deriving (Show)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">surface :: Shape -&gt; Float</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">surface (Circle _ r) = pi * r ^ 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">surface (Rectangle (Point x1 y1) (Point x2 y2)) = (abs $ x2 - x1) * (abs $ y2 - y1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nudge :: Shape -&gt; Float -&gt; Float -&gt; Shape</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nudge (Circle (Point x y) r) a b = Circle (Point (x+a) (y+b)) r</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nudge (Rectangle (Point x1 y1) (Point x2 y2)) a b = Rectangle (Point (x1+a) (y1+b)) (Point (x2+a) (y2+b))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">baseCircle :: Float -&gt; Shape</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">baseCircle r = Circle (Point 0 0) r</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">baseRect :: Float -&gt; Float -&gt; Shape</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">baseRect width height = Rectangle (Point 0 0) (Point width height)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>我们也可以不暴露 Shape，让用户只能通过 baseCircle，baseRect 构造，让我们的接口更加抽象</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="72-record-syntax-定义类型">7.2 record syntax 定义类型<a class="hash-link" href="#72-record-syntax-定义类型" title="标题的直接链接">​</a></h3><p>第一种方式</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data Person = Person String String Int Float String String deriving (Show)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">firstName :: Person -&gt; String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">firstName (Person firstname _ _ _ _ _) = firstname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lastName :: Person -&gt; String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lastName (Person _ lastname _ _ _ _) = lastname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age :: Person -&gt; Int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age (Person _ _ age _ _ _) = age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">height :: Person -&gt; Float</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">height (Person _ _ _ height _ _) = height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">phoneNumber :: Person -&gt; String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">phoneNumber (Person _ _ _ _ number _) = number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flavor :: Person -&gt; String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flavor (Person _ _ _ _ _ flavor) = flavor</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用 record syntax 定义 Person</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data Person = Person { firstName :: String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     , lastName :: String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     , age :: Int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     , height :: Float</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     , phoneNumber :: String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     , flavor :: String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     } deriving (Show)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>haskell 会自动生成上面的函数</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; :t flavor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flavor :: Person -&gt; String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; :t firstName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">firstName :: Person -&gt; String</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>new 一个实例</strong></p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Car {company=&quot;Ford&quot;, model=&quot;Mustang&quot;, year=1967}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Car {company = &quot;Ford&quot;, model = &quot;Mustang&quot;, year = 1967}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="73-类型参数">7.3 类型参数<a class="hash-link" href="#73-类型参数" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="731-maybe">7.3.1 Maybe<a class="hash-link" href="#731-maybe" title="标题的直接链接">​</a></h4><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data Maybe a = Nothing | Just a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>类型构造器</strong></p><p>a 是一个类型参数，因为这个类型 a，所以我们称 Maybe 是一个 type constructor（类型构造器）（注意：和之前的 value constructor 不一样），所以 Maybe 不是一个类型</p><p>我们能够传入 Char 或者 Int，就能的到一个 Maybe Char 或者 Maybe Int 类型</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="732-car">7.3.2 Car<a class="hash-link" href="#732-car" title="标题的直接链接">​</a></h4><p>下面举了一个 Car 的例子，他就可能是 (Car String String Int) 类型</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    data Car a b c = Car { company :: a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         , model :: b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         , year :: c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         } deriving (Show)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>但是用这种形式声明并没有太多好处，大部分情况下我们只需要一种状态 <code>Car String String Int</code> 就够了</p><p>所以我们会用下面的方式</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data Car = Car { company :: String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               , model :: String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               , year :: Int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               } deriving (Show)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tellCar :: Car -&gt; String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tellCar (Car {company = c, model = m, year = y}) = &quot;This &quot; ++ c ++ &quot; &quot; ++ m ++ &quot; was made in &quot; ++ show y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>我们之前也见过一个使用类型参数的例子，就是 Map，k，v 分别是 key 和 value 的类型</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data (Ord k) =&gt; Map k v = ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="733-vector">7.3.3 Vector<a class="hash-link" href="#733-vector" title="标题的直接链接">​</a></h4><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data Vector2 a = Vector2 [a] [a] [a] deriving (Show)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vplus :: (Char t) =&gt; Vector2 t -&gt; Vector2 t -&gt; Vector2 t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(Vector2 a1 a2 a3) `vplus` (Vector2 b1 b2 b3) = Vector2 a1++b1 a2++b2 a3++b3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="74-派生实例">7.4 派生实例<a class="hash-link" href="#74-派生实例" title="标题的直接链接">​</a></h3><p><strong>Derived instances</strong></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="741-derive">7.4.1 derive<a class="hash-link" href="#741-derive" title="标题的直接链接">​</a></h4><p>Typeclasses 更像是接口，我们使用 <code>derive</code> 关键字可以自动派生出行为</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    data Person = Person { firstName :: String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         , lastName :: String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         , age :: Int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         } deriving (Eq, Show, Read)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>该类型派生自 Eq，所以实现了 <code>==</code> 和 <code>/=</code>, 还能够应用在任何在类型签名上具有 <code>Eq a</code> 的函数</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; let mikeD = Person {firstName = &quot;Michael&quot;, lastName = &quot;Diamond&quot;, age = 43}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; let adRock = Person {firstName = &quot;Adam&quot;, lastName = &quot;Horovitz&quot;, age = 41}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; let mca = Person {firstName = &quot;Adam&quot;, lastName = &quot;Yauch&quot;, age = 44}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; mca == adRock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; mikeD == Person {firstName = &quot;Michael&quot;, lastName = &quot;Diamond&quot;, age = 43}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">True</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Read 和 Show 能实现类型和字符串间的相互转化，当我们使用 Read 时，需要指定结果的类型</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; read &quot;Person {firstName =\&quot;Michael\&quot;, lastName =\&quot;Diamond\&quot;, age = 43}&quot; :: Person</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Person {firstName = &quot;Michael&quot;, lastName = &quot;Diamond&quot;, age = 43}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>偶们也能够读取参数化类型（parameterized types），但是必须填上类型</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- So we can&#x27;t do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">read &quot;Just &#x27;t&#x27;&quot; :: Maybe a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- but we can do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">read &quot;Just &#x27;t&#x27;&quot; :: Maybe Char</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="742-实现一些-typeclasses">7.4.2 实现一些 Typeclasses<a class="hash-link" href="#742-实现一些-typeclasses" title="标题的直接链接">​</a></h4><ol><li><p>Ord 的比较规则，在前面的比较小，与 Char 比较无关</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data Day = Monday | Tuesday | Wednesday | Thursday | Friday | Saturday | Sunday deriving (Eq, Ord, Show, Read, Bounded, Enum)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghci&gt; Saturday &gt; Friday</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">True</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="743-类型同义词">7.4.3 类型同义词<a class="hash-link" href="#743-类型同义词" title="标题的直接链接">​</a></h4><p><strong>Type synonyms</strong></p><p>就是换个名而已</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- 下面是 String 的定义</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type String = [Char]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type IntMap v = Map Int v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type IntMap = Map Int</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>需要分清类型构造器和值构造器（type constructors and value constructors）的区别</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="744-either">7.4.4 Either<a class="hash-link" href="#744-either" title="标题的直接链接">​</a></h4><p>下面我们在介绍一种类型 Either</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- 定义</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data Either a b = Left a | Right b deriving (Eq, Ord, Read, Show)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>So far, we&#x27;ve seen that Maybe a was mostly used to represent the results of computations that could have either failed or not. But somtimes, Maybe a isn&#x27;t good enough because Nothing doesn&#x27;t really convey much information other than that something has  failed. That&#x27;s cool for functions that can fail in only one way or if  we&#x27;re just not interested in how and why they failed. A Data.Map lookup fails only if the key we were looking for wasn&#x27;t in the map, so  we know exactly what happened. However, when we&#x27;re interested in how  some function failed or why, we usually use the result type of Either a b, where a is some sort of type that can tell us something about the possible failure and b is the type of a successful computation. Hence, errors use the Left value constructor while results use Right.</p></blockquote><p>Maybe 不能满足所有的需要，Either 通常用于错误处理，左值一般表示错误原因，右值一般是正确的结果</p><p>下面给除了一个例子</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import qualified Data.Map as Map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- declear LockerMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data LockerState = Taken | Free deriving (Show, Eq)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type Code = String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type LockerMap = Map.Map Int (LockerState, Code)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- give a LoockerLookUp function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lockerLookUp :: Int -&gt; LockerMap -&gt; Either String Code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lockerLookUp lockerNum map = case Map.lookup lockerNum map of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Nothing  -&gt; Left $ &quot;Locker Number&quot; ++ show lockerNum ++ &quot;doesn&#x27;t exist&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Just (lockerState, code) -&gt; if lockerState == Taken</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 then Left $ &quot;Locker Number&quot; ++ show lockerNum ++ &quot;is already taken!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 else Right code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let lockers = Map.fromList[(1, (Taken, &quot;aaa&quot;)),(2, (Free, &quot;bbb&quot;)),(3, (Taken, &quot;ccc&quot;))]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print $ lockerLookUp 1 lockers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print $ lockerLookUp 2 lockers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print $ lockerLookUp 3 lockers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print $ lockerLookUp 4 lockers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="745-递归">7.4.5 递归<a class="hash-link" href="#745-递归" title="标题的直接链接">​</a></h4><p>下面的例子实现了一个 List 和一个 Tree</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">infixr 5 :-:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data List a = Empty | a :-: (List a) deriving (Show, Read, Ord, Eq)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 或者是 record syntex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- data Lsit = Empty | Cons {listHead :: a, listTail :: List a} deriving (Show, Read, Eq, Ord)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- infixr 5 ++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- (++) :: [a] -&gt; [a] -&gt; [a]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- [] ++ ys = ys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- (x:xs) ++ ys = x:(xs ++ ys)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">infixr 5 .++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(.++) :: List a -&gt; List a -&gt; List a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Empty .++ ys = ys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(x :-: xs) .++ ys = x :-: (xs .++ ys)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data Tree a = EmptyTree | Node a (Tree a) (Tree a) deriving (Show, Read, Eq, Ord)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">singleton :: a -&gt; Tree a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">singleton x = Node x EmptyTree EmptyTree</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">treeInsert :: (Ord a) =&gt; a -&gt; Tree a -&gt; Tree a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">treeInsert x EmptyTree = singleton x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">treeInsert x (Node a left right)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | x == a = Node x left right</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | x  &lt; a = Node a (treeInsert x left) right</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | x  &gt; a = Node a left (treeInsert x right)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">treeElem :: (Ord) a =&gt; a -&gt; Tree a -&gt; Bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">treeElem x EmptyTree = False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">treeElem x (Node a left right)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | x == a = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | x &lt; a = treeElem x left</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | x &gt; a = treeElem x right</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putStrLn &quot;start...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let a = 3 :-: 4 :-: 5 :-: Empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let b = 6 :-: 7 :-: Empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(a .++ b)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let nums = [8, 6, 4, 1, 3, 5]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let numsTree = foldr treeInsert EmptyTree nums</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print numsTree</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print $ treeElem 4 numsTree</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putStrLn &quot;end...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="746-typeclasses-102">7.4.6 Typeclasses 102<a class="hash-link" href="#746-typeclasses-102" title="标题的直接链接">​</a></h4><blockquote><p>A quick recap on typeclasses: typeclasses are like interfaces. A  typeclass defines some behavior (like comparing for equality, comparing  for ordering, enumeration) and then types that can behave in that way  are made instances of that typeclass. The behavior of typeclasses is  achieved by defining functions or just type declarations that we then  implement. So when we say that a type is an instance of a typeclass, we  mean that we can use the functions that the typeclass defines with that  type.</p></blockquote><p>对 typeclasses 的简要回顾：typeclasses 就像接口。一个 typeclasses 定义了一些行为（比如比较，排序），可以实现这些行为的类型就是这些 typeclass 的实例，通过定义函数或者声明去实现这些行为，因此，当我们说类型是类型的一个类型的实例时，我们的意思是我们可以使用 TypeClass 定义该类型的函数。</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- 使用 :info Num 可以查看 typeclass 定义</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prelude&gt; :info Num</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type Num :: * -&gt; Constraint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Num a where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (+) :: a -&gt; a -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (-) :: a -&gt; a -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (*) :: a -&gt; a -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  negate :: a -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  abs :: a -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  signum :: a -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fromInteger :: Integer -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {-# MINIMAL (+), (*), abs, signum, fromInteger, (negate | (-)) #-}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -- Defined in ‘GHC.Num’</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instance Num Word -- Defined in ‘GHC.Num’</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instance Num Integer -- Defined in ‘GHC.Num’</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instance Num Int -- Defined in ‘GHC.Num’</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instance Num Float -- Defined in ‘GHC.Float’</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instance Num Double -- Defined in ‘GHC.Float’</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>1. 定义 typeclasses</strong></p><p>下面是 Eq 在标准库的定义</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Eq a where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (==) :: a -&gt; a -&gt; Bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (/=) :: a -&gt; a -&gt; Bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x == y = not (x /= y)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x /= y = not (x == y)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>class 定义了一个 typeclass，Eq 是名字，a 是实例，a 只要是一个小写的单词就行</p><p>接着我们定义了一些函数，在 class 里实现函数不是强制的，只需要一个定义就够了</p><blockquote><p>Some people might understand this better if we wrote class Eq equatable where and then specified the type declarations like <code>(==) :: equatable -&gt; equatable -&gt; Bool</code>.</p><p>这种写法可能更好理解：<code>(==) :: equatable -&gt; equatable -&gt; Bool</code></p></blockquote><blockquote><p>If we have say class Eq a where and then define a type declaration within that class like (==) :: a -&gt; -a -&gt; Bool, then when we examine the type of that function later on, it will have the type of <code>(Eq a) =&gt; a -&gt; a -&gt; Bool</code>.</p><p>当我们在 class 中定义这个函数后，在查看这个函数的类型时，就会显示出 typeclasses</p></blockquote><p><strong>2. 实现 typeclass</strong></p><p>下面我们实现一个 <code>TrafficLight</code></p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data TrafficLight = Red | Yellow | Green</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 实现比较</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instance Eq TrafficLight where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Red == Red = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Green == Green = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Yellow == Yellow = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _ == _ = False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 手动实现字符串转换</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instance Show TrafficLight where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    show Red = &quot;Red light&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    show Yellow = &quot;Yellow light&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    show Green = &quot;Green light&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putStrLn &quot;start...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print $ Red == Red</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print $ show [Red, Yellow, Green]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>3. subtypeclasses</strong></p><p>下面是 Num 在标准库中的定义（第一行）</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class (Eq a) =&gt; Num a where</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在实现 Num 前，必须保证 a 实现了 Eq</p><p><strong>对于多态类型</strong></p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">instance Eq (Maybe m) where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Just x == Just y = x == y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Nothing == Nothing = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _ == _ = False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>上面的例子好像解决了问题，但是不能确定 m 的类型实现了 Eq，所以我们应该修改上面的声明：</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">instance (Eq m) =&gt; Eq (Maybe m) where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Just x == Just y = x == y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Nothing == Nothing = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _ == _ = False</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这次我们增加了一个类型限定，我们限定了所有 Maybe m 类型都是 Eq，除非 m 也是 Eq</p><p>🍏</p><blockquote><p>Take into account that the type you&#x27;re trying to make an instance of will replace the parameter in the <em>class</em> declaration. The a from class Eq a where will be replaced with a real type when you make an instance, so try  mentally putting your type into the function type declarations as well. (==) :: Maybe -&gt; Maybe -&gt; Bool doesn&#x27;t make much sense but (==) :: (Eq m) =&gt; Maybe m -&gt; Maybe m -&gt; Bool does. But this is just something to think about, because == will always have a type of (==) :: (Eq a) =&gt; a -&gt; a -&gt; Bool, no matter what instances we make.</p><p>一定要 注意 &#x27;a&#x27; 在实现时需要被替换为 concrete type</p></blockquote><p><strong>4. 实现一个玩具</strong></p><p>在 js 中，任何非空类型都被当成是 true</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;YEAH!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;NO!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">alert</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;YEAH!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;NO!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;YEAH&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">&quot;</span><span class="token constant" style="color:#36acaa">NO</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//etc. and all of these will throw an alert of NO!. If you do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;WHAT&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">alert</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;YEAH&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;NO!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// it will alert a &quot;YEAH!&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>A yesno typeclass</em></p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class YesNo a where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yesno :: a -&gt; Bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instance YesNo Int where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yesno 0 = False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yesno _ = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instance YesNo [a] where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yesno [] = False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yesno _ = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- Bool 也不要忘了</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instance YesNo Bool where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yesno = id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 因为我们并不关心 Maybe 包含什么类型，只要他有东西就行了，所以没有加类型限定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instance YesNo (Maybe a) where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yesno (Just _) = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yesno Nothing = False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 仿照着写一个 if</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yesnoIf :: (YesNo a) =&gt; a -&gt; b -&gt; b -&gt; b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yesnoIf a onyes onno = if yesno a then onyes else onno</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main :: IO ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putStrLn &quot;start...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print $ length []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print $ yesno [0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print $ yesno Nothing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print $ yesno True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putStrLn $ yesnoIf (Just 1) &quot;yes !&quot; &quot;No -_-&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="747-functor-和-kinds">7.4.7 Functor 和 Kinds<a class="hash-link" href="#747-functor-和-kinds" title="标题的直接链接">​</a></h4><p><strong>1. 什么是 Kind</strong></p><blockquote><p>We used :k on a type to get its kind, just like we can use :t on a value to get its type. Like we said, types are the labels of  values and kinds are the labels of types and there are parallels between the two.</p></blockquote><p>我们能用 <code>:t</code> 查看一个值 (value) 的类型 (type)</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- &#x27;=&gt;&#x27;是类型限定 !!!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prelude&gt; :t 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 :: Num p =&gt; p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prelude&gt; :t [1, 2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[1, 2] :: Num a =&gt; [a]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prelude&gt; :t Just 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Just 1 :: Num a =&gt; Maybe a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>也能用 <code>:k</code> 查看一个类型 (type) 的 Kind</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Prelude&gt; :k Int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Int :: *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prelude&gt; :k Num</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Num :: * -&gt; Constraint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prelude&gt; :k Maybe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Maybe :: * -&gt; *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prelude&gt; :k Either</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Either :: * -&gt; * -&gt; *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prelude&gt; :k Functor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Functor :: (* -&gt; *) -&gt; Constraint</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>&#x27;*&#x27; 是什么</strong></p><blockquote><p>A <em> means that the type is a concrete type. A concrete type is a type that doesn&#x27;t take any type parameters and  values can only have types that are concrete types. If I had to read </em> out loud (I haven&#x27;t had to do that so far), I&#x27;d say <em>star</em> or just <em>type</em>.</p></blockquote><p><code>*</code> 就是一个固定的类型，不能携带 Type parameter</p><p><code>* -&gt; *</code> 就是接受一个 type parameter，返回一个类型，比如 Maybe 和 Maybe Int</p><p><code>* -&gt; * -&gt; *</code> 同理</p><p>所以 Functor 的类型就好理解了</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Functor f where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmap :: (a -&gt; b) -&gt; f a -&gt; f b</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>2. 什么是 Functor</strong></p><p>看一眼 fmap 的定义，实现了 Functor 的类型，fmap 能够把这些类型<em>里面</em>的东西转换到另一种东西，就是说 fmap 只作用于 box 里面的东西</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Functor f where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmap :: (a -&gt; b) -&gt; f a -&gt; f b</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个是 map 的定义</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">map :: (a -&gt; b) -&gt; [a] -&gt; [b]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>map 就是特殊化的 fmap ,只能用于 [],不能用于 Maybe, Ehther 等类型</p><blockquote><p>anything like a box that can hold something can impl Functor, lsuch as Maybe, [], Tree = Empty | Tree a left rght, Either</p></blockquote><p>所有能够承载其他类型的东西都能实现 Functor，比如 Maybe, [], Tree, Either</p><p>下面是关于 Either 的 Functor 实现</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">instance Functor (Either a) where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmap f (Right x) = Right (f x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmap f (Left x) = Left x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- (b -&gt; c) -&gt; Either a b -&gt; Ether a c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- 和下面的一样</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- (b -&gt; c) -&gt; (Either a) b -&gt; (Either a) c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>-- in this case, we only mapped the right value constructor,
-- well, if we look at the define of Either:
-- data Either a b = Left a | Right b
-- we can&#x27;t make sure f can handle both type a and type b
-- Another example is Map.Map, where fmap just map a function v -&gt; v&#x27; over a Map k v, and return Map k v&#x27;</p></blockquote><p>在这个例子里，我们只 map 了 Either 的右值，因为不能保证 Either a b 的类型相同，Map.Map 也是，只有 value 改变</p><p><strong>3. 实现一个 Tofu</strong></p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Tofu t where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tofu :: j a -&gt; t a j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data Frank a b = Frank {frankField :: b a} deriving (Show)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instance Tofu Frank where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tofu x = Frank x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data Barry t k p = Barry { yabba :: p, dabba :: t k }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instance Functor (Barry a b) where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmap f (Barry { yabba = x, dabba = y }) = Barry {yabba = f x, dabba = y }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main :: IO ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let a = Frank { frankField = Just &#x27;c&#x27; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let b = tofu (Just &#x27;a&#x27;) :: Frank Char Maybe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let c = tofu [&quot;Hello&quot;] :: Frank [Char] []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putStrLn &quot;start...&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-io">8. IO<a class="hash-link" href="#8-io" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="81-cmd-参数">8.1 cmd 参数<a class="hash-link" href="#81-cmd-参数" title="标题的直接链接">​</a></h3><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import System.Environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import Data.List</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- 获取参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    args &lt;- getArgs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- 获取名字</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    progName &lt;- getProgName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putStrLn progName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapM_ putStrLn args</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="82-输入">8.2 输入<a class="hash-link" href="#82-输入" title="标题的直接链接">​</a></h3><ol><li><p>获取输入</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">main = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putStrLn &quot;start...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- 获取输入数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    line &lt;- getLine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- 判断不为空就反转</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if null line</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        then return ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            putStrLn $ reverseWords line</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">reverseWords :: String -&gt; String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">reverseWords = unwords . map reverse . words</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>文件交互</p></li></ol><ul><li>openFile (fileName, openMode): 打开文件返回 handle 对象</li><li>hGetContents (handle)：读取文件内容</li><li>with 语法</li><li>appendFile(fileName, content)：追加内容</li><li>readBuffer: 设置缓冲区</li></ul><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import System.IO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    handle &lt;- openFile &quot;haiku.txt&quot; ReadMode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- Lazy, don&#x27;t read and stored in memory an once</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contents &lt;- hGetContents handle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putStrLn contents</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hClose handle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    withFile &quot;haiku.txt&quot; ReadMode (\handle -&gt; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contents &lt;- hGetContents handle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putStrLn contents)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- withOpen&#x27;s define</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- openFle :: FilePath -&gt; IOMode -&gt; (Handle -&gt; IO a) -&gt; IO a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- openFile path mode f = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --     handle &lt;- openFile path mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --     result &lt;- f handle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --     hClose f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --     return result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- More function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- hGetLine hPutStr hPutStrLn hGetChar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contents &lt;- readFile &quot;todo.txt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putStrLn contents</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    todo &lt;- getLine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    appendFile &quot;todo.txt&quot; $ todo ++ &quot;\n&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- set buffering manualy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- BufferMode = NoBuffering | LineBuffering | BlockBuffering (Maybe Int)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    withFile &quot;todo.txt&quot; ReadMode (\handle -&gt; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hSetBuffering handle $ BlockBuffering (Just 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        contents &lt;- hGetContents handle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        putStrLn contents)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- read file in big chunks can help to minimize disk access or when our file is actually a slow network resource</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="83-循环">8.3. 循环<a class="hash-link" href="#83-循环" title="标题的直接链接">​</a></h3><ol><li>forever(loop)</li></ol><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import Control.Monad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import Data.Char</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = forever $ do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putStr &quot;Give a input: &quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    l &lt;- getLine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putStrLn $ map toUpper l</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>when(while)</li></ol><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import Control.Monad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -- aaa &lt;- return &quot;aaavvv&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -- putStrLn aaa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  c &lt;- getChar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  when (c /= &#x27; &#x27;) $ do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putChar c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="84-map-io-action">8.4 map IO action<a class="hash-link" href="#84-map-io-action" title="标题的直接链接">​</a></h3><p>mapM &amp; mapM_ &amp; sequence</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">main = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -- 1.1 sequence can run erery IO action in it, and return their result as a list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -- rs &lt;- sequence [getLine, getLine, getLine]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -- print rs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -- 1.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -- map print [1, 2, 3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -- [print 1, print 2, print 3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  res &lt;- sequence $ map print [1, 2, 3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -- `print 1` just return a `()`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -- so res is [(), (), ()]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  print res</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -- 2.1 mapM can be used to map a function that return IO action</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mapm &lt;- mapM print [1, 2, 3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  print mapm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -- 2.2 mapM_ just abundon the results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mapm_ &lt;- mapM_ print [1, 2, 3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  print mapm_</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="86-todo-list">8.6 todo list<a class="hash-link" href="#86-todo-list" title="标题的直接链接">​</a></h3><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import Data.List</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import System.Directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import System.Environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import System.IO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dispatch :: [(String, [String] -&gt; IO ())]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dispatch =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ (&quot;add&quot;, add),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (&quot;view&quot;, view),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (&quot;remove&quot;, remove)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (command : args) &lt;- getArgs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let (Just action) = lookup command dispatch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  action args</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add :: [String] -&gt; IO ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add [fileName, todoItem] = appendFile fileName (todoItem ++ &quot;\n&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add _ = putStrLn &quot;Plz input [filename, todoItem]&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">view :: [String] -&gt; IO ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">view [fileName] = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  contents &lt;- readFile fileName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let todoTasks = lines contents</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      numberedTasks = zipWith (\n line -&gt; show n ++ &quot; - &quot; ++ line) [0 ..] todoTasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  putStr $ unlines numberedTasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">view _ = putStrLn &quot;Plz input [filename]&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">remove :: [String] -&gt; IO ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">remove [fileName, numberString] = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  handle &lt;- openFile fileName ReadMode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (tempName, tempHandle) &lt;- openTempFile &quot;.&quot; &quot;temp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  contents &lt;- hGetContents handle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let number = read numberString</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      todoTasks = lines contents</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      newTodoItems = delete (todoTasks !! number) todoTasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hPutStr tempHandle $ unlines newTodoItems</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hClose handle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hClose tempHandle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  removeFile fileName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  renameFile tempName fileName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">remove _ = putStrLn &quot;Plz input [filename, numberString]&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="87-error-handle">8.7 Error Handle<a class="hash-link" href="#87-error-handle" title="标题的直接链接">​</a></h3><ol><li>try &amp; catch</li></ol><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import Control.Exception</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import System.Environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import System.IO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import System.IO.Error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = toTry `catch` handler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">toTry :: IO ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">toTry = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (fileName : _) &lt;- getArgs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  contents &lt;- readFile fileName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  putStrLn $ &quot;The file has &quot; ++ show (length (lines contents)) ++ &quot; lines!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">handler :: IOError -&gt; IO ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">handler e = putStrLn &quot;Whoops, had some trouble!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- main = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--   toTry `catch` handler1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--   thenTryThis `catch` handler2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--   launchRockets</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>error kind</li></ol><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import System.Environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import System.IO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import System.IO.Error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import Control.Exception</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = toTry `catch` handler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">toTry :: IO ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">toTry = do (fileName:_) &lt;- getArgs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           contents &lt;- readFile fileName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           putStrLn $ &quot;The file has &quot; ++ show (length (lines contents)) ++ &quot; lines!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">handler :: IOError -&gt; IO ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">handler e</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | isDoesNotExistError e = putStrLn &quot;The file doesn&#x27;t exist!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | otherwise = ioError e</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- isAlreadyExistsError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- isDoesNotExistError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- isAlreadyInUseError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- isFullError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- isEOFError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- isIllegalOperation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- isPermissionError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- isUserError</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="9-solve-some-problems">9. Solve Some Problems<a class="hash-link" href="#9-solve-some-problems" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="91-计算后缀表达式">9.1 计算后缀表达式<a class="hash-link" href="#91-计算后缀表达式" title="标题的直接链接">​</a></h3><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import Data.List</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">solveRPN :: (Num a, Read a) =&gt; String -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">solveRPN = head . foldl foldingFunction [] . words</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foldingFunction (x:y:ys) &quot;*&quot; = (x * y):ys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foldingFunction (x:y:ys) &quot;+&quot; = (x + y):ys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foldingFunction (x:y:ys) &quot;-&quot; = (x - y):ys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foldingFunction xs numString = read numString:xs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">solveRPN2 :: (Num a, Read a, Floating a) =&gt; String -&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">solveRPN2 = head . foldl foldingFunction [] . words</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foldingFunction (x:y:ys) &quot;*&quot; = (x * y):ys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foldingFunction (x:y:ys) &quot;+&quot; = (x + y):ys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foldingFunction (x:y:ys) &quot;-&quot; = (x - y):ys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foldingFunction (x:y:ys) &quot;/&quot; = (y / x):ys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foldingFunction (x:y:ys) &quot;^&quot; = (y ** x):ys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foldingFunction (x:xs) &quot;ln&quot; = log x:xs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foldingFunction xs &quot;sum&quot; = [sum xs]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foldingFunction xs numString = read numString:xs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main :: IO ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putStrLn &quot;start...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print $ solveRPN &quot;90 34 12 33 55 66 + * - + -&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    putStrLn &quot;end...&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="92-计算最短路">9.2 计算最短路<a class="hash-link" href="#92-计算最短路" title="标题的直接链接">​</a></h3><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- newtype Road = Road Int Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- newtype Node = Node Road Road | EndNode Road</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- newtype Road = Road Int Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- newtype Node = Node Road (Maybe Road)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data Section = Section</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  { getA :: Int,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    getB :: Int,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    getC :: Int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deriving (Show)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type RoadSystem = [Section]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">headthrowToLondon :: RoadSystem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">headthrowToLondon = [Section 50 10 30, Section 5 90 20, Section 40 2 25, Section 10 8 0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data Label = A | B | C deriving (Show)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type Path = [(Label, Int)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">roadStep :: (Path, Path) -&gt; Section -&gt; (Path, Path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">roadStep (pathA, pathB) (Section a b c) =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let priceA = sum $ map snd pathA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      priceB = sum $ map snd pathB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      forwardPriceToA = priceA + a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      crossPriceToA = priceB + b + c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      forwardPriceToB = priceB + b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      crossPriceToB = priceA + a + c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      newPathToA =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if forwardPriceToA &lt;= crossPriceToA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          then (A, a) : pathA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          else (C, c) : (B, b) : pathB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      newPathToB =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if forwardPriceToB &lt;= crossPriceToB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          then (B, b) : pathB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          else (C, c) : (A, a) : pathA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   in (newPathToA, newPathToB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">optimalPath :: RoadSystem -&gt; Path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">optimalPath roadSystem =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let (bestAPath, bestBPath) = foldl roadStep ([], []) roadSystem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   in if sum (map snd bestAPath) &lt;= sum (map snd bestBPath)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        then reverse bestAPath</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else reverse bestBPath</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main :: IO ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  print $ roadStep ([], []) (head headthrowToLondon)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  print $ optimalPath headthrowToLondon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  contents &lt;- getContents</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let threes = groupOf 3 (map read $ lines contents)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      roadSystem = map (\[a,b,c] -&gt; Section a b c) threes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      path = optimalPath roadSystem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pathString = concat $ map (show . fst) path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pathPrice = sum $ map snd path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  putStrLn $ &quot;The best path to take is: &quot; ++ pathString</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  putStrLn $ &quot;The price is: &quot; ++ show pathPrice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">groupOf :: Int -&gt; [a] -&gt; [[a]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">groupOf 0 _ = undefined</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">groupOf _ [] = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">groupOf n xs = take n xs : groupOf n (drop n xs)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="10-functors-applicative-functors-and-monoids">10. Functors, Applicative Functors and Monoids<a class="hash-link" href="#10-functors-applicative-functors-and-monoids" title="标题的直接链接">​</a></h2><p>极度建议参考下面的文章，图文解释十分直观
<a href="https://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html" target="_blank" rel="noopener noreferrer">Functors, Applicatives, And Monads In Pictures</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="101-functor">10.1 Functor<a class="hash-link" href="#101-functor" title="标题的直接链接">​</a></h3><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fmap (+3) (Just 2)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202022316684.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="102-applicatives">10.2 Applicatives<a class="hash-link" href="#102-applicatives" title="标题的直接链接">​</a></h3><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Just (+3) &lt;*&gt; Just 2 == Just 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; [(*2), (+3)] &lt;*&gt; [1, 2, 3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[2, 4, 6, 4, 5, 6]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202022317350.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="103-monads">10.3 Monads<a class="hash-link" href="#103-monads" title="标题的直接链接">​</a></h3><p>判断一个数的奇偶</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">half x = if even x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           then Just (x `div` 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           else Nothing</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>加入 x 现在是一个 wrapped 的比如说 Maybe，这里引入一个新的操作符 <code>&gt;&gt;=</code></p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Just 3 &gt;&gt;= half</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nothing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Just 4 &gt;&gt;= half</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Just 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Nothing &gt;&gt;= half</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nothing</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>之所以能像上面一样操作是因为，Maybe 是个 Monad</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">instance Monad Maybe where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Nothing &gt;&gt;= func = Nothing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Just val &gt;&gt;= func  = func val</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Just
<img loading="lazy" src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202022324827.png" class="img_ev3q">
Nothing
<img loading="lazy" src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202022324432.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="104-总结">10.4 总结<a class="hash-link" href="#104-总结" title="标题的直接链接">​</a></h3><p><img loading="lazy" src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202022325497.png" class="img_ev3q"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/magic/hadoop"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">大数据</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/magic/linuxIO"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">IO 多路复用</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#0-特性" class="table-of-contents__link toc-highlight">0. 特性</a></li><li><a href="#1-开始" class="table-of-contents__link toc-highlight">1. 开始</a><ul><li><a href="#11-基本函数" class="table-of-contents__link toc-highlight">1.1 基本函数</a></li><li><a href="#12-列表" class="table-of-contents__link toc-highlight">1.2 列表</a></li><li><a href="#13-生成式" class="table-of-contents__link toc-highlight">1.3 生成式</a></li><li><a href="#14-元组" class="table-of-contents__link toc-highlight">1.4 元组</a></li><li><a href="#15-重要" class="table-of-contents__link toc-highlight">1.5 重要</a></li></ul></li><li><a href="#2-类型系统" class="table-of-contents__link toc-highlight">2. 类型系统</a><ul><li><a href="#21-查看类型" class="table-of-contents__link toc-highlight">2.1 查看类型</a></li><li><a href="#22-typeclasses-101" class="table-of-contents__link toc-highlight">2.2 Typeclasses 101</a></li></ul></li><li><a href="#3-函数语法" class="table-of-contents__link toc-highlight">3. 函数语法</a><ul><li><a href="#31-match-表达式" class="table-of-contents__link toc-highlight">3.1 Match 表达式</a></li><li><a href="#32-guard" class="table-of-contents__link toc-highlight">3.2 Guard</a></li><li><a href="#33-where" class="table-of-contents__link toc-highlight">3.3 where</a></li><li><a href="#34-let-it-be" class="table-of-contents__link toc-highlight">3.4 Let it be</a></li><li><a href="#35-case-expression" class="table-of-contents__link toc-highlight">3.5 Case Expression</a></li></ul></li><li><a href="#4-递归" class="table-of-contents__link toc-highlight">4. 递归</a><ul><li><a href="#42-replicate" class="table-of-contents__link toc-highlight">4.2 replicate</a></li><li><a href="#43-take" class="table-of-contents__link toc-highlight">4.3 take</a></li><li><a href="#44-zip" class="table-of-contents__link toc-highlight">4.4 zip</a></li><li><a href="#45-quick-sort" class="table-of-contents__link toc-highlight">4.5 quick sort</a></li></ul></li><li><a href="#5-高阶函数" class="table-of-contents__link toc-highlight">5. 高阶函数</a><ul><li><a href="#51-curried-functions" class="table-of-contents__link toc-highlight">5.1 Curried functions</a></li><li><a href="#52-一些高阶函数" class="table-of-contents__link toc-highlight">5.2 一些高阶函数</a></li><li><a href="#53-map" class="table-of-contents__link toc-highlight">5.3 Map</a></li><li><a href="#54-filter" class="table-of-contents__link toc-highlight">5.4 Filter</a></li><li><a href="#55-takewhile" class="table-of-contents__link toc-highlight">5.5 takeWhile</a></li><li><a href="#56-chain" class="table-of-contents__link toc-highlight">5.6 Chain</a></li><li><a href="#57-map--0" class="table-of-contents__link toc-highlight">5.7 map (*) 0..</a></li><li><a href="#58-lambdas" class="table-of-contents__link toc-highlight">5.8 Lambdas</a></li><li><a href="#59-fold" class="table-of-contents__link toc-highlight">5.9 Fold</a></li><li><a href="#510--运算符" class="table-of-contents__link toc-highlight">5.10 $ 运算符</a></li><li><a href="#511-函数组合" class="table-of-contents__link toc-highlight">5.11 函数组合</a></li></ul></li><li><a href="#6-模块" class="table-of-contents__link toc-highlight">6. 模块</a><ul><li><a href="#61-导入模块" class="table-of-contents__link toc-highlight">6.1 导入模块</a></li><li><a href="#62-datalist" class="table-of-contents__link toc-highlight">6.2 Data.List</a></li><li><a href="#64-datamap" class="table-of-contents__link toc-highlight">6.4 Data.Map</a></li><li><a href="#65-dataset" class="table-of-contents__link toc-highlight">6.5 Data.Set</a></li></ul></li><li><a href="#7-自定义类型" class="table-of-contents__link toc-highlight">7. 自定义类型</a><ul><li><a href="#71-基本类型定义" class="table-of-contents__link toc-highlight">7.1 基本类型定义</a></li><li><a href="#72-record-syntax-定义类型" class="table-of-contents__link toc-highlight">7.2 record syntax 定义类型</a></li><li><a href="#73-类型参数" class="table-of-contents__link toc-highlight">7.3 类型参数</a></li><li><a href="#74-派生实例" class="table-of-contents__link toc-highlight">7.4 派生实例</a></li></ul></li><li><a href="#8-io" class="table-of-contents__link toc-highlight">8. IO</a><ul><li><a href="#81-cmd-参数" class="table-of-contents__link toc-highlight">8.1 cmd 参数</a></li><li><a href="#82-输入" class="table-of-contents__link toc-highlight">8.2 输入</a></li><li><a href="#83-循环" class="table-of-contents__link toc-highlight">8.3. 循环</a></li><li><a href="#84-map-io-action" class="table-of-contents__link toc-highlight">8.4 map IO action</a></li><li><a href="#86-todo-list" class="table-of-contents__link toc-highlight">8.6 todo list</a></li><li><a href="#87-error-handle" class="table-of-contents__link toc-highlight">8.7 Error Handle</a></li></ul></li><li><a href="#9-solve-some-problems" class="table-of-contents__link toc-highlight">9. Solve Some Problems</a><ul><li><a href="#91-计算后缀表达式" class="table-of-contents__link toc-highlight">9.1 计算后缀表达式</a></li><li><a href="#92-计算最短路" class="table-of-contents__link toc-highlight">9.2 计算最短路</a></li></ul></li><li><a href="#10-functors-applicative-functors-and-monoids" class="table-of-contents__link toc-highlight">10. Functors, Applicative Functors and Monoids</a><ul><li><a href="#101-functor" class="table-of-contents__link toc-highlight">10.1 Functor</a></li><li><a href="#102-applicatives" class="table-of-contents__link toc-highlight">10.2 Applicatives</a></li><li><a href="#103-monads" class="table-of-contents__link toc-highlight">10.3 Monads</a></li><li><a href="#104-总结" class="table-of-contents__link toc-highlight">10.4 总结</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.71300f81.js"></script>
<script src="/assets/js/main.dc8abca6.js"></script>
</body>
</html>