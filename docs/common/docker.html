<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-common/docker">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Docker | Trdthg&#x27;s blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://trdthg.github.io//docs/common/docker"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Docker | Trdthg&#x27;s blog"><meta data-rh="true" name="description" content="1 é•œåƒ"><meta data-rh="true" property="og:description" content="1 é•œåƒ"><link data-rh="true" rel="icon" href="/img/logo_png.png"><link data-rh="true" rel="canonical" href="https://trdthg.github.io//docs/common/docker"><link data-rh="true" rel="alternate" href="https://trdthg.github.io//docs/common/docker" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://trdthg.github.io//docs/common/docker" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Trdthg&#39;s blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Trdthg&#39;s blog Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4TM86KZ83J"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-4TM86KZ83J",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.6b28552f.css">
<link rel="preload" href="/assets/js/runtime~main.71300f81.js" as="script">
<link rel="preload" href="/assets/js/main.dc8abca6.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a href="#" class="skipToContent_fXgn">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_png.png" alt="Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_png.png" alt="Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Trdthg</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">æ–‡æ¡£</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/trdthg" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/category/-æ‹“å±•">ğŸ”® æ‹“å±•</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒğŸ”® æ‹“å±•ã€" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/async">åç¨‹ä¸å¼‚æ­¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/bash">Bash</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/cicd">CI/CD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/fd">æ–‡ä»¶ç³»ç»Ÿ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/go">Go è¯­è¨€</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/hadoop">å¤§æ•°æ®</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/haskell">Haskell è¯­è¨€</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/linuxIO">IO å¤šè·¯å¤ç”¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/memory_ordering">åŸå­æ“ä½œä¸å†…å­˜é¡ºåº</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/oscamp2022">2022 ç§‹å†¬å­£å¼€æºæ“ä½œç³»ç»Ÿè®­ç»ƒè¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic/software_arch">è½¯ä»¶æ¶æ„</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/category/-rust-è¯­è¨€">ğŸ¦€ Rust è¯­è¨€</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒğŸ¦€ Rust è¯­è¨€ã€" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item green"><a class="menu__link" tabindex="0" href="/docs/rust">Rust è¯­è¨€</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/lists">Too-Many-Lists</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/mini_tokio">å¼‚æ­¥è¿è¡Œæ—¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/net-piercer">å†…ç½‘ç©¿é€å·¥å…·</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/print_into_detail">Rust print! å®</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/rs_channel">Channel æºç å‰–æ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/rust_quiz">Rust Quiz</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rust/wasm">Wasm å®ç°ç”Ÿå‘½æ¸¸æˆ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/-å­¦ä¹ ç¬”è®°">ğŸ“š å­¦ä¹ ç¬”è®°</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒğŸ“š å­¦ä¹ ç¬”è®°ã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/-èµ„æ–™åº“">ğŸ“¦ èµ„æ–™åº“</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒğŸ“¦ èµ„æ–™åº“ã€" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/common/analyze">è¿è·¯è¿½è¸ª / æ€§èƒ½ç›‘æµ‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/common/datastructure">æ•°æ®ç»“æ„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/common/docker">Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/common/git">Git</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/common/linux">Linux ä¸å¸¸ç”¨å‘½ä»¤</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/common/oauth2">OAuth 2.0 æµç¨‹åˆ†æ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/common/oci">OCI è§„èŒƒ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/common/python">Python åµŒå…¥å¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/common/vim">vim</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/-io-club">âš½ IO Club</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€Œâš½ IO Clubã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">æ–‡æ¡£é¡µ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/log">æ—¥å¿—</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/-èµ„æ–™åº“"><span itemprop="name">ğŸ“¦ èµ„æ–™åº“</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Docker</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><h1>Docker</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-é•œåƒ">1 é•œåƒ<a class="hash-link" href="#1-é•œåƒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-è·å–é•œåƒ">1.1 è·å–é•œåƒ<a class="hash-link" href="#11-è·å–é•œåƒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>docker pull</code></p><p>æ²¡å¿…è¦ï¼Œç›´æ¥ docker run å°±è¡Œäº†</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-åˆ—å‡ºé•œåƒ">1.2 åˆ—å‡ºé•œåƒ<a class="hash-link" href="#12-åˆ—å‡ºé•œåƒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li><p>åˆ—å‡ºæ‰€æœ‰ï¼š <code>docker image list</code></p></li><li><p>åˆ—å‡ºæ‰€æœ‰è™šæ‚¬é•œåƒï¼š <code>docker image list -f dangling=true</code></p><p>è¿™ä¸ªé•œåƒæ—¢æ²¡æœ‰ä»“åº“åï¼Œä¹Ÿæ²¡æœ‰æ ‡ç­¾ï¼Œå‡ä¸º <code>&lt;none&gt;</code></p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-åˆ é™¤é•œåƒ">1.3 åˆ é™¤é•œåƒ<a class="hash-link" href="#13-åˆ é™¤é•œåƒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li><p>åˆ é™¤ï¼š <code>docker image rm xxx</code></p><p>xxx å¯ä»¥æ˜¯ é•œåƒçŸ­ IDã€é•œåƒé•¿ IDã€é•œåƒåã€æˆ–è€…é•œåƒæ‘˜è¦</p></li><li><p>åˆ é™¤æ‰€æœ‰è™šæ‚¬é•œåƒï¼š <code>docker image prune</code></p></li><li><p>åˆ é™¤æ‰€æœ‰ä»“åº“åä¸º redis çš„é•œåƒï¼š<code>docker image rm $(docker image ls -q redis)</code></p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-å®¹å™¨">2 å®¹å™¨<a class="hash-link" href="#2-å®¹å™¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="20-åˆ—å‡ºå®¹å™¨">2.0 åˆ—å‡ºå®¹å™¨<a class="hash-link" href="#20-åˆ—å‡ºå®¹å™¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>docker container ls -a</code></p><p><code>docker ps -a</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-å¯åŠ¨å®¹å™¨">2.1 å¯åŠ¨å®¹å™¨<a class="hash-link" href="#21-å¯åŠ¨å®¹å™¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ–°å»ºå®¹å™¨ï¼š <code>docker run -d -it ubuntu:18.04 /bin/bash</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-é‡å¯å®¹å™¨">2.2 é‡å¯å®¹å™¨<a class="hash-link" href="#22-é‡å¯å®¹å™¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>docker container start</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-ç»ˆæ­¢å®¹å™¨">2.3 ç»ˆæ­¢å®¹å™¨<a class="hash-link" href="#23-ç»ˆæ­¢å®¹å™¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>docker container stop</code></p><p><code>docker container restart</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-è¿›å…¥å®¹å™¨">2.4 è¿›å…¥å®¹å™¨<a class="hash-link" href="#24-è¿›å…¥å®¹å™¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>docker exec -it ubuntu:18.04 /bin/bash</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="25-å¯¼å…¥å¯¼å‡º">2.5 å¯¼å…¥å¯¼å‡º<a class="hash-link" href="#25-å¯¼å…¥å¯¼å‡º" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li><p>å¯¼å‡ºï¼š<code>docker export 7691a814370e &gt; ubuntu.tar</code></p></li><li><p>å¯¼å…¥ï¼š</p><ul><li>ä»æ–‡ä»¶ï¼š<code>cat ubuntu.tar | docker import - test/ubuntu:v1.0</code></li><li>ä»è·¯å¾„ï¼š<code>docker import http://example.com/exampleimage.tgz example/imagerepo</code></li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="26-åˆ é™¤å®¹å™¨">2.6 åˆ é™¤å®¹å™¨<a class="hash-link" href="#26-åˆ é™¤å®¹å™¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li><p>åˆ é™¤å·²ç»å…³é—­çš„ä¸€ä¸ªå®¹å™¨ï¼š <code>docker container rm</code></p></li><li><p>åˆ é™¤æ‰€æœ‰å·²ç»å…³é—­çš„å®¹å™¨ï¼š<code>docker container prune</code></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-dockerfile">3 Dockerfile<a class="hash-link" href="#3-dockerfile" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è¿™é‡Œä¼šå°†ä¸€ä¸ª Dockerfile çš„æ„å»ºè¿‡ç¨‹</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add--copy">ADD &amp; COPY<a class="hash-link" href="#add--copy" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>COPY</p><ul><li>æ”¯æŒé€šé…ç¬¦</li><li>å¯ä»¥æ”¹å˜ç”¨æˆ·å’Œç»„</li></ul><div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">COPY package.json /usr/src/app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY hom* /mydir/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY hom?.txt /mydir/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY --chown=55:mygroup files* /mydir/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ADD</p><ul><li>æºè·¯ç»æ˜¯ URL ä¼šå°è¯•ä¸‹è½½</li><li>æºè·¯å¾„æ˜¯å‹ç¼©æ–‡ä»¶ (gzip, bzip2 ä»¥åŠ xz), ä¼šè‡ªåŠ¨è§£å‹</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="expose">EXPOSE<a class="hash-link" href="#expose" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æŒ‡å®šå®¹å™¨å‘å¤–éƒ¨æš´éœ²çš„ç«¯å£ï¼Œä½†å¹¶ä¸ä¼šè‡ªåŠ¨æ˜ å°„åˆ°å®¿ä¸»æœºï¼Œä½¿ç”¨<code>-P</code>åä¼šå°†è¿™äº›ç«¯å£éšæœºæ˜ å°„åˆ°å®¿ä¸»æœº</p><div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">EXPOSE 8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPOSE 7000-8000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run">RUN<a class="hash-link" href="#run" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">RUN cd /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN echo &quot;hello&quot; &gt; world.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Šé¢çš„ä¸¤ä¸ª<code>RUN</code>å¹¶ä¸æ˜¯åœ¨åŒä¸€ä¸ªç¯å¢ƒä¸‹è¿è¡Œçš„ï¼Œä»–ä»¬ä¸æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œä»–ä»¬çš„å·¥ä½œç›®å½•å½“ç„¶ä¹Ÿä¸ä¸€æ ·</p><p>å¯ä»¥é€šè¿‡<code>WORKDIR</code>å»åŒæ­¥ä¸åŒå‘½ä»¤çš„å·¥ä½œç›®å½•</p><div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN echo &quot;hello&quot; &gt; world.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¤šä¸ª<code>WORKDIR</code>ä¹‹é—´æ˜¯æœ‰è”ç³»çš„</p><div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># /a/b/c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="volume">VOLUME<a class="hash-link" href="#volume" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æŒ‚è½½ä¸»æœºç›®å½• / æŒ‚è½½æ•°æ®å·</p><div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">VOLUME: HostPath:ContainerPath</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æŒ‚è½½åŒ¿åå·ï¼ŒåŒ¿åå·ä¸­çš„æ•°æ®ä¸ä¼šæŒä¹…åŒ–</p><div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">VOLUME /data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å‘½ä»¤è¡ŒæŒ‚è½½</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">--mount type=bind,source=/src/webapp,target=/usr/share/nginx/html,readonly \</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>key</th><th>value</th></tr></thead><tbody><tr><td>type</td><td>bind, volume, or tmpfs</td></tr><tr><td>source/src</td><td>Docker Host ä¸Šçš„ä¸€ä¸ªç›®å½•æˆ–è€…æ–‡ä»¶</td></tr><tr><td>destination/dst/target</td><td>è¢«æŒ‚è½½å®¹å™¨ä¸Šçš„ä¸€ä¸ªç›®å½•æˆ–è€…æ–‡ä»¶</td></tr><tr><td>readonly</td><td>æŒ‚è½½ä¸ºåªè¯»</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ ¼å¼">æ ¼å¼<a class="hash-link" href="#æ ¼å¼" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li><p>æŒ‡å®šåŸºç¡€é•œåƒ</p><p>å®šåˆ¶ä¸€ä¸ªé•œåƒï¼Œéœ€è¦ä»¥ä¸€ä¸ªé•œåƒä¸ºåŸºç¡€</p><div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM alpine:latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>RUN æ‰§è¡Œå‘½ä»¤ æ ¼å¼ï¼š<code>RUN &lt;å‘½ä»¤&gt;</code>ï¼Œå°±åƒç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥çš„å‘½ä»¤ä¸€æ ·ã€‚åˆšæ‰å†™çš„ Dockerfile ä¸­çš„ <code>RUN</code> æŒ‡ä»¤å°±æ˜¯è¿™ç§æ ¼å¼ã€‚</p></li><li><p>ENTRYPOINT æ·»åŠ  prefix</p><p><code>ENTRYPOINT [ &quot;curl&quot;, &quot;-s&quot;, &quot;http://myip.ipip.net&quot; ]</code></p><p>ä»å¤–éƒ¨è¿è¡Œ<code>docker run myip -i</code>ï¼Œå°±ç›¸å½“äº<code>docker run myip curl -s http://myip.ipip.net -i</code></p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build">build<a class="hash-link" href="#build" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker build -t xxx .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¾‹å­">ä¾‹å­<a class="hash-link" href="#ä¾‹å­" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="curl-è‡ªåŠ¨æŸ¥è¯¢-ip">curl è‡ªåŠ¨æŸ¥è¯¢ ip<a class="hash-link" href="#curl-è‡ªåŠ¨æŸ¥è¯¢-ip" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM ubuntu:18.04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt-get update \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;&amp; apt-get install -y curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;curl&quot;, &quot;-s&quot;, &quot;http://&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="redis--redis-json--redis-search">redis + redis-json + redis-search<a class="hash-link" href="#redis--redis-json--redis-search" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM alpine:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY ./cargo-config /cargo-config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN mkdir -p ~/.cargo &amp;&amp; mv /cargo-config ~/.cargo/config \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; sed -i &#x27;s/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g&#x27; /etc/apk/repositories \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; apk add --no-cache \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        redis \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        openssh \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sudo \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libgcc \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        clang-libs \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        git \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bash \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        python3 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        py3-setuptools \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        py3-pip \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        unzip \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        wget \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        alpine-sdk \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cmake \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cargo \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; mkdir -p /opt/build /opt/redis-modules \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; cd /opt/build \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; git clone https://github.com/RedisJSON/RedisJSON \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; cd RedisJSON \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; git submodule update --init --recursive \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; cd .. \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; git clone https://github.com/RediSearch/RediSearch \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; cd /opt/build/RedisJSON \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; make build shell=/bin/bash \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; cp target/release/librejson.so /opt/redis-modules \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; cd /opt/build/RediSearch \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; cmake . -DCMAKE_INSTALL_PREFIX=&quot;/opt/redis-modules&quot; -Bbuild \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; cmake --build build \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; cp build/redisearch.so /opt/redis-modules \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; rm -rf /opt/build \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; rm -rf ~/.cargo \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; strip /opt/redis-modules/*.so \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; apk del --purge alpine-sdk cmake cargo python3 py3-setuptools py3-pip unzip wget bash git clang-libs \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; adduser -D -s /bin/ash admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USER admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VOLUME [&quot;/home/admin&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /home/admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPOSE 6379</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;redis-server&quot;, &quot;--loadmodule&quot;, &quot;/opt/redis-modules/librejson.so&quot;, &quot;--loadmodule&quot;, &quot;/opt/redis-modules/redisearch.so&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-è‡ªåŠ¨åŒ–">4 è‡ªåŠ¨åŒ–<a class="hash-link" href="#4-è‡ªåŠ¨åŒ–" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pass-å‡­è¯ç®¡ç†">pass å‡­è¯ç®¡ç†<a class="hash-link" href="#pass-å‡­è¯ç®¡ç†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>pass</li><li>docker-credential-pass</li></ul><p><img loading="lazy" src="https://blog.csdn.net/Rambo_Yang/article/details/108294632" alt="Docker Login ç™»å½•å‡­è¯å®‰å…¨å­˜å‚¨" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‘">å‘<a class="hash-link" href="#å‘" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>gpg2 ä¸€å®šä¸è¦ä½¿ç”¨ sudo æ‰§è¡Œï¼Œdocker ä¹Ÿè¦åŠ åˆ° group é‡Œ</p><ul><li><p>æ³¨æ„<code>docker login</code>ç™»é™†çš„ url æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸ª url éœ€è¦æ—¶ jib ç™½åå•é‡Œæœ‰çš„</p><p><code>docker login</code>é»˜è®¤ç™»é™†çš„ url æ˜¯<code>index.docker.io/v1</code></p><p>å¦‚æœ jib æ— æ³•è¯†åˆ«ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ <code>docker login registry.hub.docker.com</code></p><p>ç°åœ¨æœ‰çš„å‡­è¯å¯ä»¥é€šè¿‡<code>docker-credential-pass list</code>æŸ¥çœ‹</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Â»Â»Â»Â» docker-credential-pass list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;https://index.docker.io/v1/&quot;:&quot;trdthg&quot;,&quot;registry.hub.docker.com&quot;:&quot;trdthg&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>jib è‡ªåŠ¨ push éœ€è¦ä»ç™½åå• url ä¸­ä¸€ä¸ªä¸ªå°è¯•ï¼Œ<code>docker login</code></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jib">jib<a class="hash-link" href="#jib" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" src="https://github.com/GoogleContainerTools/jib" alt="Jib" class="img_ev3q"></p><p>ç™»é™†æˆåŠŸä¼šæœ‰ä¸‹é¢çš„æç¤º</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] Using credentials from Docker config (/home/trdthg/.docker/config.json) for adoptopenjdk/openjdk8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-docker-compose">5 docker-compose<a class="hash-link" href="#5-docker-compose" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é™åˆ¶èµ„æº">é™åˆ¶èµ„æº<a class="hash-link" href="#é™åˆ¶èµ„æº" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">redis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;0.50&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 50M</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>--compatibility</code>: ä»¥å…¼å®¹æ¨¡å¼è¿è¡Œï¼Œå°† v3 çš„è¯­æ³•è½¬åŒ–ä¸º v2 çš„è¯­æ³•ï¼Œè€Œä¸éœ€è¦å°† compose æ–‡ä»¶æ”¹ä¸º v2 çš„ç‰ˆæœ¬</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> --compatibility up -d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å®Œæ•´é…ç½®å‚è€ƒ">å®Œæ•´é…ç½®å‚è€ƒ<a class="hash-link" href="#å®Œæ•´é…ç½®å‚è€ƒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®š docker-compose è¯­æ³•ç‰ˆæœ¬</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ä»ä»¥ä¸‹å®šä¹‰æœåŠ¡é…ç½®åˆ—è¡¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">server_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># å¯å°† server_name æ›¿æ¢ä¸ºè‡ªå®šä¹‰çš„åå­—ï¼Œå¦‚ mysql/php éƒ½å¯ä»¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> container_name  </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šå®ä¾‹åŒ–åçš„å®¹å™¨åï¼Œå¯å°† container_name æ›¿æ¢ä¸ºè‡ªå®šä¹‰å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šä½¿ç”¨çš„é•œåƒååŠæ ‡ç­¾</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># å¦‚æœæ²¡æœ‰ç°æˆçš„é•œåƒï¼Œéœ€è¦è‡ªå·±æ„å»ºä½¿ç”¨è¿™ä¸ªé€‰é¡¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /xxx/xxx/Dockerfile  </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šæ„å»ºé•œåƒæ–‡ä»¶çš„è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">dockerfile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain">.     </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®š Dockerfile æ–‡ä»¶åï¼Œä¸Šä¸€æ¡æŒ‡å®šï¼Œè¿™ä¸€æ¡å°±ä¸è¦äº†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;00:00&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># å®¹å™¨å†…çš„æ˜ å°„ç«¯å£ï¼Œæœ¬åœ°ç«¯å£ï¼šå®¹å™¨å†…ç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;00:00&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># å¯æŒ‡å®šå¤šä¸ª</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> test1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/xx/xx  </span><span class="token comment" style="color:#999988;font-style:italic"># è¿™é‡Œä½¿ç”¨ managed volume çš„æ–¹æ³•ï¼Œå°†å®¹å™¨å†…çš„ç›®å½•æ˜ å°„åˆ°ç‰©ç†æœºï¼Œæ–¹ä¾¿ç®¡ç†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> test2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/xx/xx  </span><span class="token comment" style="color:#999988;font-style:italic"># å‰è€…æ˜¯ volumes ç›®å½•ä¸‹çš„åå­—ï¼Œåè€…æ˜¯å®¹å™¨å†…ç›®å½•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> test3</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/xx/xx  </span><span class="token comment" style="color:#999988;font-style:italic"># åœ¨æ–‡ä»¶çš„æœ€åè¿˜è¦ä½¿ç”¨ volumes æŒ‡å®šè¿™å‡ ä¸ª tests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes_from</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šå·å®¹å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> volume_container_name  </span><span class="token comment" style="color:#999988;font-style:italic"># å·å®¹å™¨å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restarts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> always  </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®æ— è®ºé‡åˆ°ä»€ä¹ˆé”™ï¼Œé‡å¯å®¹å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic"># ç”¨æ¥è§£å†³ä¾èµ–å…³ç³»ï¼Œå¦‚è¿™ä¸ªæœåŠ¡çš„å¯åŠ¨ï¼Œå¿…é¡»åœ¨å“ªä¸ªæœåŠ¡å¯åŠ¨ä¹‹å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> server_name   </span><span class="token comment" style="color:#999988;font-style:italic"># è¿™ä¸ªæ˜¯åå­—å…¶ä»–æœåŠ¡åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­çš„ server_name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> server_name1  </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‰ç…§å…ˆåé¡ºåºå¯åŠ¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">links</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸ depend_on ç›¸å¯¹åº”ï¼Œä¸Šé¢æ§åˆ¶å®¹å™¨å¯åŠ¨ï¼Œè¿™ä¸ªæ§åˆ¶å®¹å™¨è¿æ¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> mysql  </span><span class="token comment" style="color:#999988;font-style:italic"># å€¼å¯ä»¥æ˜¯ - æœåŠ¡åï¼Œæ¯”è¾ƒå¤æ‚ï¼Œå¯ä»¥åœ¨è¯¥æœåŠ¡ä¸­ä½¿ç”¨ links ä¸­ mysql ä»£æ›¿è¿™ä¸ª mysql çš„ ip</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># åŠ å…¥æŒ‡å®šçš„ç½‘ç»œï¼Œä¸ä¹‹å‰çš„æ·»åŠ ç½‘å¡åç±»ä¼¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> my_net  </span><span class="token comment" style="color:#999988;font-style:italic"># bridge ç±»å‹çš„ç½‘å¡å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> myapp_net </span><span class="token comment" style="color:#999988;font-style:italic"># å¦‚æœæ²¡æœ‰ç½‘å¡ä¼šè¢«åˆ›å»ºï¼Œå»ºè®®ä½¿ç”¨æ—¶å…ˆåˆ›å»ºå·ï¼Œåœ¨æŒ‡å®š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰å˜é‡ï¼Œç±»ä¼¼ dockerfile ä¸­çš„ ENV</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> TZ=Asia/Shanghai  </span><span class="token comment" style="color:#999988;font-style:italic"># è¿™é‡Œè®¾ç½®å®¹å™¨çš„æ—¶åŒºä¸ºäºšæ´²ä¸Šæµ·ï¼Œä¹Ÿå°±è§£å†³äº†å®¹å™¨é€šè¿‡ compose ç¼–æ’å¯åŠ¨çš„ æ—¶åŒºé—®é¢˜ï¼ï¼ï¼ï¼è§£å†³äº†å®¹å™¨çš„æ—¶åŒºé—®é¢˜ï¼ï¼ï¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      å˜é‡å€¼ï¼šå˜é‡å   </span><span class="token comment" style="color:#999988;font-style:italic"># è¿™äº›å˜é‡å°†ä¼šè¢«ç›´æ¥å†™åˆ°é•œåƒä¸­çš„/etc/profile</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">                        </span><span class="token comment" style="color:#999988;font-style:italic">#ä½¿ç”¨ command å¯ä»¥è¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">character</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">set</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server=utf8mb4&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">#è®¾ç½®æ•°æ®åº“è¡¨çš„æ•°æ®é›†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">collation</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server=utf8mb4_unicode_ci&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#è®¾ç½®æ•°æ®åº“è¡¨çš„æ•°æ®é›†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">zone=+8</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">00&#x27;                    </span><span class="token comment" style="color:#999988;font-style:italic">#è®¾ç½® mysql æ•°æ®åº“çš„ æ—¶åŒºé—®é¢˜ï¼ï¼ï¼ï¼è€Œä¸æ˜¯è®¾ç½®å®¹å™¨çš„æ—¶åŒºé—®é¢˜ï¼ï¼ï¼ï¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">server_name2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># å¼€å§‹ç¬¬äºŒä¸ªå®¹å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">server_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">stdin_open</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># ç±»ä¼¼äº docker run -d</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">tty</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ç±»ä¼¼äº docker run -t</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># ä»¥ä¸Šæ¯ä¸ªæœåŠ¡ä¸­æŒ‚è½½æ˜ å°„çš„ç›®å½•éƒ½åœ¨è¿™é‡Œå†™å…¥ä¸€æ¬¡ï¼Œä¹Ÿå«ä½œå£°æ˜ volume</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">test1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">test2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">test3</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># å¦‚æœè¦æŒ‡å®š ip ç½‘æ®µï¼Œè¿˜æ˜¯åˆ›å»ºå¥½åœ¨ä½¿ç”¨å³å¯ï¼Œå£°æ˜ networks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">my_net</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">driver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bridge  </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šç½‘å¡ç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">myapp_net</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">driver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bridge</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spring-boot--mysql">spring-boot + mysql<a class="hash-link" href="#spring-boot--mysql" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="doocker-composeyml">doocker-compose.yml<a class="hash-link" href="#doocker-composeyml" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>ç½‘ç»œï¼š</p><ul><li><p>å¦‚æœä¸ç‰¹æ®ŠæŒ‡æ˜ï¼Œæ‰€æœ‰çš„ service éƒ½ä¼šè‡ªåŠ¨åŠ å…¥ default ç½‘ç»œé‡Œ</p></li><li><p>host ä¼šè¢« service çš„åç§°ä»£æ›¿ <code>tguio.club =&gt; mysql</code></p></li><li><p>ç«¯å£å·ä¼šè¢«å®¹å™¨æš´éœ²çš„ç«¯å£ä»£æ›¿ <code>4205 =&gt; 3306</code></p></li><li><p>å®¹å™¨ä¹‹é—´å¯ä»¥é€šè¿‡è‡ªå·±æš´éœ²çš„ç«¯å£äº’ç›¸è®¿é—®</p></li><li><p>å®¿ä¸»æœºè¿˜æ˜¯éœ€è¦é€šè¿‡ç»‘å®šåˆ°å®¿ä¸»æœºä¸Šçš„ç«¯å£è®¿é—®</p></li></ul><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">web</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;8848:8848&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">MYSQL_DATABASE</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">MYSQL_USER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">MYSQL_PASSWORD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">MYSQL_ROOT_PASSWORD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 2022A22db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;4205:3306&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">redis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;redis:alpine&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5470:6379&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8848</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">datasource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#    url: jdbc:mysql://tguio.club:4205/dev?serverTimezone=UTC&amp;useSSL=false&amp;autoReconnect=true&amp;tinyInt1isBit=false&amp;useUnicode=true&amp;characterEncoding=utf8&amp;allowPublicKeyRetrieval=true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">3306/dev</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">serverTimezone=UTC</span><span class="token important">&amp;useSSL=false&amp;autoReconnect=true&amp;tinyInt1isBit=false&amp;useUnicode=true&amp;characterEncoding=utf8&amp;allowPublicKeyRetrieval=true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">jpa</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">properties</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">hibernate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">format_sql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#        show_sql: true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">hbm2ddl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">auto</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">redis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#    host: tguio.club</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5470</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pool</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">max-active</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">max-wait</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">max-idle</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">min-idle</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#    timeout: 5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-å…¶ä»–">5 å…¶ä»–<a class="hash-link" href="#5-å…¶ä»–" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç«¯å£æ˜ å°„">ç«¯å£æ˜ å°„<a class="hash-link" href="#ç«¯å£æ˜ å°„" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>ä¸€å¯¹ä¸€æŒ‡å®šï¼š<code>-p &lt;å®¿ä¸»ç«¯å£&gt;:&lt;å®¹å™¨ç«¯å£&gt;</code></li><li>ä¸€å¯¹ä¸€éšæœºï¼š<ul><li><code>-P 80</code> æŠŠå®¹å™¨çš„ 80 ç«¯å£éšæœºæ˜ å°„å®¿ä¸»æœºä¸Š</li></ul></li><li>å¤šå¯¹å¤šæŒ‡å®šï¼š<ul><li><code>-p 1000-2000:1000-2000</code> å®¹å™¨çš„ 1000-2000 çš„æ‰€æœ‰ç«¯å£ï¼Œæ˜ å°„åˆ°å®¿ä¸»æœºç«¯å£ 1000-2000</li></ul></li><li>å¤šå¯¹å¤šéšæœºï¼š<ul><li><code>docker run --expose=1000-2000</code> å®¹å™¨çš„ 1000-2000 çš„æ‰€æœ‰ç«¯å£ï¼Œéšæœºæ˜ å°„åˆ°å®¿ä¸»æœº</li><li><code>docker run -P</code> æŠŠå®¹å™¨æš´éœ²çš„æ‰€æœ‰ç«¯å£éƒ½éšæœºæ˜ å°„å®¿ä¸»æœºä¸Š</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ­£åˆ™åŒ¹é…ç”¨æ³•">æ­£åˆ™åŒ¹é…ç”¨æ³•<a class="hash-link" href="#æ­£åˆ™åŒ¹é…ç”¨æ³•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li><p>åˆ é™¤å®¹å™¨</p><p><code>sudo docker ps -a | awk &#x27;{print $1, $2}&#x27; | grep &quot;jdk&quot; | xargs -t sudo docker rm</code></p></li><li><p>åˆ é™¤é•œåƒ
<code>sudo docker images | awk &#x27;{print $1, $2}&#x27; | grep &quot;jdk&quot; | awk &#x27;{print $1}&#x27; | xargs -t sudo docker rmi</code></p><p>awk èƒ½å¤Ÿä¸”åˆ†ä¸ºä¸€è¡Œï¼Œprint èƒ½é€‰æ‹©å­—æ®µ</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é‡å‘½å">é‡å‘½å<a class="hash-link" href="#é‡å‘½å" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">           é•œåƒ id   åç§°  tag(å¯çœç•¥)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker tag e49db activemp:1.5.5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ·»åŠ sudoæƒé™">æ·»åŠ <code>sudo</code>æƒé™<a class="hash-link" href="#æ·»åŠ sudoæƒé™" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># å¦‚æœ docker ç»„ä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ ä¹‹ï¼š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">groupadd</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ° docker ç»„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> gpasswd -a trdthg </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æ·»åŠ è®¿é—®å’Œæ‰§è¡Œæƒé™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> a+rw /var/run/docker.sock</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ¨é€åˆ°-dockerhub">æ¨é€åˆ° dockerhub<a class="hash-link" href="#æ¨é€åˆ°-dockerhub" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>ç™»é™†</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker login -u xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Password: è¾“å…¥ token</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>æ¨é€ æ³¨æ„ï¼šéœ€è¦ä¿®æ”¹ image åç§°ä¸º <code>{username}/{image-name}:{tag}</code></li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker push `{username}/{image-name}:{tag}`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡æ¡£åˆ†é¡µå¯¼èˆª"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/common/datastructure"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">æ•°æ®ç»“æ„</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/common/git"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">Git</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-é•œåƒ" class="table-of-contents__link toc-highlight">1 é•œåƒ</a><ul><li><a href="#11-è·å–é•œåƒ" class="table-of-contents__link toc-highlight">1.1 è·å–é•œåƒ</a></li><li><a href="#12-åˆ—å‡ºé•œåƒ" class="table-of-contents__link toc-highlight">1.2 åˆ—å‡ºé•œåƒ</a></li><li><a href="#13-åˆ é™¤é•œåƒ" class="table-of-contents__link toc-highlight">1.3 åˆ é™¤é•œåƒ</a></li></ul></li><li><a href="#2-å®¹å™¨" class="table-of-contents__link toc-highlight">2 å®¹å™¨</a><ul><li><a href="#20-åˆ—å‡ºå®¹å™¨" class="table-of-contents__link toc-highlight">2.0 åˆ—å‡ºå®¹å™¨</a></li><li><a href="#21-å¯åŠ¨å®¹å™¨" class="table-of-contents__link toc-highlight">2.1 å¯åŠ¨å®¹å™¨</a></li><li><a href="#22-é‡å¯å®¹å™¨" class="table-of-contents__link toc-highlight">2.2 é‡å¯å®¹å™¨</a></li><li><a href="#23-ç»ˆæ­¢å®¹å™¨" class="table-of-contents__link toc-highlight">2.3 ç»ˆæ­¢å®¹å™¨</a></li><li><a href="#24-è¿›å…¥å®¹å™¨" class="table-of-contents__link toc-highlight">2.4 è¿›å…¥å®¹å™¨</a></li><li><a href="#25-å¯¼å…¥å¯¼å‡º" class="table-of-contents__link toc-highlight">2.5 å¯¼å…¥å¯¼å‡º</a></li><li><a href="#26-åˆ é™¤å®¹å™¨" class="table-of-contents__link toc-highlight">2.6 åˆ é™¤å®¹å™¨</a></li></ul></li><li><a href="#3-dockerfile" class="table-of-contents__link toc-highlight">3 Dockerfile</a><ul><li><a href="#add--copy" class="table-of-contents__link toc-highlight">ADD &amp; COPY</a></li><li><a href="#expose" class="table-of-contents__link toc-highlight">EXPOSE</a></li><li><a href="#run" class="table-of-contents__link toc-highlight">RUN</a></li><li><a href="#volume" class="table-of-contents__link toc-highlight">VOLUME</a></li><li><a href="#æ ¼å¼" class="table-of-contents__link toc-highlight">æ ¼å¼</a></li><li><a href="#build" class="table-of-contents__link toc-highlight">build</a></li><li><a href="#ä¾‹å­" class="table-of-contents__link toc-highlight">ä¾‹å­</a></li></ul></li><li><a href="#4-è‡ªåŠ¨åŒ–" class="table-of-contents__link toc-highlight">4 è‡ªåŠ¨åŒ–</a><ul><li><a href="#pass-å‡­è¯ç®¡ç†" class="table-of-contents__link toc-highlight">pass å‡­è¯ç®¡ç†</a></li><li><a href="#å‘" class="table-of-contents__link toc-highlight">å‘</a></li><li><a href="#jib" class="table-of-contents__link toc-highlight">jib</a></li></ul></li><li><a href="#5-docker-compose" class="table-of-contents__link toc-highlight">5 docker-compose</a><ul><li><a href="#é™åˆ¶èµ„æº" class="table-of-contents__link toc-highlight">é™åˆ¶èµ„æº</a></li><li><a href="#å®Œæ•´é…ç½®å‚è€ƒ" class="table-of-contents__link toc-highlight">å®Œæ•´é…ç½®å‚è€ƒ</a></li><li><a href="#spring-boot--mysql" class="table-of-contents__link toc-highlight">spring-boot + mysql</a></li></ul></li><li><a href="#5-å…¶ä»–" class="table-of-contents__link toc-highlight">5 å…¶ä»–</a><ul><li><a href="#ç«¯å£æ˜ å°„" class="table-of-contents__link toc-highlight">ç«¯å£æ˜ å°„</a></li><li><a href="#æ­£åˆ™åŒ¹é…ç”¨æ³•" class="table-of-contents__link toc-highlight">æ­£åˆ™åŒ¹é…ç”¨æ³•</a></li><li><a href="#é‡å‘½å" class="table-of-contents__link toc-highlight">é‡å‘½å</a></li><li><a href="#æ·»åŠ sudoæƒé™" class="table-of-contents__link toc-highlight">æ·»åŠ <code>sudo</code>æƒé™</a></li><li><a href="#æ¨é€åˆ°-dockerhub" class="table-of-contents__link toc-highlight">æ¨é€åˆ° dockerhub</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.71300f81.js"></script>
<script src="/assets/js/main.dc8abca6.js"></script>
</body>
</html>