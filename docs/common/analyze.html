<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>analyze - Trdthg&#x27;s Self</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../../favicon.svg">
                        <link rel="shortcut icon" href="../../favicon.png">
                <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
                <link rel="stylesheet" href="../../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">trans</li><li class="chapter-item expanded "><a href="../../trans/2022-04-20-è¯‘-ä½¿ç”¨-Tokio-å¤„ç†-CPU-å¯†é›†å‹ä»»åŠ¡.html"><strong aria-hidden="true">1.</strong> 2022-04-20-è¯‘-ä½¿ç”¨-Tokio-å¤„ç†-CPU-å¯†é›†å‹ä»»åŠ¡</a></li><li class="chapter-item expanded "><a href="../../trans/2023-01-03-è¯‘-Rustå†’é™©:-æ»¥ç”¨-Serde.html"><strong aria-hidden="true">2.</strong> 2023-01-03-è¯‘-Rustå†’é™©:-æ»¥ç”¨-Serde</a></li><li class="chapter-item expanded "><a href="../../trans/2023-01-01-è¯‘-æ‹“å±•-Rust-ä¸­çš„-Map.html"><strong aria-hidden="true">3.</strong> 2023-01-01-è¯‘-æ‹“å±•-Rust-ä¸­çš„-Map</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-01-è¯‘-search_engine.html"><strong aria-hidden="true">4.</strong> 2022-04-01-è¯‘-search_engine</a></li><li class="chapter-item expanded "><a href="../../trans/2022-05-04-è¯‘-å¯è§†åŒ–-Rust-å„æ•°æ®ç±»å‹çš„å†…å­˜å¸ƒå±€.html"><strong aria-hidden="true">5.</strong> 2022-05-04-è¯‘-å¯è§†åŒ–-Rust-å„æ•°æ®ç±»å‹çš„å†…å­˜å¸ƒå±€</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-13-è¯‘-tail_latency.html"><strong aria-hidden="true">6.</strong> 2022-04-13-è¯‘-tail_latency</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-30-è¯‘-ä»€ä¹ˆæ—¶å€™ä¸åº”è¯¥ä½¿ç”¨-Rust-ï¼Ÿ.html"><strong aria-hidden="true">7.</strong> 2022-04-30-è¯‘-ä»€ä¹ˆæ—¶å€™ä¸åº”è¯¥ä½¿ç”¨-Rust-ï¼Ÿ</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-11-è¯‘-å¼‚æ­¥-Rustï¼šåä½œä¸æŠ¢å å¼è°ƒåº¦.html"><strong aria-hidden="true">8.</strong> 2022-04-11-è¯‘-å¼‚æ­¥-Rustï¼šåä½œä¸æŠ¢å å¼è°ƒåº¦</a></li><li class="chapter-item expanded "><a href="../../trans/2023-01-02-è¯‘-æœªåˆå§‹åŒ–å†…å­˜:-unsafe-Rustå¤ªéš¾äº†.html"><strong aria-hidden="true">9.</strong> 2023-01-02-è¯‘-æœªåˆå§‹åŒ–å†…å­˜:-unsafe-Rustå¤ªéš¾äº†</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/index.html"><strong aria-hidden="true">10.</strong> 2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-4-é‡æ„.html"><strong aria-hidden="true">10.1.</strong> Rust-å…­è¾¹å½¢æ¶æ„-4-é‡æ„</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-2-å†…å­˜å­˜å‚¨åº“.html"><strong aria-hidden="true">10.2.</strong> Rust-å…­è¾¹å½¢æ¶æ„-2-å†…å­˜å­˜å‚¨åº“</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-7-é•¿æœŸå­˜å‚¨åº“.html"><strong aria-hidden="true">10.3.</strong> Rust-å…­è¾¹å½¢æ¶æ„-7-é•¿æœŸå­˜å‚¨åº“</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-1-åŸŸ.html"><strong aria-hidden="true">10.4.</strong> Rust-å…­è¾¹å½¢æ¶æ„-1-åŸŸ</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-5-å…¶ä»–ç”¨ä¾‹.html"><strong aria-hidden="true">10.5.</strong> Rust-å…­è¾¹å½¢æ¶æ„-5-å…¶ä»–ç”¨ä¾‹</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-6-CLI.html"><strong aria-hidden="true">10.6.</strong> Rust-å…­è¾¹å½¢æ¶æ„-6-CLI</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/Rust-å…­è¾¹å½¢æ¶æ„-3-HTTP-API.html"><strong aria-hidden="true">10.7.</strong> Rust-å…­è¾¹å½¢æ¶æ„-3-HTTP-API</a></li><li class="chapter-item expanded "><a href="../../trans/2022-04-03-è¯‘-Rust-å…­è¾¹å½¢æ¶æ„/index.html"><strong aria-hidden="true">10.8.</strong> README</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">note</li><li class="chapter-item expanded "><a href="../../note/java/index.html"><strong aria-hidden="true">11.</strong> java</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../note/java/java.html"><strong aria-hidden="true">11.1.</strong> java</a></li><li class="chapter-item expanded "><a href="../../note/java/springboot.html"><strong aria-hidden="true">11.2.</strong> springboot</a></li><li class="chapter-item expanded "><a href="../../note/java/spring.html"><strong aria-hidden="true">11.3.</strong> spring</a></li><li class="chapter-item expanded "><a href="../../note/java/sourceread.html"><strong aria-hidden="true">11.4.</strong> sourceread</a></li><li class="chapter-item expanded "><a href="../../note/java/index.html"><strong aria-hidden="true">11.5.</strong> README</a></li></ol></li><li class="chapter-item expanded "><a href="../../note/frontend/index.html"><strong aria-hidden="true">12.</strong> frontend</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../note/frontend/mini_bundle.html"><strong aria-hidden="true">12.1.</strong> mini_bundle</a></li><li class="chapter-item expanded "><a href="../../note/frontend/js_advanced.html"><strong aria-hidden="true">12.2.</strong> js_advanced</a></li><li class="chapter-item expanded "><a href="../../note/frontend/mini_vue.html"><strong aria-hidden="true">12.3.</strong> mini_vue</a></li><li class="chapter-item expanded "><a href="../../note/frontend/vue.html"><strong aria-hidden="true">12.4.</strong> vue</a></li><li class="chapter-item expanded "><a href="../../note/frontend/list.html"><strong aria-hidden="true">12.5.</strong> list</a></li><li class="chapter-item expanded "><a href="../../note/frontend/http.html"><strong aria-hidden="true">12.6.</strong> http</a></li><li class="chapter-item expanded "><a href="../../note/frontend/flutter.html"><strong aria-hidden="true">12.7.</strong> flutter</a></li><li class="chapter-item expanded "><a href="../../note/frontend/css.html"><strong aria-hidden="true">12.8.</strong> css</a></li><li class="chapter-item expanded "><a href="../../note/frontend/vdom.html"><strong aria-hidden="true">12.9.</strong> vdom</a></li><li class="chapter-item expanded "><a href="../../note/frontend/index.html"><strong aria-hidden="true">12.10.</strong> README</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">blog</li><li class="chapter-item expanded "><a href="../../blog/index.html"><strong aria-hidden="true">13.</strong> README</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">docs</li><li class="chapter-item expanded "><a href="../../docs/log.html"><strong aria-hidden="true">14.</strong> log</a></li><li class="chapter-item expanded "><a href="../../docs/intro.html"><strong aria-hidden="true">15.</strong> intro</a></li><li class="chapter-item expanded "><a href="../../docs/magic/index.html"><strong aria-hidden="true">16.</strong> magic</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../docs/magic/riscv.html"><strong aria-hidden="true">16.1.</strong> riscv</a></li><li class="chapter-item expanded "><a href="../../docs/magic/haskell.html"><strong aria-hidden="true">16.2.</strong> haskell</a></li><li class="chapter-item expanded "><a href="../../docs/magic/bash.html"><strong aria-hidden="true">16.3.</strong> bash</a></li><li class="chapter-item expanded "><a href="../../docs/magic/memory_ordering.html"><strong aria-hidden="true">16.4.</strong> memory_ordering</a></li><li class="chapter-item expanded "><a href="../../docs/magic/linuxIO.html"><strong aria-hidden="true">16.5.</strong> linuxIO</a></li><li class="chapter-item expanded "><a href="../../docs/magic/cicd.html"><strong aria-hidden="true">16.6.</strong> cicd</a></li><li class="chapter-item expanded "><a href="../../docs/magic/fd.html"><strong aria-hidden="true">16.7.</strong> fd</a></li><li class="chapter-item expanded "><a href="../../docs/magic/hadoop.html"><strong aria-hidden="true">16.8.</strong> hadoop</a></li><li class="chapter-item expanded "><a href="../../docs/magic/go.html"><strong aria-hidden="true">16.9.</strong> go</a></li><li class="chapter-item expanded "><a href="../../docs/magic/async.html"><strong aria-hidden="true">16.10.</strong> async</a></li><li class="chapter-item expanded "><a href="../../docs/magic/index.html"><strong aria-hidden="true">16.11.</strong> README</a></li><li class="chapter-item expanded "><a href="../../docs/magic/software_arch.html"><strong aria-hidden="true">16.12.</strong> software_arch</a></li></ol></li><li class="chapter-item expanded "><a href="../../docs/riscv/index.html"><strong aria-hidden="true">17.</strong> riscv</a></li><li class="chapter-item expanded "><a href="../../docs/common/index.html"><strong aria-hidden="true">18.</strong> common</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../docs/common/pgsql.html"><strong aria-hidden="true">18.1.</strong> pgsql</a></li><li class="chapter-item expanded "><a href="../../docs/common/git.html"><strong aria-hidden="true">18.2.</strong> git</a></li><li class="chapter-item expanded "><a href="../../docs/common/linux.html"><strong aria-hidden="true">18.3.</strong> linux</a></li><li class="chapter-item expanded "><a href="../../docs/common/datastructure.html"><strong aria-hidden="true">18.4.</strong> datastructure</a></li><li class="chapter-item expanded "><a href="../../docs/common/docker.html"><strong aria-hidden="true">18.5.</strong> docker</a></li><li class="chapter-item expanded "><a href="../../docs/common/analyze.html" class="active"><strong aria-hidden="true">18.6.</strong> analyze</a></li><li class="chapter-item expanded "><a href="../../docs/common/oci.html"><strong aria-hidden="true">18.7.</strong> oci</a></li><li class="chapter-item expanded "><a href="../../docs/common/unsorted.html"><strong aria-hidden="true">18.8.</strong> unsorted</a></li><li class="chapter-item expanded "><a href="../../docs/common/oauth2.html"><strong aria-hidden="true">18.9.</strong> oauth2</a></li><li class="chapter-item expanded "><a href="../../docs/common/vim.html"><strong aria-hidden="true">18.10.</strong> vim</a></li><li class="chapter-item expanded "><a href="../../docs/common/python.html"><strong aria-hidden="true">18.11.</strong> python</a></li><li class="chapter-item expanded "><a href="../../docs/common/index.html"><strong aria-hidden="true">18.12.</strong> README</a></li></ol></li><li class="chapter-item expanded "><a href="../../docs/rust/index.html"><strong aria-hidden="true">19.</strong> rust</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../docs/rust/mini_tokio.html"><strong aria-hidden="true">19.1.</strong> mini_tokio</a></li><li class="chapter-item expanded "><a href="../../docs/rust/wasm.html"><strong aria-hidden="true">19.2.</strong> wasm</a></li><li class="chapter-item expanded "><a href="../../docs/rust/rust_quiz.html"><strong aria-hidden="true">19.3.</strong> rust_quiz</a></li><li class="chapter-item expanded "><a href="../../docs/rust/rust.html"><strong aria-hidden="true">19.4.</strong> rust</a></li><li class="chapter-item expanded "><a href="../../docs/rust/print_into_detail.html"><strong aria-hidden="true">19.5.</strong> print_into_detail</a></li><li class="chapter-item expanded "><a href="../../docs/rust/net-piercer.html"><strong aria-hidden="true">19.6.</strong> net-piercer</a></li><li class="chapter-item expanded "><a href="../../docs/rust/rs_channel.html"><strong aria-hidden="true">19.7.</strong> rs_channel</a></li><li class="chapter-item expanded "><a href="../../docs/rust/lists.html"><strong aria-hidden="true">19.8.</strong> lists</a></li><li class="chapter-item expanded "><a href="../../docs/rust/index.html"><strong aria-hidden="true">19.9.</strong> README</a></li></ol></li><li class="chapter-item expanded "><a href="../../docs/riscv/index.html"><strong aria-hidden="true">20.</strong> riscv</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../docs/riscv/index.html"><strong aria-hidden="true">20.1.</strong> README</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">other</li><li class="chapter-item expanded "><a href="../../other/2023-04-12-remote-usb.html"><strong aria-hidden="true">21.</strong> 2023-04-12-remote-usb</a></li><li class="chapter-item expanded "><a href="../../other/resources.html"><strong aria-hidden="true">22.</strong> resources</a></li><li class="chapter-item expanded "><a href="../../other/i3wm.html"><strong aria-hidden="true">23.</strong> i3wm</a></li><li class="chapter-item expanded "><a href="../../other/lsm.html"><strong aria-hidden="true">24.</strong> lsm</a></li><li class="chapter-item expanded "><a href="../../other/site_update_log.html"><strong aria-hidden="true">25.</strong> site_update_log</a></li><li class="chapter-item expanded "><a href="../../other/ioclub/index.html"><strong aria-hidden="true">26.</strong> ioclub</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../other/ioclub/share_1.html"><strong aria-hidden="true">26.1.</strong> share_1</a></li><li class="chapter-item expanded "><a href="../../other/ioclub/index.html"><strong aria-hidden="true">26.2.</strong> README</a></li></ol></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/index.html"><strong aria-hidden="true">27.</strong> 2021-åç«¯</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_1.html"><strong aria-hidden="true">27.1.</strong> backend_1</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_2.html"><strong aria-hidden="true">27.2.</strong> backend_2</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_3.html"><strong aria-hidden="true">27.3.</strong> backend_3</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_4.html"><strong aria-hidden="true">27.4.</strong> backend_4</a></li></ol></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/index.html"><strong aria-hidden="true">28.</strong> 2021-åç«¯</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_1.html"><strong aria-hidden="true">28.1.</strong> backend_1</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_2.html"><strong aria-hidden="true">28.2.</strong> backend_2</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_3.html"><strong aria-hidden="true">28.3.</strong> backend_3</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/backend_4.html"><strong aria-hidden="true">28.4.</strong> backend_4</a></li><li class="chapter-item expanded "><a href="../../other/2021-åç«¯/index.html"><strong aria-hidden="true">28.5.</strong> README</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">draft</li><li class="chapter-item expanded "><a href="../../draft/ç»„æˆåŸç†.html"><strong aria-hidden="true">29.</strong> ç»„æˆåŸç†</a></li><li class="chapter-item expanded "><a href="../../draft/è®¡ç®—æœºç½‘ç»œ.html"><strong aria-hidden="true">30.</strong> è®¡ç®—æœºç½‘ç»œ</a></li><li class="chapter-item expanded "><a href="../../draft/è¯‘-pkg_mng.html"><strong aria-hidden="true">31.</strong> è¯‘-pkg_mng</a></li><li class="chapter-item expanded "><a href="../../draft/DistributedSystem.html"><strong aria-hidden="true">32.</strong> DistributedSystem</a></li><li class="chapter-item expanded "><a href="../../draft/oscamp2022.html"><strong aria-hidden="true">33.</strong> oscamp2022</a></li><li class="chapter-item expanded "><a href="../../draft/compile.html"><strong aria-hidden="true">34.</strong> compile</a></li><li class="chapter-item expanded "><a href="../../draft/test.html"><strong aria-hidden="true">35.</strong> test</a></li><li class="chapter-item expanded "><a href="../../draft/ld.html"><strong aria-hidden="true">36.</strong> ld</a></li><li class="chapter-item expanded "><a href="../../draft/æ•°æ®åº“è®¾è®¡.html"><strong aria-hidden="true">37.</strong> æ•°æ®åº“è®¾è®¡</a></li><li class="chapter-item expanded "><a href="../../draft/index.html"><strong aria-hidden="true">38.</strong> README</a></li><li class="chapter-item expanded "><a href="../../draft/computer_network/index.html"><strong aria-hidden="true">39.</strong> computer_network</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../draft/computer_network/index.html"><strong aria-hidden="true">39.1.</strong> README</a></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Trdthg&#x27;s Self</h1>

                    <div class="right-buttons">
                                                <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="è¿è·¯è¿½è¸ª--æ€§èƒ½ç›‘æµ‹"><a class="header" href="#è¿è·¯è¿½è¸ª--æ€§èƒ½ç›‘æµ‹">è¿è·¯è¿½è¸ª / æ€§èƒ½ç›‘æµ‹</a></h1>
<h2 id="å…¨è¿è·¯è¿½è¸ª"><a class="header" href="#å…¨è¿è·¯è¿½è¸ª">å…¨è¿è·¯è¿½è¸ª</a></h2>
<h3 id="skywalking"><a class="header" href="#skywalking">skywalking</a></h3>
<p>è¿™é‡Œä½¿ç”¨æ¢é’ˆå®ç°ä¿¡æ¯æ”¶é›†ï¼Œä½¿ç”¨é»˜è®¤çš„ H2 å­˜å‚¨</p>
<h4 id="springboot-é…ç½®"><a class="header" href="#springboot-é…ç½®">springboot é…ç½®</a></h4>
<pre><code class="language-yml">server:
  port: 8848
spring:
  datasource:
    url: jdbc:mysql://mysql:3306/dev?serverTimezone=UTC&amp;useSSL=false&amp;autoReconnect=true&amp;tinyInt1isBit=false&amp;useUnicode=true&amp;characterEncoding=utf8&amp;allowPublicKeyRetrieval=true
    username: admin
    password: admin
  jpa:
    properties:
      hibernate:
        format_sql: true
        hbm2ddl:
          auto: update
  redis:
    host: redis
    port: 6379
    pool:
      max-active: 8
      max-wait: -1
      max-idle: 4
      min-idle: 1
</code></pre>
<h4 id="dockerfile-é…ç½®"><a class="header" href="#dockerfile-é…ç½®">Dockerfile é…ç½®</a></h4>
<ol>
<li>
<p><code>ADD /target/decsion-engine-0.1.5.jar app.jar</code></p>
<ul>
<li>æ‹·è´é¡¹ç›®æ‰“åŒ…å¥½çš„ jar åŒ…</li>
</ul>
</li>
<li>
<p><code>ADD ./agent agent</code></p>
<ul>
<li>æ³¨æ„ï¼šagent éœ€è¦å’Œ jar åŒ…æ”¾ä¸€èµ·ï¼Œä¸ä»…ä»…æ˜¯ skywalking-agent.jarï¼Œ</li>
<li>config ä¸‹æ˜¯ skywalking çš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­çš„å‚æ•°å¯ä»¥è¢« java ä¼ é€’çš„å‚æ•°è¦†ç›–</li>
<li>log ä¸‹å­˜å‚¨äº†æ—¥å¿—ï¼Œä¸€èˆ¬ç›‘æµ‹ä¿¡æ¯æ²¡æœ‰å¯ä»¥å°è¯•æŸ¥çœ‹è¯¥æ–‡ä»¶å¤¹</li>
<li>plugin ä¸‹å­˜å‚¨äº†å¯¹ä¸åŒè¿›ç¨‹çš„ä¿¡æ¯é‡‡é›†å·¥å…·ï¼Œå¿…é¡»ä¾èµ–ä»–ä»¬æ‰èƒ½æ­£å¸¸ç›‘æµ‹</li>
</ul>
</li>
<li>
<p><code>java xxx</code></p>
<ul>
<li>xxx æŒ‡æœåŠ¡çš„åå­—ï¼Œéšæ„</li>
<li>backend_service æŒ‡çš„æ˜¯ skywalking çš„é“¾æ¥
<ul>
<li>å¯ä»¥æ˜¯ docker-compose å®šä¹‰çš„ (oap:port1)</li>
<li>ä¹Ÿå¯ä»¥æ˜¯å®¿ä¸»æœºçš„ ip ç«¯å£ (192.168.xxx:port2)</li>
</ul>
</li>
</ul>
</li>
<li>
<p>å®Œæ•´</p>
</li>
</ol>
<pre><code class="language-yml">FROM adoptopenjdk/openjdk8
VOLUME [&quot;/tmp&quot;, &quot;/logs&quot;]
EXPOSE 8848
ADD /target/decsion-engine-0.1.5.jar app.jar
ADD ./agent agent
# ADD ./skywalking-agent.jar skywalking-agent.jar # è¿™ä¸ªä¸å¯¹

CMD java -javaagent:agent/skywalking-agent.jar -Dskywalking.agent.service_name=xxx -Dskywalking.collector.backend_service=192.168.31.226:11800 -jar app.jar

# ä¸‹é¢çš„ä¸€æ ·ï¼Œä¸å½±å“ï¼Œå¦‚æœæ²¡æˆåŠŸï¼Œä¸€å®šæ˜¯åˆ«çš„åœ°æ–¹å†™é”™äº†ğŸ˜…
# ENTRYPOINT [&quot;java&quot;, &quot;-javaagent:agent/skywalking-agent.jar&quot;, &quot;-Dskywalking.agent.service_name=xxx&quot;, &quot;-Dskywalking.collector.backend_service=192.168.31.226:11800&quot;, &quot;-jar&quot;, &quot;app.jar&quot;]
</code></pre>
<h4 id="docker-composeyml"><a class="header" href="#docker-composeyml">docker-compose.yml</a></h4>
<p>éœ€è¦æ³¨æ„çš„ç‚¹</p>
<ul>
<li>æœåŠ¡çš„å…ˆåé¡ºåº
<ul>
<li>é€šè¿‡è®¾ç½® restart ä¸æ–­é‡è¯•ï¼Œç›´åˆ°ä¾èµ–çš„æœåŠ¡å¯åŠ¨å®Œæˆ</li>
</ul>
</li>
<li>ip(host), ç«¯å£å· (port)
<ul>
<li>å®¹å™¨ä¹‹é—´é€šè¿‡å¯ä»¥ç›´æ¥ç”¨<code>${container_name}:${container_port}</code>äº’ç›¸è®¿é—®ï¼š<code>mysql:3306</code></li>
<li>ä¹Ÿå¯ä»¥ç›´æ¥ç”¨<code>${host_ip}:${host_port}</code>äº’ç›¸è®¿é—®ï¼š<code>192.168.31.226:4205</code></li>
</ul>
</li>
</ul>
<pre><code class="language-yml">services:
  web:
#    image: &quot;trdthg/decision-engine:latest&quot;
    build: .
    ports:
      - &quot;8848:8848&quot;
    depends_on:
      - mysql
      - redis
      - oap
      - skywaling-ui
    restart: always
  mysql:
    image: mysql:latest
    environment:
      MYSQL_DATABASE: dev
      MYSQL_USER: admin
      MYSQL_PASSWORD: admin
      MYSQL_ROOT_PASSWORD: 2022A22db
    ports:
      - &quot;4205:3306&quot;
    logging:
      driver: &quot;none&quot;
    restart: always

  redis:
    image: &quot;redis:alpine&quot;
    ports:
      - &quot;5470:6379&quot;
    logging:
      driver: &quot;none&quot;
  oap:
    image: apache/skywalking-oap-server:8.4.0-es6
    container_name: oap
    restart: always
    ports:
      - 11800:11800 # agent ä¸ŠæŠ¥æ•°æ®çš„ç«¯å£ï¼Œè¿™æ˜¯ gRPC ç«¯å£
      - 12800:12800 # ui è¯»å–æ•°æ®çš„ç«¯å£ï¼Œè¿™æ˜¯ http ç«¯å£
    # logging:
    #   driver: &quot;none&quot;
  skywaling-ui:
    image: apache/skywalking-ui:8.4.0
    container_name: ui
    depends_on:
      - oap
    links:
      - oap
    ports:
      - 8088:8080
    environment:
      - SW_OAP_ADDRESS=http://oap:12800
    logging:
      driver: &quot;none&quot;
</code></pre>
<h4 id="å‚è€ƒ"><a class="header" href="#å‚è€ƒ">å‚è€ƒ</a></h4>
<ul>
<li><a href="https://segmentfault.com/a/1190000039836624">ä½¿ç”¨ docker éƒ¨ç½² spring boot å¹¶æ¥å…¥ skywalking</a></li>
</ul>
<h2 id="ç«ç„°å›¾"><a class="header" href="#ç«ç„°å›¾">ç«ç„°å›¾</a></h2>
<h3 id="ç«ç„°å›¾ç®€æ˜æ•™ç¨‹"><a class="header" href="#ç«ç„°å›¾ç®€æ˜æ•™ç¨‹">ç«ç„°å›¾ç®€æ˜æ•™ç¨‹</a></h3>
<h4 id="arthas"><a class="header" href="#arthas">arthas</a></h4>
<p>arthas æ˜¯ Alibaba å¼€æºçš„ Java
è¯Šæ–­å·¥å…·ï¼Œå…¶ä¸­æ•´åˆäº†å¾ˆå¤šå®ç”¨çš„å·¥å…·ï¼Œä¾‹å¦‚æŸ¥çœ‹å½“å‰ JVM çš„çº¿ç¨‹å †æ ˆä¿¡æ¯ã€æŸ¥çœ‹å’Œä¿®æ”¹ JVM çš„ç³»ç»Ÿå±æ€§ã€æ–¹æ³•æ‰§è¡Œæ•°æ®è§‚æµ‹ã€ç”Ÿæˆç«ç„°å›¾ç­‰ã€‚æœ€å¤§çš„ä¼˜ç‚¹æ˜¯å¯¹ç›‘æ§åº”ç”¨æ— ä»£ç ä¾µå…¥ï¼Œä¹Ÿä¸éœ€è¦é‡å¯ç›‘æ§åº”ç”¨æˆ–è€…æ·»åŠ å¯åŠ¨å‚æ•°å°±å¯ä»¥éšæ„ attach åˆ°ç›®æ ‡ JVM è¿›ç¨‹ç„¶åè¿›è¡Œå„ç§æ“ä½œã€‚
æ­¤å¤„é‡ç‚¹æåˆ°çš„æ˜¯ arthas ä¸­çš„ profiler åŠŸèƒ½ï¼Œå®é™…ä¸Šæ˜¯å¯¹ async-profiler çš„å°è£…ï¼Œå¯ä»¥å¯¹ JVM åº”ç”¨è¿›è¡Œé‡‡æ ·åè¾“å‡ºå„ç§ç±»å‹çš„ç«ç„°å›¾ã€‚</p>
<h4 id="åŸºæœ¬ä½¿ç”¨"><a class="header" href="#åŸºæœ¬ä½¿ç”¨">åŸºæœ¬ä½¿ç”¨</a></h4>
<h5 id="1-å®‰è£…å¯åŠ¨"><a class="header" href="#1-å®‰è£…å¯åŠ¨">1. å®‰è£…å¯åŠ¨</a></h5>
<p>å¯åŠ¨ profiler é‡‡æ ·åï¼Œéœ€è¦é€‰æ‹©å¯¹åº”çš„è¿›ç¨‹</p>
<pre><code class="language-shell">wget https://alibaba.github.io/arthas/arthas-boot.jar
java -jar arthas-boot.jar
</code></pre>
<h5 id="2-å¼€å§‹é‡‡é›†"><a class="header" href="#2-å¼€å§‹é‡‡é›†">2. å¼€å§‹é‡‡é›†</a></h5>
<h6 id="21-åŸºäº-cpu-ä½¿ç”¨ç‡é‡‡æ ·-é€‚ç”¨äº-cpu-å¯†é›†å‹"><a class="header" href="#21-åŸºäº-cpu-ä½¿ç”¨ç‡é‡‡æ ·-é€‚ç”¨äº-cpu-å¯†é›†å‹">2.1 åŸºäº CPU ä½¿ç”¨ç‡é‡‡æ · (é€‚ç”¨äº CPU å¯†é›†å‹)</a></h6>
<p>async-profiler æ”¯æŒå¯¹å¤šç§äº‹ä»¶åšé‡‡æ ·åˆ†æï¼Œä¾‹å¦‚ cpuã€allocã€lockã€cache-misses ç­‰ï¼Œå¸¸ç”¨çš„é‡‡æ ·äº‹ä»¶ä¸º cpu å’Œ wallã€‚å…¶ä¸­ç«ç„°å›¾é‡‡æ ·æœªæŒ‡å®šäº‹ä»¶æ—¶é»˜è®¤å¯¹ cpu äº‹ä»¶è¿›è¡Œé‡‡æ ·ï¼Œå³ On-CPU ç«ç„°å›¾ï¼Œä»…åŒ…å« JVM åœ¨ CPU æ‰§è¡Œæ—¶çš„é‡‡æ ·ï¼Œè€Œä¸åŒ…å« CPU ç­‰å¾…æ—¶çš„é‡‡æ ·ã€‚</p>
<pre><code class="language-hell">$ profiler start
Started [cpu] profiling
</code></pre>
<h6 id="22-åŸºäºæ ·æœ¬é‡‡æ ·å¯ä¼°ç®—è€—æ—¶-é€‚ç”¨äº-io-å¯†é›†å‹"><a class="header" href="#22-åŸºäºæ ·æœ¬é‡‡æ ·å¯ä¼°ç®—è€—æ—¶-é€‚ç”¨äº-io-å¯†é›†å‹">2.2 åŸºäºæ ·æœ¬é‡‡æ ·ï¼Œå¯ä¼°ç®—è€—æ—¶ (é€‚ç”¨äº IO å¯†é›†å‹)</a></h6>
<p>å¦‚æœéœ€è¦åˆ†æ IO å¯†é›†å‹åº”ç”¨ï¼Œæ¯”è¾ƒé€‚åˆå¯¹ wall äº‹ä»¶è¿›è¡Œé‡‡æ ·ï¼Œå¦‚ä¸‹å®˜æ–¹æè¿°ï¼Œwall äº‹ä»¶ä¼šå¯¹æ‰€æœ‰ä»»æ„çŠ¶æ€çš„çº¿ç¨‹è¿›è¡Œé‡‡æ ·ï¼Œæ—¢åŒ…å« CPU æ‰§è¡Œæ—¶çš„é‡‡æ ·ï¼Œä¹ŸåŒ…å«äº† CPU ç­‰å¾…æ—¶çš„é‡‡æ ·ï¼Œå¯ä»¥ç”¨æ¥æ›´æ˜¾è‘—åœ°åˆ†æçº¿ç¨‹åœ¨å„ä¸ªæ–¹æ³•ä¸Šçš„è€—æ—¶åˆ†å¸ƒã€‚</p>
<pre><code class="language-shell">$ profiler start -e wall
Started [wall] profiling
</code></pre>
<h5 id="3-æŸ¥çœ‹çŠ¶æ€"><a class="header" href="#3-æŸ¥çœ‹çŠ¶æ€">3. æŸ¥çœ‹çŠ¶æ€</a></h5>
<p>è·å–å·²é‡‡é›†çš„ sample çš„æ•°é‡</p>
<pre><code class="language-shell">$ profiler getSamples
</code></pre>
<p>æŸ¥çœ‹ profiler çŠ¶æ€</p>
<pre><code class="language-shell">$ profiler status
[cpu] profiling is running for 4 seconds
</code></pre>
<h5 id="4-ç”Ÿæˆç»“æœ"><a class="header" href="#4-ç”Ÿæˆç»“æœ">4. ç”Ÿæˆç»“æœ</a></h5>
<p>ç”Ÿæˆ svg æ ¼å¼ç»“æœ</p>
<pre><code class="language-shell">$ profiler stop --file xxx.svg --format svg
profiler output file: /tmp/demo/arthas-output/20191125-135546.svg
OK
</code></pre>
<h5 id="5-demo"><a class="header" href="#5-demo">5. demo</a></h5>
<pre><code class="language-java">@RestController
@RequestMapping
public class IndexController {@GetMapping(&quot;/&quot;)
    public String index() throws InterruptedException {
        long start = System.currentTimeMillis();
        cpuHandler();
        long time1 = System.currentTimeMillis();
        timeHandler();
        long time2 = System.currentTimeMillis();
        normalHandler();
        long time3 = System.currentTimeMillis();

        return String.format(&quot;%d %d %d&quot;, time1 - start, time2 - time1, time3 - time2);
    }

    private int cpuHandler() {
        int value = 0;
        int max = (int)(Math.random() * 100_000_000);
        for (int i = 0; i &lt; max; i++) {
            value += i;
        }
        return value;
    }

    private void timeHandler() throws InterruptedException {
        Thread.sleep(10);
    }

    private void normalHandler() {
        Random random = new Random();
        random.nextInt(100);
    }

}
</code></pre>
<ul>
<li>
<p>cpu äº‹ä»¶é‡‡æ ·</p>
<p>ç”±å›¾å¯ä»¥æ˜ç»†çš„çœ‹å‡ºæ¥ï¼Œindex æ–¹æ³•ä¸­ cpuHandler äº‹ä»¶é‡‡æ ·å æ¯”æœ€é«˜ï¼Œå³ On-CPU ä¸­ cpuHandler æ–¹æ³•å ç”¨çš„ CPU æœ€é«˜ã€‚å¦‚æœå› ä¸ºåº”ç”¨å ç”¨ CPU æ¶ˆè€—é«˜ï¼Œéœ€è¦è¿›è¡Œä¼˜åŒ–ï¼Œé‚£ä¹ˆé€šè¿‡è¯¥ç«ç„°å›¾å¾ˆå®¹æ˜“åˆ†æå‡ºæ¥éœ€è¦å¯¹ cpuHandler æ–¹æ³•ä¼˜åŒ–æ¥é™ä½ CPU æ¶ˆè€—ã€‚</p>
</li>
<li>
<p>wall äº‹ä»¶é‡‡æ ·</p>
<p>ç”±å›¾å¯ä»¥æ˜ç»†çš„çœ‹å‡ºæ¥ï¼Œindex æ–¹æ³•ä¸­ timeHandler äº‹ä»¶é‡‡æ ·å æ¯”æœ€é«˜ï¼Œå³ timeHandler æ–¹æ³•å ç”¨çº¿ç¨‹è€—æ—¶æ—¶é—´æœ€é«˜ã€‚å¦‚æœå› ä¸º index æ–¹æ³•è€—æ—¶è¾ƒé•¿ï¼Œéœ€è¦è¿›è¡Œä¼˜åŒ–ï¼Œé‚£ä¹ˆé€šè¿‡è¯¥ç«ç„°å›¾å¾ˆå®¹æ˜“åˆ†æå‡ºæ¥éœ€è¦å¯¹ timeHandler æ–¹æ³•ä¼˜åŒ–æ¥é™ä½çº¿ç¨‹è€—æ—¶æ—¶é—´</p>
</li>
</ul>
<p>ç›´æ¥è§‚å¯Ÿ&quot;å¹³é¡¶&quot;ï¼ˆplateausï¼‰å¾€å¾€ä¸èƒ½å¿«é€Ÿå®šä½æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºé¡¶éƒ¨è®°å½•çš„å¤šåŠæ˜¯å¯¹åº•å±‚åº“å‡½æ•°çš„è°ƒç”¨æƒ…å†µã€‚æˆ‘è®¤ä¸ºï¼Œè¦å¿«é€Ÿå®šä½æ€§èƒ½é—®é¢˜ï¼Œé¦–å…ˆåº”è¯¥è§‚å¯Ÿçš„æ˜¯ä¸šåŠ¡å‡½æ•°åœ¨ç«ç„°å›¾ä¸­çš„å®½åº¦ï¼Œç„¶ååœ¨å¾€é¡¶éƒ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªåº“å‡½æ•°æ¥ç¼©å°èŒƒå›´ï¼Œè€Œä¸æ˜¯ç›´æ¥å°±çœ‹å¹³é¡¶ã€‚</p>
<h2 id="prometheus"><a class="header" href="#prometheus">prometheus</a></h2>
<p>è¢«ç›‘æ§çš„è¿›ç¨‹éœ€è¦å‘<code>prometheus</code>å‘é€å›ºå®šæ ¼å¼çš„ä¿¡æ¯ï¼Œå› ä¸ºæ ¼å¼å›ºå®šï¼Œå¯ä»¥æ ¹æ®<code>prometheus</code>çš„æŸ¥è¯¢è¯­å¥å»ç­›é€‰æ•°æ®ï¼Œå¹¶å¯¼å‡ºå›¾æ ‡</p>
<h3 id="promql"><a class="header" href="#promql">PromQL</a></h3>
<p>ä¸€æ¡å®Œæ•´çš„æŸ¥è¯¢è¯­å¥ä¸»è¦æœ‰</p>
<ul>
<li>åŒ¹é…æ•°æ®æº</li>
<li>è¿ç®—</li>
<li>å‡½æ•° è¿™ä¸‰éƒ¨åˆ†ç»„æˆ</li>
</ul>
<ol>
<li>æŸ¥è¯¢å†…å­˜å ç”¨</li>
</ol>
<p>æ•°æ®æºï¼š</p>
<pre><code># HELP node_memory_MemFree_bytes Memory information field MemFree_bytes.
# TYPE node_memory_MemFree_bytes gauge
node_memory_MemFree_bytes 4.85957632e+08
# HELP node_memory_MemTotal_bytes Memory information field MemTotal_bytes.
# TYPE node_memory_MemTotal_bytes gauge
node_memory_MemTotal_bytes 1.6170528768e+10
</code></pre>
<p>è®¡ç®—ï¼š(æ€»å†…å­˜ - ç©ºé—²å†…å­˜) / æ€»å†…å­˜ * 100</p>
<pre><code>(
  (
    node_memory_MemTotal_bytes{instance=&quot;$node&quot;,job=&quot;$job&quot;}
    - node_memory_MemFree_bytes{instance=&quot;$node&quot;,job=&quot;$job&quot;}
  ) / (node_memory_MemTotal_bytes{instance=&quot;$node&quot;,job=&quot;$job&quot;} )) * 100
</code></pre>
<ol start="2">
<li>æŸ¥è¯¢ cpu æ€»å ç”¨</li>
</ol>
<p>å„ä¸ªå†…æ ¸çš„æ•°æ®</p>
<pre><code># HELP node_cpu_seconds_total Seconds the CPUs spent in each mode.
# TYPE node_cpu_seconds_total counter
node_cpu_seconds_total{cpu=&quot;0&quot;,mode=&quot;idle&quot;} 134248.98
node_cpu_seconds_total{cpu=&quot;0&quot;,mode=&quot;iowait&quot;} 94.73
node_cpu_seconds_total{cpu=&quot;0&quot;,mode=&quot;irq&quot;} 0
node_cpu_seconds_total{cpu=&quot;0&quot;,mode=&quot;nice&quot;} 2.6
node_cpu_seconds_total{cpu=&quot;0&quot;,mode=&quot;softirq&quot;} 4554.64
node_cpu_seconds_total{cpu=&quot;0&quot;,mode=&quot;steal&quot;} 0
node_cpu_seconds_total{cpu=&quot;0&quot;,mode=&quot;system&quot;} 3190.14
node_cpu_seconds_total{cpu=&quot;0&quot;,mode=&quot;user&quot;} 6843.42

node_cpu_seconds_total{cpu=&quot;1&quot;,mode=&quot;idle&quot;} 12962.19
node_cpu_seconds_total{cpu=&quot;1&quot;,mode=&quot;iowait&quot;} 12.3
node_cpu_seconds_total{cpu=&quot;1&quot;,mode=&quot;irq&quot;} 0
node_cpu_seconds_total{cpu=&quot;1&quot;,mode=&quot;nice&quot;} 2.05
node_cpu_seconds_total{cpu=&quot;1&quot;,mode=&quot;softirq&quot;} 464.51
node_cpu_seconds_total{cpu=&quot;1&quot;,mode=&quot;steal&quot;} 0
node_cpu_seconds_total{cpu=&quot;1&quot;,mode=&quot;system&quot;} 2174.27
node_cpu_seconds_total{cpu=&quot;1&quot;,mode=&quot;user&quot;} 5931.27

node_cpu_seconds_total{cpu=&quot;10&quot;,mode=&quot;idle&quot;} 12798.81
node_cpu_seconds_total{cpu=&quot;10&quot;,mode=&quot;iowait&quot;} 16.9
node_cpu_seconds_total{cpu=&quot;10&quot;,mode=&quot;irq&quot;} 0
node_cpu_seconds_total{cpu=&quot;10&quot;,mode=&quot;nice&quot;} 2.27
node_cpu_seconds_total{cpu=&quot;10&quot;,mode=&quot;softirq&quot;} 39.99
node_cpu_seconds_total{cpu=&quot;10&quot;,mode=&quot;steal&quot;} 0
node_cpu_seconds_total{cpu=&quot;10&quot;,mode=&quot;system&quot;} 2554.07

100 - (
  # å–å¹³å‡å€¼
  avg(
    # rate å‡½æ•°èƒ½å¤Ÿæ±‚ counter ç±»å‹æ•°æ®çš„å¢é•¿ç‡ï¼Œç±»ä¼¼äºåŠ é€Ÿåº¦ï¼Œèƒ½å¤Ÿåæ˜ å˜åŒ–çš„å‰§çƒˆç¨‹åº¦
    rate(
      # åªåŒ¹é… mode ä¸º idle çš„è¡Œï¼Œ
      node_cpu_seconds_total{instance=~&quot;$node&quot;,mode=&quot;idle&quot;}[$interval])
  ) * 100
)
</code></pre>
<h3 id="é…ç½®æ–‡ä»¶"><a class="header" href="#é…ç½®æ–‡ä»¶">é…ç½®æ–‡ä»¶</a></h3>
<pre><code class="language-yml">global:
  scrape_interval: 15s # å…¨å±€é»˜è®¤åˆ·æ–°æ—¶é—´
  external_labels:
    monitor: 'codelab-monitor'

scrape_configs:
  - job_name: 'service1' # ä¸€ä¸ª job å¯ä»¥ç›‘æ§å¤šä¸ªå®ä¾‹ï¼Œå®ä¾‹å¯ä»¥åˆ†ç»„
    scrape_interval: 5s
    static_configs:
      # - targets: ['localhost:8080', 'localhost:8081']
      #   labels:
      #     group: 'production'

      - targets: [&quot;service1:9100&quot;]
        labels:
          group: 'node'

  - job_name: 'jmeter' # jmeter è¿è¡Œè¿‡ç¨‹ä¸­ä¼šåœ¨ 9270 ç«¯å£ï¼Œå¯ä»¥ç›‘æ§
    scrape_interval: 5s
    static_configs:
      - targets: [&quot;jmeter:9270&quot;]
        labels:
          group: 'jmeter'
</code></pre>
<h3 id="ç›‘æµ‹-springboot"><a class="header" href="#ç›‘æµ‹-springboot">ç›‘æµ‹ springboot</a></h3>
<h2 id="jmeter"><a class="header" href="#jmeter">jmeter</a></h2>
<h3 id="è¿è¡Œæµ‹è¯•"><a class="header" href="#è¿è¡Œæµ‹è¯•">è¿è¡Œæµ‹è¯•</a></h3>
<pre><code>JVM_ARGS=&quot;-Xms1g -Xmx1g&quot; jmeter.sh -n -t benchmark.jmx
</code></pre>
<h3 id="å‚æ•°"><a class="header" href="#å‚æ•°">å‚æ•°</a></h3>
<pre><code>-n å‘½ä»¤è¡Œæ¨¡å¼

-t æŒ‡å®š jmx è„šæœ¬åœ°å€ï¼ˆåœ°å€å¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼‰

-h æŸ¥çœ‹å¸®åŠ©
-v æŸ¥çœ‹ç‰ˆæœ¬
-p æŒ‡å®šè¯»å– jmeter å±æ€§æ–‡ä»¶ï¼Œæ¯”å¦‚ jmeter.properties æ–‡ä»¶ä¸­è®¾ç½®çš„
-l è®°å½•æµ‹è¯•ç»“æœçš„æ–‡ä»¶ï¼Œé€šå¸¸ç»“æœæ–‡ä»¶ä¸º jtl æ ¼å¼ï¼ˆæ–‡ä»¶å¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼‰
-s ä»¥æœåŠ¡å™¨æ–¹å¼è¿è¡Œï¼ˆä¹Ÿæ˜¯è¿œç¨‹æ–¹å¼ï¼Œå¯åŠ¨ Agentï¼‰
-H è®¾ç½®ä»£ç†ï¼Œä¸€èˆ¬å¡«å†™ä»£ç† IP
-P è®¾ç½®ä»£ç†ç«¯å£
-u ä»£ç†è´¦å·
-a ä»£ç†å£ä»¤
-J å®šä¹‰ jmeter å±æ€§ï¼Œç­‰åŒäºåœ¨ jmeter.properties ä¸­è¿›è¡Œè®¾ç½®
-G å®šä¹‰ jmeter å…¨å±€å±æ€§ï¼Œç­‰åŒäºåœ¨ Global.properties ä¸­è¿›è¡Œè®¾ç½®ï¼Œçº¿ç¨‹é—´å¯ä»¥å…±äº«ï¼‰
-D å®šä¹‰ç³»ç»Ÿå±æ€§ï¼Œç­‰åŒäºåœ¨ system.properties ä¸­è¿›è¡Œè®¾ç½®
-S åŠ è½½ç³»ç»Ÿå±æ€§æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡æ­¤å‚æ•°æŒ‡å®šåŠ è½½ä¸€ä¸ªç³»ç»Ÿå±æ€§æ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶å¯ä»¥ç”¨æˆ·è‡ªå·±å®šä¹‰
-L å®šä¹‰ jmeter æ—¥å¿—çº§åˆ«ï¼Œå¦‚ debugã€infoã€error ç­‰
-j åˆ¶å®šæ‰§è¡Œæ—¥å¿—è·¯å¾„ã€‚ï¼ˆå‚æ•°ä¸ºæ—¥å¿—è·¯å¾„ï¼Œä¸å­˜åœ¨ä¸ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œå°†æ—¥å¿—è¾“å‡ºåˆ°å‘½è¡Œæ§åˆ¶å°ï¼‰
-r å¼€å¯è¿œç¨‹è´Ÿè½½æœºï¼Œè¿œç¨‹æœºå™¨åˆ—è¡¨åœ¨ jmeter.properties ä¸­æŒ‡å®š
-R å¼€å¯è¿œç¨‹è´Ÿè½½æœºï¼Œå¯ä»¥æŒ‡å®šè´Ÿè½½æœº IPï¼Œä¼šè¦†ç›– jmeter.properties ä¸­ remote_hosts çš„è®¾ç½®
-d æŒ‡å®š Jmeter Home ç›®å½•
-X åœæ­¢è¿œç¨‹æ‰§è¡Œ
-g æŒ‡å®šæµ‹è¯•ç»“æœæ–‡ä»¶è·¯å¾„ï¼Œä»…ç”¨äºç”Ÿæˆæµ‹è¯•æŠ¥è¡¨ï¼Œå‚æ•°æ˜¯ csv ç»“æœæ–‡ä»¶
-e è®¾ç½®æµ‹è¯•å®Œæˆåç”Ÿæˆæµ‹è¯•æŠ¥è¡¨
-o æŒ‡å®šæµ‹è¯•æŠ¥å‘Šç”Ÿæˆæ–‡ä»¶å¤¹ï¼ˆæ–‡ä»¶å¤¹å¿…é¡»å­˜åœ¨ä¸”ä¸ºç©ºæ–‡ä»¶å¤¹ï¼‰
</code></pre>
<h3 id="æ’ä»¶"><a class="header" href="#æ’ä»¶">æ’ä»¶</a></h3>
<p>ä¸‹è½½åæ”¾åˆ°<code>lib/ext</code>ç›®å½•ä¸‹å³å¯</p>
<ul>
<li><a href="https://github.com/johrstrom/jmeter-prometheus-plugin/releases">prometheus</a></li>
</ul>
<h3 id="å¯¼å…¥-influxdb20"><a class="header" href="#å¯¼å…¥-influxdb20">å¯¼å…¥ influxdb2.0</a></h3>
<ol>
<li>é…ç½® influxdb</li>
</ol>
<p>æ–°å»ºè´¦å·ï¼Œé…ç½® token</p>
<p><img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202203172000131.png" alt="" /></p>
<ol start="2">
<li>é…ç½® jmeter</li>
</ol>
<p>åœ¨çº¿ç¨‹ç»„å†…æ·»åŠ ä¸€ä¸ªåç«¯æ§åˆ¶å™¨</p>
<p><img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202203171959109.png" alt="" /></p>
<ol start="3">
<li>åœ¨ influxdb UI æŸ¥çœ‹ç»“æœ</li>
</ol>
<p>å¯ä»¥é€šè¿‡é€”ä¸­çš„å¯è§†åŒ–ç•Œé¢é€‰æ‹©ï¼Œä¹Ÿå¯ä»¥è½¬æ¢ä¸º Flux æŸ¥è¯¢è¯­å¥</p>
<p><img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202203171957424.png" alt="" /></p>
<h2 id="gafana"><a class="header" href="#gafana">gafana</a></h2>
<h3 id="è¿æ¥-prometheus"><a class="header" href="#è¿æ¥-prometheus">è¿æ¥ prometheus</a></h3>
<ol>
<li>é…ç½®æ•°æ®æº</li>
<li>æ·»åŠ æŸ¥è¯¢è¯­å¥ (promQL)</li>
<li>é€‰æ‹©åˆé€‚çš„å›¾æ ‡ç±»å‹ï¼Œå®šåˆ¶ä¸€äº›å›¾æ ‡çš„æ ·å¼
<img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202203172108901.png" alt="" /></li>
</ol>
<h3 id="è¿æ¥-influxdb"><a class="header" href="#è¿æ¥-influxdb">è¿æ¥ influxdb</a></h3>
<ol>
<li>é…ç½®æ•°æ®æº æ³¨æ„ urlï¼Œè¿™ä¸ª url éœ€è¦æ˜¯ docker çš„ï¼Œä¸æ˜¯æœ¬æœºçš„<code>http://172.20.0.5:8086</code></li>
</ol>
<pre><code>docker container inspect f65 | grep -i ipaddress
</code></pre>
<p><img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202203172005301.png" alt="" /></p>
<ol start="2">
<li>å¯¼å…¥æŸ¥è¯¢è¯­å¥ (Flux)</li>
</ol>
<p><img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202203172003871.png" alt="" /></p>
<h3 id="å‚è€ƒ-1"><a class="header" href="#å‚è€ƒ-1">å‚è€ƒ</a></h3>
<ul>
<li><a href="https://docs.influxdata.com/influxdb/v2.1/tools/grafana/">Use Grafana with InfluxDB OSS</a></li>
<li><a href="https://qainsights.com/jmeter-integration-with-influxdb-2-0/#Grafana_Integration">jmeter + influxdb + grafuna</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../../docs/common/docker.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../../docs/common/oci.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../../docs/common/docker.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../../docs/common/oci.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
