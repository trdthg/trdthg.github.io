<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.35">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202022217241.jpg"><title>HTTP ç›¸å…³ | Trdthg's blog</title><meta name="description" content="Welcome to Trdthg's blog">
    <link rel="modulepreload" href="/assets/app.cefaa7da.js"><link rel="modulepreload" href="/assets/http.html.4ee3a364.js"><link rel="modulepreload" href="/assets/http.html.1881b056.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/assets/style.e8e8fc80.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">Trdthg&#39;s blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/rust/rust" class="" aria-label="è¯­è¨€ç‰¹æ€§"><!--[--><!--]--> è¯­è¨€ç‰¹æ€§ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/print_into_detail" class="" aria-label="print å®è¯¦è§£"><!--[--><!--]--> print å®è¯¦è§£ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/rs_channel" class="" aria-label="channel æºç å‰–æ doing"><!--[--><!--]--> channel æºç å‰–æ doing <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/wasm" class="" aria-label="Wasm"><!--[--><!--]--> Wasm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/lists" class="" aria-label="Rust é“¾è¡¨"><!--[--><!--]--> Rust é“¾è¡¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/go" class="" aria-label="Go å­¦ä¹ ç¬”è®°"><!--[--><!--]--> Go å­¦ä¹ ç¬”è®° <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/magic/haskell" class="" aria-label="Haskell å­¦ä¹ ç¬”è®°"><!--[--><!--]--> Haskell å­¦ä¹ ç¬”è®° <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/fd" class="" aria-label="æ–‡ä»¶æè¿°ç¬¦"><!--[--><!--]--> æ–‡ä»¶æè¿°ç¬¦ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/linuxIO" class="" aria-label="IO å¤šè·¯å¤ç”¨"><!--[--><!--]--> IO å¤šè·¯å¤ç”¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/memory_ordering" class="" aria-label="åŸå­æ“ä½œ/å†…å­˜é¡ºåº"><!--[--><!--]--> åŸå­æ“ä½œ/å†…å­˜é¡ºåº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/async" class="" aria-label="åç¨‹å¼‚æ­¥æ€è€ƒ"><!--[--><!--]--> åç¨‹å¼‚æ­¥æ€è€ƒ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/software_arch" class="" aria-label="è½¯ä»¶æ¶æ„"><!--[--><!--]--> è½¯ä»¶æ¶æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/cicd" class="" aria-label="CI/CD"><!--[--><!--]--> CI/CD <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æ‚æ–‡ ğŸ±"><span class="title">æ‚æ–‡ ğŸ±</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æ‚æ–‡ ğŸ±"><span class="title">æ‚æ–‡ ğŸ±</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/articles/menu" class="" aria-label="ä¼˜è´¨æ–‡ç« èµ„æº"><!--[--><!--]--> ä¼˜è´¨æ–‡ç« èµ„æº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/i3wm" class="" aria-label="æŠ˜è…¾ i3wm"><!--[--><!--]--> æŠ˜è…¾ i3wm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/tail_latency" class="" aria-label="(è¯‘) å°¾éƒ¨å»¶è¿Ÿ"><!--[--><!--]--> (è¯‘) å°¾éƒ¨å»¶è¿Ÿ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/search_engine" class="" aria-label="(è¯‘) æŸ¥è¯¢å¼•æ“"><!--[--><!--]--> (è¯‘) æŸ¥è¯¢å¼•æ“ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>å‰ç«¯ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/frontend/vdom" class="" aria-label="è™šæ‹Ÿ DOM"><!--[--><!--]--> è™šæ‹Ÿ DOM <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/js_advanced" class="" aria-label="Js è¿›é˜¶"><!--[--><!--]--> Js è¿›é˜¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/list" class="" aria-label="èµ„æ–™"><!--[--><!--]--> èµ„æ–™ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/vue" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/http" class="router-link-active" aria-label="HTTP ç›¸å…³"><!--[--><!--]--> HTTP ç›¸å…³ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/flutter" class="" aria-label="Flutter"><!--[--><!--]--> Flutter <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Python ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/other/python" class="" aria-label="æ€»è§ˆ"><!--[--><!--]--> æ€»è§ˆ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Java ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/java/java" class="" aria-label="åŸºç¡€çŸ¥è¯†"><!--[--><!--]--> åŸºç¡€çŸ¥è¯† <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/sourceread" class="" aria-label="éƒ¨åˆ†æºç "><!--[--><!--]--> éƒ¨åˆ†æºç  <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/spring" class="" aria-label="Spring æ¡†æ¶"><!--[--><!--]--> Spring æ¡†æ¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/springboot" class="" aria-label="å¸¸ç”¨å·¥å…·"><!--[--><!--]--> å¸¸ç”¨å·¥å…· <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å°ç©å…· ğŸ®"><span class="title">å°ç©å…· ğŸ®</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å°ç©å…· ğŸ®"><span class="title">å°ç©å…· ğŸ®</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/projects/mini_vue" class="" aria-label="Mini-Vue"><!--[--><!--]--> Mini-Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/projects/mini_bundle" class="" aria-label="æ‰“åŒ…å™¨"><!--[--><!--]--> æ‰“åŒ…å™¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/projects/mini_tokio" class="" aria-label="å¼‚æ­¥è¿è¡Œæ—¶"><!--[--><!--]--> å¼‚æ­¥è¿è¡Œæ—¶ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>åˆ†äº«</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/share_1" class="" aria-label="å…³äºæ•°æ®åº“ä¸ B+ æ ‘"><!--[--><!--]--> å…³äºæ•°æ®åº“ä¸ B+ æ ‘ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>æˆè¯¾</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_1" class="" aria-label="åç«¯ 1"><!--[--><!--]--> åç«¯ 1 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_2" class="" aria-label="åç«¯ 2"><!--[--><!--]--> åç«¯ 2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_3" class="" aria-label="åç«¯ 3"><!--[--><!--]--> åç«¯ 3 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_4" class="" aria-label="åç«¯ 4"><!--[--><!--]--> åç«¯ 4 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="èµ„æ–™åº“ ğŸ“¦"><span class="title">èµ„æ–™åº“ ğŸ“¦</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="èµ„æ–™åº“ ğŸ“¦"><span class="title">èµ„æ–™åº“ ğŸ“¦</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/other/hadoop" class="" aria-label="å¤§æ•°æ®"><!--[--><!--]--> å¤§æ•°æ® <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/script" class="" aria-label="è„šæœ¬"><!--[--><!--]--> è„šæœ¬ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/datastructure" class="" aria-label="æ•°æ®ç»“æ„"><!--[--><!--]--> æ•°æ®ç»“æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/vim" class="" aria-label="Vim"><!--[--><!--]--> Vim <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/git" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/docker" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/analyze" class="" aria-label="æ€§èƒ½ç›‘æµ‹å·¥å…·"><!--[--><!--]--> æ€§èƒ½ç›‘æµ‹å·¥å…· <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/oci" class="" aria-label="OCI è§„èŒƒ"><!--[--><!--]--> OCI è§„èŒƒ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/oauth2" class="" aria-label="OAuth2.0"><!--[--><!--]--> OAuth2.0 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/trdthg" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="åˆ‡æ¢å¤œé—´"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/rust/rust" class="" aria-label="è¯­è¨€ç‰¹æ€§"><!--[--><!--]--> è¯­è¨€ç‰¹æ€§ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/print_into_detail" class="" aria-label="print å®è¯¦è§£"><!--[--><!--]--> print å®è¯¦è§£ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/rs_channel" class="" aria-label="channel æºç å‰–æ doing"><!--[--><!--]--> channel æºç å‰–æ doing <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/wasm" class="" aria-label="Wasm"><!--[--><!--]--> Wasm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/lists" class="" aria-label="Rust é“¾è¡¨"><!--[--><!--]--> Rust é“¾è¡¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/go" class="" aria-label="Go å­¦ä¹ ç¬”è®°"><!--[--><!--]--> Go å­¦ä¹ ç¬”è®° <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/magic/haskell" class="" aria-label="Haskell å­¦ä¹ ç¬”è®°"><!--[--><!--]--> Haskell å­¦ä¹ ç¬”è®° <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/fd" class="" aria-label="æ–‡ä»¶æè¿°ç¬¦"><!--[--><!--]--> æ–‡ä»¶æè¿°ç¬¦ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/linuxIO" class="" aria-label="IO å¤šè·¯å¤ç”¨"><!--[--><!--]--> IO å¤šè·¯å¤ç”¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/memory_ordering" class="" aria-label="åŸå­æ“ä½œ/å†…å­˜é¡ºåº"><!--[--><!--]--> åŸå­æ“ä½œ/å†…å­˜é¡ºåº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/async" class="" aria-label="åç¨‹å¼‚æ­¥æ€è€ƒ"><!--[--><!--]--> åç¨‹å¼‚æ­¥æ€è€ƒ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/software_arch" class="" aria-label="è½¯ä»¶æ¶æ„"><!--[--><!--]--> è½¯ä»¶æ¶æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/cicd" class="" aria-label="CI/CD"><!--[--><!--]--> CI/CD <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æ‚æ–‡ ğŸ±"><span class="title">æ‚æ–‡ ğŸ±</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æ‚æ–‡ ğŸ±"><span class="title">æ‚æ–‡ ğŸ±</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/articles/menu" class="" aria-label="ä¼˜è´¨æ–‡ç« èµ„æº"><!--[--><!--]--> ä¼˜è´¨æ–‡ç« èµ„æº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/i3wm" class="" aria-label="æŠ˜è…¾ i3wm"><!--[--><!--]--> æŠ˜è…¾ i3wm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/tail_latency" class="" aria-label="(è¯‘) å°¾éƒ¨å»¶è¿Ÿ"><!--[--><!--]--> (è¯‘) å°¾éƒ¨å»¶è¿Ÿ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/search_engine" class="" aria-label="(è¯‘) æŸ¥è¯¢å¼•æ“"><!--[--><!--]--> (è¯‘) æŸ¥è¯¢å¼•æ“ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>å‰ç«¯ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/frontend/vdom" class="" aria-label="è™šæ‹Ÿ DOM"><!--[--><!--]--> è™šæ‹Ÿ DOM <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/js_advanced" class="" aria-label="Js è¿›é˜¶"><!--[--><!--]--> Js è¿›é˜¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/list" class="" aria-label="èµ„æ–™"><!--[--><!--]--> èµ„æ–™ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/vue" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/http" class="router-link-active" aria-label="HTTP ç›¸å…³"><!--[--><!--]--> HTTP ç›¸å…³ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/flutter" class="" aria-label="Flutter"><!--[--><!--]--> Flutter <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Python ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/other/python" class="" aria-label="æ€»è§ˆ"><!--[--><!--]--> æ€»è§ˆ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Java ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/java/java" class="" aria-label="åŸºç¡€çŸ¥è¯†"><!--[--><!--]--> åŸºç¡€çŸ¥è¯† <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/sourceread" class="" aria-label="éƒ¨åˆ†æºç "><!--[--><!--]--> éƒ¨åˆ†æºç  <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/spring" class="" aria-label="Spring æ¡†æ¶"><!--[--><!--]--> Spring æ¡†æ¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/springboot" class="" aria-label="å¸¸ç”¨å·¥å…·"><!--[--><!--]--> å¸¸ç”¨å·¥å…· <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å°ç©å…· ğŸ®"><span class="title">å°ç©å…· ğŸ®</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å°ç©å…· ğŸ®"><span class="title">å°ç©å…· ğŸ®</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/projects/mini_vue" class="" aria-label="Mini-Vue"><!--[--><!--]--> Mini-Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/projects/mini_bundle" class="" aria-label="æ‰“åŒ…å™¨"><!--[--><!--]--> æ‰“åŒ…å™¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/projects/mini_tokio" class="" aria-label="å¼‚æ­¥è¿è¡Œæ—¶"><!--[--><!--]--> å¼‚æ­¥è¿è¡Œæ—¶ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>åˆ†äº«</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/share_1" class="" aria-label="å…³äºæ•°æ®åº“ä¸ B+ æ ‘"><!--[--><!--]--> å…³äºæ•°æ®åº“ä¸ B+ æ ‘ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>æˆè¯¾</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_1" class="" aria-label="åç«¯ 1"><!--[--><!--]--> åç«¯ 1 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_2" class="" aria-label="åç«¯ 2"><!--[--><!--]--> åç«¯ 2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_3" class="" aria-label="åç«¯ 3"><!--[--><!--]--> åç«¯ 3 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_4" class="" aria-label="åç«¯ 4"><!--[--><!--]--> åç«¯ 4 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="èµ„æ–™åº“ ğŸ“¦"><span class="title">èµ„æ–™åº“ ğŸ“¦</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="èµ„æ–™åº“ ğŸ“¦"><span class="title">èµ„æ–™åº“ ğŸ“¦</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/other/hadoop" class="" aria-label="å¤§æ•°æ®"><!--[--><!--]--> å¤§æ•°æ® <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/script" class="" aria-label="è„šæœ¬"><!--[--><!--]--> è„šæœ¬ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/datastructure" class="" aria-label="æ•°æ®ç»“æ„"><!--[--><!--]--> æ•°æ®ç»“æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/vim" class="" aria-label="Vim"><!--[--><!--]--> Vim <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/git" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/docker" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/analyze" class="" aria-label="æ€§èƒ½ç›‘æµ‹å·¥å…·"><!--[--><!--]--> æ€§èƒ½ç›‘æµ‹å·¥å…· <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/oci" class="" aria-label="OCI è§„èŒƒ"><!--[--><!--]--> OCI è§„èŒƒ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/oauth2" class="" aria-label="OAuth2.0"><!--[--><!--]--> OAuth2.0 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/trdthg" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">HTTP ç›¸å…³ <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/frontend/http.html#å‹ç¼©" class="router-link-active router-link-exact-active sidebar-item" aria-label="å‹ç¼©"><!--[--><!--]--> å‹ç¼© <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/frontend/http.html#åç«¯-gzip" class="router-link-active router-link-exact-active sidebar-item" aria-label="åç«¯ gzip"><!--[--><!--]--> åç«¯ gzip <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontend/http.html#terser-å‹ç¼©" class="router-link-active router-link-exact-active sidebar-item" aria-label="terser å‹ç¼©"><!--[--><!--]--> terser å‹ç¼© <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontend/http.html#tree-shaking" class="router-link-active router-link-exact-active sidebar-item" aria-label="tree shaking"><!--[--><!--]--> tree shaking <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/frontend/http.html#http-ç¼“å­˜" class="router-link-active router-link-exact-active sidebar-item" aria-label="http ç¼“å­˜"><!--[--><!--]--> http ç¼“å­˜ <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/frontend/http.html#ä»‹ç»" class="router-link-active router-link-exact-active sidebar-item" aria-label="ä»‹ç»"><!--[--><!--]--> ä»‹ç» <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontend/http.html#cache-control" class="router-link-active router-link-exact-active sidebar-item" aria-label="Cache-Control"><!--[--><!--]--> Cache-Control <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontend/http.html#ä»€ä¹ˆæ˜¯æŒ‡çº¹" class="router-link-active router-link-exact-active sidebar-item" aria-label="ä»€ä¹ˆæ˜¯æŒ‡çº¹"><!--[--><!--]--> ä»€ä¹ˆæ˜¯æŒ‡çº¹ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontend/http.html#æ–‡ä»¶æŒ‡çº¹ç”Ÿæˆç­–ç•¥" class="router-link-active router-link-exact-active sidebar-item" aria-label="æ–‡ä»¶æŒ‡çº¹ç”Ÿæˆç­–ç•¥"><!--[--><!--]--> æ–‡ä»¶æŒ‡çº¹ç”Ÿæˆç­–ç•¥ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontend/http.html#css-contenthash" class="router-link-active router-link-exact-active sidebar-item" aria-label="css-contenthash"><!--[--><!--]--> css-contenthash <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontend/http.html#æ°¸ä¹…ç¼“å­˜-å¼ºåˆ¶ç¼“å­˜-å¸¦æŒ‡çº¹" class="router-link-active router-link-exact-active sidebar-item" aria-label="æ°¸ä¹…ç¼“å­˜ / å¼ºåˆ¶ç¼“å­˜ (å¸¦æŒ‡çº¹)"><!--[--><!--]--> æ°¸ä¹…ç¼“å­˜ / å¼ºåˆ¶ç¼“å­˜ (å¸¦æŒ‡çº¹) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontend/http.html#åå•†ç¼“å­˜-å¯¹æ¯”ç¼“å­˜-ä¸å¸¦æŒ‡çº¹" class="router-link-active router-link-exact-active sidebar-item" aria-label="åå•†ç¼“å­˜ / å¯¹æ¯”ç¼“å­˜ (ä¸å¸¦æŒ‡çº¹)"><!--[--><!--]--> åå•†ç¼“å­˜ / å¯¹æ¯”ç¼“å­˜ (ä¸å¸¦æŒ‡çº¹) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontend/http.html#etag-å’Œ-last-modified-çš„åŒºåˆ«" class="router-link-active router-link-exact-active sidebar-item" aria-label="Etag å’Œ Last-Modified çš„åŒºåˆ«"><!--[--><!--]--> Etag å’Œ Last-Modified çš„åŒºåˆ« <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontend/http.html#æœ€ä½³ç¼“å­˜ç­–ç•¥" class="router-link-active router-link-exact-active sidebar-item" aria-label="æœ€ä½³ç¼“å­˜ç­–ç•¥"><!--[--><!--]--> æœ€ä½³ç¼“å­˜ç­–ç•¥ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontend/http.html#å‚è€ƒèµ„æ–™" class="router-link-active router-link-exact-active sidebar-item" aria-label="å‚è€ƒèµ„æ–™"><!--[--><!--]--> å‚è€ƒèµ„æ–™ <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/frontend/http.html#cookie-å’Œ-session-çš„åŒºåˆ«" class="router-link-active router-link-exact-active sidebar-item" aria-label="cookie å’Œ session çš„åŒºåˆ«"><!--[--><!--]--> cookie å’Œ session çš„åŒºåˆ« <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/frontend/http.html#localstorage-å’Œ-sessionstorage-çš„åŒºåˆ«" class="router-link-active router-link-exact-active sidebar-item" aria-label="localStorage å’Œ sessionStorage çš„åŒºåˆ«"><!--[--><!--]--> localStorage å’Œ sessionStorage çš„åŒºåˆ« <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontend/http.html#cookie-ä¸­çš„-httponly-çš„å±æ€§å’Œä½œç”¨" class="router-link-active router-link-exact-active sidebar-item" aria-label="Cookie ä¸­çš„ httponly çš„å±æ€§å’Œä½œç”¨"><!--[--><!--]--> Cookie ä¸­çš„ httponly çš„å±æ€§å’Œä½œç”¨ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontend/http.html#å‚è€ƒ-èµ„æ–™" class="router-link-active router-link-exact-active sidebar-item" aria-label="å‚è€ƒ/èµ„æ–™"><!--[--><!--]--> å‚è€ƒ/èµ„æ–™ <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/frontend/http.html#package-json" class="router-link-active router-link-exact-active sidebar-item" aria-label="package.json"><!--[--><!--]--> package.json <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/frontend/http.html#dependencies-ä¸-devdependencies-æœ‰ä½•åŒºåˆ«" class="router-link-active router-link-exact-active sidebar-item" aria-label="dependencies ä¸ devDependencies æœ‰ä½•åŒºåˆ«"><!--[--><!--]--> dependencies ä¸ devDependencies æœ‰ä½•åŒºåˆ« <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontend/http.html#cjsã€esã€umd" class="router-link-active router-link-exact-active sidebar-item" aria-label="cjsã€esã€umd"><!--[--><!--]--> cjsã€esã€umd <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="http-ç›¸å…³" tabindex="-1"><a class="header-anchor" href="#http-ç›¸å…³" aria-hidden="true">#</a> HTTP ç›¸å…³</h1><h2 id="å‹ç¼©" tabindex="-1"><a class="header-anchor" href="#å‹ç¼©" aria-hidden="true">#</a> å‹ç¼©</h2><h3 id="åç«¯-gzip" tabindex="-1"><a class="header-anchor" href="#åç«¯-gzip" aria-hidden="true">#</a> åç«¯ gzip</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ç½‘å€ trdthg.github.io æ£€æµ‹ç»“æœ
æ˜¯å¦å‹ç¼©æ˜¯
å‹ç¼©ç±»å‹ gzip
åŸå§‹æ–‡ä»¶å¤§å° 23146 å­—èŠ‚
å‹ç¼©åæ–‡ä»¶å¤§å° 3454 å­—èŠ‚
å‹ç¼©ç‡ï¼ˆä¼°è®¡å€¼ï¼‰85.08%
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="é…ç½®å‹ç¼©" tabindex="-1"><a class="header-anchor" href="#é…ç½®å‹ç¼©" aria-hidden="true">#</a> é…ç½®å‹ç¼©</h4><ol start="2"><li>åœ¨ nginx é…ç½®å‹ç¼©æ•ˆæœ <a href="http://nginx.org/en/docs/http/ngx_http_gzip_module.html" target="_blank" rel="noopener noreferrer">å®˜æ–¹ doc<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://www.cnblogs.com/Renyi-Fan/p/11047490.html" target="_blank" rel="noopener noreferrer">åšå®¢<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>gzip on;  #æ˜¯å¦å¼€å¯ gzip æ¨¡å— on è¡¨ç¤ºå¼€å¯ off è¡¨ç¤ºå…³é—­
gzip_buffers 4 16k;  #è®¾ç½®å‹ç¼©æ‰€éœ€è¦çš„ç¼“å†²åŒºå¤§å°
gzip_comp_level 6;  #å‹ç¼©çº§åˆ« 1-9ï¼Œæ•°å­—è¶Šå¤§å‹ç¼©çš„è¶Šå¥½ï¼Œä¹Ÿè¶Šå ç”¨ CPU æ—¶é—´
gzip_min_length 100k;  #è®¾ç½®å…è®¸å‹ç¼©çš„æœ€å°å­—èŠ‚
gzip_http_version 1.1;  #è®¾ç½®å‹ç¼© http åè®®çš„ç‰ˆæœ¬ï¼Œé»˜è®¤æ˜¯ 1.1
gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;  #è®¾ç½®å‹ç¼©çš„æ–‡ä»¶ç±»å‹
gzip_vary on;  #æ˜¯å¦åœ¨ http header ä¸­æ·»åŠ `Vary: Accept-Encoding`ï¼Œè¾…åŠ©é€‰æ‹©ä¸åŒå‹ç¼©ç®—æ³•äº§ç”Ÿçš„å‰¯æœ¬
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æ³¨æ„ä¸€äº›ä¸å¸¸ç”¨çš„èµ„æºï¼Œæ¯”å¦‚å­—ä½“ï¼Œæœ‰éœ€è¦ä¹Ÿåº”è¯¥åŠ å…¥ gzip_type</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>å­—ä½“ç±»å‹æ‰©å±•å	Content-type
.eot	application/vnd.ms-fontobject
.ttf	font/ttf
.otf	font/opentype
.woff	font/x-woff
.svg	image/svg+xml
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>æ€ä¹ˆé€‰æ‹©åˆé€‚çš„å‹ç¼©æ¯”</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>gzip_comp_level 0: 0ï¼Œ94840, 63 [ms], 29%
gzip_comp_level 1: 2.43ï¼Œ39005, 248 [ms], 100%
gzip_comp_level 2: 2.51ï¼Œ37743, 273 [ms], 100%
gzip_comp_level 3; 2.57ï¼Œ36849, 327 [ms], 100%
gzip_comp_level 4; 2.73ï¼Œ34807, 370 [ms], 100%
gzip_comp_level 5; 2.80ï¼Œ33898, 491 [ms], 100%
gzip_comp_level 6; 2.82ï¼Œ33686, 604 [ms], 100%
gzip_comp_level 7; 2.82ï¼Œ33626, 659 [ms], 100%
gzip_comp_level 8; 2.82ï¼Œ33626, 698 [ms], 100%
gzip_comp_level 9; 2.82ï¼Œ33626, 698 [ms], 100%
- éšç€å‹ç¼©çº§åˆ«çš„å‡é«˜ï¼Œå‹ç¼©æ¯”æœ‰æ‰€æé«˜ï¼Œä½†åˆ°äº†çº§åˆ« 6 åï¼Œå¾ˆéš¾å†æé«˜ï¼›
- éšç€å‹ç¼©çº§åˆ«çš„å‡é«˜ï¼Œå¤„ç†æ—¶é—´æ˜æ˜¾å˜æ…¢ï¼›
- gzip å¾ˆæ¶ˆè€— cpu çš„æ€§èƒ½ï¼Œé«˜å¹¶å‘æƒ…å†µä¸‹ cpu è¾¾åˆ° 100%
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>æ³¨æ„äº‹é¡¹</p><ul><li>ä¸æ˜¯å‹ç¼©çº§åˆ«è¶Šé«˜è¶Šå¥½ï¼Œå…¶å® gzip_comp_level 1 çš„å‹ç¼©èƒ½åŠ›å·²ç»å¤Ÿç”¨äº†ï¼Œåé¢çº§åˆ«è¶Šé«˜ï¼Œå‹ç¼©çš„æ¯”ä¾‹å…¶å®å¢é•¿ä¸å¤§ï¼Œåè€Œå¾ˆåƒå¤„ç†æ€§èƒ½ã€‚</li><li>å‹ç¼©ä¸€å®šè¦å’Œé™æ€èµ„æºç¼“å­˜ç›¸ç»“åˆï¼Œç¼“å­˜å‹ç¼©åçš„ç‰ˆæœ¬ï¼Œå¦åˆ™æ¯æ¬¡éƒ½å‹ç¼©é«˜è´Ÿè½½ä¸‹æœåŠ¡å™¨è‚¯å®šåƒä¸ä½ã€‚</li><li>å›¾ç‰‡/mp3 è¿™æ ·çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸å¿…å‹ç¼©ï¼Œå› ä¸ºå‹ç¼©ç‡æ¯”è¾ƒå°ï¼Œæ¯”å¦‚ 100 åªèƒ½å‹ç¼©åˆ° 80 å­—èŠ‚ï¼Œè€Œä¸”å‹ç¼©ä¹Ÿæ˜¯è€—è´¹ CPU èµ„æºçš„ã€‚</li><li>æ¯”è¾ƒå°çš„æ–‡ä»¶ä¸å¿…å‹ç¼©ï¼Œæ„ä¹‰ä¸å­˜åœ¨ã€‚</li></ul><h4 id="é…ç½®å‹ç¼©ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#é…ç½®å‹ç¼©ç¼“å­˜" aria-hidden="true">#</a> é…ç½®å‹ç¼©ç¼“å­˜</h4><p>è¿™é‡Œçš„ç¼“å­˜æ§åˆ¶ä¸»è¦æ˜¯é’ˆå¯¹å›¾ç‰‡ï¼Œcss,js ç­‰å˜åŒ–å‘¨æœŸè¾ƒçŸ­çš„é™æ€æ–‡ä»¶; ç¬¬ä¸€æ¬¡è®¿é—® ä»¥å›¾ç‰‡ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è®¿é—®è¿™å¼ å›¾ç‰‡æ—¶ï¼ŒæœåŠ¡å™¨è¿”å›çš„æ˜¯ 200ï¼ŒåŒæ—¶åœ¨å“åº”å¤´è¿”å›äº†ä¸¤ä¸ªé”®ï¼Œ</p><ul><li>Etag:å³è¯¥æ–‡ä»¶çš„&#39;æŒ‡çº¹&#39;(å”¯ä¸€æ ‡è¯†)</li><li>Last-Modified:&#39;æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´&#39;; æ­¤æ—¶æµè§ˆå™¨ï¼Œä»¥åŠå…¶ä»–çš„ç¼“å­˜æœåŠ¡å™¨å°±ä¼šæŠŠè¿™å¼ å›¾ç‰‡ç»™ç¼“å­˜èµ·æ¥;</li></ul><p>ç¬¬äºŒæ¬¡è®¿é—® å†æ¬¡è¯·æ±‚è¿™å¼ å›¾ç‰‡æ—¶ï¼Œè¯·æ±‚å¤´å¢åŠ äº†ä¸¤ä¸ªé”®å€¼ï¼Œ</p><ul><li>If-Modified-Since:ä¸Šæ¬¡å‘ç”Ÿæ”¹å˜çš„æ—¶é—´;</li><li>If-None-Match:ä¸Šæ¬¡æ–‡ä»¶æœ¬èº«çš„ Etag å€¼ï¼ŒæœåŠ¡å™¨æ ¹æ®è¿™ä¸¤ä¸ªé”®å€¼åˆ¤æ–­å…¶ Etag å’Œ Last-Modifiedï¼Œå¦‚æœéƒ½æ²¡å‘ç”Ÿæ”¹å˜å°±ä¸è¿”å›è¿™å¼ å›¾ç‰‡ï¼Œåªè¿”å›ä¸€ä¸ª 304 çš„çŠ¶æ€ç ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°è¿™ä¸ª 304 çš„çŠ¶æ€ç å°±ä¼šè‡ªå·±å»ä»ç¼“å­˜é‡Œé¢æ‰¾è¿™ä¸ªè¢«ç¼“å­˜çš„å›¾ç‰‡;</li></ul><p>å¯ä»¥å‡å°‘æœåŠ¡å™¨çš„å¸¦å®½å‹åŠ›ä»¥åŠæå‡äº†ç½‘ç«™è®¿é—®é€Ÿåº¦;</p><div class="language-conf ext-conf line-numbers-mode"><pre class="language-conf"><code>location ~* ^.+\.(ico|gif|jpg|jpeg|png)$ {
  access_log   off;
  expires      30d;
}

location ~* ^.+\.(css|js|txt|xml|swf|wav)$ {
  access_log   off;
  expires      24h;
}

location ~* ^.+\.(html|htm)$ {
  expires      1h;
}
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="terser-å‹ç¼©" tabindex="-1"><a class="header-anchor" href="#terser-å‹ç¼©" aria-hidden="true">#</a> terser å‹ç¼©</h3><ul><li>å»é™¤å¤šä½™å­—ç¬¦ï¼šç©ºæ ¼ï¼Œæ¢è¡ŒåŠæ³¨é‡Š <ul><li>å¤šè¡Œä»£ç å‹ç¼©åˆ°ä¸€è¡Œæ—¶è¦æ³¨æ„è¡Œå°¾åˆ†å·</li></ul></li><li>å‹ç¼©å˜é‡åï¼šå˜é‡åï¼Œå‡½æ•°ååŠå±æ€§å <ul><li>ç¼©çŸ­å˜é‡çš„å‘½åä¹Ÿéœ€è¦ AST æ”¯æŒï¼Œä¸è‡³äºåœ¨ä½œç”¨åŸŸä¸­é€ æˆå‘½åå†²çªã€‚</li></ul></li><li>è§£æç¨‹åºé€»è¾‘ï¼šåˆå¹¶å£°æ˜ä»¥åŠå¸ƒå°”å€¼ç®€åŒ–<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// å‹ç¼©å‰</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

<span class="token comment">// å‹ç¼©å</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

<span class="token comment">// å‹ç¼©å‰</span>
<span class="token operator">!</span>b <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>c <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>d <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>e<span class="token punctuation">;</span>

<span class="token comment">// å‹ç¼©å</span>
<span class="token operator">!</span><span class="token punctuation">(</span>b <span class="token operator">||</span> c <span class="token operator">||</span> d <span class="token operator">||</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>è§£æç¨‹åºé€»è¾‘ï¼šç¼–è¯‘é¢„è®¡ç®—</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// å‹ç¼©å‰</span>
<span class="token keyword">const</span> <span class="token constant">ONE_YEAR</span> <span class="token operator">=</span> <span class="token number">365</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>
<span class="token comment">// å‹ç¼©å</span>
<span class="token keyword">const</span> <span class="token constant">ONE_YAAR</span> <span class="token operator">=</span> <span class="token number">31536000</span><span class="token punctuation">;</span>

<span class="token comment">// å‹ç¼©å‰</span>
<span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello, world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å‹ç¼©å</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello, world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ul><h4 id="åº“" tabindex="-1"><a class="header-anchor" href="#åº“" aria-hidden="true">#</a> åº“</h4><p>uglifyã€terser ä¸ swc</p><h3 id="tree-shaking" tabindex="-1"><a class="header-anchor" href="#tree-shaking" aria-hidden="true">#</a> tree shaking</h3><ul><li>ä¾èµ–äº webpack é™æ€åˆ†æï¼Œç»“åˆ AST åˆ é™¤ä¸å¿…è¦çš„èŠ‚ç‚¹</li><li>å¯¹å¼•å…¥çš„ json æ–‡ä»¶åšé™æ€åˆ†æ <ul><li>éœ€è¦ä½¿ç”¨ wabpack æ’ä»¶<code>webpack-json-access-optimizer</code></li><li>æŠŠ json è½¬æ¢ä¸º arrayï¼Œå¹¶åˆ é™¤ä¸å¿…è¦çš„å†…å®¹<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// strings.json</span>
<span class="token punctuation">[</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello world again!&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// index.js</span>
<span class="token keyword">const</span> strings <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./strings.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>strings<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> strings<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li><li>å¯¹ cssï¼Œä¸‹é¢ç”¨åˆ°äº† style-loaderï¼Œä¼šæŠŠ css åŠ åˆ° style æ ‡ç­¾é‡Œ<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">// You just have to add the sideEffects: true property to it.</span>

<span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sideEffects</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li><li>sideeffect èƒ½ç›´æ¥è·³è¿‡æ•´ä¸ªæ¨¡å—/æ–‡ä»¶ <img src="https://blog.logrocket.com/tree-shaking-json-files-webpack/" alt="Webpack - Tree Shaking"><img src="https://blog.logrocket.com/tree-shaking-json-files-webpack/" alt="JSON-CSS"></li></ul><h2 id="http-ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#http-ç¼“å­˜" aria-hidden="true">#</a> http ç¼“å­˜</h2><h3 id="ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#ä»‹ç»" aria-hidden="true">#</a> ä»‹ç»</h3><p>æ›´å°‘çš„è¯·æ±‚ï¼Œæ›´å°‘çš„æµé‡ï¼Œæ›´å°‘çš„å³°å€¼å¸¦å®½ï¼Œä»è€ŒèŠ‚çœä¸€å¤§ç¬”æœåŠ¡å™¨æˆ–è€… CDN çš„è´¹ç”¨ã€‚</p><ul><li>å‡å°‘è¯·æ±‚æ¬¡æ•°</li><li>å‡å°‘å³°å€¼å¸¦å®½ æ§åˆ¶ HTTP ç¼“å­˜åªéœ€è¦ä½¿ç”¨ Cache-control æ§åˆ¶</li></ul><blockquote><p>Expiresï¼šæ˜¯ http1.0 çš„è§„èŒƒï¼Œå®ƒçš„å€¼æ˜¯ä¸€ä¸ªç»å¯¹æ—¶é—´çš„ GMT æ ¼å¼çš„æ—¶é—´å­—ç¬¦ä¸²ã€‚æ¯”å¦‚ç½‘é¡µçš„ Expires å€¼æ˜¯ï¼šexpires:Mar, 06 Apr 2020 10:47:02 GMTã€‚é—®é¢˜ï¼šåˆ°æœŸæ—¶é—´æ˜¯ç”±æœåŠ¡ç«¯ç”Ÿæˆçš„ï¼Œå¦‚æœå®¢æˆ·ç«¯æ—¶é—´è·ŸæœåŠ¡å™¨æ—¶é—´ä¸ä¸€è‡´ï¼Œè¿™å°±ä¼šå¯¼è‡´ç¼“å­˜å‘½ä¸­çš„è¯¯å·®ã€‚ <strong>ä¸¤è€…åŒæ—¶å­˜åœ¨çš„è¯ï¼ŒCache-Control ä¼˜å…ˆçº§é«˜äº Expires</strong></p></blockquote><h3 id="cache-control" tabindex="-1"><a class="header-anchor" href="#cache-control" aria-hidden="true">#</a> Cache-Control</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>1) max-ageï¼šç”¨æ¥è®¾ç½®èµ„æºï¼ˆrepresentationsï¼‰å¯ä»¥è¢«ç¼“å­˜å¤šé•¿æ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼›
2) s-maxageï¼šå’Œ max-age æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡å®ƒåªé’ˆå¯¹ä»£ç†æœåŠ¡å™¨ç¼“å­˜è€Œè¨€ï¼›**s-maxage çš„ä¼˜å…ˆçº§é«˜äº max-age**

3) publicï¼šå¯ä»¥è¢«æ‰€æœ‰çš„ç”¨æˆ·ç¼“å­˜ï¼ŒåŒ…æ‹¬ç”¨æˆ·æµè§ˆå™¨å’Œ CDN ç­‰ä¸­é—´ä»£ç†æœåŠ¡å™¨ã€‚
4) privateï¼šåªèƒ½è¢«ç”¨æˆ·æµè§ˆå™¨ç¼“å­˜ï¼Œè€Œä¸èƒ½è¢«ä»£ç†æœåŠ¡å™¨ç¼“å­˜ï¼›

5) no-cacheï¼šno-cache æ˜¯ä¼šè¢«ç¼“å­˜çš„ï¼Œä½†æ˜¯ä¾ç„¶å¼ºåˆ¶å®¢æˆ·ç«¯ç›´æ¥å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œåªä¸è¿‡æ¯æ¬¡åœ¨å‘å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰æä¾›å“åº”æ•°æ®æ—¶ï¼Œç¼“å­˜éƒ½è¦å‘æœåŠ¡å™¨è¯„ä¼°ç¼“å­˜å“åº”çš„æœ‰æ•ˆæ€§ã€‚å½“æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚ï¼Œä¼šåˆ¤æ–­èµ„æºæ˜¯å¦å˜æ›´ï¼Œå˜æ›´åˆ™è¿”å›æ–°å†…å®¹ï¼Œå¦åˆ™è¿”å› 304ã€‚
6) no-storeï¼šç¦æ­¢ä¸€åˆ‡ç¼“å­˜ï¼ˆå“åº”çœŸçš„ä¸è¢«ç¼“å­˜ï¼‰ã€‚

7) max-staleï¼šèƒ½å®¹å¿çš„æœ€å¤§è¿‡æœŸæ—¶é—´ã€‚max-stale æŒ‡ä»¤æ ‡ç¤ºäº†å®¢æˆ·ç«¯æ„¿æ„æ¥æ”¶ä¸€ä¸ªå·²ç»è¿‡æœŸäº†çš„å“åº”ã€‚å¦‚æœæŒ‡å®šäº† max-stale çš„å€¼ï¼Œåˆ™æœ€å¤§å®¹å¿æ—¶é—´ä¸ºå¯¹åº”çš„ç§’æ•°ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œé‚£ä¹ˆè¯´æ˜æµè§ˆå™¨æ„¿æ„æ¥æ”¶ä»»ä½• age çš„å“åº”ï¼ˆage è¡¨ç¤ºå“åº”ç”±æºç«™ç”Ÿæˆæˆ–ç¡®è®¤çš„æ—¶é—´ä¸å½“å‰æ—¶é—´çš„å·®å€¼ï¼‰ã€‚
8) min-freshï¼šèƒ½å¤Ÿå®¹å¿çš„æœ€å°æ–°é²œåº¦ã€‚min-fresh æ ‡ç¤ºäº†å®¢æˆ·ç«¯ä¸æ„¿æ„æ¥å—æ–°é²œåº¦ä¸å¤šäºå½“å‰çš„ age åŠ ä¸Š min-fresh è®¾å®šçš„æ—¶é—´ä¹‹å’Œçš„å“åº”ã€‚
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="ä»€ä¹ˆæ˜¯æŒ‡çº¹" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯æŒ‡çº¹" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯æŒ‡çº¹</h3><p><img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202122340765.png" alt=""> å¦‚å›¾æ‰€ç¤ºï¼ŒæŒ‡çº¹å°±æ˜¯æ–‡ä»¶çš„ hash å€¼</p><ul><li>main.js å¸¦æœ‰ hash å€¼ï¼Œå±äºå¸¦æŒ‡çº¹çš„æ°¸ä¹…èµ„æº (å¼ºç¼“å­˜)</li><li>index.js ä¸å¸¦ hash å€¼ï¼Œè™½ç„¶è®¾ç½®äº† no-chcheï¼Œä½†æ˜¯ä¾ç„¶æ˜¯åå•†ç¼“å­˜</li></ul><p>åŒºåˆ«ä¸‹é¢ä¸¤ç§ç¼“å­˜å°±æ˜¯ä¾é æŒ‡çº¹ (æ˜¯ä¸æ˜¯æ°¸ä¹…ç¼“å­˜)ï¼Œè€Œ cache-control å€¼æ˜¯å†³å®šå¯¹ç¼“å­˜çš„å¤„ç†ç­–ç•¥ (å­˜ä¸å­˜ï¼Œç”¨ä¸ç”¨)</p><h3 id="æ–‡ä»¶æŒ‡çº¹ç”Ÿæˆç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#æ–‡ä»¶æŒ‡çº¹ç”Ÿæˆç­–ç•¥" aria-hidden="true">#</a> æ–‡ä»¶æŒ‡çº¹ç”Ÿæˆç­–ç•¥</h3><h4 id="ç”Ÿæˆç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#ç”Ÿæˆç­–ç•¥" aria-hidden="true">#</a> ç”Ÿæˆç­–ç•¥</h4><ul><li>hashï¼šå½“æœ‰æ–‡ä»¶ä¿®æ”¹ï¼Œæ•´ä¸ªé¡¹ç›®æ„å»ºçš„ hash å€¼å°±ä¼šæ›´æ–°ã€‚ <code>filename: &#39;[name]-[hash].bundle.css&#39;</code></li><li>chunkhashï¼šå’Œ webpack æ‰“åŒ…çš„ chunk ç›¸å…³ï¼Œä¸åŒçš„ entry ä¼šç”Ÿæˆä¸åŒçš„ hashï¼Œä¸€èˆ¬ç”¨äº js çš„æ‰“åŒ…ã€‚ <code>filename: &#39;[name]-[chunkhash].bundle.css&#39;</code></li><li>contenthashï¼šæ ¹æ®æ–‡ä»¶å†…å®¹æ¥å®šä¹‰ hashï¼Œæ–‡ä»¶å†…å®¹ä¸å˜ï¼Œcontenthash ä¸å˜ã€‚ä¾‹å¦‚ css çš„æ‰“åŒ…ï¼Œç”±äº ä¿®æ”¹ js æˆ– html æ–‡ä»¶ï¼Œä½†æ˜¯æ²¡æœ‰ä¿®æ”¹å¼•å…¥çš„ css æ ·å¼æ—¶ï¼Œæ–‡ä»¶ä¸éœ€è¦ç”Ÿæˆæ–°çš„å“ˆå¸Œå€¼ï¼Œæ‰€ä»¥å¯é€‚ç”¨äº css çš„æ‰“åŒ…ã€‚ <code>filename: &#39;[name]-[contenthash:8].bundle.css&#39;</code></li></ul><blockquote><p>å¯ä»¥åœ¨å“ˆå¸Œæœ«å°¾é…ç½®å“ˆå¸Œå€¼çš„é•¿åº¦ <a href="https://webpack.js.org/configuration/output/#template-strings" target="_blank" rel="noopener noreferrer">filename é…ç½®æ ¼å¼<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h4 id="js-chunkhash" tabindex="-1"><a class="header-anchor" href="#js-chunkhash" aria-hidden="true">#</a> js-chunkhash</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token constant">JS</span> æ–‡ä»¶æŒ‡çº¹è®¾ç½®ï¼š
chunkhash<span class="token punctuation">;</span>
module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">search</span><span class="token operator">:</span> <span class="token string">&quot;./src/search.js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;[name][chunkhash:8].js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="css-contenthash" tabindex="-1"><a class="header-anchor" href="#css-contenthash" aria-hidden="true">#</a> css-contenthash</h3><p>CSS æ–‡ä»¶æŒ‡çº¹ï¼šcontenthash --ï¼ˆmin-css-extract-plugin å¯ä»¥ç”Ÿäº§ css æ–‡ä»¶ï¼‰ 1.ç›´æ¥ä½¿ç”¨&#39;style-loader&#39;æ–¹å¼é€šè¿‡ style æ ‡ç­¾å°† CSS æ’å…¥åˆ° head ä¸­å¹¶æ²¡æœ‰ç”Ÿæˆå•ç‹¬çš„ CSS æ–‡ä»¶ï¼Œå› æ­¤ä¹Ÿä¸å­˜åœ¨ ä½¿ç”¨æŒ‡çº¹æ—¶å€™å¯ä»¥æ›´æ–°æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œé€šè¿‡&#39;min-css-extract-plugin&#39;æ’ä»¶å°† CSS æå–æˆå•ç‹¬çš„ CSS æ–‡ä»¶ï¼Œå¹¶æ·»åŠ æ–‡ä»¶æŒ‡çº¹ã€‚2.å®‰è£…ä¾èµ– mini-css-extract-plugin -- &#39;npm i mini-css-extract-plugin -D&#39;</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;[name][contenthash:8].css&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="img-hash" tabindex="-1"><a class="header-anchor" href="#img-hash" aria-hidden="true">#</a> img-hash</h4><p>å›¾ç‰‡æ–‡ä»¶æŒ‡çº¹è®¾ç½®ï¼šhash 1.å…¶ä¸­ï¼Œhash å¯¹åº”çš„æ˜¯æ–‡ä»¶å†…å®¹çš„å“ˆå¸Œå€¼ï¼Œé»˜è®¤ä¸º md5 ç”Ÿæˆï¼Œä¸åŒäºå‰é¢æ‰€è¯´çš„ hash å€¼ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|svg|jpg|jpeg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;img/[name][hash:8].[ext]&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹" aria-hidden="true">#</a> æ³¨æ„äº‹é¡¹</h4><blockquote><p>ä½¿ç”¨äº† md5 æŒ‡çº¹ä¹‹åå‘ç°æ¯æ¬¡æ‰“åŒ…è¿˜æ˜¯ä¼šå‘ç”Ÿå˜åŒ–ï¼Ÿç­”ï¼šè¿™æ˜¯ç”±äº webpack çš„å¤„ç†æœºåˆ¶å¯¼è‡´çš„ï¼Œwebpack æ¯æ¬¡æ‰“åŒ…ä¼šæŠŠæ¯ä¸ªæ¨¡å—çš„é…ç½®ä¿¡æ¯ï¼Œå¦‚æ–‡ä»¶åã€æ–‡ä»¶é¡ºåºã€æ–‡ä»¶ md5 ç­‰ä¿¡æ¯ä½œä¸ºé…ç½®æ‰“å…¥ js ä¸­ï¼Œä»¥ä¾¿äºå…¶è¿›è¡Œæ¨¡å—ç®¡ç†ï¼Œè€Œè¿™éƒ¨å†…å®¹ï¼Œæ¯æ¬¡æ‰“åŒ…éƒ½æœ‰å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œå¯¼è‡´æ•´ä¸ª js æ–‡ä»¶åæ¯æ¬¡éƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚webpack æä¾›äº†ä¸€ä¸ª manifest çš„æœºåˆ¶æ¥å‰¥å‡ºè¿™ä¸ªé…ç½®æ–‡ä»¶ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ CommonsChunkPlugin æ¥å°†å…¶å‰¥ç¦»ï¼ŒåŒæ—¶ä½¿ç”¨ chunk-manifest-webpack-plugin è¯»å–å…¶ å†…å®¹å¯¼å‡ºå¦å¤–ä¸€ä¸ªæ–‡ä»¶ï¼Œé˜²æ­¢å…¶å†…å®¹å˜åŒ–å¯¼è‡´æ•´ä¸ª js æ–‡ä»¶æŒ‡çº¹å‘ç”Ÿå˜åŒ–</p></blockquote><h4 id="bundle-splitting-å°½é‡å‡å°‘èµ„æºå˜æ›´" tabindex="-1"><a class="header-anchor" href="#bundle-splitting-å°½é‡å‡å°‘èµ„æºå˜æ›´" aria-hidden="true">#</a> Bundle Splittingï¼šå°½é‡å‡å°‘èµ„æºå˜æ›´</h4><p>æŠŠå¤§ js æ–‡ä»¶ï¼Œåˆ†æˆå°çš„æ–‡ä»¶ï¼Œå°½é‡å‡å°‘ç¼“å­˜å¤±æ•ˆçš„èŒƒå›´ <img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202130126302.png" alt=""> æ­¤æ—¶æˆ‘ä»¬å¯ä»¥å¯¹èµ„æºè¿›è¡Œåˆ†å±‚æ¬¡ç¼“å­˜çš„æ‰“åŒ…æ–¹æ¡ˆï¼Œè¿™æ˜¯ä¸€ä¸ªå»ºè®®æ–¹æ¡ˆï¼š</p><ul><li>webpack-runtime: åº”ç”¨ä¸­çš„ webpack çš„ç‰ˆæœ¬æ¯”è¾ƒç¨³å®šï¼Œåˆ†ç¦»å‡ºæ¥ï¼Œä¿è¯é•¿ä¹…çš„æ°¸ä¹…ç¼“å­˜</li><li>react/react-dom: react çš„ç‰ˆæœ¬æ›´æ–°é¢‘æ¬¡ä¹Ÿè¾ƒä½</li><li>vendor: å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹æ¨¡å—æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œå¦‚ lodashï¼Œ- classnames åŸºæœ¬ä¸Šæ¯ä¸ªé¡µé¢éƒ½ä¼šå¼•ç”¨åˆ°ï¼Œä½†æ˜¯å®ƒä»¬çš„æ›´æ–°é¢‘ç‡ä¼šæ›´é«˜ä¸€äº›ã€‚å¦å¤–å¯¹ä½é¢‘æ¬¡ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹æ¨¡å—ä¸è¦æ‰“è¿›æ¥</li><li>pageA: A è·¯ç”±é¡µé¢ï¼Œå½“ A é¡µé¢çš„ç»„ä»¶å‘ç”Ÿå˜æ›´åï¼Œå®ƒçš„ç¼“å­˜å°†ä¼šå¤±æ•ˆ</li><li>pageB: B è·¯ç”±é¡µé¢</li><li>echarts: ä¸å¸¸ç”¨ä¸”è¿‡å¤§çš„ç¬¬ä¸‰æ–¹æ¨¡å—å•ç‹¬æ‰“åŒ…</li><li>mathjax: ä¸å¸¸ç”¨ä¸”è¿‡å¤§çš„ç¬¬ä¸‰æ–¹æ¨¡å—å•ç‹¬æ‰“åŒ…</li><li>jspdf: ä¸å¸¸ç”¨ä¸”è¿‡å¤§çš„ç¬¬ä¸‰æ–¹æ¨¡å—å•ç‹¬æ‰“åŒ…</li></ul><p>éšç€ <strong>http2</strong> çš„å‘å±•ï¼Œç‰¹åˆ«æ˜¯å¤šè·¯å¤ç”¨ï¼Œåˆå§‹é¡µé¢çš„é™æ€èµ„æºä¸å—èµ„æºæ•°é‡çš„å½±å“ã€‚å› æ­¤ä¸ºäº†æ›´å¥½çš„ç¼“å­˜æ•ˆæœä»¥åŠæŒ‰éœ€åŠ è½½ï¼Œä¹Ÿæœ‰å¾ˆå¤šæ–¹æ¡ˆå»ºè®®æŠŠ<strong>æ‰€æœ‰çš„ç¬¬ä¸‰æ–¹æ¨¡å—è¿›è¡Œå•æ¨¡å—æ‰“åŒ…</strong>ã€‚</p><h3 id="æ°¸ä¹…ç¼“å­˜-å¼ºåˆ¶ç¼“å­˜-å¸¦æŒ‡çº¹" tabindex="-1"><a class="header-anchor" href="#æ°¸ä¹…ç¼“å­˜-å¼ºåˆ¶ç¼“å­˜-å¸¦æŒ‡çº¹" aria-hidden="true">#</a> æ°¸ä¹…ç¼“å­˜ / å¼ºåˆ¶ç¼“å­˜ (å¸¦æŒ‡çº¹)</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Cache-Control: public,max-age=31536000,immutable
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>max-age è¡¨ç¤ºç¼“å­˜æ—¶é—´ä¸º 1 å¹´ï¼Œç›´æ¥ä»ç¼“å­˜æ•°æ®åº“ (æµè§ˆå™¨çš„æœ¬åœ°ç¼“å­˜) æ‹¿åˆ°æ•°æ®ï¼Œä¸‹å›¾ä¸­çš„ (disk cache) å°±æ˜¯ <img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202122312621.png" alt=""> è€Œä¸ºäº†è§£å†³æ›´æ–°çš„é—®é¢˜ï¼Œå°±éœ€è¦åœ¨æ–‡ä»¶å (æˆ–è€…è·¯å¾„) ä¸­æ·»åŠ  hashï¼Œç‰ˆæœ¬å·ç­‰åŠ¨æ€å­—ç¬¦ï¼Œä¹‹åæ›´æ”¹åŠ¨æ€å­—ç¬¦ï¼Œä»è€Œè¾¾åˆ°æ›´æ”¹å¼•ç”¨ URL çš„ç›®çš„ï¼Œè®©ä¹‹å‰çš„å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆ (å…¶å®å¹¶æœªç«‹å³å¤±æ•ˆï¼Œåªæ˜¯ä¸å†ä½¿ç”¨äº†è€Œå·²)ã€‚åœ¨çº¿æä¾›çš„ç±»åº“ (å¦‚ jquery-3.3.1.min.js, lodash.min.js ç­‰) å‡é‡‡ç”¨è¿™ä¸ªæ¨¡å¼ã€‚</p><p><strong>é»˜è®¤çš„å¼ºåˆ¶ç¼“å­˜æ—¶é—´</strong></p><p>é¦–å…ˆè¦æ˜ç¡®ä¸¤ä¸ªå“åº”å¤´ä»£è¡¨çš„å«ä¹‰ï¼š</p><ul><li>Date: æŒ‡æºæœåŠ¡å™¨å“åº”æŠ¥æ–‡ç”Ÿæˆçš„æ—¶é—´ï¼Œå·®ä¸å¤šä¸å‘è¯·æ±‚çš„æ—¶é—´ç­‰ä»·</li><li>Last-Modified: æŒ‡é™æ€èµ„æºä¸Šæ¬¡ä¿®æ”¹çš„æ—¶é—´ï¼Œå–å†³äº mtime</li></ul><p>LM factor ç®—æ³•è®¤ä¸ºå½“è¯·æ±‚æœåŠ¡å™¨æ—¶ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½® Cache-Controlï¼Œå¦‚æœè·ç¦»ä¸Šæ¬¡çš„ Last-Modified è¶Šè¿œï¼Œåˆ™ç”Ÿæˆçš„å¼ºåˆ¶ç¼“å­˜æ—¶é—´è¶Šé•¿ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ç”¨å…¬å¼è¡¨ç¤ºå¦‚ä¸‹ï¼Œå…¶ä¸­ factor ä»‹äº 0 ä¸ 1 ä¹‹é—´ï¼š</span>
MaxAge <span class="token operator">=</span> <span class="token punctuation">(</span>Date <span class="token operator">-</span> LastModified<span class="token punctuation">)</span> <span class="token operator">*</span> factor<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202130123289.png" alt=""></p><h3 id="åå•†ç¼“å­˜-å¯¹æ¯”ç¼“å­˜-ä¸å¸¦æŒ‡çº¹" tabindex="-1"><a class="header-anchor" href="#åå•†ç¼“å­˜-å¯¹æ¯”ç¼“å­˜-ä¸å¸¦æŒ‡çº¹" aria-hidden="true">#</a> åå•†ç¼“å­˜ / å¯¹æ¯”ç¼“å­˜ (ä¸å¸¦æŒ‡çº¹)</h3><p>ç¬¬ä¸€æ¬¡è¯·æ±‚ä¼šç¼“å­˜<code>æ•°æ®ï¼ŒEtagï¼ŒLast-Modified</code>ï¼Œä¹‹åè¯·æ±‚éƒ½è¦å‘å‡ºè¯·æ±‚æºå¸¦<code>If-Modified-Since, If-None-Match</code>åˆ¤æ–­ç¼“å­˜çš„æ—¶æ•ˆæ€§ï¼Œå¦‚æœæ˜¯ 304ï¼Œå°±è¡¨ç¤ºç¼“å­˜å¯ç”¨ï¼Œæµè§ˆå™¨å°±ç›´æ¥ç”¨ç¼“å­˜æ•°æ® <img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202122321204.png" alt=""></p><h3 id="etag-å’Œ-last-modified-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#etag-å’Œ-last-modified-çš„åŒºåˆ«" aria-hidden="true">#</a> Etag å’Œ Last-Modified çš„åŒºåˆ«</h3><p>Etag ä¼˜å…ˆçº§æ›´é«˜ï¼ŒæœåŠ¡å‰å…ˆæ¯”è¾ƒ Etagï¼ŒåŒæ—¶å­˜åœ¨æ—¶ä¼šä»¥ ETag ä¸ºå‡†ã€‚</p><h4 id="last-modified-if-modified-since" tabindex="-1"><a class="header-anchor" href="#last-modified-if-modified-since" aria-hidden="true">#</a> Last-Modified / If-Modified-Since</h4><ol><li>ç²¾ç¡®åˆ°ç§’ï¼š<code>Last-Modify: Thu,31 Dec 2037 23:59:59 GMT</code></li><li>ä½¿ç”¨<code>stat ./xxx.txt</code>è·å–æ–‡ä»¶ (å¤¹) ä¿¡æ¯</li></ol><p>æœåŠ¡å™¨å“åº”è¯·æ±‚æ—¶ï¼Œä¼šå‘Šè¯‰æµè§ˆå™¨ä¸€ä¸ªå‘Šè¯‰æµè§ˆå™¨èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ï¼šLast-Modifiedï¼Œæµè§ˆå™¨ä¹‹åå†è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šå¸¦ä¸Šä¸€ä¸ªå¤´ï¼šIf-Modified-Sinceï¼Œè¿™ä¸ªå€¼å°±æ˜¯æœåŠ¡å™¨ä¸Šä¸€æ¬¡ç»™çš„ Last-Modified çš„æ—¶é—´ï¼ŒæœåŠ¡å™¨ä¼šæ¯”å¯¹èµ„æºå½“å‰æœ€åçš„ä¿®æ”¹æ—¶é—´ï¼Œå¦‚æœå¤§äº If-Modified-Sinceï¼Œåˆ™è¯´æ˜èµ„æºä¿®æ”¹è¿‡äº†ï¼Œæµè§ˆå™¨ä¸èƒ½å†ä½¿ç”¨ç¼“å­˜ï¼Œå¦åˆ™æµè§ˆå™¨å¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼Œå¹¶è¿”å› 304 çŠ¶æ€ç ã€‚</p><h4 id="etag-if-none-match" tabindex="-1"><a class="header-anchor" href="#etag-if-none-match" aria-hidden="true">#</a> Etag / If-None-Match</h4><ol><li>Etag/If-None-Match æ˜¯â€œå®ä½“æ ‡ç­¾â€ï¼ˆEntity Tagï¼‰çš„ç¼©å†™</li><li>ä¼˜å…ˆçº§é«˜äº Last-Modified / If-Modified-Sinceï¼‰</li><li>ä¼˜åŠ¿</li></ol><ul><li>è§£å†³å†…å®¹å¹¶ä¸æ”¹å˜ï¼Œä»…ä»…æ”¹æ”¹å˜ä¿®æ”¹æ—¶é—´çš„é—®é¢˜</li><li>è§£å†³åªå°±ç²¾ç¡®åˆ°ç§’çš„é—®é¢˜ï¼šæŸäº›æ–‡ä»¶ä¿®æ”¹éå¸¸é¢‘ç¹ï¼Œæ¯”å¦‚åœ¨ç§’ä»¥ä¸‹çš„æ—¶é—´å†…è¿›è¡Œä¿®æ”¹ï¼Œ(æ¯”æ–¹è¯´ 1s å†…ä¿®æ”¹äº† N æ¬¡)ï¼ŒIf-Modified-Since èƒ½æ£€æŸ¥åˆ°çš„ç²’åº¦æ˜¯ s çº§çš„ï¼Œè¿™ç§ä¿®æ”¹æ— æ³•åˆ¤æ–­ (æˆ–è€…è¯´ UNIX è®°å½• MTIME åªèƒ½ç²¾ç¡®åˆ°ç§’)ï¼›</li><li>æŸäº›æœåŠ¡å™¨ä¸èƒ½ç²¾ç¡®çš„å¾—åˆ°æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ã€‚</li></ul><p>æœåŠ¡å™¨å“åº”è¯·æ±‚æ—¶ï¼Œé€šè¿‡ Etag å¤´éƒ¨å‘Šè¯‰æµè§ˆå™¨å½“å‰èµ„æºåœ¨æœåŠ¡å™¨çš„å”¯ä¸€æ ‡è¯†ï¼ˆç”Ÿæˆè§„åˆ™ç”±æœåŠ¡å™¨å†³å®šï¼‰ï¼Œæµè§ˆå™¨å†æ¬¡è¯·æ±‚æ—¶ï¼Œå°±ä¼šå¸¦ä¸Šä¸€ä¸ªå¤´ If-None-Matchï¼Œè¿™ä¸ªå€¼å°±æ˜¯æœåŠ¡å™¨ä¸Šä¸€æ¬¡ç»™çš„ Etag çš„å€¼ï¼ŒæœåŠ¡å™¨æ¯”å¯¹ä¸€ä¸‹èµ„æºå½“å‰çš„ Etag æ˜¯å¦è·Ÿ If-None-Match ä¸€è‡´ï¼Œä¸ä¸€è‡´åˆ™è¯´æ˜èµ„æºä¿®æ”¹è¿‡äº†ï¼Œæµè§ˆå™¨ä¸èƒ½å†ä½¿ç”¨ç¼“å­˜ï¼Œå¦åˆ™æµè§ˆå™¨å¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼Œå¹¶è¿”å› 304 çŠ¶æ€ç ã€‚</p><p><a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#etag" target="_blank" rel="noopener noreferrer">nginx é…ç½® etag<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ç”±æ–‡ä»¶å†…å®¹çš„ hash æˆ–è€… mtime/size ç”Ÿæˆ</p><h3 id="æœ€ä½³ç¼“å­˜ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#æœ€ä½³ç¼“å­˜ç­–ç•¥" aria-hidden="true">#</a> æœ€ä½³ç¼“å­˜ç­–ç•¥</h3><h4 id="ç¼“å­˜ä½ç½®" tabindex="-1"><a class="header-anchor" href="#ç¼“å­˜ä½ç½®" aria-hidden="true">#</a> ç¼“å­˜ä½ç½®</h4><p>è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œä¼šæŒ‰ç…§ä¼˜å…ˆçº§ï¼ˆService Worker - Memory Cache - Disk Cache - Push Cacheï¼‰ä¾æ¬¡æŸ¥æ‰¾ç¼“å­˜ï¼Œå¦‚æœå‘½ä¸­åˆ™ä½¿ç”¨ç¼“å­˜ï¼Œå¦åˆ™å‘èµ·è¯·æ±‚ã€‚</p><ol><li>service walker</li></ol><p>æµè§ˆå™¨èƒŒåçš„ç‹¬ç«‹çº¿ç¨‹ï¼ŒService Worker ä¸­æ¶‰åŠåˆ°è¯·æ±‚æ‹¦æˆªï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨ HTTPS åè®®æ¥ä¿éšœå®‰å…¨</p><p>å½“ Service Worker æ²¡æœ‰å‘½ä¸­ç¼“å­˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å»è°ƒç”¨ fetch å‡½æ•°è·å–æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰åœ¨ Service Worker å‘½ä¸­ç¼“å­˜çš„è¯ï¼Œä¼šæ ¹æ®ç¼“å­˜æŸ¥æ‰¾ä¼˜å…ˆçº§å»æŸ¥æ‰¾æ•°æ®ã€‚ä½†æ˜¯ä¸ç®¡æˆ‘ä»¬æ˜¯ä» Memory Cache ä¸­è¿˜æ˜¯ä»ç½‘ç»œè¯·æ±‚ä¸­è·å–çš„æ•°æ®ï¼Œæµè§ˆå™¨éƒ½ä¼šæ˜¾ç¤ºæˆ‘ä»¬æ˜¯ä» Service Worker ä¸­è·å–çš„å†…å®¹ã€‚</p><ol start="2"><li>200 from memory cache</li></ol><p>ä¸»è¦åŒ…å«çš„æ˜¯å½“å‰ä¸­é¡µé¢ä¸­å·²ç»æŠ“å–åˆ°çš„èµ„æºï¼Œä¼šéšç€è¿›ç¨‹çš„é‡Šæ”¾è€Œé‡Šæ”¾ï¼Œä¸€æ—¦æˆ‘ä»¬å…³é—­ Tab é¡µé¢ï¼Œå†…å­˜ä¸­çš„ç¼“å­˜ä¹Ÿå°±è¢«é‡Šæ”¾äº†ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œç³»ç»Ÿä¸ä¼šç»™å†…å­˜åˆ†é…è¾ƒå¤§çš„å®¹é‡ï¼Œå› æ­¤å†…å­˜ç¼“å­˜ä¸€èˆ¬ç”¨äºå­˜å‚¨è¾ƒå°æ–‡ä»¶ã€‚åŒæ—¶å†…å­˜ç¼“å­˜åœ¨æœ‰æ—¶æ•ˆæ€§è¦æ±‚çš„åœºæ™¯ä¸‹ä¹Ÿå¾ˆæœ‰ç”¨ï¼ˆæ¯”å¦‚æµè§ˆå™¨çš„éšç§æ¨¡å¼ï¼‰ã€‚å½“å‰ç³»ç»Ÿå†…å­˜ä½¿ç”¨ç‡é«˜çš„è¯ï¼Œæ–‡ä»¶ä¼˜å…ˆå­˜å‚¨è¿›ç¡¬ç›˜</p><blockquote><p>è¿˜ä¿å­˜ç€ preload/prefetch ç›¸å…³çš„èµ„æºï¼Œpreloader çš„ç›¸å…³æŒ‡ä»¤å·²ç»æ˜¯é¡µé¢ä¼˜åŒ–çš„å¸¸è§æ‰‹æ®µä¹‹ä¸€ï¼Œå®ƒå¯ä»¥ä¸€è¾¹è§£æ js/css æ–‡ä»¶ï¼Œä¸€è¾¹ç½‘ç»œè¯·æ±‚ä¸‹ä¸€ä¸ªèµ„æºã€‚200 from prefetch cache åœ¨ preload æˆ– prefetch çš„èµ„æºåŠ è½½æ—¶ï¼Œä¸¤è€…ä¹Ÿæ˜¯å‡å­˜å‚¨åœ¨ http cacheï¼Œå½“èµ„æºåŠ è½½å®Œæˆåï¼Œå¦‚æœèµ„æºæ˜¯å¯ä»¥è¢«ç¼“å­˜çš„ï¼Œé‚£ä¹ˆå…¶è¢«å­˜å‚¨åœ¨ http cache ä¸­ç­‰å¾…åç»­ä½¿ç”¨ï¼›å¦‚æœèµ„æºä¸å¯è¢«ç¼“å­˜ï¼Œé‚£ä¹ˆå…¶åœ¨è¢«ä½¿ç”¨å‰å‡å­˜å‚¨åœ¨ memory cacheã€‚</p></blockquote><ol start="3"><li><p>200 from disk cache è¡¨ç¤ºä¸è®¿é—®æœåŠ¡å™¨ï¼Œç›´æ¥ä»ç¡¬ç›˜ä¸­è¯»å–ç¼“å­˜ã€‚ä¸å†…å­˜ç›¸æ¯”ï¼Œç¡¬ç›˜çš„è¯»å–é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œä½†ç¡¬ç›˜ç¼“å­˜æŒç»­çš„æ—¶é—´æ›´é•¿ï¼Œå…³é—­è¿›ç¨‹ä¹‹åï¼Œç¼“å­˜çš„èµ„æºä»ç„¶å­˜åœ¨ã€‚ç”±äºç¡¬ç›˜çš„å®¹é‡è¾ƒå¤§ï¼Œå› æ­¤ä¸€èˆ¬ç”¨äºå­˜å‚¨å¤§æ–‡ä»¶ã€‚ å¯¹äºå¤§æ–‡ä»¶æ¥è¯´ï¼Œå¤§æ¦‚ç‡æ˜¯ä¸å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œåä¹‹ä¼˜å…ˆ</p></li><li><p>Push cache</p></li></ol><p>Push Cacheï¼ˆæ¨é€ç¼“å­˜ï¼‰æ˜¯ HTTP/2 ä¸­çš„å†…å®¹ï¼Œå½“ä»¥ä¸Šä¸‰ç§ç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­æ—¶ï¼Œå®ƒæ‰ä¼šè¢«ä½¿ç”¨ã€‚å®ƒåªåœ¨ä¼šè¯ï¼ˆSessionï¼‰ä¸­å­˜åœ¨ï¼Œä¸€æ—¦ä¼šè¯ç»“æŸå°±è¢«é‡Šæ”¾ï¼Œå¹¶ä¸”ç¼“å­˜æ—¶é—´ä¹Ÿå¾ˆçŸ­æš‚ï¼Œåœ¨ Chrome æµè§ˆå™¨ä¸­åªæœ‰ 5 åˆ†é’Ÿå·¦å³ï¼ŒåŒæ—¶å®ƒä¹Ÿå¹¶éä¸¥æ ¼æ‰§è¡Œ HTTP å¤´ä¸­çš„ç¼“å­˜æŒ‡ä»¤ã€‚</p><ul><li>å¯ä»¥æ¨é€ no-cache å’Œ no-store çš„èµ„æº</li><li>ä¸€æ—¦è¿æ¥è¢«å…³é—­ï¼ŒPush Cache å°±è¢«é‡Šæ”¾</li><li>å¤šä¸ªé¡µé¢å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ª HTTP/2 çš„è¿æ¥ï¼Œå¯ä»¥ä½¿ç”¨åŒä¸€ä¸ª Push Cacheï¼Œæœ‰çš„æµè§ˆå™¨ä¼šå¯¹ç›¸åŒåŸŸåä½†ä¸åŒçš„ tab æ ‡ç­¾ä½¿ç”¨åŒä¸€ä¸ª HTTP è¿æ¥ã€‚</li><li>Push Cache ä¸­çš„ç¼“å­˜åªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡</li><li>æµè§ˆå™¨å¯ä»¥æ‹’ç»æ¥å—å·²ç»å­˜åœ¨çš„èµ„æºæ¨é€</li><li>ä½ å¯ä»¥ç»™å…¶ä»–åŸŸåæ¨é€èµ„æº</li></ul><p>å…¶ä»–</p><ol><li>CDN Cache</li></ol><p>ä»¥è…¾è®¯ CDN ä¸ºä¾‹ï¼šX-Cache-Lookup:Hit From MemCache è¡¨ç¤ºå‘½ä¸­ CDN èŠ‚ç‚¹çš„å†…å­˜ï¼›X-Cache-Lookup:Hit From Disktank è¡¨ç¤ºå‘½ä¸­ CDN èŠ‚ç‚¹çš„ç£ç›˜ï¼›X-Cache-Lookup:Hit From Upstream è¡¨ç¤ºæ²¡æœ‰å‘½ä¸­ CDNã€‚</p><ol start="2"><li>å…¶ä»–çš„ä¸å±•å¼€äº†ï¼Œå…·ä½“å‚è€ƒä¸‹é¢çš„ æ‰€æœ‰ç¼“å­˜æœºåˆ¶çš„è§£è¯»</li></ol><p>IndexDB(æµè§ˆå™¨æœ¬åœ°å­˜å‚¨)ï¼ŒService Workerï¼ŒLocalStorageï¼ŒSessionStorage</p><h4 id="ç”¨æˆ·è¡Œä¸ºå¦‚ä½•è§¦å‘ç¼“å­˜ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#ç”¨æˆ·è¡Œä¸ºå¦‚ä½•è§¦å‘ç¼“å­˜ç­–ç•¥" aria-hidden="true">#</a> ç”¨æˆ·è¡Œä¸ºå¦‚ä½•è§¦å‘ç¼“å­˜ç­–ç•¥</h4><ol><li><p>æ‰“å¼€ç½‘é¡µï¼Œåœ°å€æ è¾“å…¥åœ°å€ï¼šæŸ¥æ‰¾ disk cache ä¸­æ˜¯å¦æœ‰åŒ¹é…ã€‚å¦‚æœ‰åˆ™ä½¿ç”¨ï¼›å¦‚æ²¡æœ‰åˆ™å‘é€ç½‘ç»œè¯·æ±‚ã€‚</p></li><li><p>æ™®é€šåˆ·æ–° (F5)ï¼šè·³è¿‡å¼ºç¼“å­˜ï¼Œä½†æ˜¯ä¼šæ£€æŸ¥åå•†ç¼“å­˜ (å› ä¸º TAB å¹¶æ²¡æœ‰å…³é—­ï¼Œå› æ­¤ memory cache æ˜¯å¯ç”¨çš„ï¼Œä¼šè¢«ä¼˜å…ˆä½¿ç”¨ (å¦‚æœåŒ¹é…çš„è¯)ã€‚å…¶æ¬¡æ‰æ˜¯ disk cache)ã€‚</p></li></ol><ul><li>å½“ä½ ç‚¹â€œåˆ·æ–°â€æŒ‰é’®çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šåœ¨è¯·æ±‚å¤´é‡ŒåŠ ä¸€ä¸ªâ€œCache-Control: maxage=0â€ã€‚å› ä¸º max-age æ˜¯â€œç”Ÿå­˜æ—¶é—´â€ï¼Œè€Œæœ¬åœ°ç¼“å­˜é‡Œçš„æ•°æ®è‡³å°‘ä¿å­˜äº†å‡ ç§’é’Ÿï¼Œæ‰€ä»¥æµè§ˆå™¨å°±ä¸ä¼šä½¿ç”¨ç¼“å­˜ï¼Œè€Œæ˜¯å‘æœåŠ¡å™¨å‘è¯·æ±‚ã€‚æœåŠ¡å™¨çœ‹åˆ° max-age=0ï¼Œä¹Ÿå°±ä¼šç”¨ä¸€ä¸ªæœ€æ–°ç”Ÿæˆçš„æŠ¥æ–‡å›åº”æµè§ˆå™¨ã€‚</li></ul><ol start="3"><li>å¼ºåˆ¶åˆ·æ–° (Ctrl + F5)ï¼šæµè§ˆå™¨ä¸ä½¿ç”¨ç¼“å­˜ (è·³è¿‡å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜)ï¼Œç›´æ¥ä»æœåŠ¡å™¨åŠ è½½ï¼Œå› æ­¤å‘é€çš„è¯·æ±‚å¤´éƒ¨å‡å¸¦æœ‰ Cache-control: no-cache(ä¸ºäº†å…¼å®¹ï¼Œè¿˜å¸¦äº† Pragma: no-cache),æœåŠ¡å™¨ç›´æ¥è¿”å› 200 å’Œæœ€æ–°å†…å®¹ã€‚</li></ol><ul><li>â€œCache-Control: no-cacheâ€ï¼Œå«ä¹‰å’Œâ€œmax-age=0â€åŸºæœ¬ä¸€æ ·ï¼Œå°±çœ‹åå°çš„æœåŠ¡å™¨æ€ä¹ˆç†è§£ï¼Œé€šå¸¸ä¸¤è€…çš„æ•ˆæœæ˜¯ç›¸åŒçš„ã€‚</li></ul><h4 id="æœ€ä½³ç¼“å­˜ç­–ç•¥-1" tabindex="-1"><a class="header-anchor" href="#æœ€ä½³ç¼“å­˜ç­–ç•¥-1" aria-hidden="true">#</a> æœ€ä½³ç¼“å­˜ç­–ç•¥</h4><p>å®šä¹‰æœ€ä¼˜ç¼“å­˜ç­–ç•¥</p><ul><li><p>æ›´æ–°é¢‘ç¹çš„åº”è¯¥æå–ä¸ºå•æ–‡ä»¶ï¼šæœ‰äº›èµ„æºçš„æ›´æ–°æ¯”å…¶ä»–èµ„æºé¢‘ç¹ã€‚å¦‚æœèµ„æºçš„ç‰¹å®šéƒ¨åˆ†ï¼ˆä¾‹å¦‚ JS å‡½æ•°æˆ–ä¸€ç»„ CSS æ ·å¼ï¼‰ä¼šç»å¸¸æ›´æ–°ï¼Œåº”è€ƒè™‘å°†å…¶ä»£ç ä½œä¸ºå•ç‹¬çš„æ–‡ä»¶æä¾›ã€‚è¿™æ ·ï¼Œæ¯æ¬¡è·å–æ›´æ–°æ—¶ï¼Œå‰©ä½™å†…å®¹ï¼ˆä¾‹å¦‚ä¸ä¼šé¢‘ç¹æ›´æ–°çš„åº“ä»£ç ï¼‰å¯ä»¥ä»ç¼“å­˜ä¸­è·å–ï¼Œç¡®ä¿ä¸‹è½½çš„å†…å®¹é‡æœ€å°‘ï¼›</p></li><li><p>ç¡®ä¿æœåŠ¡å™¨é…ç½®æˆ–ç§»é™¤ ETagï¼šå› ä¸º Etag è·ŸæœåŠ¡å™¨é…ç½®æœ‰å…³ï¼Œæ¯å°æœåŠ¡å™¨çš„ Etag éƒ½æ˜¯ä¸åŒçš„ï¼›å…¶ä»–</p></li><li><p>ç¡®å®šä¸­ç»§ç¼“å­˜å¯ä»¥ç¼“å­˜å“ªäº›èµ„æºï¼šå¯¹æ‰€æœ‰ç”¨æˆ·çš„å“åº”å®Œå…¨ç›¸åŒçš„èµ„æºå¾ˆé€‚åˆç”± CDN æˆ–å…¶ä»–ä¸­ç»§ç¼“å­˜è¿›è¡Œç¼“å­˜ï¼›</p></li><li><p>ä½¿ç”¨ä¸€è‡´çš„ç½‘å€ï¼šå¦‚æœæ‚¨åœ¨ä¸åŒçš„ç½‘å€ä¸Šæä¾›ç›¸åŒçš„å†…å®¹ï¼Œå°†ä¼šå¤šæ¬¡è·å–å’Œå­˜å‚¨è¯¥å†…å®¹ã€‚æ³¨æ„ï¼šURL åŒºåˆ†å¤§å°å†™ï¼</p></li><li><p>ç¡®å®šæ¯ä¸ªèµ„æºçš„æœ€ä¼˜ç¼“å­˜å‘¨æœŸï¼šä¸åŒçš„èµ„æºå¯èƒ½æœ‰ä¸åŒçš„æ›´æ–°è¦æ±‚ã€‚å®¡æŸ¥å¹¶ç¡®å®šæ¯ä¸ªèµ„æºé€‚åˆçš„ max-ageï¼›</p></li><li><p>ç¡®å®šç½‘ç«™çš„æœ€ä½³ç¼“å­˜å±‚çº§ï¼šå¯¹ HTML æ–‡æ¡£ç»„åˆä½¿ç”¨åŒ…å«å†…å®¹ç‰¹å¾ç çš„èµ„æºç½‘å€ä»¥åŠçŸ­æ—¶é—´æˆ– no-cache çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥æ§åˆ¶å®¢æˆ·ç«¯è·å–æ›´æ–°çš„é€Ÿåº¦ï¼›</p></li><li><p>å–„ç”¨ HTML5 çš„ç¼“å­˜æœºåˆ¶ï¼šåˆç†è®¾è®¡å¯ç”¨ LocalStorageã€SessionStorageã€IndexDBã€SW ç­‰å­˜å‚¨ï¼Œä¼šç»™é¡µé¢æ€§èƒ½å¸¦æ¥æ˜æ˜¾æå‡ï¼›</p></li><li><p>ç”¨å¥½æœ¬åœ°ç¼“å­˜</p></li></ul><p><img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202130038910.png" alt=""></p><h3 id="å‚è€ƒèµ„æ–™" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-hidden="true">#</a> å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.jiqizhixin.com/articles/2020-07-24-12" target="_blank" rel="noopener noreferrer">æ‰€æœ‰ç¼“å­˜æœºåˆ¶çš„è§£è¯»<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://developer.huawei.com/consumer/cn/forum/topic/0202357360658600848" target="_blank" rel="noopener noreferrer">å‰ç«¯å­¦ä¹ ä¹‹æµè§ˆå™¨ç¼“å­˜æœºåˆ¶<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://cloud.tencent.com/developer/news/588770" target="_blank" rel="noopener noreferrer">èµ„æ–™<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://shanyue.tech/frontend-engineering/http-cache.html" target="_blank" rel="noopener noreferrer">å±±æœˆ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching" target="_blank" rel="noopener noreferrer">MDN-caching<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://zhuanlan.zhihu.com/p/111190645" target="_blank" rel="noopener noreferrer">ç¼“å­˜ç­–ç•¥ï¼šå¼ºç¼“å­˜&amp;åå•†ç¼“å­˜<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.kancloud.cn/cyyspring/webpack/1836682" target="_blank" rel="noopener noreferrer">æ–‡ä»¶æŒ‡çº¹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="cookie-å’Œ-session-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#cookie-å’Œ-session-çš„åŒºåˆ«" aria-hidden="true">#</a> cookie å’Œ session çš„åŒºåˆ«</h2><p>1.ä½¿ç”¨æ–¹å¼</p><p>cookie æœºåˆ¶ï¼šå¦‚æœä¸åœ¨æµè§ˆå™¨ä¸­è®¾ç½®è¿‡æœŸäº‹ä»¶ï¼Œcookie è¢«ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸéšæµè§ˆå™¨çš„å…³é—­è€Œç»“æŸï¼Œè¿™ç§ cookie ç®€ç§°ä¸ºä¼šè¯ cookieã€‚å¦‚æœåœ¨æµè§ˆå™¨ä¸­è®¾ç½®äº† cookie çš„è¿‡æœŸäº‹ä»¶ï¼Œcookie ä¼šè¢«ä¿å­˜åœ¨ç¡¬ç›˜ä¸­ï¼Œå…³é—­æµè§ˆå™¨åï¼Œcookie æ•°æ®ä»ç„¶å­˜åœ¨ï¼Œç›´åˆ°è¿‡æœŸäº‹ä»¶ç»“æŸæ‰æ¶ˆå¤±ã€‚cookie æ˜¯æœåŠ¡ç«¯å‘ç»™å®¢æˆ·ç«¯çš„ç‰¹æ®Šä¿¡æ¯ï¼Œcookie æ˜¯ä»¥æ–‡æœ¬çš„æ–¹å¼ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œæ¯æ¬¡è¯·æ±‚æ—¶éƒ½å¸¦ä¸Šå®ƒ</p><p>session æœºåˆ¶ï¼šå½“æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚éœ€è¦åˆ›å»º session å¯¹è±¡æ—¶ï¼Œé¦–å…ˆä¼šæ£€æŸ¥å®¢æˆ·ç«¯è¯·æ±‚ä¸­æ˜¯å¦åŒ…å« sessionidã€‚å¦‚æœæœ‰ sessionidï¼ŒæœåŠ¡å™¨å°†æ ¹æ®è¯¥ id è¿”å›å¯¹åº” session å¯¹è±¡ã€‚å¦‚æœå®¢æˆ·ç«¯è¯·æ±‚ä¸­æ²¡æœ‰ sessionidï¼ŒæœåŠ¡å™¨ä¼šåˆ›å»ºæ–°çš„ session å¯¹è±¡ï¼Œå¹¶æŠŠ sessionid åœ¨æœ¬æ¬¡å“åº”ä¸­è¿”å›ç»™å®¢æˆ·ç«¯ã€‚é€šå¸¸ä½¿ç”¨ cookie æ–¹å¼å­˜å‚¨ sessionid åˆ°å®¢æˆ·ç«¯ï¼Œåœ¨äº¤äº’ä¸­æµè§ˆå™¨æŒ‰ç…§è§„åˆ™å°† sessionid å‘é€ç»™æœåŠ¡å™¨ã€‚å¦‚æœç”¨æˆ·ç¦ç”¨ cookieï¼Œåˆ™è¦ä½¿ç”¨ URL é‡å†™ï¼Œå¯ä»¥é€šè¿‡ response.encodeURL(url) è¿›è¡Œå®ç°ï¼›API å¯¹ encodeURL çš„ç»“æŸä¸ºï¼Œå½“æµè§ˆå™¨æ”¯æŒ cookie æ—¶ï¼Œurl ä¸åšä»»ä½•å¤„ç†ï¼›å½“æµè§ˆå™¨ä¸æ”¯æŒ cookie çš„æ—¶å€™ï¼Œå°†ä¼šé‡å†™ URL å°† sessionid æ‹¼æ¥åˆ°è®¿é—®åœ°å€åã€‚</p><p>2.ä¿æŒçŠ¶æ€</p><p>cookie ä¿å­˜åœ¨æµè§ˆå™¨ç«¯ï¼Œsession ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯</p><p>3.å­˜å‚¨çš„å¤§å°</p><p>å•ä¸ª cookie ä¿å­˜çš„æ•°æ®ä¸èƒ½è¶…è¿‡ 4kbï¼›session å¤§å°æ²¡æœ‰é™åˆ¶ã€‚</p><p>4.å­˜å‚¨å†…å®¹</p><p>cookie åªèƒ½ä¿å­˜å­—ç¬¦ä¸²ç±»å‹ï¼Œä»¥æ–‡æœ¬çš„æ–¹å¼ã€‚session é€šè¿‡ç±»ä¼¼ä¸ Hashtable çš„æ•°æ®ç»“æ„æ¥ä¿å­˜ï¼Œèƒ½æ”¯æŒä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ˆsession ä¸­å¯å«æœ‰å¤šä¸ªå¯¹è±¡ï¼‰</p><p>5.å®‰å…¨æ€§</p><p>session çš„å®‰å…¨æ€§å¤§äº cookieã€‚åŸå› å¦‚ä¸‹ï¼š</p><p>â‘  sessionid å­˜å‚¨åœ¨ cookie ä¸­ï¼Œè‹¥è¦æ”»ç ´ session é¦–å…ˆè¦æ”»ç ´ cookieï¼› â‘¡ sessionid æ˜¯è¦æœ‰äººç™»å½•ï¼Œæˆ–è€…å¯åŠ¨ session_start æ‰ä¼šæœ‰ï¼Œæ‰€ä»¥æ”»ç ´ cookie ä¹Ÿä¸ä¸€å®šèƒ½å¾—åˆ° sessionidï¼› â‘¢ ç¬¬äºŒæ¬¡å¯åŠ¨ session_start åï¼Œå‰ä¸€æ¬¡çš„ sessionid å°±æ˜¯å¤±æ•ˆäº†ï¼Œsession è¿‡æœŸåï¼Œsessionid ä¹Ÿéšä¹‹å¤±æ•ˆã€‚ â‘£ sessionid æ˜¯åŠ å¯†çš„ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæ”»å‡»è€…å¿…é¡»åœ¨çŸ­æ—¶é—´å†…æ”»ç ´åŠ å¯†çš„ sessionidï¼Œè¿™å¾ˆéš¾ã€‚</p><p>6.åº”ç”¨åœºæ™¯</p><p>cookieï¼šï¼ˆ1ï¼‰åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•è¿‡ç½‘ç«™ï¼Œä»¥ä¾¿ä¸‹æ¬¡ç™»å½•æ—¶èƒ½å¤Ÿå®ç°è‡ªåŠ¨ç™»å½•ï¼ˆæˆ–è€…è®°ä½å¯†ç ï¼‰ã€‚ï¼ˆ2ï¼‰ä¿å­˜ä¸Šæ¬¡ç™»å½•çš„äº‹ä»¶ç­‰ä¿¡æ¯ã€‚ï¼ˆ3ï¼‰ä¿å­˜ä¸Šæ¬¡æŸ¥çœ‹çš„é¡µé¢ ï¼ˆ4ï¼‰æµè§ˆè®¡æ•°</p><p>sessionï¼š</p><p>ï¼ˆ1ï¼‰ç½‘ä¸Šå•†åŸä¸­çš„è´­ç‰©è½¦ï¼ˆ2ï¼‰ä¿å­˜ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼ˆ3ï¼‰å°†æŸäº›æ•°æ®æ”¾å…¥ session ä¸­ï¼Œä¾›åŒä¸€ç”¨æˆ·çš„ä¸åŒé¡µé¢ä½¿ç”¨ï¼ˆ4ï¼‰é˜²æ­¢ç”¨æˆ·éæ³•ç™»å½•</p><h3 id="localstorage-å’Œ-sessionstorage-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#localstorage-å’Œ-sessionstorage-çš„åŒºåˆ«" aria-hidden="true">#</a> localStorage å’Œ sessionStorage çš„åŒºåˆ«</h3><p>1.ç”Ÿå‘½å‘¨æœŸ</p><p>localStorage çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ°¸ä¹…çš„ï¼Œå…³é—­é¡µé¢æˆ–æµè§ˆå™¨ä¹‹å localStorage ä¸­çš„æ•°æ®ä¹Ÿä¸ä¼šæ¶ˆå¤±ã€‚localStorage é™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼Œå¦åˆ™æ•°æ®æ°¸è¿œä¸ä¼šæ¶ˆå¤±ã€‚</p><p>sessionStorage çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»…åœ¨å½“å‰ä¼šè¯ä¸‹æœ‰æ•ˆã€‚sessionStorage å¼•å…¥äº†ä¸€ä¸ªâ€œæµè§ˆå™¨çª—å£â€çš„æ¦‚å¿µï¼ŒsessionStorage æ˜¯åœ¨åŒæºçš„çª—å£ä¸­å§‹ç»ˆå­˜åœ¨çš„æ•°æ®ã€‚åªè¦è¿™ä¸ªæµè§ˆå™¨çª—å£æ²¡æœ‰å…³é—­ï¼Œå³ä½¿åˆ·æ–°é¡µé¢æˆ–è€…è¿›å…¥åŒæºå¦ä¸€ä¸ªé¡µé¢ï¼Œæ•°æ®ä¾ç„¶å­˜åœ¨ã€‚ä½†æ˜¯ sessionStorage åœ¨å…³é—­äº†æµè§ˆå™¨çª—å£åå°±ä¼šè¢«é”€æ¯ã€‚åŒæ—¶ç‹¬ç«‹çš„æ‰“å¼€åŒä¸€ä¸ªçª—å£åŒä¸€ä¸ªé¡µé¢ï¼ŒsessionStorage ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>2.å­˜å‚¨å¤§å°</p><p>localStorage å’Œ sessionStorage çš„å­˜å‚¨æ•°æ®å¤§å°ä¸€èˆ¬éƒ½æ˜¯ï¼š5MB</p><p>3.å­˜å‚¨ä½ç½®</p><p>localStorage å’Œ sessionStorage éƒ½ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œä¸ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’é€šä¿¡</p><p>4.å­˜å‚¨å†…å®¹ç±»å‹</p><p>localStorage å’Œ sessionStorage åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ç±»å‹ï¼Œå¯¹äºå¤æ‚çš„å¯¹è±¡å¯ä»¥ä½¿ç”¨ ECMAScript æä¾›çš„ JSON å¯¹è±¡çš„ stringify å’Œ parse æ¥å¤„ç†</p><p>5.åº”ç”¨åœºæ™¯</p><p>localStorageï¼šå¸¸ç”¨äºé•¿æœŸç™»å½•ï¼ˆ+ åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç™»å½•ï¼‰ï¼Œé€‚åˆé•¿æœŸä¿å­˜åœ¨æœ¬åœ°çš„æ•°æ®</p><p>sessionStorageï¼šæ•æ„Ÿè´¦å·ä¸€æ¬¡æ€§ç™»å½•</p><h3 id="cookie-ä¸­çš„-httponly-çš„å±æ€§å’Œä½œç”¨" tabindex="-1"><a class="header-anchor" href="#cookie-ä¸­çš„-httponly-çš„å±æ€§å’Œä½œç”¨" aria-hidden="true">#</a> Cookie ä¸­çš„ httponly çš„å±æ€§å’Œä½œç”¨</h3><p>1.ä»€ä¹ˆæ˜¯ HttpOnly?</p><p>å¦‚æœ cookie ä¸­è®¾ç½®äº† HttpOnly å±æ€§ï¼Œé‚£ä¹ˆï¼Œè¿™æ ·èƒ½æœ‰æ•ˆçš„é˜²æ­¢ XSS æ”»å‡»ï¼Œçªƒå– cookie å†…å®¹ï¼Œè¿™æ ·å°±å¢åŠ äº† cookie çš„å®‰å…¨æ€§ï¼Œå³ä¾¿æ˜¯è¿™æ ·ï¼Œä¹Ÿä¸è¦å°†é‡è¦ä¿¡æ¯å­˜å…¥ cookieã€‚XSS å…¨ç§° Cross SiteScriptï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼Œæ˜¯ Web ç¨‹åºä¸­å¸¸è§çš„æ¼æ´ï¼ŒXSS å±äºè¢«åŠ¨å¼ä¸”ç”¨äºå®¢æˆ·ç«¯çš„æ”»å‡»æ–¹å¼ï¼Œæ‰€ä»¥å®¹æ˜“è¢«å¿½ç•¥å…¶å±å®³æ€§ã€‚å…¶åŸç†æ˜¯æ”»å‡»è€…å‘æœ‰ XSS æ¼æ´çš„ç½‘ç«™ä¸­è¾“å…¥ (ä¼ å…¥) æ¶æ„çš„ HTML ä»£ç ï¼Œå½“å…¶å®ƒç”¨æˆ·æµè§ˆè¯¥ç½‘ç«™æ—¶ï¼Œè¿™æ®µ HTML ä»£ç ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ”»å‡»çš„ç›®çš„ã€‚å¦‚ï¼Œç›—å–ç”¨æˆ· Cookieã€ç ´åé¡µé¢ç»“æ„ã€é‡å®šå‘åˆ°å…¶å®ƒç½‘ç«™ç­‰ã€‚</p><p>2.HttpOnly çš„è®¾ç½®æ ·ä¾‹</p><p>response.setHeader(&quot;Set-Cookie&quot;, &quot;cookiename=httponlyTest;Path=/;Domain=domainvalue;Max-Age=seconds;HTTPOnly&quot;); ä¾‹å¦‚ï¼š //è®¾ç½® cookie</p><p>response.addHeader(&quot;Set-Cookie&quot;, &quot;uid=112; Path=/; HttpOnly&quot;)</p><p>//è®¾ç½®å¤šä¸ª cookie</p><p>response.addHeader(&quot;Set-Cookie&quot;, &quot;uid=112; Path=/; HttpOnly&quot;);</p><p>response.addHeader(&quot;Set-Cookie&quot;, &quot;timeout=30; Path=/test; HttpOnly&quot;);</p><p>//è®¾ç½® https çš„ cookie</p><p>response.addHeader(&quot;Set-Cookie&quot;, &quot;uid=112; Path=/; Secure; HttpOnly&quot;);</p><p>å…·ä½“å‚æ•°çš„å«ä¹‰å†æ¬¡ä¸åšé˜è¿°ï¼Œè®¾ç½®å®Œæ¯•åé€šè¿‡ js è„šæœ¬æ˜¯è¯»ä¸åˆ°è¯¥ cookie çš„ï¼Œä½†ä½¿ç”¨å¦‚ä¸‹æ–¹å¼å¯ä»¥è¯»å–ã€‚</p><p>Cookie cookies[]=request.getCookies();</p><h3 id="å‚è€ƒ-èµ„æ–™" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒ-èµ„æ–™" aria-hidden="true">#</a> å‚è€ƒ/èµ„æ–™</h3><ul><li><a href="https://github.com/xuexueq/blog/issues/5" target="_blank" rel="noopener noreferrer">æµè§ˆå™¨å­˜å‚¨æ–¹æ¡ˆï¼ˆCookieã€LocalStorageã€SessionStorageï¼‰<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="package-json" tabindex="-1"><a class="header-anchor" href="#package-json" aria-hidden="true">#</a> package.json</h2><h3 id="dependencies-ä¸-devdependencies-æœ‰ä½•åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#dependencies-ä¸-devdependencies-æœ‰ä½•åŒºåˆ«" aria-hidden="true">#</a> dependencies ä¸ devDependencies æœ‰ä½•åŒºåˆ«</h3><ul><li>å¯¹äºä¸šåŠ¡ä»£ç ï¼Œæ‰“åŒ…æ—¶ä¾é çš„æ˜¯ bundle çš„ä¾èµ–åˆ†æï¼Œä¸ dev æ— å…³</li><li>å¯¹äºåº“è€Œè¨€ï¼Œå½“åº“è¢«å¼•å…¥æ—¶ï¼Œdev ä¸­çš„ä¾èµ–ä¸ä¼šè¢«ä¸‹è½½</li></ul><h3 id="cjsã€esã€umd" tabindex="-1"><a class="header-anchor" href="#cjsã€esã€umd" aria-hidden="true">#</a> cjsã€esã€umd</h3><ol><li>cjs æ˜¯åŠ¨æ€åŠ è½½æ¨¡å—ï¼Œå¯ä»¥ç›´æ¥ require ä¸€ä¸ªå˜é‡</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ol start="2"><li>esm æ˜¯è¯­è¨€ä¸Šçš„è§„èŒƒï¼Œå› æ­¤åœ¨ Node åŠ æµè§ˆå™¨ä¸­å‡ä¼šæ”¯æŒ</li></ol><ul><li>esm æ˜¯é™æ€å¯¼å…¥ï¼Œå¯ä»¥åœ¨ç¼–è¯‘æœŸè¿›è¡Œ Tree shakingï¼Œå‡å°‘ js ä½“ç§¯</li><li>å¦‚æœè¦åŠ¨æ€å¯¼å…¥ï¼Œå¯ä»¥<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> ms <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;https://cdn.skypack.dev/ms@latest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ms<span class="token punctuation">.</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/trdthg/edit/main/frontend/http.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.cefaa7da.js" defer></script>
  </body>
</html>
