<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.35">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202022217241.jpg"><title>go è¯­è¨€ | Trdthg's blog</title><meta name="description" content="Welcome to Trdthg's blog">
    <link rel="modulepreload" href="/assets/app.cefaa7da.js"><link rel="modulepreload" href="/assets/go.html.152ec99f.js"><link rel="modulepreload" href="/assets/go.html.2a961cca.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/assets/style.e8e8fc80.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">Trdthg&#39;s blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/rust/rust" class="" aria-label="è¯­è¨€ç‰¹æ€§"><!--[--><!--]--> è¯­è¨€ç‰¹æ€§ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/print_into_detail" class="" aria-label="print å®è¯¦è§£"><!--[--><!--]--> print å®è¯¦è§£ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/rs_channel" class="" aria-label="channel æºç å‰–æ doing"><!--[--><!--]--> channel æºç å‰–æ doing <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/wasm" class="" aria-label="Wasm"><!--[--><!--]--> Wasm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/lists" class="" aria-label="Rust é“¾è¡¨"><!--[--><!--]--> Rust é“¾è¡¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/go" class="router-link-active" aria-label="Go å­¦ä¹ ç¬”è®°"><!--[--><!--]--> Go å­¦ä¹ ç¬”è®° <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/magic/haskell" class="" aria-label="Haskell å­¦ä¹ ç¬”è®°"><!--[--><!--]--> Haskell å­¦ä¹ ç¬”è®° <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/fd" class="" aria-label="æ–‡ä»¶æè¿°ç¬¦"><!--[--><!--]--> æ–‡ä»¶æè¿°ç¬¦ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/linuxIO" class="" aria-label="IO å¤šè·¯å¤ç”¨"><!--[--><!--]--> IO å¤šè·¯å¤ç”¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/memory_ordering" class="" aria-label="åŸå­æ“ä½œ/å†…å­˜é¡ºåº"><!--[--><!--]--> åŸå­æ“ä½œ/å†…å­˜é¡ºåº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/async" class="" aria-label="åç¨‹å¼‚æ­¥æ€è€ƒ"><!--[--><!--]--> åç¨‹å¼‚æ­¥æ€è€ƒ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/software_arch" class="" aria-label="è½¯ä»¶æ¶æ„"><!--[--><!--]--> è½¯ä»¶æ¶æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/cicd" class="" aria-label="CI/CD"><!--[--><!--]--> CI/CD <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æ‚æ–‡ ğŸ±"><span class="title">æ‚æ–‡ ğŸ±</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æ‚æ–‡ ğŸ±"><span class="title">æ‚æ–‡ ğŸ±</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/articles/menu" class="" aria-label="ä¼˜è´¨æ–‡ç« èµ„æº"><!--[--><!--]--> ä¼˜è´¨æ–‡ç« èµ„æº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/i3wm" class="" aria-label="æŠ˜è…¾ i3wm"><!--[--><!--]--> æŠ˜è…¾ i3wm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/tail_latency" class="" aria-label="(è¯‘) å°¾éƒ¨å»¶è¿Ÿ"><!--[--><!--]--> (è¯‘) å°¾éƒ¨å»¶è¿Ÿ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/search_engine" class="" aria-label="(è¯‘) æŸ¥è¯¢å¼•æ“"><!--[--><!--]--> (è¯‘) æŸ¥è¯¢å¼•æ“ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>å‰ç«¯ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/frontend/vdom" class="" aria-label="è™šæ‹Ÿ DOM"><!--[--><!--]--> è™šæ‹Ÿ DOM <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/js_advanced" class="" aria-label="Js è¿›é˜¶"><!--[--><!--]--> Js è¿›é˜¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/list" class="" aria-label="èµ„æ–™"><!--[--><!--]--> èµ„æ–™ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/vue" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/http" class="" aria-label="HTTP ç›¸å…³"><!--[--><!--]--> HTTP ç›¸å…³ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/flutter" class="" aria-label="Flutter"><!--[--><!--]--> Flutter <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Python ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/other/python" class="" aria-label="æ€»è§ˆ"><!--[--><!--]--> æ€»è§ˆ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Java ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/java/java" class="" aria-label="åŸºç¡€çŸ¥è¯†"><!--[--><!--]--> åŸºç¡€çŸ¥è¯† <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/sourceread" class="" aria-label="éƒ¨åˆ†æºç "><!--[--><!--]--> éƒ¨åˆ†æºç  <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/spring" class="" aria-label="Spring æ¡†æ¶"><!--[--><!--]--> Spring æ¡†æ¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/springboot" class="" aria-label="å¸¸ç”¨å·¥å…·"><!--[--><!--]--> å¸¸ç”¨å·¥å…· <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å°ç©å…· ğŸ®"><span class="title">å°ç©å…· ğŸ®</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å°ç©å…· ğŸ®"><span class="title">å°ç©å…· ğŸ®</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/projects/mini_vue" class="" aria-label="Mini-Vue"><!--[--><!--]--> Mini-Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/projects/mini_bundle" class="" aria-label="æ‰“åŒ…å™¨"><!--[--><!--]--> æ‰“åŒ…å™¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/projects/mini_tokio" class="" aria-label="å¼‚æ­¥è¿è¡Œæ—¶"><!--[--><!--]--> å¼‚æ­¥è¿è¡Œæ—¶ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>åˆ†äº«</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/share_1" class="" aria-label="å…³äºæ•°æ®åº“ä¸ B+ æ ‘"><!--[--><!--]--> å…³äºæ•°æ®åº“ä¸ B+ æ ‘ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>æˆè¯¾</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_1" class="" aria-label="åç«¯ 1"><!--[--><!--]--> åç«¯ 1 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_2" class="" aria-label="åç«¯ 2"><!--[--><!--]--> åç«¯ 2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_3" class="" aria-label="åç«¯ 3"><!--[--><!--]--> åç«¯ 3 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_4" class="" aria-label="åç«¯ 4"><!--[--><!--]--> åç«¯ 4 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="èµ„æ–™åº“ ğŸ“¦"><span class="title">èµ„æ–™åº“ ğŸ“¦</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="èµ„æ–™åº“ ğŸ“¦"><span class="title">èµ„æ–™åº“ ğŸ“¦</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/other/hadoop" class="" aria-label="å¤§æ•°æ®"><!--[--><!--]--> å¤§æ•°æ® <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/script" class="" aria-label="è„šæœ¬"><!--[--><!--]--> è„šæœ¬ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/datastructure" class="" aria-label="æ•°æ®ç»“æ„"><!--[--><!--]--> æ•°æ®ç»“æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/vim" class="" aria-label="Vim"><!--[--><!--]--> Vim <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/git" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/docker" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/analyze" class="" aria-label="æ€§èƒ½ç›‘æµ‹å·¥å…·"><!--[--><!--]--> æ€§èƒ½ç›‘æµ‹å·¥å…· <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/oci" class="" aria-label="OCI è§„èŒƒ"><!--[--><!--]--> OCI è§„èŒƒ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/oauth2" class="" aria-label="OAuth2.0"><!--[--><!--]--> OAuth2.0 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/trdthg" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="åˆ‡æ¢å¤œé—´"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/rust/rust" class="" aria-label="è¯­è¨€ç‰¹æ€§"><!--[--><!--]--> è¯­è¨€ç‰¹æ€§ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/print_into_detail" class="" aria-label="print å®è¯¦è§£"><!--[--><!--]--> print å®è¯¦è§£ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/rs_channel" class="" aria-label="channel æºç å‰–æ doing"><!--[--><!--]--> channel æºç å‰–æ doing <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/wasm" class="" aria-label="Wasm"><!--[--><!--]--> Wasm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/lists" class="" aria-label="Rust é“¾è¡¨"><!--[--><!--]--> Rust é“¾è¡¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/go" class="router-link-active" aria-label="Go å­¦ä¹ ç¬”è®°"><!--[--><!--]--> Go å­¦ä¹ ç¬”è®° <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/magic/haskell" class="" aria-label="Haskell å­¦ä¹ ç¬”è®°"><!--[--><!--]--> Haskell å­¦ä¹ ç¬”è®° <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/fd" class="" aria-label="æ–‡ä»¶æè¿°ç¬¦"><!--[--><!--]--> æ–‡ä»¶æè¿°ç¬¦ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/linuxIO" class="" aria-label="IO å¤šè·¯å¤ç”¨"><!--[--><!--]--> IO å¤šè·¯å¤ç”¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/memory_ordering" class="" aria-label="åŸå­æ“ä½œ/å†…å­˜é¡ºåº"><!--[--><!--]--> åŸå­æ“ä½œ/å†…å­˜é¡ºåº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/async" class="" aria-label="åç¨‹å¼‚æ­¥æ€è€ƒ"><!--[--><!--]--> åç¨‹å¼‚æ­¥æ€è€ƒ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/software_arch" class="" aria-label="è½¯ä»¶æ¶æ„"><!--[--><!--]--> è½¯ä»¶æ¶æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/cicd" class="" aria-label="CI/CD"><!--[--><!--]--> CI/CD <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æ‚æ–‡ ğŸ±"><span class="title">æ‚æ–‡ ğŸ±</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æ‚æ–‡ ğŸ±"><span class="title">æ‚æ–‡ ğŸ±</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/articles/menu" class="" aria-label="ä¼˜è´¨æ–‡ç« èµ„æº"><!--[--><!--]--> ä¼˜è´¨æ–‡ç« èµ„æº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/i3wm" class="" aria-label="æŠ˜è…¾ i3wm"><!--[--><!--]--> æŠ˜è…¾ i3wm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/tail_latency" class="" aria-label="(è¯‘) å°¾éƒ¨å»¶è¿Ÿ"><!--[--><!--]--> (è¯‘) å°¾éƒ¨å»¶è¿Ÿ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/search_engine" class="" aria-label="(è¯‘) æŸ¥è¯¢å¼•æ“"><!--[--><!--]--> (è¯‘) æŸ¥è¯¢å¼•æ“ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>å‰ç«¯ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/frontend/vdom" class="" aria-label="è™šæ‹Ÿ DOM"><!--[--><!--]--> è™šæ‹Ÿ DOM <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/js_advanced" class="" aria-label="Js è¿›é˜¶"><!--[--><!--]--> Js è¿›é˜¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/list" class="" aria-label="èµ„æ–™"><!--[--><!--]--> èµ„æ–™ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/vue" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/http" class="" aria-label="HTTP ç›¸å…³"><!--[--><!--]--> HTTP ç›¸å…³ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/flutter" class="" aria-label="Flutter"><!--[--><!--]--> Flutter <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Python ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/other/python" class="" aria-label="æ€»è§ˆ"><!--[--><!--]--> æ€»è§ˆ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Java ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/java/java" class="" aria-label="åŸºç¡€çŸ¥è¯†"><!--[--><!--]--> åŸºç¡€çŸ¥è¯† <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/sourceread" class="" aria-label="éƒ¨åˆ†æºç "><!--[--><!--]--> éƒ¨åˆ†æºç  <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/spring" class="" aria-label="Spring æ¡†æ¶"><!--[--><!--]--> Spring æ¡†æ¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/springboot" class="" aria-label="å¸¸ç”¨å·¥å…·"><!--[--><!--]--> å¸¸ç”¨å·¥å…· <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å°ç©å…· ğŸ®"><span class="title">å°ç©å…· ğŸ®</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å°ç©å…· ğŸ®"><span class="title">å°ç©å…· ğŸ®</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/projects/mini_vue" class="" aria-label="Mini-Vue"><!--[--><!--]--> Mini-Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/projects/mini_bundle" class="" aria-label="æ‰“åŒ…å™¨"><!--[--><!--]--> æ‰“åŒ…å™¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/projects/mini_tokio" class="" aria-label="å¼‚æ­¥è¿è¡Œæ—¶"><!--[--><!--]--> å¼‚æ­¥è¿è¡Œæ—¶ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>åˆ†äº«</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/share_1" class="" aria-label="å…³äºæ•°æ®åº“ä¸ B+ æ ‘"><!--[--><!--]--> å…³äºæ•°æ®åº“ä¸ B+ æ ‘ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>æˆè¯¾</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_1" class="" aria-label="åç«¯ 1"><!--[--><!--]--> åç«¯ 1 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_2" class="" aria-label="åç«¯ 2"><!--[--><!--]--> åç«¯ 2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_3" class="" aria-label="åç«¯ 3"><!--[--><!--]--> åç«¯ 3 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_4" class="" aria-label="åç«¯ 4"><!--[--><!--]--> åç«¯ 4 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="èµ„æ–™åº“ ğŸ“¦"><span class="title">èµ„æ–™åº“ ğŸ“¦</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="èµ„æ–™åº“ ğŸ“¦"><span class="title">èµ„æ–™åº“ ğŸ“¦</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/other/hadoop" class="" aria-label="å¤§æ•°æ®"><!--[--><!--]--> å¤§æ•°æ® <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/script" class="" aria-label="è„šæœ¬"><!--[--><!--]--> è„šæœ¬ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/datastructure" class="" aria-label="æ•°æ®ç»“æ„"><!--[--><!--]--> æ•°æ®ç»“æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/vim" class="" aria-label="Vim"><!--[--><!--]--> Vim <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/git" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/docker" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/analyze" class="" aria-label="æ€§èƒ½ç›‘æµ‹å·¥å…·"><!--[--><!--]--> æ€§èƒ½ç›‘æµ‹å·¥å…· <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/oci" class="" aria-label="OCI è§„èŒƒ"><!--[--><!--]--> OCI è§„èŒƒ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/oauth2" class="" aria-label="OAuth2.0"><!--[--><!--]--> OAuth2.0 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/trdthg" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">go è¯­è¨€ <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/rust/go.html#ç»“æ„ä½“" class="router-link-active router-link-exact-active sidebar-item" aria-label="ç»“æ„ä½“"><!--[--><!--]--> ç»“æ„ä½“ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/rust/go.html#æ–¹æ³•-å‡½æ•°" class="router-link-active router-link-exact-active sidebar-item" aria-label="æ–¹æ³• &amp; å‡½æ•°"><!--[--><!--]--> æ–¹æ³• &amp; å‡½æ•° <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/rust/go.html#æ¥å£" class="router-link-active router-link-exact-active sidebar-item" aria-label="æ¥å£"><!--[--><!--]--> æ¥å£ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/rust/go.html#channel" class="router-link-active router-link-exact-active sidebar-item" aria-label="channel"><!--[--><!--]--> channel <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/rust/go.html#å¹¶å‘" class="router-link-active router-link-exact-active sidebar-item" aria-label="å¹¶å‘"><!--[--><!--]--> å¹¶å‘ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/rust/go.html#defer" class="router-link-active router-link-exact-active sidebar-item" aria-label="defer"><!--[--><!--]--> defer <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/rust/go.html#é”™è¯¯å¤„ç†" class="router-link-active router-link-exact-active sidebar-item" aria-label="é”™è¯¯å¤„ç†"><!--[--><!--]--> é”™è¯¯å¤„ç† <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/rust/go.html#åå°„" class="router-link-active router-link-exact-active sidebar-item" aria-label="åå°„"><!--[--><!--]--> åå°„ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/rust/go.html#è¿›é˜¶" class="router-link-active router-link-exact-active sidebar-item" aria-label="è¿›é˜¶"><!--[--><!--]--> è¿›é˜¶ <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/rust/go.html#å˜é‡" class="router-link-active router-link-exact-active sidebar-item" aria-label="å˜é‡"><!--[--><!--]--> å˜é‡ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/rust/go.html#åç¨‹æ± " class="router-link-active router-link-exact-active sidebar-item" aria-label="åç¨‹æ± "><!--[--><!--]--> åç¨‹æ±  <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/rust/go.html#åŠ¨æ€ç±»å‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="åŠ¨æ€ç±»å‹"><!--[--><!--]--> åŠ¨æ€ç±»å‹ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/rust/go.html#å¯¼å…¥" class="router-link-active router-link-exact-active sidebar-item" aria-label="å¯¼å…¥"><!--[--><!--]--> å¯¼å…¥ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/rust/go.html#context" class="router-link-active router-link-exact-active sidebar-item" aria-label="context"><!--[--><!--]--> context <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/rust/go.html#å‚è€ƒ" class="router-link-active router-link-exact-active sidebar-item" aria-label="å‚è€ƒ"><!--[--><!--]--> å‚è€ƒ <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="go-è¯­è¨€" tabindex="-1"><a class="header-anchor" href="#go-è¯­è¨€" aria-hidden="true">#</a> go è¯­è¨€</h1><p>###./ åŸºç¡€</p><h4 id="æ ¼å¼åŒ–" tabindex="-1"><a class="header-anchor" href="#æ ¼å¼åŒ–" aria-hidden="true">#</a> æ ¼å¼åŒ–</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;type %T value %v \n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> a<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="å¾ªç¯" tabindex="-1"><a class="header-anchor" href="#å¾ªç¯" aria-hidden="true">#</a> å¾ªç¯</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">if</span> num <span class="token operator">:=</span> <span class="token number">10</span><span class="token punctuation">;</span> num <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">3</span> <span class="token punctuation">{</span>
        <span class="token keyword">break</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

finger <span class="token operator">:=</span> <span class="token number">2</span>
<span class="token keyword">switch</span> finger <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">fallthrough</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;sss&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

dd <span class="token operator">:=</span> <span class="token number">1</span>
<span class="token keyword">switch</span> <span class="token punctuation">{</span>
<span class="token keyword">case</span> dd <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">case</span> dd <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h4 id="æ•°ç»„" tabindex="-1"><a class="header-anchor" href="#æ•°ç»„" aria-hidden="true">#</a> æ•°ç»„</h4><p>æ•°ç»„æœ‰å›ºå®šå¤§å°ï¼Œæ•°ç»„çš„å¤§å°æ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤ [5]int å’Œ [25]int æ˜¯ä¸åŒç±»å‹</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span>
a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>

<span class="token keyword">var</span> b <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">int</span>
b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>
    <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>

veggies <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;potatoes&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tomatoes&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;brinjal&quot;</span><span class="token punctuation">}</span>
fruits <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;oranges&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;apples&quot;</span><span class="token punctuation">}</span>
food <span class="token operator">:=</span> <span class="token function">append</span><span class="token punctuation">(</span>veggies<span class="token punctuation">,</span> fruits<span class="token operator">...</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;food:&quot;</span><span class="token punctuation">,</span> veggies<span class="token punctuation">,</span> fruits<span class="token punctuation">,</span> food<span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;food:&quot;</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>veggies<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>food<span class="token punctuation">)</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;food:&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>veggies<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>food<span class="token punctuation">)</span><span class="token punctuation">)</span>
nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token function">change</span><span class="token punctuation">(</span>nums<span class="token operator">...</span><span class="token punctuation">)</span>
<span class="token function">pln</span><span class="token punctuation">(</span>nums<span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="map" tabindex="-1"><a class="header-anchor" href="#map" aria-hidden="true">#</a> map</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// map çš„é›¶å€¼ä¸º nilï¼Œå¿…é¡»ä½¿ç”¨ make åˆå§‹åŒ–</span>
<span class="token comment">// map æ˜¯ å¼•ç”¨ç±»å‹ï¼Œå½“ map è¢«èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡æ˜¯åï¼Œä»–ä»¬å…±äº«ä¸€ä¸ª</span>
<span class="token comment">// map ä¸èƒ½ä½¿ç”¨==åˆ¤æ–­ï¼Œ==åªèƒ½ç”¨æ¥åˆ¤æ–­ map æ˜¯å¦ä¸º nilï¼Œåº”è¯¥éå†å­—å…¸å…ƒç´ å»æ¯”è¾ƒä¸¤ä¸ªå­—å…¸</span>
<span class="token keyword">var</span> mm <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span>
<span class="token comment">// mm[&quot;s&quot;] = 1                    // å›æŠ¥é”™ï¼Œmap is nil</span>
<span class="token comment">// fmt.Printf(&quot;%T %v \n&quot;, mm, mm) // è¿™é‡Œè™½ç„¶èƒ½æ‰“å°å‡º map[]ï¼Œä½†æ˜¯æ— æµäºäº‹</span>
<span class="token keyword">if</span> mm <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    mm <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>
    mm<span class="token punctuation">[</span><span class="token string">&quot;s&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %v \n&quot;</span><span class="token punctuation">,</span> mm<span class="token punctuation">,</span> mm<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
mmm <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>
    <span class="token string">&quot;aaa&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> mmm<span class="token punctuation">[</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span> ok <span class="token operator">==</span> <span class="token boolean">true</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
    <span class="token function">delete</span><span class="token punctuation">(</span>mmm<span class="token punctuation">,</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;no such key&quot;</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>mmm<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> mmm <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="å­—ç¬¦ä¸²-ä¸-åˆ‡ç‰‡" tabindex="-1"><a class="header-anchor" href="#å­—ç¬¦ä¸²-ä¸-åˆ‡ç‰‡" aria-hidden="true">#</a> å­—ç¬¦ä¸² ä¸ åˆ‡ç‰‡</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// å­—ç¬¦ä¸²</span>
name <span class="token operator">:=</span> <span class="token string">&quot;SeÃ±or&quot;</span>
<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> name <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span>
name_ <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>name_<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c&quot;</span><span class="token punctuation">,</span> name_<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>å½“å¯¹åˆ‡ç‰‡è°ƒç”¨<code>append(slice, ...elems)</code>æ˜¯ï¼Œå¦‚æœè¶…å‡ºåˆ‡ç‰‡çš„ capï¼Œå°±ä¼šé‡æ–°åˆ†é…å†…å­˜ç©ºé—´ï¼Œå› æ­¤å¿…é¡»éœ€è¦ç”¨å˜é‡æ¥å—è¿”å›å€¼</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">//å…³äºåˆ‡ç‰‡</span>
<span class="token comment">// a[x] æ˜¯ (*a)[x] çš„ç®€å†™å½¢å¼</span>
<span class="token comment">// arr := [3]int{1, 2, 3}</span>
<span class="token comment">// modify(&amp;arr)</span>
<span class="token comment">// modify(arr[:]) è¿™ç§æ›´å¸¸ç”¨</span>
<span class="token comment">// arr++ è¿™ç§ç›´æ¥è¿›è¡ŒæŒ‡é’ˆæ“ä½œä¸è¢«å…è®¸</span>
<span class="token keyword">func</span> <span class="token function">modify1</span><span class="token punctuation">(</span>arr <span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">(</span><span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">90</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">modify2</span><span class="token punctuation">(</span>arr <span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">90</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">change</span><span class="token punctuation">(</span>elems <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> elems <span class="token punctuation">{</span>
		v <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token comment">// æ— æ•ˆ</span>
		elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span> <span class="token comment">// æœ‰æ•ˆ</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">pln</span><span class="token punctuation">(</span>elems <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> elems <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;index: %v value %v\n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="ç»“æ„ä½“" tabindex="-1"><a class="header-anchor" href="#ç»“æ„ä½“" aria-hidden="true">#</a> ç»“æ„ä½“</h3><ul><li>ç»“æ„ä½“æ˜¯å€¼ç±»å‹ã€‚å¦‚æœå®ƒçš„æ¯ä¸€ä¸ªå­—æ®µéƒ½æ˜¯å¯æ¯”è¾ƒçš„ï¼Œåˆ™è¯¥ç»“æ„ä½“ä¹Ÿæ˜¯å¯æ¯”è¾ƒçš„ã€‚å¦‚æœä¸¤ä¸ªç»“æ„ä½“å˜é‡çš„å¯¹åº”å­—æ®µç›¸ç­‰ï¼Œåˆ™è¿™ä¸¤ä¸ªå˜é‡ä¹Ÿæ˜¯ç›¸ç­‰çš„ã€‚</li><li>å¦‚æœç»“æ„ä½“åŒ…å«ä¸å¯æ¯”è¾ƒçš„å­—æ®µï¼Œåˆ™ç»“æ„ä½“å˜é‡ä¹Ÿä¸å¯æ¯”è¾ƒã€‚</li></ul><h4 id="ä¹¦å†™" tabindex="-1"><a class="header-anchor" href="#ä¹¦å†™" aria-hidden="true">#</a> ä¹¦å†™</h4><ul><li><p>åŒ¿åç»“æ„ä½“: string,int å°±æ˜¯å­—æ®µåï¼Œå­—æ®µä¸èƒ½é‡å¤</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    <span class="token builtin">string</span>
    <span class="token builtin">int</span>
<span class="token punctuation">}</span>
person <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token builtin">int</span><span class="token punctuation">,</span> person<span class="token punctuation">.</span><span class="token builtin">string</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><p>æå‡å­—æ®µï¼šåµŒå…¥çš„ç»“æ„ä½“ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨é‡Œé¢çš„å­—æ®µ</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> Group <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    <span class="token builtin">string</span>
    <span class="token builtin">int</span>
    Person
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>åŒ¿å + æå‡ï¼Œå‘ä¸Šé¢çš„æƒ…å†µ</p><p>åŒ¿åçš„ç±»å‹å¯ä»¥é‡å¤ï¼Œä½†æ˜¯ä¼šä»¥è‡ªèº«çš„ä¸ºå‡†</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>group <span class="token operator">:=</span> Group<span class="token punctuation">{</span><span class="token string">&quot;bb&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> person<span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>group<span class="token punctuation">.</span><span class="token builtin">string</span><span class="token punctuation">,</span> group<span class="token punctuation">.</span><span class="token builtin">string</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><h4 id="ç»“æ„ä½“-tag" tabindex="-1"><a class="header-anchor" href="#ç»“æ„ä½“-tag" aria-hidden="true">#</a> ç»“æ„ä½“ Tag</h4><p><strong>æ ¼å¼</strong> ç©ºæ ¼åˆ†å‰²çš„é”®å€¼å¯¹</p><p><strong>ä½¿ç”¨</strong> ç¤ºä¾‹: json åº“èƒ½å¤Ÿååºåˆ—åŒ–ç»“æ„ä½“</p><ul><li>å¦‚æœåŠ ä¸Š omiteptyï¼Œå½“ç»“æ„ä½“ä¸ºç©ºæ˜¯å°±ä¼šè¢«å¿½ç•¥</li><li>å¦‚æœä¸åŠ ï¼Œä¸ºç©ºçš„å­—æ®µä¼šè¢«è§£æä¸ºç©ºå­—ç¬¦ä¸²&quot;&quot;</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Name <span class="token builtin">string</span> <span class="token string">`json:&quot;name&quot;`</span>
	Age  <span class="token builtin">int</span>    <span class="token string">`json:&quot;age&quot;`</span>
	Addr <span class="token builtin">string</span> <span class="token string">`json:&quot;addr&quot;`</span> <span class="token comment">// ,omitempty</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    p1 <span class="token operator">:=</span> Person<span class="token punctuation">{</span>
		Name<span class="token punctuation">:</span> <span class="token string">&quot;Jack&quot;</span><span class="token punctuation">,</span>
		Age<span class="token punctuation">:</span>  <span class="token number">22</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	data1<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span> data1<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>å¯ä»¥é€šè¿‡åå°„è¯»å– tag</strong></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// ä¸‰ç§è·å– field</span>
field <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">TypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FieldByName</span><span class="token punctuation">(</span><span class="token string">&quot;Name&quot;</span><span class="token punctuation">)</span>
field <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">ValueOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>  <span class="token comment">// i è¡¨ç¤ºç¬¬å‡ ä¸ªå­—æ®µ</span>
field <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">ValueOf</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Elem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>  <span class="token comment">// i è¡¨ç¤ºç¬¬å‡ ä¸ªå­—æ®µ</span>

<span class="token comment">// è·å– Tag</span>
tag <span class="token operator">:=</span> field<span class="token punctuation">.</span>Tag

<span class="token comment">// è·å–é”®å€¼å¯¹</span>
labelValue <span class="token operator">:=</span> tag<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;label&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// è·å–ä¸åˆ°å°±ä¼šè¿”å› &quot;&quot;</span>
labelValue<span class="token punctuation">,</span>ok <span class="token operator">:=</span> tag<span class="token punctuation">.</span><span class="token function">Lookup</span><span class="token punctuation">(</span><span class="token string">&quot;label&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>è·å–é”®å€¼å¯¹ï¼Œæœ‰ Get å’Œ Lookup ä¸¤ç§æ–¹æ³•ï¼Œä½†å…¶å® Get åªæ˜¯å¯¹ Lookup å‡½æ•°çš„ç®€å•å°è£…è€Œå·²ï¼Œå½“æ²¡æœ‰è·å–åˆ°å¯¹åº” tag çš„å†…å®¹ï¼Œä¼šè¿”å›ç©ºå­—ç¬¦ä¸²ã€‚<div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>tag StructTag<span class="token punctuation">)</span> <span class="token function">Get</span><span class="token punctuation">(</span>key <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    v<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> tag<span class="token punctuation">.</span><span class="token function">Lookup</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token keyword">return</span> v
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li>ç©º Tag å’Œä¸è®¾ç½® Tag æ•ˆæœæ˜¯ä¸€æ ·çš„</li></ul><h3 id="æ–¹æ³•-å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•-å‡½æ•°" aria-hidden="true">#</a> æ–¹æ³• &amp; å‡½æ•°</h3><h4 id="ç»“æ„ä½“ä¸Šçš„æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#ç»“æ„ä½“ä¸Šçš„æ–¹æ³•" aria-hidden="true">#</a> ç»“æ„ä½“ä¸Šçš„æ–¹æ³•</h4><ul><li>ç»“æ„ä½“æ–¹æ³•ï¼šä¸ç®¡æ˜¯ä¸€ä¸ªå€¼ï¼Œè¿˜æ˜¯ä¸€ä¸ªå¯ä»¥è§£å¼•ç”¨çš„æŒ‡é’ˆï¼Œè°ƒç”¨è¿™æ ·çš„æ–¹æ³•éƒ½æ˜¯åˆæ³•çš„ã€‚ æˆ–è€…è¯´ï¼šç”¨<strong>ä¸€ä¸ªæŒ‡é’ˆ</strong>æˆ–è€…<strong>ä¸€ä¸ªå¯å–å¾—åœ°å€çš„å€¼</strong>æ¥è°ƒç”¨éƒ½æ˜¯åˆæ³•çš„</li><li>åŒ¿åå­—æ®µçš„æ–¹æ³•ï¼šå±äºç»“æ„ä½“çš„åŒ¿åå­—æ®µçš„æ–¹æ³•å¯ä»¥è¢«ç›´æ¥è°ƒç”¨ï¼Œå°±å¥½åƒè¿™äº›æ–¹æ³•æ˜¯å±äºå®šä¹‰äº†åŒ¿åå­—æ®µçš„ç»“æ„ä½“ä¸€æ ·ã€‚</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> rectangle <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	length <span class="token builtin">int</span>
	width  <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>rectangle<span class="token punctuation">)</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	r<span class="token punctuation">.</span>length <span class="token operator">+=</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token comment">// func (r rectangle) area() {</span>
<span class="token comment">// 	r.length += 1</span>
<span class="token comment">// }</span>

r <span class="token operator">:=</span> rectangle<span class="token punctuation">{</span>
    length<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    width<span class="token punctuation">:</span>  <span class="token number">5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

r<span class="token punctuation">.</span><span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token operator">&amp;</span>r<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// {12, 5}</span>
<span class="token comment">// å¦‚æœæ”¹ä¸º ä¸å¸¦*çš„æ–¹æ³•ï¼Œ{10, 5}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶å™¨ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨å€¼æ¥æ”¶å™¨ï¼Ÿ</p><ul><li>ä¸€èˆ¬æ¥è¯´ï¼ŒæŒ‡é’ˆæ¥æ”¶å™¨å¯ä»¥ä½¿ç”¨åœ¨ï¼šå¯¹æ–¹æ³•å†…éƒ¨çš„æ¥æ”¶å™¨æ‰€åšçš„æ”¹å˜åº”è¯¥å¯¹è°ƒç”¨è€…å¯è§æ—¶ã€‚</li><li>æŒ‡é’ˆæ¥æ”¶å™¨ä¹Ÿå¯ä»¥è¢«ä½¿ç”¨åœ¨å¦‚ä¸‹åœºæ™¯ï¼šå½“æ‹·è´ä¸€ä¸ªç»“æ„ä½“çš„ä»£ä»·è¿‡äºæ˜‚è´µæ—¶ã€‚è€ƒè™‘ä¸‹ä¸€ä¸ªç»“æ„ä½“æœ‰å¾ˆå¤šçš„å­—æ®µã€‚åœ¨æ–¹æ³•å†…ä½¿ç”¨è¿™ä¸ªç»“æ„ä½“åšä¸ºå€¼æ¥æ”¶å™¨éœ€è¦æ‹·è´æ•´ä¸ªç»“æ„ä½“ï¼Œè¿™æ˜¯å¾ˆæ˜‚è´µçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶å™¨ï¼Œç»“æ„ä½“ä¸ä¼šè¢«æ‹·è´ï¼Œåªä¼šä¼ é€’ä¸€ä¸ªæŒ‡é’ˆåˆ°æ–¹æ³•å†…éƒ¨ä½¿ç”¨ã€‚</li><li>åœ¨å…¶ä»–çš„æ‰€æœ‰æƒ…å†µï¼Œå€¼æ¥æ”¶å™¨éƒ½å¯ä»¥è¢«ä½¿ç”¨ã€‚</li></ul><h4 id="å­¤å„¿è§„åˆ™ğŸ¶" tabindex="-1"><a class="header-anchor" href="#å­¤å„¿è§„åˆ™ğŸ¶" aria-hidden="true">#</a> å­¤å„¿è§„åˆ™ğŸ¶</h4><p>ä¸‹é¢çš„ä¸å…è®¸ï¼Œå› ä¸º int ç±»å‹å’Œè¿™ä¸ªæ–¹æ³•ï¼Œä¸å†åŒä¸€ä¸ªåŒ…é‡Œ</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token function">add</span><span class="token punctuation">(</span>b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è§£å†³æ–¹æ³•</p><ul><li>å®šä¹‰ç±»å‹åˆ«å</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> myInt <span class="token builtin">int</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>a myInt<span class="token punctuation">)</span> <span class="token function">add</span><span class="token punctuation">(</span>b myInt<span class="token punctuation">)</span> myInt <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>wrapper åŒ…è£…</li></ul><h4 id="å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°" aria-hidden="true">#</a> å‡½æ•°</h4><p><strong>åŒ¿åå‡½æ•°</strong></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span><span class="token punctuation">(</span>n <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Welcome&quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token string">&quot;Gophers&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>è‡ªå®šä¹‰å‡½æ•°ç±»å‹</strong></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> add <span class="token keyword">func</span><span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a add <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> a <span class="token operator">+</span> b
    <span class="token punctuation">}</span>
    s <span class="token operator">:=</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Sum&quot;</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>é«˜é˜¶å‡½æ•°</strong></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// æ¥å—å‡½æ•°</span>
<span class="token keyword">func</span> <span class="token function">simple</span><span class="token punctuation">(</span>a <span class="token keyword">func</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¿”å›å‡½æ•°</span>
<span class="token keyword">func</span> <span class="token function">simple</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    f <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> a <span class="token operator">+</span> b
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> f
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="æ¥å£" tabindex="-1"><a class="header-anchor" href="#æ¥å£" aria-hidden="true">#</a> æ¥å£</h3><p>ç±»ä¼¼äº dyn Train</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> SalaryCalculator <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">CalculateSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
<span class="token punctuation">}</span>
employees <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>SalaryCalculator<span class="token punctuation">{</span>pemp1<span class="token punctuation">,</span> pemp2<span class="token punctuation">,</span> cemp1<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="æ¥å£çš„æ–­è¨€" tabindex="-1"><a class="header-anchor" href="#æ¥å£çš„æ–­è¨€" aria-hidden="true">#</a> æ¥å£çš„æ–­è¨€</h4><ul><li>ç±»å‹æ–­è¨€</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">assert</span><span class="token punctuation">(</span>i <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> i<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> ok<span class="token punctuation">)</span>
    <span class="token comment">// å¦‚æœä¸æ˜¯ int ç±»å‹ï¼Œv å°±ä¼šè¢«èµ‹ä¸º T çš„é›¶å€¼</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> s <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">56</span>
    <span class="token function">assert</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
    <span class="token keyword">var</span> i <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token string">&quot;Steven Paul&quot;</span>
    <span class="token function">assert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>switch type æ³¨æ„ï¼šæŠŠå˜é‡ä¼ é€’åˆ°å‡½æ•°ä¸­åä¼šè‡ªåŠ¨è½¬æ¢ç±»å‹åˆ° interfaceï¼Œå› æ­¤è°ƒç”¨å‡½æ•°èƒ½è¡Œï¼Œä½†æ˜¯ä¸‹é¢ç›´æ¥ switch å°±ä¸è¡Œ</li><li>å›æŠ¥é”™: a (variable of type int) is not an interface</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">findType</span><span class="token punctuation">(</span>i <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> i<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token builtin">string</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;I am a string and my value is %s\n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;I am an int and my value is %d\n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Unknown type\n&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	a <span class="token operator">:=</span> <span class="token number">1</span>
	<span class="token function">findType</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>

	<span class="token keyword">switch</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">case</span> <span class="token builtin">string</span><span class="token punctuation">:</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;I am a string and my value is %s\n&quot;</span><span class="token punctuation">,</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">case</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;I am an int and my value is %d\n&quot;</span><span class="token punctuation">,</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">default</span><span class="token punctuation">:</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Unknown type\n&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="æ¥å£ç±»å‹å˜é‡" tabindex="-1"><a class="header-anchor" href="#æ¥å£ç±»å‹å˜é‡" aria-hidden="true">#</a> æ¥å£ç±»å‹å˜é‡</h4><p>å£°æ˜ä¸€ä¸ªå˜é‡æ˜¯æ¥å£ç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡å¯ä»¥è¢«èµ‹å€¼ä¸ºï¼Œä»»ä½•å®ç°äº†æ¥å£çš„ç±»å‹</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> Describer <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Describe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name <span class="token builtin">string</span>
    age  <span class="token builtin">int</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> Address <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    state   <span class="token builtin">string</span>
    country <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ç°åœ¨è¿˜ä¸èƒ½èµ‹å€¼ï¼Œæ¥ä¸‹æ¥ä¸ºä¸¤ä¸ª struct æˆ‘ä»¬å®ç°æ¥å£</p><p>ä¸º person å®ç° describeï¼Œä½¿ç”¨<strong>å€¼</strong>æ¥å—è€…ï¼Œä¸‹é¢ä¸¤ç§èµ‹å€¼éƒ½å¯ä»¥ï¼Œä¹Ÿéƒ½èƒ½è°ƒç”¨æ–¹æ³•</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">Describe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// ä½¿ç”¨å€¼æ¥å—è€…å®ç°</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s is %d years old\n&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> d1 Describer
p1 <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;Sam&quot;</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">}</span>
d1 <span class="token operator">=</span> p1
d1<span class="token punctuation">.</span><span class="token function">Describe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
p2 <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;James&quot;</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">}</span>
d1 <span class="token operator">=</span> <span class="token operator">&amp;</span>p2
d1<span class="token punctuation">.</span><span class="token function">Describe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ä¸º Address å®ç° describerï¼Œä½¿ç”¨<strong>æŒ‡é’ˆ</strong>æ¥å—è€…ï¼Œä¸‹é¢å°±æ¯”è¾ƒç‰¹æ®Š d = aä¸èƒ½ç›´æ¥èµ‹å€¼ï¼Œå¦‚æœæ˜¯åœ¨ç»“æ„ä½“çš„æ–¹æ³•ä¸­ï¼Œä¸‹é¢çš„ä¸¤ç§èµ‹å€¼éƒ½æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯åœ¨æ¥å£ä¸­ä¸è¡Œ</p><p>å…¶åŸå› æ˜¯ï¼šå¯¹äºä½¿ç”¨æŒ‡é’ˆæ¥å—è€…çš„æ–¹æ³•ï¼Œç”¨<strong>ä¸€ä¸ªæŒ‡é’ˆ</strong>æˆ–è€…<strong>ä¸€ä¸ªå¯å–å¾—åœ°å€çš„å€¼</strong>æ¥è°ƒç”¨éƒ½æ˜¯åˆæ³•çš„ã€‚ä½†æ¥å£ä¸­å­˜å‚¨çš„å…·ä½“å€¼ï¼ˆConcrete Valueï¼‰å¹¶ä¸èƒ½å–åˆ°åœ°å€ï¼Œå› æ­¤åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå¯¹äºç¼–è¯‘å™¨æ— æ³•è‡ªåŠ¨è·å– a çš„åœ°å€ï¼Œäºæ˜¯ç¨‹åºæŠ¥é”™ã€‚</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>a <span class="token operator">*</span>Address<span class="token punctuation">)</span> <span class="token function">Describe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// ä½¿ç”¨æŒ‡é’ˆæ¥å—è€…å®ç°</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;State %s Country %s&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>state<span class="token punctuation">,</span> a<span class="token punctuation">.</span>country<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> d Describer
a <span class="token operator">:=</span> Address<span class="token punctuation">{</span><span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;USA&quot;</span><span class="token punctuation">}</span>

<span class="token comment">//d = a  // è¿™æ˜¯ä¸åˆæ³•çš„ï¼Œä¼šæŠ¥é”™: Address does not implement Describer</span>

d <span class="token operator">=</span> <span class="token operator">&amp;</span>a <span class="token comment">// è¿™æ˜¯åˆæ³•çš„ï¼ŒAddress ç±»å‹çš„æŒ‡é’ˆå®ç°äº† Describer æ¥å£</span>
d<span class="token punctuation">.</span><span class="token function">Describe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="æ¥å£å¯ä»¥åµŒå¥—" tabindex="-1"><a class="header-anchor" href="#æ¥å£å¯ä»¥åµŒå¥—" aria-hidden="true">#</a> æ¥å£å¯ä»¥åµŒå¥—</h4><p>ç±»ä¼¼äºåŒ¿åç»“æ„ä½“çš„åµŒå¥— ä¸€ä¸ªç»“æ„ä½“å®ç°äº† Aï¼ŒBï¼Œé‚£å°±è¯´å®ƒä¹Ÿå®ç°äº† C</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> A <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> B <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> C <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    A
    B
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="æ¥å£çš„é›¶å€¼" tabindex="-1"><a class="header-anchor" href="#æ¥å£çš„é›¶å€¼" aria-hidden="true">#</a> æ¥å£çš„é›¶å€¼</h4><p>æ¥å£çš„é›¶å€¼æ˜¯ nilï¼ŒåŒæ—¶å…¶åº•å±‚å€¼ï¼ˆUnderlying Valueï¼‰å’Œå…·ä½“ç±»å‹ï¼ˆConcrete Typeï¼‰éƒ½ä¸º nilã€‚è°ƒç”¨æ–¹æ³•ä¼š panic</p><h4 id="æ¥å£çš„å‘" tabindex="-1"><a class="header-anchor" href="#æ¥å£çš„å‘" aria-hidden="true">#</a> æ¥å£çš„å‘</h4><ul><li>ä¸èƒ½æŠŠ interface èµ‹å€¼ä¸ºåˆ«çš„ç±»å‹<div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å£°æ˜ a å˜é‡ï¼Œç±»å‹ intï¼Œåˆå§‹å€¼ä¸º 1</span>
    <span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">1</span>

    <span class="token comment">// å£°æ˜ i å˜é‡ï¼Œç±»å‹ä¸º interface{}, åˆå§‹å€¼ä¸º aï¼Œæ­¤æ—¶ i çš„å€¼å˜ä¸º 1</span>
    <span class="token keyword">var</span> i <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> a

    <span class="token comment">// å£°æ˜ b å˜é‡ï¼Œå°è¯•èµ‹å€¼ i</span>
    <span class="token keyword">var</span> b <span class="token builtin">int</span> <span class="token operator">=</span> i
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li><li>åˆ‡ç‰‡ä¹Ÿä¸èƒ½å†åˆ†<div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sli <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">}</span>

    <span class="token keyword">var</span> i <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    i <span class="token operator">=</span> sli

    g <span class="token operator">:=</span> i<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul><h3 id="channel" tabindex="-1"><a class="header-anchor" href="#channel" aria-hidden="true">#</a> channel</h3><h4 id="ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#ç‰¹æ€§" aria-hidden="true">#</a> ç‰¹æ€§</h4><ul><li>go çš„ channel é»˜è®¤æ˜¯åŒå‘çš„ï¼Œæ—¢å¯ä»¥ sendï¼Œä¹Ÿå¯ä»¥ recv</li><li>channel å¿…é¡»æœ‰å‘é€ç«¯å’Œæ¥æ”¶ç«¯ï¼Œå¦åˆ™å°± panic</li><li>make(chan int, n) n è¡¨ç¤ºç¼“å†²åŒºå¤§å°ï¼Œå¯ä»¥çœç•¥ï¼Œé»˜è®¤ä¸º 0 <ul><li>è€Œå¯¹äºæ— ç¼“å†² channelï¼Œæ¥å—å’Œå‘é€éƒ½è¦åœ¨ä¸åŒæºç¨‹ä¹‹é—´ï¼Œä¸è®©ä¸¤ä¸ªäººäº’ç›¸é˜»å¡</li><li>å¯¹äºæœ‰ç¼“å†²åŒº channelï¼Œåœ¨ç¼“å†²åŒºå¤§å°å†…ï¼Œä¸¤ä¸ªä¸ä¼šäº’ç›¸é˜»å¡ï¼Œå¯ä»¥åœ¨åŒä¸€åç¨‹å†…</li><li>å¦‚æœè¶…è¿‡ç¼“å†²åŒºå¤§å°ï¼Œå°±ä¼š panicï¼Œæ‰€ä»¥è¶…è¿‡ç¼“å†²åŒºå¤§å°çš„è¿˜æ˜¯å¿…é¡»åœ¨å…¶ä»–çš„åç¨‹ä¸­å¤„ç†</li></ul></li><li>ç¼“å†²åŒºä¹Ÿæœ‰ len å’Œ cap çš„æ¦‚å¿µ</li><li>å¯¹äº rustï¼Œå¦‚æœè¶…å‡ºç¼“å†²åŒºå¤§å° send å°±ä¼šè¿”å› Error</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">sendData</span><span class="token punctuation">(</span>sendch <span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sendch <span class="token operator">&lt;-</span> <span class="token number">10</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cha1 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token function">sendData</span><span class="token punctuation">(</span>cha1<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>cha1<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="å•å‘-channel" tabindex="-1"><a class="header-anchor" href="#å•å‘-channel" aria-hidden="true">#</a> å•å‘ channel</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// å£°æ˜å‚æ•°æ˜¯ä¸€ä¸ªåªèƒ½å‘é€çš„ ch</span>
<span class="token keyword">func</span> <span class="token function">sendData</span><span class="token punctuation">(</span>sendch <span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sendch <span class="token operator">&lt;-</span> <span class="token number">10</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å£°æ˜ä¸€ä¸ªåªèƒ½å‘é€çš„ channelï¼Œä¸‹é¢ä½¿ç”¨å®ƒå»æ¥å—å°±ä¼š panic</span>
    <span class="token comment">// å¦‚æœå£°æ˜ä¸º chan intï¼Œä¸‹é¢çš„æ¥å—ä¸ä¼š panicï¼Œåœ¨ sendData ä¼šè¢«è½¬æ¢ä¸ºåªèƒ½å‘é€çš„ channelï¼Œè€Œ main ä¸­çš„ä»ç„¶æ˜¯åŒå‘çš„</span>
    sendch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token function">sendData</span><span class="token punctuation">(</span>sendch<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>sendch<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="å…³é—­-channel" tabindex="-1"><a class="header-anchor" href="#å…³é—­-channel" aria-hidden="true">#</a> å…³é—­ channel</h4><p>ä¸èƒ½ä¸€ç›´ send æˆ–è€…ä¸€ç›´ recvï¼Œå¤„ç†å®ŒåŠæ—¶æŠŠä¸€ç«¯ close äº†</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">producer</span><span class="token punctuation">(</span>chnl <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        chnl <span class="token operator">&lt;-</span> i
    <span class="token punctuation">}</span>
    <span class="token comment">// å‘é€å®Œæˆåï¼Œä½¿ç”¨ send å‡½æ•°æ˜¾å¼å…³é—­ channel</span>
    <span class="token function">close</span><span class="token punctuation">(</span>chnl<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token function">producer</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">{</span>
        <span class="token comment">// é€šè¿‡ ok åˆ¤æ–­ channel æ˜¯å¦å…³é—­</span>
        v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch
        <span class="token keyword">if</span> ok <span class="token operator">==</span> <span class="token boolean">false</span> <span class="token punctuation">{</span>
            <span class="token keyword">break</span>
        <span class="token punctuation">}</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Received &quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">,</span> ok<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="waitgroup" tabindex="-1"><a class="header-anchor" href="#waitgroup" aria-hidden="true">#</a> waitGroup</h4><p>ç­‰å¾…ä¸€ç¾¤åç¨‹ç»“æŸ</p><p>æ³¨æ„ä¸€å®šè¦ä½¿ç”¨æŒ‡é’ˆ</p><h4 id="å·¥ä½œæ± " tabindex="-1"><a class="header-anchor" href="#å·¥ä½œæ± " aria-hidden="true">#</a> å·¥ä½œæ± </h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// æ¨¡æ‹Ÿè€—æ—¶çš„è®¡ç®—</span>
<span class="token keyword">func</span> <span class="token function">calculate</span><span class="token punctuation">(</span>number <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	<span class="token keyword">return</span> number
<span class="token punctuation">}</span>

<span class="token comment">// ç”Ÿäº§è€…ï¼Œåˆ†å‘å·¥ä½œ</span>
<span class="token keyword">func</span> <span class="token function">produceJobs</span><span class="token punctuation">(</span>jobs <span class="token keyword">chan</span><span class="token operator">&lt;-</span> Job<span class="token punctuation">,</span> n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token comment">// fmt.Printf(&quot;sending %d \n&quot;, i)</span>
		jobs <span class="token operator">&lt;-</span> Job<span class="token punctuation">{</span>
			id<span class="token punctuation">:</span>     i<span class="token punctuation">,</span>
			number<span class="token punctuation">:</span> i<span class="token punctuation">,</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token function">close</span><span class="token punctuation">(</span>jobs<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ¶ˆè´¹è€…ï¼Œæ¥å—å·¥ä½œï¼Œå¹²å®Œæ´»å°±é€šçŸ¥ä»¥ä¸‹ç®¡ç†å‘˜</span>
<span class="token keyword">func</span> <span class="token function">consumeFunc</span><span class="token punctuation">(</span>jobs <span class="token operator">&lt;-</span><span class="token keyword">chan</span> Job<span class="token punctuation">,</span> results <span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span><span class="token punctuation">,</span> wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// æ¯ä¸ª worker éƒ½åœ¨æŠ¢å·¥ä½œï¼ŒçœŸç§¯æå•Š</span>
	<span class="token keyword">for</span> job <span class="token operator">:=</span> <span class="token keyword">range</span> jobs <span class="token punctuation">{</span>
		<span class="token comment">// fmt.Printf(&quot;id: %d\n&quot;, job.id)</span>
		results <span class="token operator">&lt;-</span> <span class="token function">calculate</span><span class="token punctuation">(</span>job<span class="token punctuation">.</span>number<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç®¡ç†å‘˜ï¼Œç­‰å¾…æ‰€æœ‰å·¥äººéƒ½é€šçŸ¥ä»–ï¼Œæ¯æ¬¡è¢«é€šçŸ¥ï¼Œè®¡æ•°å™¨å°±å‡ 1ï¼Œå½“è®¡æ•°å™¨ä¸º 0 æ˜¯å°±ä¸å†é˜»å¡</span>
<span class="token keyword">func</span> <span class="token function">consumeJobs</span><span class="token punctuation">(</span>jobs <span class="token operator">&lt;-</span><span class="token keyword">chan</span> Job<span class="token punctuation">,</span> results <span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span><span class="token punctuation">,</span> worker_number <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ç­‰å¾…ä¸€æ‰¹ goroutine ç»“æŸï¼Œç±»ä¼¼äº join</span>
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
	<span class="token comment">// ä¸ºæ¯ä¸€ä¸ªå·¥ä½œå¼€å¯ä¸€ä¸ª goroutine</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> worker_number<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token keyword">go</span> <span class="token function">consumeFunc</span><span class="token punctuation">(</span>jobs<span class="token punctuation">,</span> results<span class="token punctuation">,</span> <span class="token operator">&amp;</span>wg<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// é˜»å¡å½“å‰ goroutine ç›´åˆ°è®¡æ•°å™¨å½’ 0ï¼Œæ‰€æœ‰ job éƒ½åº”è¯¥åšå®Œäº†ï¼Œresult åº”è¯¥ä¹Ÿéƒ½å‘é€å‡ºå»äº†</span>
	<span class="token function">close</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Job <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	id     <span class="token builtin">int</span>
	number <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	startTime <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	jobs <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> Job<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
	results <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

	<span class="token comment">// å‘é€ work, jobs send</span>
	<span class="token keyword">go</span> <span class="token function">produceJobs</span><span class="token punctuation">(</span>jobs<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
	<span class="token comment">// jobs recv | results send</span>
	<span class="token keyword">go</span> <span class="token function">consumeJobs</span><span class="token punctuation">(</span>jobs<span class="token punctuation">,</span> results<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
	<span class="token comment">// results recv</span>
	a <span class="token operator">:=</span> <span class="token number">0</span>
	<span class="token keyword">for</span> res <span class="token operator">:=</span> <span class="token keyword">range</span> results <span class="token punctuation">{</span>
		a <span class="token operator">+=</span> res
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token string">&quot;res: &quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>

	endTime <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	diff <span class="token operator">:=</span> endTime<span class="token punctuation">.</span><span class="token function">Sub</span><span class="token punctuation">(</span>startTime<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;total time taken &quot;</span><span class="token punctuation">,</span> diff<span class="token punctuation">.</span><span class="token function">Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;seconds&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><h4 id="select" tabindex="-1"><a class="header-anchor" href="#select" aria-hidden="true">#</a> select</h4><p>ç”¨æ³•æŒºæ™®é€š</p><ul><li>channel ä¸é™åˆ¶ send/recvï¼Œåªè¦æ˜¯å¯¹ channel çš„æ“ä½œå°±è¡Œ</li><li>å¦‚æœæœ‰å¤šä¸ª channel å‡†å¤‡å°±ç»ªï¼Œå°±éšæœºé€‰æ‹©ä¸€ä¸ªæ‰§è¡Œ</li><li>æ­»é”ä¸é»˜è®¤æƒ…å†µï¼šå¦‚æœ select ä¸€ç›´æ²¡æœ‰å‘½ä¸­ï¼Œå°±ä¼šè§¦å‘æ­»é”ï¼Œå¯¼è‡´ panicï¼Œç©º select ä¸€æ ·ä¹Ÿä¼šå¯¼è‡´ panic</li><li>å¯ä»¥å‡†å¤‡ä¸€ä¸ª timeout chanï¼Œåˆ°æ—¶é—´å°± send ä½œä¸ºè¶…æ—¶ä¿¡å·</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
    <span class="token keyword">select</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">:</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;default case executed&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="å¹¶å‘" tabindex="-1"><a class="header-anchor" href="#å¹¶å‘" aria-hidden="true">#</a> å¹¶å‘</h3><p>goroutine ä¸èƒ½ä¿è¯å¹¶å‘å®‰å…¨ï¼Œä¸‹é¢æ˜¯ä¸€äº›è§£å†³æ–¹æ³•</p><ul><li>æ€»ä½“è¯´æ¥ï¼Œå½“ Go åç¨‹éœ€è¦ä¸å…¶ä»–åç¨‹é€šä¿¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ channelã€‚è€Œå½“åªå…è®¸ä¸€ä¸ªåç¨‹è®¿é—®ä¸´ç•ŒåŒºæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ Mutexã€‚</li><li>å°±æˆ‘ä»¬ä¸Šé¢è§£å†³çš„é—®é¢˜è€Œè¨€ï¼Œæˆ‘æ›´å€¾å‘äºä½¿ç”¨ Mutexï¼Œå› ä¸ºè¯¥é—®é¢˜å¹¶ä¸éœ€è¦åç¨‹é—´çš„é€šä¿¡ã€‚æ‰€ä»¥ Mutex æ˜¯å¾ˆè‡ªç„¶çš„é€‰æ‹©ã€‚</li></ul><h4 id="mutex" tabindex="-1"><a class="header-anchor" href="#mutex" aria-hidden="true">#</a> mutex</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">aa</span><span class="token punctuation">(</span>wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">,</span> m <span class="token operator">*</span>sync<span class="token punctuation">.</span>Mutex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	m<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	x <span class="token operator">+=</span> <span class="token number">1</span>
	m<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
    <span class="token keyword">var</span> m sync<span class="token punctuation">.</span>Mutex
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">go</span> <span class="token function">aa</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wg<span class="token punctuation">,</span> <span class="token operator">&amp;</span>m<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="channel-1" tabindex="-1"><a class="header-anchor" href="#channel-1" aria-hidden="true">#</a> channel</h4><p>ä½¿ç”¨ç¼“å†²ä¸º 1 çš„ channel å®ç°</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">aa</span><span class="token punctuation">(</span>wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">,</span> ch <span class="token keyword">chan</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	ch <span class="token operator">&lt;-</span> <span class="token boolean">true</span>
	x <span class="token operator">+=</span> <span class="token number">1</span>
	<span class="token operator">&lt;-</span>ch
	wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	startTime <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
	<span class="token keyword">var</span> ch <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">bool</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token keyword">go</span> <span class="token function">aa</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wg<span class="token punctuation">,</span> ch<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="defer" tabindex="-1"><a class="header-anchor" href="#defer" aria-hidden="true">#</a> defer</h3><h4 id="å®å‚æ±‚å€¼" tabindex="-1"><a class="header-anchor" href="#å®å‚æ±‚å€¼" aria-hidden="true">#</a> å®å‚æ±‚å€¼</h4><p>å½“æ‰§è¡Œ defer è¯­å¥çš„æ—¶å€™ï¼Œå°±ä¼šå¯¹å»¶è¿Ÿå‡½æ•°çš„å®å‚è¿›è¡Œæ±‚å€¼ã€‚</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">printA</span><span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;value of a in deferred function&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">:=</span> <span class="token number">5</span>
    <span class="token keyword">defer</span> <span class="token function">printA</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token punctuation">}</span>
<span class="token comment">// value of a in deferred function 5</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="defer-æ ˆ" tabindex="-1"><a class="header-anchor" href="#defer-æ ˆ" aria-hidden="true">#</a> defer æ ˆ</h4><p>å½“ä¸€ä¸ªå‡½æ•°å†…å¤šæ¬¡è°ƒç”¨ defer æ—¶ï¼ŒGo ä¼šæŠŠ defer è°ƒç”¨æ”¾å…¥åˆ°ä¸€ä¸ªæ ˆä¸­ï¼ŒéšåæŒ‰ç…§åè¿›å…ˆå‡ºï¼ˆLast In First Out, LIFOï¼‰çš„é¡ºåºæ‰§è¡Œã€‚</p><p>ä¸‹é¢çš„ç¨‹åºï¼Œä½¿ç”¨ defer æ ˆï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²é€†åºæ‰“å°ã€‚</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name <span class="token operator">:=</span> <span class="token string">&quot;Naveen&quot;</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// å€’å™è¾“å‡º: neevaN</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="defer-åœ¨-return-åæ‰§è¡Œ" tabindex="-1"><a class="header-anchor" href="#defer-åœ¨-return-åæ‰§è¡Œ" aria-hidden="true">#</a> defer åœ¨ return åæ‰§è¡Œ</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">var</span> name <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;go&quot;</span>

<span class="token keyword">func</span> <span class="token function">myfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        name <span class="token operator">=</span> <span class="token string">&quot;python&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;myfunc å‡½æ•°é‡Œçš„ nameï¼š%s\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token comment">// go</span>
    <span class="token keyword">return</span> name
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    myname <span class="token operator">:=</span> <span class="token function">myfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;main å‡½æ•°é‡Œçš„ name: %s\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token comment">// python</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;main å‡½æ•°é‡Œçš„ myname: &quot;</span><span class="token punctuation">,</span> myname<span class="token punctuation">)</span> <span class="token comment">// go</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="ä½¿ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯" aria-hidden="true">#</a> ä½¿ç”¨åœºæ™¯</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>r rect<span class="token punctuation">)</span> <span class="token function">area</span><span class="token punctuation">(</span>wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// defer wg.Done() // ä»£æ›¿ä¸‹é¢çš„ 3 ä¸ª return ä¸­çš„ wg.Done()</span>
    <span class="token keyword">if</span> r<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;rect %v&#39;s length should be greater than zero\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
        wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> r<span class="token punctuation">.</span>width <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;rect %v&#39;s width should be greater than zero\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
        wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    area <span class="token operator">:=</span> r<span class="token punctuation">.</span>length <span class="token operator">*</span> r<span class="token punctuation">.</span>width
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;rect %v&#39;s area %d\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> area<span class="token punctuation">)</span>
    wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="é”™è¯¯å¤„ç†" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯å¤„ç†" aria-hidden="true">#</a> é”™è¯¯å¤„ç†</h3><h4 id="é”™è¯¯æ¥å£" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯æ¥å£" aria-hidden="true">#</a> é”™è¯¯æ¥å£</h4><p>åœ¨æ ‡å‡†åº“é‡Œçš„å®šä¹‰</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> <span class="token builtin">error</span> <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>open å‡½æ•°çš„è®¾è®¡</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> PathError <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Op   <span class="token builtin">string</span>
    Path <span class="token builtin">string</span>
    Err  <span class="token builtin">error</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>e <span class="token operator">*</span>PathError<span class="token punctuation">)</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> e<span class="token punctuation">.</span>Op <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>Path <span class="token operator">+</span> <span class="token string">&quot;: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>Err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="é”™è¯¯ç±»å‹æ–­è¨€" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯ç±»å‹æ–­è¨€" aria-hidden="true">#</a> é”™è¯¯ç±»å‹æ–­è¨€</h4><p>é€šè¿‡ç±»å‹æ–­è¨€æ‹¿åˆ°é”™è¯¯ä¿¡æ¯</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;/test.txt&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err<span class="token punctuation">,</span> ok <span class="token operator">:=</span> err<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>os<span class="token punctuation">.</span>PathError<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;File at path&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>Path<span class="token punctuation">,</span> <span class="token string">&quot;failed to open&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;opened successfully&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="å­é”™è¯¯ç±»å‹" tabindex="-1"><a class="header-anchor" href="#å­é”™è¯¯ç±»å‹" aria-hidden="true">#</a> å­é”™è¯¯ç±»å‹</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> DNSError <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>e <span class="token operator">*</span>DNSError<span class="token punctuation">)</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>e <span class="token operator">*</span>DNSError<span class="token punctuation">)</span> <span class="token function">Timeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>e <span class="token operator">*</span>DNSError<span class="token punctuation">)</span> <span class="token function">Temporary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    addr<span class="token punctuation">,</span> err <span class="token operator">:=</span> net<span class="token punctuation">.</span><span class="token function">LookupHost</span><span class="token punctuation">(</span><span class="token string">&quot;golangbot123.com&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err<span class="token punctuation">,</span> ok <span class="token operator">:=</span> err<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>net<span class="token punctuation">.</span>DNSError<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
        <span class="token keyword">if</span> err<span class="token punctuation">.</span><span class="token function">Timeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;operation timed out&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> err<span class="token punctuation">.</span><span class="token function">Temporary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;temporary error&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;generic error: &quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h4 id="panic-å’Œ-recover" tabindex="-1"><a class="header-anchor" href="#panic-å’Œ-recover" aria-hidden="true">#</a> panic å’Œ recover</h4><p>ä¸‹é¢ä½¿ç”¨ recover å»æ¢å¤ panic</p><ul><li>æ³¨æ„: Go åç¨‹ä¸­è°ƒç”¨ recover æ‰ç®¡ç”¨ã€‚recover ä¸èƒ½æ¢å¤ä¸€ä¸ªä¸åŒåç¨‹çš„ panicã€‚</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">recoverName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> r <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> r<span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;recovered from &quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">fullName</span><span class="token punctuation">(</span>firstName <span class="token operator">*</span><span class="token builtin">string</span><span class="token punctuation">,</span> lastName <span class="token operator">*</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">defer</span> <span class="token function">recoverName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> firstName <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;runtime error: first name cannot be nil&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> lastName <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;runtime error: last name cannot be nil&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s %s\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>firstName<span class="token punctuation">,</span> <span class="token operator">*</span>lastName<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;returned normally from fullName&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="æ¢å¤åè·å¾—å †æ ˆ" tabindex="-1"><a class="header-anchor" href="#æ¢å¤åè·å¾—å †æ ˆ" aria-hidden="true">#</a> æ¢å¤åè·å¾—å †æ ˆ</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;runtime/debug&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">r</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> r <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> r <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Recovered&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
        debug<span class="token punctuation">.</span><span class="token function">PrintStack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="åå°„" tabindex="-1"><a class="header-anchor" href="#åå°„" aria-hidden="true">#</a> åå°„</h3><p><strong>åŸºç¡€</strong></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> order <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	ordId      <span class="token builtin">int</span>
	customerId <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">play</span><span class="token punctuation">(</span>q <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	t <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">TypeOf</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>
	k <span class="token operator">:=</span> t<span class="token punctuation">.</span><span class="token function">Kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	v <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">ValueOf</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>
	fieldsNum <span class="token operator">:=</span> v<span class="token punctuation">.</span><span class="token function">NumField</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Type: &quot;</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> <span class="token string">&quot;Kind: &quot;</span><span class="token punctuation">,</span> k<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Value: &quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">,</span> <span class="token string">&quot;FieldNum: &quot;</span><span class="token punctuation">,</span> fieldsNum<span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> fieldsNum<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span>Name<span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">createQuery</span><span class="token punctuation">(</span>q <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ‹¿åˆ°ç±»å‹</span>
    <span class="token keyword">if</span> reflect<span class="token punctuation">.</span><span class="token function">TypeOf</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> reflect<span class="token punctuation">.</span>Struct <span class="token punctuation">{</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
    <span class="token comment">// æ‹¿åˆ°ç±»å‹åç§°</span>
	t <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">TypeOf</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	query <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;insert into %s values(&quot;</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span>
    <span class="token comment">// æ‹¿åˆ°å€¼</span>
	v <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">ValueOf</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>
    <span class="token comment">// æ‹¿åˆ°å­—æ®µæ•°é‡</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">NumField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ‹¿åˆ°å­—æ®µç±»å‹ï¼Œå­—æ®µåç§°ï¼Œå­—æ®µå€¼</span>
		<span class="token keyword">switch</span> v<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> reflect<span class="token punctuation">.</span>Int<span class="token punctuation">:</span>
			<span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
				query <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%s%d&quot;</span><span class="token punctuation">,</span> query<span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				query <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%s, %d&quot;</span><span class="token punctuation">,</span> query<span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token keyword">case</span> reflect<span class="token punctuation">.</span>String<span class="token punctuation">:</span>
			<span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
				query <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\&quot;%s\&quot;&quot;</span><span class="token punctuation">,</span> query<span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				query <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%s, \&quot;%s\&quot;&quot;</span><span class="token punctuation">,</span> query<span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token keyword">default</span><span class="token punctuation">:</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;unsupported field type&quot;</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	query <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%s)&quot;</span><span class="token punctuation">,</span> query<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span>
	<span class="token keyword">return</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	o <span class="token operator">:=</span> order<span class="token punctuation">{</span>
		ordId<span class="token punctuation">:</span>      <span class="token number">456</span><span class="token punctuation">,</span>
		customerId<span class="token punctuation">:</span> <span class="token number">56</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	<span class="token function">play</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;----------------------------------------&quot;</span><span class="token punctuation">)</span>
	<span class="token function">createQuery</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>

	<span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">1</span>
	b <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">ValueOf</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>reflect<span class="token punctuation">.</span><span class="token function">TypeOf</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><p><strong>ä¿®æ”¹ç±»å‹</strong></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> age <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">25</span>
    v <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">ValueOf</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span>
    <span class="token comment">// ä»åå°„å¯¹è±¡åˆ°æ¥å£å˜é‡</span>
    i <span class="token operator">:=</span> v<span class="token punctuation">.</span><span class="token function">Interface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>å¯å†™æ€§</strong></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> name <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;Go ç¼–ç¨‹æ—¶å…‰&quot;</span>
    v1 <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">ValueOf</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>name<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;v1 å¯å†™æ€§ä¸º:&quot;</span><span class="token punctuation">,</span> v1<span class="token punctuation">.</span><span class="token function">CanSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    v2 <span class="token operator">:=</span> v1<span class="token punctuation">.</span><span class="token function">Elem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;v2 å¯å†™æ€§ä¸º:&quot;</span><span class="token punctuation">,</span> v2<span class="token punctuation">.</span><span class="token function">CanSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="è¿›é˜¶" tabindex="-1"><a class="header-anchor" href="#è¿›é˜¶" aria-hidden="true">#</a> è¿›é˜¶</h2><h3 id="å˜é‡" tabindex="-1"><a class="header-anchor" href="#å˜é‡" aria-hidden="true">#</a> å˜é‡</h3><h4 id="make" tabindex="-1"><a class="header-anchor" href="#make" aria-hidden="true">#</a> make</h4><p>make å‡½æ•°åˆ›å»º sliceã€map æˆ– chan ç±»å‹å˜é‡</p><p><strong>å’Œ new çš„åŒºåˆ«</strong></p><ul><li><p>newï¼šä¸ºæ‰€æœ‰çš„ç±»å‹åˆ†é…å†…å­˜ï¼Œå¹¶åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼Œè¿”å›æŒ‡é’ˆã€‚</p></li><li><p>makeï¼šåªèƒ½ä¸º sliceï¼Œmapï¼Œchan åˆ†é…å†…å­˜ï¼Œå¹¶åˆå§‹åŒ–ï¼Œè¿”å›çš„æ˜¯ç±»å‹ (æŒ‡é’ˆ)ã€‚å› ä¸ºè¿™ä¸‰ä¸ªæœ¬èº«å°±æ˜¯å¼•ç”¨ç±»å‹</p></li><li><p>sliceã€map å’Œ chan æ˜¯ Go ä¸­çš„å¼•ç”¨ç±»å‹ï¼Œå®ƒä»¬çš„åˆ›å»ºå’Œåˆå§‹åŒ–ï¼Œä¸€èˆ¬ä½¿ç”¨ makeã€‚ç‰¹åˆ«çš„ï¼Œchan åªèƒ½ç”¨ makeã€‚slice å’Œ map è¿˜å¯ä»¥ç®€å•çš„æ–¹å¼ï¼š</p></li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>slice <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span>
m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="åŒ¿åå˜é‡" tabindex="-1"><a class="header-anchor" href="#åŒ¿åå˜é‡" aria-hidden="true">#</a> åŒ¿åå˜é‡</h4><ul><li>ä¸åˆ†é…å†…å­˜ï¼Œä¸å ç”¨å†…å­˜ç©ºé—´</li></ul><h4 id="æµ®ç‚¹æ•°" tabindex="-1"><a class="header-anchor" href="#æµ®ç‚¹æ•°" aria-hidden="true">#</a> æµ®ç‚¹æ•°</h4><p>æµ®ç‚¹æ•°è½¬äºŒè¿›åˆ¶æ—¶ä¸¢å¤±äº†ç²¾åº¦ï¼Œè®¡ç®—å®Œå†è½¬å›åè¿›åˆ¶æ—¶å’Œç†è®ºç»“æœä¸åŒã€‚</p><ul><li>f32: 1 8</li><li>f64: 1 11</li></ul><h4 id="ä½œç”¨åŸŸ" tabindex="-1"><a class="header-anchor" href="#ä½œç”¨åŸŸ" aria-hidden="true">#</a> ä½œç”¨åŸŸ</h4><p><strong>åˆ†ç±»</strong></p><ul><li>å†…ç½®ä½œç”¨åŸŸï¼šä¸éœ€è¦è‡ªå·±å£°æ˜ï¼Œæ‰€æœ‰çš„å…³é”®å­—å’Œå†…ç½®ç±»å‹ã€å‡½æ•°éƒ½æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸ</li><li>åŒ…çº§ä½œç”¨åŸŸï¼šå¿…é ˆå‡½æ•°å¤–å£°æ˜ï¼Œåœ¨è¯¥åŒ…å†…çš„æ‰€æœ‰æ–‡ä»¶éƒ½å¯ä»¥è®¿é—®</li><li>æ–‡ä»¶çº§ä½œç”¨åŸŸï¼šä¸éœ€è¦å£°æ˜ï¼Œå¯¼å…¥å³å¯ã€‚ä¸€ä¸ªæ–‡ä»¶ä¸­é€šè¿‡ import å¯¼å…¥çš„åŒ…åï¼Œåªåœ¨è¯¥æ–‡ä»¶å†…å¯ç”¨</li><li>å±€éƒ¨ä½œç”¨åŸŸï¼šåœ¨è‡ªå·±çš„è¯­å¥å—å†…å£°æ˜ï¼ŒåŒ…æ‹¬å‡½æ•°ï¼Œforã€if ç­‰è¯­å¥å—ï¼Œæˆ–è‡ªå®šä¹‰çš„ {} è¯­å¥å—å½¢æˆçš„ä½œç”¨åŸŸï¼Œåªåœ¨è‡ªå·±çš„å±€éƒ¨ä½œç”¨åŸŸå†…å¯ç”¨</li></ul><p><strong>ä½œç”¨è§„åˆ™</strong></p><ul><li>ä½å±‚ä½œç”¨åŸŸï¼Œå¯ä»¥è®¿é—®é«˜å±‚ä½œç”¨åŸŸ</li><li>åŒä¸€å±‚çº§çš„ä½œç”¨åŸŸï¼Œæ˜¯ç›¸äº’éš”ç¦»çš„</li><li>ä½å±‚ä½œç”¨åŸŸé‡Œå£°æ˜çš„å˜é‡ï¼Œä¼šè¦†ç›–é«˜å±‚ä½œç”¨åŸŸé‡Œå£°æ˜çš„å˜é‡</li></ul><p><strong>åŠ¨æ€ä½œç”¨åŸŸ</strong></p><p>ä¸‹é¢çš„ bash è„šæœ¬ä¸­ï¼Œfunc02 åœ¨ func01 å†…éƒ¨å¯ä»¥è®¿é—®åˆ° valueï¼Œä½†åœ¨ func01 å¤–é¢ä¸èƒ½ï¼Œå±äºåŠ¨æ€ä½œç”¨åŸŸ</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function-name function">func01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token number">1</span>
    func02
<span class="token punctuation">}</span>
<span class="token function-name function">func02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;func02 sees value as <span class="token variable">${value}</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># æ‰§è¡Œå‡½æ•°</span>
func01
func02
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="åç¨‹æ± " tabindex="-1"><a class="header-anchor" href="#åç¨‹æ± " aria-hidden="true">#</a> åç¨‹æ± </h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> Pool <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	work <span class="token keyword">chan</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// ä»»åŠ¡</span>
	sem  <span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// ä½¿ç”¨ç¼“å†²åŒºå¤§å°æ§åˆ¶å·¥äººæ•°é‡</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">New</span><span class="token punctuation">(</span>size <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">*</span>Pool <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Pool<span class="token punctuation">{</span>
		work<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		sem<span class="token punctuation">:</span>  <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Pool<span class="token punctuation">)</span> <span class="token function">worker</span><span class="token punctuation">(</span>task <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">&lt;-</span>p<span class="token punctuation">.</span>sem <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		<span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		task <span class="token operator">=</span> <span class="token operator">&lt;-</span>p<span class="token punctuation">.</span>work
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Pool<span class="token punctuation">)</span> <span class="token function">NewTask</span><span class="token punctuation">(</span>task <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ç¬¬ä¸€æ¬¡åŠ æ–°ä»»åŠ¡æ—¶ï¼Œwork ç¼“å†²åŒºå¤§å°ä¸º 0ï¼Œå‘å‡ºå»ä¹Ÿæ²¡äººæ¥å—ï¼Œæ‰€ä»¥ä¸€å®šä¼šèµ°ç¬¬äºŒä¸ª</span>
	<span class="token comment">// ç›¸å½“äºæ‰¾åˆ°äº†ç¬¬ä¸€ä¸ªå·¥äººå¤„ç†ä»»åŠ¡ï¼Œworker æœ¬èº«æ˜¯ä¸ª for å¾ªç¯ï¼Œå®ƒå¤„ç†å®Œç¬¬ä¸€ä¸ªä»»åŠ¡åä¼šç»§ç»­æ¥å—æ–°ä»»åŠ¡</span>
	<span class="token comment">// ç¬¬äºŒæ¬¡åŠ å…¥æ—¶ï¼Œå°±è¢«ç¬¬ä¸€ä¸ªå·¥äººå¤„ç†äº†ï¼Œ</span>
	<span class="token comment">// å¦‚æœç¬¬ä¸‰ä¸ªåŠ å…¥ï¼Œå› ä¸º sem ç¼“å†²åŒºå¤§å°çš„é™åˆ¶ï¼Œä¸ä¼šç»§ç»­äº§ç”Ÿæ–°çš„ worker</span>
	<span class="token keyword">select</span> <span class="token punctuation">{</span>
	<span class="token keyword">case</span> p<span class="token punctuation">.</span>work <span class="token operator">&lt;-</span> task<span class="token punctuation">:</span>
	<span class="token keyword">case</span> p<span class="token punctuation">.</span>sem <span class="token operator">&lt;-</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">:</span>
		<span class="token keyword">go</span> p<span class="token punctuation">.</span><span class="token function">worker</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	pool <span class="token operator">:=</span> <span class="token function">New</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		pool<span class="token punctuation">.</span><span class="token function">NewTask</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="åŠ¨æ€ç±»å‹" tabindex="-1"><a class="header-anchor" href="#åŠ¨æ€ç±»å‹" aria-hidden="true">#</a> åŠ¨æ€ç±»å‹</h3><p>æ¥å£åˆ†ä¸ºä¸¤ç§<code>iface</code>å’Œ<code>eface</code></p><p>æ‰€æœ‰çš„å˜é‡éƒ½å®ç°äº†ç©ºæ¥å£ (eface)</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// å®šä¹‰é™æ€ç±»å‹</span>
i <span class="token operator">:=</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span>
i <span class="token operator">=</span> <span class="token string">&quot;Go ç¼–ç¨‹æ—¶å…‰&quot;</span> <span class="token comment">// ä¼šæŠ¥é”™</span>

<span class="token comment">// å®šä¹‰åŠ¨æ€ç±»å‹</span>
i <span class="token operator">:=</span> <span class="token punctuation">(</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> i <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
i <span class="token operator">=</span> <span class="token number">18</span>

i <span class="token operator">=</span> <span class="token string">&quot;Go ç¼–ç¨‹æ—¶å…‰&quot;</span> <span class="token comment">// ä¸Šé¢ä¸‰ç§éƒ½è¡Œï¼Œä¸ä¼šæŠ¥é”™</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">var</span> reader io<span class="token punctuation">.</span>Reader

tty<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">OpenFile</span><span class="token punctuation">(</span><span class="token string">&quot;/dev/tty&quot;</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_RDWR<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
<span class="token punctuation">}</span>

reader <span class="token operator">=</span> tty
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ç¬¬ä¸€è¡Œä»£ç ç»“æŸåï¼Œreader çš„é™æ€ç±»å‹ä¸º<code>io.Reader</code>è¿˜æ²¡æœ‰åŠ¨æ€ç±»å‹ <img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202203060928375.png" alt=""> è¢«èµ‹å€¼ä¸º tty åï¼Œreader çš„åŠ¨æ€ç±»å‹å˜ä¸º<code>*os.File</code><img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202203060936153.png" alt=""></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">//ä¸å¸¦å‡½æ•°çš„ interface</span>
<span class="token keyword">var</span> empty <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

tty<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">OpenFile</span><span class="token punctuation">(</span><span class="token string">&quot;/dev/tty&quot;</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_RDWR<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
<span class="token punctuation">}</span>

empty <span class="token operator">=</span> tty
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>åˆšå¼€å§‹ empty æ˜¯ efaceï¼Œ<code>_type</code>ä¸º nil <img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202203060938295.png" alt=""> è¢«èµ‹å€¼åï¼Œ<code>_type</code>çš„<strong>é™æ€ç±»å‹</strong>ä¸º<code>*os.File</code><img src="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202203060938635.png" alt=""></p><h3 id="å¯¼å…¥" tabindex="-1"><a class="header-anchor" href="#å¯¼å…¥" aria-hidden="true">#</a> å¯¼å…¥</h3><p>å¯¼å…¥æ–¹å¼ï¼š</p><ul><li>ç»å¯¹å¯¼å…¥ï¼šä» <code>$GOPATH/src</code> æˆ– <strong><code>$GOROOT</code></strong> æˆ–è€… <code>$GOPATH/pkg/mod</code> ç›®å½•ä¸‹æœç´¢åŒ…å¹¶å¯¼å…¥</li><li>ç›¸å¯¹å¯¼å…¥ï¼šä»å½“å‰ç›®å½•ä¸­æœç´¢åŒ…å¹¶å¼€å§‹å¯¼å…¥ã€‚å°±åƒä¸‹é¢è¿™æ ·</li></ul><p>æ³¨æ„ï¼š</p><ul><li>å¯¼å…¥æ—¶ï¼Œæ˜¯æŒ‰ç…§ç›®å½•å¯¼å…¥ã€‚å¯¼å…¥ç›®å½•åï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰åŒ…ã€‚</li><li>åªè¦ä¸æ˜¯<code>.</code>æˆ–<code>..</code>å¼€å¤´ï¼Œå…¨éƒ½æ˜¯ç»å¯¹è·¯å¾„</li></ul><h3 id="context" tabindex="-1"><a class="header-anchor" href="#context" aria-hidden="true">#</a> context</h3><p>å½“ä¸€ä¸ª goutine å¼€å¯åï¼Œåªèƒ½é€šè¿‡ channel çš„é€šçŸ¥å®ç°ç®¡ç†ï¼Œä½¿ç”¨ context æ›´æ–¹ä¾¿äº†</p><p>å½“ä½ æŠŠ Context ä¼ é€’ç»™å¤šä¸ª goroutine ä½¿ç”¨æ—¶ï¼Œåªè¦æ‰§è¡Œä¸€æ¬¡ cancel æ“ä½œï¼Œæ‰€æœ‰çš„ goroutine å°±å¯ä»¥æ”¶åˆ° å–æ¶ˆçš„ä¿¡å·ï¼ŒContext æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥æ”¾å¿ƒåœ°åœ¨å¤šä¸ª goroutine ä¸­ä½¿ç”¨ã€‚</p><p>context åˆ›å»ºä¾èµ–äº 4 ä¸ªå‡½æ•°</p><ul><li>withCancel æœ€æ™®é€šï¼Œåªèƒ½ä½¿ç”¨ cancel å»ç»“æŸ</li><li>withDeadline å’Œ WithDeadline ä¼šåœ¨è¶…æ—¶åè‡ªåŠ¨ cancelï¼Œä¼ é€’çš„æ˜¯ç»å¯¹æ—¶é—´å’Œç›¸å¯¹æ—¶é—´</li><li>withValue èƒ½å¤Ÿæºå¸¦ä¸€äº›é”®å€¼å¯¹ (é”®åº”è¯¥æ˜¯å¯æ¯”çš„ï¼Œå€¼å¿…é¡»æ˜¯çº¿ç¨‹å®‰å…¨çš„)</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">WithCancel</span><span class="token punctuation">(</span>parent Context<span class="token punctuation">)</span> <span class="token punctuation">(</span>ctx Context<span class="token punctuation">,</span> cancel CancelFunc<span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">WithDeadline</span><span class="token punctuation">(</span>parent Context<span class="token punctuation">,</span> deadline time<span class="token punctuation">.</span>Time<span class="token punctuation">)</span> <span class="token punctuation">(</span>Context<span class="token punctuation">,</span> CancelFunc<span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">WithTimeout</span><span class="token punctuation">(</span>parent Context<span class="token punctuation">,</span> timeout time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token punctuation">(</span>Context<span class="token punctuation">,</span> CancelFunc<span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">WithValue</span><span class="token punctuation">(</span>parent Context<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> Context
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">monitor</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> number <span class="token builtin">int</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">{</span>
        <span class="token keyword">select</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token operator">&lt;-</span> ctx<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;ç›‘æ§å™¨%vï¼Œç›‘æ§ç»“æŸã€‚\n&quot;</span><span class="token punctuation">,</span> number<span class="token punctuation">)</span>
            <span class="token keyword">return</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span>
            fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;ç›‘æ§å™¨%vï¼Œæ­£åœ¨ç›‘æ§ä¸­...\n&quot;</span><span class="token punctuation">,</span> number<span class="token punctuation">)</span>
            time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx01<span class="token punctuation">,</span> cancel <span class="token operator">:=</span> context<span class="token punctuation">.</span><span class="token function">WithCancel</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ctx02<span class="token punctuation">,</span> cancel <span class="token operator">:=</span> context<span class="token punctuation">.</span><span class="token function">WithDeadline</span><span class="token punctuation">(</span>ctx01<span class="token punctuation">,</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">defer</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> i <span class="token operator">:=</span><span class="token number">1</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        <span class="token keyword">go</span> <span class="token function">monitor</span><span class="token punctuation">(</span>ctx02<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">5</span>  <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
    <span class="token keyword">if</span> ctx02<span class="token punctuation">.</span><span class="token function">Err</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;ç›‘æ§å™¨å–æ¶ˆçš„åŸå› : &quot;</span><span class="token punctuation">,</span> ctx02<span class="token punctuation">.</span><span class="token function">Err</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸»ç¨‹åºé€€å‡ºï¼ï¼&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="å‚è€ƒ" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒ" aria-hidden="true">#</a> å‚è€ƒ</h2><ul><li><a href="https://mp.weixin.qq.com/s?__biz=MzAxMTA4Njc0OQ==&amp;mid=2651439981&amp;idx=4&amp;sn=b1ad1fd6e9ddf4618b0db904b067f7f6&amp;scene=19#wechat_redirect" target="_blank" rel="noopener noreferrer">2020 é‡å­¦ Go ç³»åˆ—ï¼š34. å›¾è§£é™æ€ç±»å‹ä¸åŠ¨æ€ç±»å‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href=""></a></li></ul><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/trdthg/edit/main/rust/go.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.cefaa7da.js" defer></script>
  </body>
</html>
