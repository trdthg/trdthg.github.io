# vim

## 1. 批量注释与反注释


在使用vim编写代码的时候，经常需要用到批量注释与反注释一段代码。下面简要介绍其操作。

### 1.1 块选择模式


插入注释：

- 用v进入virtual模式

- 用上下键选中需要注释的行数

- 按Control+v（win下面ctrl+q）进入列模式

- 按大些“I”进入插入模式，输入注释符“#”或者是"//"，然后立刻按下ESC（两下）



取消注释：

- Ctrl + v 进入块选择模式，选中你要删除的行首的注释符号，注意// 要选中两个，选好之后按d即可删除注释

### 1.2 替换命令


批量注释：

- :起始行号,结束行号s/^/注释符/g

取消注释：

- :起始行号,结束行号s/^注释符//g

实例演示：

```
在27 - 30行添加 // 注释
:27,30s#^#//#g

在27 - 30行删除 // 注释
:27,30s#^//##g

在10 - 20行添加 # 注释
:10,20s/^/#/g

在10 - 20行删除 # 注释
:10,20s/^/#/g
```

注意例子中正则的分割符使用的是相反的符号，如果匹配// 那么使用 #作分隔符这样不需要对/作转义处理，节省输入次数。

## 2. 复制粘贴

Vim中如何全选并复制？（区分大小写！！！）

- 全部删除：按esc键后，先按gg（到达顶部），然后dG
- 全部复制：按esc键后，先按gg，然后ggyG
- 全选高亮显示：按esc键后，先按gg，然后ggvG或者ggVG
- 单行复制：按esc键后，然后yy
- 单行删除：按esc键后，然后dd
- 粘贴：按esc键后，然后p

vim只能粘贴50行的问题：

在当前用户主目录（~）编辑~/.vimrc（如果不存在，新建这个文件），添加一行

```text
:set viminfo='1000,<500
```

至于为什么要输入输入’1000，这个其实不重要，最主要的是输入<500，它是设置寄存器保存的行数的，即最大值为500。



## 3. 格式化

1，gg 跳转到第一行

2，shift+v 转到可视模式

3，shift+g 全选

4，按下神奇的 =

#### 4. 批量替换

`%s/原变量名/要修改后的变量名/g`

加个c就有u修改确认提示

`%s/原变量名/要修改后的变量名/gc`

如果是替换一个函数中的变量名，可以用v命令选中函数，然后替换；如果是替换若干文件中的变量（或函数）名，需要先选定args列表，然后用 argdo %s//new_name/g | w 来修改加保存。

### 5. 查询关键字

`/key`

不需要`：`

n下一个， N上一个