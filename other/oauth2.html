<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.35">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="https://trdthg-img-for-md-1306147581.cos.ap-beijing.myqcloud.com/img/202202022217241.jpg"><title>OAuth 2.0 Simplified | Trdthg's blog</title><meta name="description" content="Welcome to Trdthg's blog">
    <link rel="modulepreload" href="/assets/app.9dafc561.js"><link rel="modulepreload" href="/assets/oauth2.html.52e85855.js"><link rel="modulepreload" href="/assets/oauth2.html.7adb6554.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/assets/style.e8e8fc80.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">Trdthg&#39;s blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/rust/rust" class="" aria-label="è¯­è¨€ç‰¹æ€§"><!--[--><!--]--> è¯­è¨€ç‰¹æ€§ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/print_into_detail" class="" aria-label="print å®è¯¦è§£"><!--[--><!--]--> print å®è¯¦è§£ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/rs_channel" class="" aria-label="channel æºç å‰–æ doing"><!--[--><!--]--> channel æºç å‰–æ doing <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/wasm" class="" aria-label="Wasm"><!--[--><!--]--> Wasm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/lists" class="" aria-label="Rust é“¾è¡¨"><!--[--><!--]--> Rust é“¾è¡¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/go" class="" aria-label="Go å­¦ä¹ ç¬”è®°"><!--[--><!--]--> Go å­¦ä¹ ç¬”è®° <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/magic/haskell" class="" aria-label="Haskell å­¦ä¹ ç¬”è®°"><!--[--><!--]--> Haskell å­¦ä¹ ç¬”è®° <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/fd" class="" aria-label="æ–‡ä»¶æè¿°ç¬¦"><!--[--><!--]--> æ–‡ä»¶æè¿°ç¬¦ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/linuxIO" class="" aria-label="IO å¤šè·¯å¤ç”¨"><!--[--><!--]--> IO å¤šè·¯å¤ç”¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/memory_ordering" class="" aria-label="åŸå­æ“ä½œ/å†…å­˜é¡ºåº"><!--[--><!--]--> åŸå­æ“ä½œ/å†…å­˜é¡ºåº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/async" class="" aria-label="åç¨‹å¼‚æ­¥æ€è€ƒ"><!--[--><!--]--> åç¨‹å¼‚æ­¥æ€è€ƒ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/software_arch" class="" aria-label="è½¯ä»¶æ¶æ„"><!--[--><!--]--> è½¯ä»¶æ¶æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/cicd" class="" aria-label="CI/CD"><!--[--><!--]--> CI/CD <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æ‚æ–‡ ğŸ±"><span class="title">æ‚æ–‡ ğŸ±</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æ‚æ–‡ ğŸ±"><span class="title">æ‚æ–‡ ğŸ±</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/articles/menu" class="" aria-label="ä¼˜è´¨æ–‡ç« èµ„æº"><!--[--><!--]--> ä¼˜è´¨æ–‡ç« èµ„æº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/i3wm" class="" aria-label="æŠ˜è…¾ i3wm"><!--[--><!--]--> æŠ˜è…¾ i3wm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/tail_latency" class="" aria-label="(è¯‘) å°¾éƒ¨å»¶è¿Ÿ"><!--[--><!--]--> (è¯‘) å°¾éƒ¨å»¶è¿Ÿ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/search_engine" class="" aria-label="(è¯‘) æŸ¥è¯¢å¼•æ“"><!--[--><!--]--> (è¯‘) æŸ¥è¯¢å¼•æ“ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>å‰ç«¯ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/frontend/vdom" class="" aria-label="è™šæ‹Ÿ DOM"><!--[--><!--]--> è™šæ‹Ÿ DOM <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/js_advanced" class="" aria-label="Js è¿›é˜¶"><!--[--><!--]--> Js è¿›é˜¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/list" class="" aria-label="èµ„æ–™"><!--[--><!--]--> èµ„æ–™ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/vue" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/http" class="" aria-label="HTTP ç›¸å…³"><!--[--><!--]--> HTTP ç›¸å…³ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/flutter" class="" aria-label="Flutter"><!--[--><!--]--> Flutter <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Python ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/other/python" class="" aria-label="æ€»è§ˆ"><!--[--><!--]--> æ€»è§ˆ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Java ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/java/java" class="" aria-label="åŸºç¡€çŸ¥è¯†"><!--[--><!--]--> åŸºç¡€çŸ¥è¯† <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/sourceread" class="" aria-label="éƒ¨åˆ†æºç "><!--[--><!--]--> éƒ¨åˆ†æºç  <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/spring" class="" aria-label="Spring æ¡†æ¶"><!--[--><!--]--> Spring æ¡†æ¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/springboot" class="" aria-label="å¸¸ç”¨å·¥å…·"><!--[--><!--]--> å¸¸ç”¨å·¥å…· <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å°ç©å…· ğŸ®"><span class="title">å°ç©å…· ğŸ®</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å°ç©å…· ğŸ®"><span class="title">å°ç©å…· ğŸ®</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/projects/mini_vue" class="" aria-label="Mini-Vue"><!--[--><!--]--> Mini-Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/projects/mini_bundle" class="" aria-label="æ‰“åŒ…å™¨"><!--[--><!--]--> æ‰“åŒ…å™¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/projects/mini_tokio" class="" aria-label="å¼‚æ­¥è¿è¡Œæ—¶"><!--[--><!--]--> å¼‚æ­¥è¿è¡Œæ—¶ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>åˆ†äº«</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/share_1" class="" aria-label="å…³äºæ•°æ®åº“ä¸ B+ æ ‘"><!--[--><!--]--> å…³äºæ•°æ®åº“ä¸ B+ æ ‘ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>æˆè¯¾</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_1" class="" aria-label="åç«¯ 1"><!--[--><!--]--> åç«¯ 1 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_2" class="" aria-label="åç«¯ 2"><!--[--><!--]--> åç«¯ 2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_3" class="" aria-label="åç«¯ 3"><!--[--><!--]--> åç«¯ 3 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_4" class="" aria-label="åç«¯ 4"><!--[--><!--]--> åç«¯ 4 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="èµ„æ–™åº“ ğŸ“¦"><span class="title">èµ„æ–™åº“ ğŸ“¦</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="èµ„æ–™åº“ ğŸ“¦"><span class="title">èµ„æ–™åº“ ğŸ“¦</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/other/hadoop" class="" aria-label="å¤§æ•°æ®"><!--[--><!--]--> å¤§æ•°æ® <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/script" class="" aria-label="è„šæœ¬"><!--[--><!--]--> è„šæœ¬ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/datastructure" class="" aria-label="æ•°æ®ç»“æ„"><!--[--><!--]--> æ•°æ®ç»“æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/vim" class="" aria-label="Vim"><!--[--><!--]--> Vim <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/git" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/docker" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/analyze" class="" aria-label="æ€§èƒ½ç›‘æµ‹å·¥å…·"><!--[--><!--]--> æ€§èƒ½ç›‘æµ‹å·¥å…· <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/oci" class="" aria-label="OCI è§„èŒƒ"><!--[--><!--]--> OCI è§„èŒƒ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/oauth2" class="router-link-active" aria-label="OAuth2.0"><!--[--><!--]--> OAuth2.0 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/trdthg" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="åˆ‡æ¢å¤œé—´"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Rust ğŸ¦€"><span class="title">Rust ğŸ¦€</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/rust/rust" class="" aria-label="è¯­è¨€ç‰¹æ€§"><!--[--><!--]--> è¯­è¨€ç‰¹æ€§ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/print_into_detail" class="" aria-label="print å®è¯¦è§£"><!--[--><!--]--> print å®è¯¦è§£ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/rs_channel" class="" aria-label="channel æºç å‰–æ doing"><!--[--><!--]--> channel æºç å‰–æ doing <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/wasm" class="" aria-label="Wasm"><!--[--><!--]--> Wasm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/lists" class="" aria-label="Rust é“¾è¡¨"><!--[--><!--]--> Rust é“¾è¡¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/rust/go" class="" aria-label="Go å­¦ä¹ ç¬”è®°"><!--[--><!--]--> Go å­¦ä¹ ç¬”è®° <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="é­”æ³• ğŸ”®"><span class="title">é­”æ³• ğŸ”®</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/magic/haskell" class="" aria-label="Haskell å­¦ä¹ ç¬”è®°"><!--[--><!--]--> Haskell å­¦ä¹ ç¬”è®° <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/fd" class="" aria-label="æ–‡ä»¶æè¿°ç¬¦"><!--[--><!--]--> æ–‡ä»¶æè¿°ç¬¦ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/linuxIO" class="" aria-label="IO å¤šè·¯å¤ç”¨"><!--[--><!--]--> IO å¤šè·¯å¤ç”¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/memory_ordering" class="" aria-label="åŸå­æ“ä½œ/å†…å­˜é¡ºåº"><!--[--><!--]--> åŸå­æ“ä½œ/å†…å­˜é¡ºåº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/async" class="" aria-label="åç¨‹å¼‚æ­¥æ€è€ƒ"><!--[--><!--]--> åç¨‹å¼‚æ­¥æ€è€ƒ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/software_arch" class="" aria-label="è½¯ä»¶æ¶æ„"><!--[--><!--]--> è½¯ä»¶æ¶æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/magic/cicd" class="" aria-label="CI/CD"><!--[--><!--]--> CI/CD <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æ‚æ–‡ ğŸ±"><span class="title">æ‚æ–‡ ğŸ±</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æ‚æ–‡ ğŸ±"><span class="title">æ‚æ–‡ ğŸ±</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/articles/menu" class="" aria-label="ä¼˜è´¨æ–‡ç« èµ„æº"><!--[--><!--]--> ä¼˜è´¨æ–‡ç« èµ„æº <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/i3wm" class="" aria-label="æŠ˜è…¾ i3wm"><!--[--><!--]--> æŠ˜è…¾ i3wm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/tail_latency" class="" aria-label="(è¯‘) å°¾éƒ¨å»¶è¿Ÿ"><!--[--><!--]--> (è¯‘) å°¾éƒ¨å»¶è¿Ÿ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/articles/search_engine" class="" aria-label="(è¯‘) æŸ¥è¯¢å¼•æ“"><!--[--><!--]--> (è¯‘) æŸ¥è¯¢å¼•æ“ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å­¦ä¹ ç¬”è®° ğŸ“š"><span class="title">å­¦ä¹ ç¬”è®° ğŸ“š</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>å‰ç«¯ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/frontend/vdom" class="" aria-label="è™šæ‹Ÿ DOM"><!--[--><!--]--> è™šæ‹Ÿ DOM <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/js_advanced" class="" aria-label="Js è¿›é˜¶"><!--[--><!--]--> Js è¿›é˜¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/list" class="" aria-label="èµ„æ–™"><!--[--><!--]--> èµ„æ–™ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/vue" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/http" class="" aria-label="HTTP ç›¸å…³"><!--[--><!--]--> HTTP ç›¸å…³ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/frontend/flutter" class="" aria-label="Flutter"><!--[--><!--]--> Flutter <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Python ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/other/python" class="" aria-label="æ€»è§ˆ"><!--[--><!--]--> æ€»è§ˆ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Java ç›¸å…³</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/java/java" class="" aria-label="åŸºç¡€çŸ¥è¯†"><!--[--><!--]--> åŸºç¡€çŸ¥è¯† <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/sourceread" class="" aria-label="éƒ¨åˆ†æºç "><!--[--><!--]--> éƒ¨åˆ†æºç  <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/spring" class="" aria-label="Spring æ¡†æ¶"><!--[--><!--]--> Spring æ¡†æ¶ <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java/springboot" class="" aria-label="å¸¸ç”¨å·¥å…·"><!--[--><!--]--> å¸¸ç”¨å·¥å…· <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å°ç©å…· ğŸ®"><span class="title">å°ç©å…· ğŸ®</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å°ç©å…· ğŸ®"><span class="title">å°ç©å…· ğŸ®</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/projects/mini_vue" class="" aria-label="Mini-Vue"><!--[--><!--]--> Mini-Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/projects/mini_bundle" class="" aria-label="æ‰“åŒ…å™¨"><!--[--><!--]--> æ‰“åŒ…å™¨ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/projects/mini_tokio" class="" aria-label="å¼‚æ­¥è¿è¡Œæ—¶"><!--[--><!--]--> å¼‚æ­¥è¿è¡Œæ—¶ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="IO Club âš½"><span class="title">IO Club âš½</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>åˆ†äº«</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/share_1" class="" aria-label="å…³äºæ•°æ®åº“ä¸ B+ æ ‘"><!--[--><!--]--> å…³äºæ•°æ®åº“ä¸ B+ æ ‘ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>æˆè¯¾</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_1" class="" aria-label="åç«¯ 1"><!--[--><!--]--> åç«¯ 1 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_2" class="" aria-label="åç«¯ 2"><!--[--><!--]--> åç«¯ 2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_3" class="" aria-label="åç«¯ 3"><!--[--><!--]--> åç«¯ 3 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/ioclub/backend_4" class="" aria-label="åç«¯ 4"><!--[--><!--]--> åç«¯ 4 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="èµ„æ–™åº“ ğŸ“¦"><span class="title">èµ„æ–™åº“ ğŸ“¦</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="èµ„æ–™åº“ ğŸ“¦"><span class="title">èµ„æ–™åº“ ğŸ“¦</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/other/hadoop" class="" aria-label="å¤§æ•°æ®"><!--[--><!--]--> å¤§æ•°æ® <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/script" class="" aria-label="è„šæœ¬"><!--[--><!--]--> è„šæœ¬ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/datastructure" class="" aria-label="æ•°æ®ç»“æ„"><!--[--><!--]--> æ•°æ®ç»“æ„ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/vim" class="" aria-label="Vim"><!--[--><!--]--> Vim <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/git" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/docker" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/analyze" class="" aria-label="æ€§èƒ½ç›‘æµ‹å·¥å…·"><!--[--><!--]--> æ€§èƒ½ç›‘æµ‹å·¥å…· <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/oci" class="" aria-label="OCI è§„èŒƒ"><!--[--><!--]--> OCI è§„èŒƒ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/oauth2" class="router-link-active" aria-label="OAuth2.0"><!--[--><!--]--> OAuth2.0 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/trdthg" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">OAuth 2.0 Simplified <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/other/oauth2.html#_1-getting-ready-å¼€å§‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. Getting ready å¼€å§‹"><!--[--><!--]--> 1. Getting ready å¼€å§‹ <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/other/oauth2.html#_1-1-creating-an-application-ä¸€èˆ¬éœ€è¦-sign-up-as-a-developer" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.1 Creating an Application(ä¸€èˆ¬éœ€è¦ sign up as a developer)"><!--[--><!--]--> 1.1 Creating an Application(ä¸€èˆ¬éœ€è¦ sign up as a developer) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/other/oauth2.html#_1-2-redirect-urls-and-state" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2 Redirect URLs and State"><!--[--><!--]--> 1.2 Redirect URLs and State <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/other/oauth2.html#_2-accessing-data-è·å–æ•°æ®-github-ä¸ºä¾‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. Accessing data è·å–æ•°æ® (github ä¸ºä¾‹)"><!--[--><!--]--> 2. Accessing data è·å–æ•°æ® (github ä¸ºä¾‹) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/other/oauth2.html#_3-signing-in-with-google" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. Signing in with Google"><!--[--><!--]--> 3. Signing in with Google <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/other/oauth2.html#_3-1-å¦‚ä½•è·å–ç”¨æˆ·ä¿¡æ¯" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1 å¦‚ä½•è·å–ç”¨æˆ·ä¿¡æ¯"><!--[--><!--]--> 3.1 å¦‚ä½•è·å–ç”¨æˆ·ä¿¡æ¯ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/other/oauth2.html#_3-2-ä¸‹é¢ä»¥-google-æä¾›çš„-api-ä¸ºä¾‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2 ä¸‹é¢ä»¥ Google æä¾›çš„ api ä¸ºä¾‹"><!--[--><!--]--> 3.2 ä¸‹é¢ä»¥ Google æä¾›çš„ api ä¸ºä¾‹ <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/other/oauth2.html#_4-server-side-apps" class="router-link-active router-link-exact-active sidebar-item" aria-label="4 Server-Side Apps"><!--[--><!--]--> 4 Server-Side Apps <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="oauth-2-0-simplified" tabindex="-1"><a class="header-anchor" href="#oauth-2-0-simplified" aria-hidden="true">#</a> OAuth 2.0 Simplified</h1><p><a href="https://www.oauth.com/" target="_blank" rel="noopener noreferrer">www.oauth.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="_1-getting-ready-å¼€å§‹" tabindex="-1"><a class="header-anchor" href="#_1-getting-ready-å¼€å§‹" aria-hidden="true">#</a> 1. Getting ready å¼€å§‹</h2><h3 id="_1-1-creating-an-application-ä¸€èˆ¬éœ€è¦-sign-up-as-a-developer" tabindex="-1"><a class="header-anchor" href="#_1-1-creating-an-application-ä¸€èˆ¬éœ€è¦-sign-up-as-a-developer" aria-hidden="true">#</a> 1.1 Creating an Application(ä¸€èˆ¬éœ€è¦ sign up as a developer)</h3><p>user -&gt; entering basic information such as the name, website, logo, etc. server -&gt; return a <strong>client_id</strong> (and a <strong>client_secret</strong> in some cases)</p><h3 id="_1-2-redirect-urls-and-state" tabindex="-1"><a class="header-anchor" href="#_1-2-redirect-urls-and-state" aria-hidden="true">#</a> 1.2 Redirect URLs and State</h3><ol><li>ä¸ºäº†ä½¿åŒä¸€ä¸ª clientID åŒæ—¶æ‹¥æœ‰å¤šä¸ªçŠ¶æ€ï¼ŒSome services may allow you to register multiple redirect URLs æ¯”å¦‚ï¼š</li></ol><ul><li>Web app and Mobile app</li><li>development service and production service</li></ul><ol start="2"><li>ä¸ºäº†ä¿è¯å®‰å…¨ï¼šå¿…é¡»ä½¿ç”¨ https é˜²æ­¢åœ¨è®¤è¯è¿‡ç¨‹ä¸­ code è¢«æ‹¦æˆª</li></ol><ul><li>å¤§å¤šæ•°æœåŠ¡ (service) éœ€è¦è·¯ç”±å®Œå…¨åŒ¹é…ï¼Œè¿™æ„å‘³ç€<a href="https://example.com/auth" target="_blank" rel="noopener noreferrer">https://example.com/auth<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> çš„é‡å®šå‘ URL å°†ä¸ <a href="https://example.com/auth?destination=account" target="_blank" rel="noopener noreferrer">https://example.com/auth?destination=account<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¸åŒ¹é…ã€‚æ‰€ä»¥æœ€ä½³åšæ³•æ˜¯ä¸åœ¨ url é‡Œä½¿ç”¨ query string parameters</li><li>å°‘éƒ¨åˆ†æœåŠ¡éœ€è¦å¯ä»¥ä»å¤šç§ url å‘èµ·è®¤è¯ï¼Œå¯ä»¥é€‰æ‹©æ³¨å†Œå¤šä¸ªé‡å®šå‘ urlï¼Œæˆ–è€…æ”¹å˜è¿™äº›è¯·æ±‚çš„é‡å®šå‘ urlï¼Œä½†æ˜¯ oauth2 æä¾›äº†ä¸€ç§æœºåˆ¶=&gt; çŠ¶æ€å‚æ•° (State) State çš„ç‰¹ç‚¹</li></ul><ol start="3"><li>State</li></ol><ul><li>å¯ä»¥ç”¨æ¥ä½œä¸ºåŠ å¯†çš„ salt</li><li>å¯ä»¥æ˜¯æŸç§éšæœºæ•°æ®</li><li>å¯¹ä¸ service æ¥è¯´æ˜¯ä¸å¯è§çš„ -&gt; åœ¨åˆå§‹åŒ–è®¤è¯è¯·æ±‚æ—¶ (initial authorization request) ä¼ å…¥çš„ä»»ä½• State éƒ½ä¼šåœ¨ç”¨æˆ·æˆæƒç»™ app(user authorizes the application) åè¢«è¿”å›</li></ul><blockquote><p>state ç”¨äºé¢å¤–çš„å®‰å…¨æ£€æŸ¥ï¼Œå½“ github è¿”å›æ•°æ®æ—¶å¯ä»¥ç¡®è®¤ä¸æ˜¯æ”»å‡»è€…å‘å‡ºçš„è¯·æ±‚ï¼Œæ¯”å¦‚å°†æ”»å‡»è€…çš„ authorization token å‘é€ç»™ github, as well as SCRF attack</p></blockquote><p>æ¯”å¦‚ï¼šä½ å¯ä»¥å°†ä¸€ä¸ªé‡å®šå‘çš„ url ç»è¿‡ encode å like JWTï¼Œåœ¨ç”¨æˆ·è¿”å› app åè§£æè¿™ä¸ª JWT å°†ç”¨æˆ·å¸¦å›åˆé€‚çš„ä½ç½®</p><h2 id="_2-accessing-data-è·å–æ•°æ®-github-ä¸ºä¾‹" tabindex="-1"><a class="header-anchor" href="#_2-accessing-data-è·å–æ•°æ®-github-ä¸ºä¾‹" aria-hidden="true">#</a> 2. Accessing data è·å–æ•°æ® (github ä¸ºä¾‹)</h2><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$out_app</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;åœ¨ github å¡«çš„ homepage&quot;</span>

<span class="token variable">$authorizeURL</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;https://github.com/login/oauth/authorize&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// This is the endpoint we&#39;ll request an access token from</span>
<span class="token variable">$tokenURL</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;https://github.com/login/oauth/access_token&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// This is the GitHub base URL for API requests</span>
<span class="token variable">$apiURLBase</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;https://api.github.com/&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// The URL for this script, used as the redirect URL</span>
<span class="token variable">$baseURL</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;https://&#39;</span> <span class="token operator">.</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;SERVER_NAME&#39;</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;PHP_SELF&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol><li>è·å–ç™»å½•å‡­è¯ (access_token)</li></ol><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code>   å¼€å§‹
    <span class="token operator">|</span>
    <span class="token operator">|</span> ä»æŸå¤„å‘èµ· HttpRequest é‡å®šå‘åˆ° <span class="token function">authorizeURL</span><span class="token punctuation">(</span>ä¸ä¸€å®šæ˜¯ our<span class="token operator">-</span>app<span class="token punctuation">)</span>
    <span class="token operator">|</span> æºå¸¦
    <span class="token operator">|</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span>     <span class="token string single-quoted-string">&#39;response_type&#39;</span><span class="token operator">=</span> <span class="token string single-quoted-string">&#39;code&#39;</span><span class="token punctuation">,</span>
    <span class="token operator">|</span>     <span class="token string single-quoted-string">&#39;client_id&#39;</span> <span class="token operator">=</span> <span class="token variable">$githubClientID</span><span class="token punctuation">,</span>
    <span class="token operator">|</span>     <span class="token string single-quoted-string">&#39;redirect_uri&#39;</span> <span class="token operator">=</span> <span class="token variable">$baseURL</span><span class="token punctuation">,</span>
    <span class="token operator">|</span>     <span class="token string single-quoted-string">&#39;scope&#39;</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;user public_repo&#39;</span><span class="token punctuation">,</span>
    <span class="token operator">|</span>     <span class="token string single-quoted-string">&#39;status&#39;</span><span class="token operator">=</span> <span class="token string single-quoted-string">&#39;random_string(10)&#39;</span>
    <span class="token operator">|</span> <span class="token punctuation">}</span>
    âˆ¨
github è®¤è¯ç•Œé¢
    <span class="token operator">|</span>
    <span class="token operator">|</span> ç‚¹å‡»ç¡®è®¤
    <span class="token operator">|</span> <span class="token keyword">if</span> status_send <span class="token operator">==</span> status_resp<span class="token punctuation">:</span>
    <span class="token operator">|</span>     æºå¸¦ code å’Œ status é‡å®šå‘åˆ° app ç•Œé¢
    âˆ¨
our<span class="token operator">-</span><span class="token class-name">app</span>
    <span class="token operator">|</span>
    <span class="token operator">|</span> <span class="token class-name">exchange</span> the authorization code <span class="token keyword">for</span> an access token<span class="token operator">.</span>
    <span class="token operator">|</span> æºå¸¦
    <span class="token operator">|</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span>     <span class="token string single-quoted-string">&#39;grant_type&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;authorization_code&#39;</span><span class="token punctuation">,</span>
    <span class="token operator">|</span>     <span class="token string single-quoted-string">&#39;client_id&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$githubClientID</span><span class="token punctuation">,</span>
    <span class="token operator">|</span>     <span class="token string single-quoted-string">&#39;client_secret&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$githubClientSecret</span><span class="token punctuation">,</span>
    <span class="token operator">|</span>     <span class="token string single-quoted-string">&#39;redirect_uri&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$baseURL</span><span class="token punctuation">,</span>
    <span class="token operator">|</span>     <span class="token string single-quoted-string">&#39;code&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;code&#39;</span><span class="token punctuation">]</span>
    <span class="token operator">|</span> <span class="token punctuation">}</span>
    <span class="token operator">|</span> å†æ¬¡è¯·æ±‚ tokenURL ä½¿ç”¨ code äº¤æ¢ <span class="token class-name">token</span>
    <span class="token operator">|</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span>     <span class="token string double-quoted-string">&quot;access_token&quot;</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;e2f8c8e136c73b1e909bb1021b3b4c29&quot;</span><span class="token punctuation">,</span>
    <span class="token operator">|</span>     <span class="token string double-quoted-string">&quot;token_type&quot;</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;Bearer&quot;</span><span class="token punctuation">,</span>
    <span class="token operator">|</span>     <span class="token string double-quoted-string">&quot;scope&quot;</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;public_repo,user&quot;</span>
    <span class="token operator">|</span> <span class="token punctuation">}</span>
    <span class="token operator">|</span> é‡å®šå‘åˆ° <span class="token function">homepage</span><span class="token punctuation">(</span>baseURL<span class="token punctuation">)</span>ï¼Œç”¨æˆ·æˆåŠŸç™»å½•
    âˆ¨
<span class="token class-name">appHomePage</span>
    <span class="token operator">|</span>
    <span class="token operator">|</span> æŠŠ access_token å­˜å…¥ sessionï¼Œä¸‹æ¬¡è¿›å…¥ app æ—¶å°±èƒ½é€šè¿‡ access_token è¿›å…¥ç™»å½•æˆåŠŸåçš„ç•Œé¢
    âˆ¨
   End
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><ol start="2"><li>åˆ©ç”¨ access_token è·å–æ•°æ® ç›´æ¥åœ¨ header é‡Œæ·»åŠ  access_token è¯·æ±‚ apiURLBase å°±å®Œäº‹äº†</li></ol><h2 id="_3-signing-in-with-google" tabindex="-1"><a class="header-anchor" href="#_3-signing-in-with-google" aria-hidden="true">#</a> 3. Signing in with Google</h2><h3 id="_3-1-å¦‚ä½•è·å–ç”¨æˆ·ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_3-1-å¦‚ä½•è·å–ç”¨æˆ·ä¿¡æ¯" aria-hidden="true">#</a> 3.1 å¦‚ä½•è·å–ç”¨æˆ·ä¿¡æ¯</h3><p>ä¸¤ä¸ªå…³é”®è¯</p><ul><li>authorization é‰´æƒ: trying to gain access or modify something that belongs to the user.</li><li>authentication æ ¡éªŒ: just verifying who the user is OAuth is designed as a authorization protocol(æˆæƒåè®®), æ‰€ä»¥ access_token ä¸èƒ½è¢«ç”¨æ¥åˆ¤æ–­ç”¨æˆ·æ˜¯è° æœ‰ä»¥ä¸‹å‡ ç§ä¸åŒ services ä¸º app æä¾›çš„æ–¹æ³•å¯ä»¥åˆ¤æ–­ç”¨æˆ·æ˜¯è°</li></ul><ol><li>a simple way: è®© api é¡ºä¾¿è¿”å›ä¸€äº› profile_info(ç”¨æˆ·ä¿¡æ¯), ä¸åŒ…å«åœ¨ OAuth æ ‡å‡†é‡Œ</li><li>a advanced approach: use OpenID Connect(an OAuth2.0 extension) <ul><li>åˆ©ç”¨ id_token</li><li>ä½¿ç”¨ access_token å¦‚ä½•é€‰æ‹©è·å– user_info çš„æ–¹æ³• A: For performance-sensitive applications where you might be reading ID tokens on every request or using them to maintain a session, you should definitely validate the ID token locally rather than making a network request.<a href="https://developers.google.com/identity/protocols/OpenIDConnect#validatinganidtoken" target="_blank" rel="noopener noreferrer">https://developers.google.com/identity/protocols/OpenIDConnect#validatinganidtoken<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> B: just for find the userâ€™s name and email after they sign in, then extracting the data from the ID token and storing it in your application session</li></ul></li></ol><h3 id="_3-2-ä¸‹é¢ä»¥-google-æä¾›çš„-api-ä¸ºä¾‹" tabindex="-1"><a class="header-anchor" href="#_3-2-ä¸‹é¢ä»¥-google-æä¾›çš„-api-ä¸ºä¾‹" aria-hidden="true">#</a> 3.2 ä¸‹é¢ä»¥ Google æä¾›çš„ api ä¸ºä¾‹</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$authorizeURL</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;https://accounts.google.com/o/oauth2/v2/auth&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// This is Google&#39;s OpenID Connect token endpoint</span>
<span class="token variable">$tokenURL</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;https://www.googleapis.com/oauth2/v4/token&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// The URL for this script, used as the redirect URL</span>
<span class="token variable">$baseURL</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;https://&#39;</span> <span class="token operator">.</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;SERVER_NAME&#39;</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;PHP_SELF&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä¸ github çš„ä¸åŒ</p><ol><li>Google çš„è®¤è¯ç•Œé¢åªèƒ½é€‰æ‹©ä½¿ç”¨é‚£ä¸ªå¸å· (ç”¨æˆ·), æ²¡æœ‰ç‚¹å‡»æˆæƒçš„æŒ‰é’®</li><li>è¯·æ±‚ access_token çš„è¿”å›å€¼</li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;access_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ya29.Glins-oLtuljNVfthQU2bpJVJPTu&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;token_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bearer&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;expires_in&quot;</span><span class="token operator">:</span> <span class="token number">3600</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id_token&quot;</span><span class="token operator">:</span> &quot;eyJhbGciOiJSUzI1NiIsImtpZCI6ImFmZmM2MjkwN
  2E0NDYxODJhZGMxZmE0ZTgxZmRiYTYzMTBkY2U2M2YifQ.eyJhenAi
  OiIyNzIxOTYwNjkxNzMtZm81ZWI0MXQzbmR1cTZ1ZXRkc2pkdWdzZX
  V0ZnBtc3QuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJhdWQi
  OiIyNzIxOTYwNjkxNzMtZm81ZWI0MXQzbmR1cTZ1ZXRkc2pkdWdzZX
  V0ZnBtc3QuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJzdWIi
  OiIxMTc4NDc5MTI4NzU5MTM5MDU0OTMiLCJlbWFpbCI6ImFhcm9uLn
  BhcmVja2lAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUs
  ImF0X2hhc2giOiJpRVljNDBUR0luUkhoVEJidWRncEpRIiwiZXhwIj
  oxNTI0NTk5MDU2LCJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2ds
  ZS5jb20iLCJpYXQiOjE1MjQ1OTU0NTZ9.ho2czp_1JWsglJ9jN8gCg
  WfxDi2gY4X5-QcT56RUGkgh5BJaaWdlrRhhN_eNuJyN3HRPhvVA_KJ
  Vy1tMltTVd2OQ6VkxgBNfBsThG_zLPZriw7a1lANblarwxLZID4fXD
  YG-O8U-gw4xb-NIsOzx6xsxRBdfKKniavuEg56Sd3eKYyqrMA0DWnI
  agqLiKE6kpZkaGImIpLcIxJPF0-yeJTMt_p1NoJF7uguHHLYr6752h
  qppnBpMjFL2YMDVeg3jl1y5DeSKNPh6cZ8H2p4Xb2UIrJguGbQHVIJ
  vtm_AspRjrmaTUQKrzXDRCfDROSUU-h7XKIWRrEd2-W9UkV5oCg&quot;
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>ä¸‹é¢æ˜¯å‰ä¸¤ç«¯çš„è§£ç ä¿¡æ¯æ®µ</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;alg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RS256&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;kid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;affc62907a446182adc1fa4e81fdba6310dce63f&quot;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;azp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;272196069173-fo5eb41t3nduq6uetdsjdugseutfpmst.apps.googleusercontent.com&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;aud&quot;</span><span class="token operator">:</span> <span class="token string">&quot;272196069173-fo5eb41t3nduq6uetdsjdugseutfpmst.apps.googleusercontent.com&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sub&quot;</span><span class="token operator">:</span> <span class="token string">&quot;117847912875913905493&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;aaron.parecki@gmail.com&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;email_verified&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;at_hash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;iEYc40TGInRHhTBbudgpJQ&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exp&quot;</span><span class="token operator">:</span> <span class="token number">1524599056</span><span class="token punctuation">,</span>
  <span class="token property">&quot;iss&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://accounts.google.com&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;iat&quot;</span><span class="token operator">:</span> <span class="token number">1524595456</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>access_token should be tracted as opaque(ä¸é€æ˜), å› ä¸ºé‡Œé¢æ²¡æœ‰é‡è¦ä¿¡æ¯ ä¸€èˆ¬æ¥è¯´ï¼Œ æå– id_token ä¸­çš„ä¿¡æ¯ä¹‹å‰è¿›è¡Œæ ¡éªŒæ˜¯å¾ˆé‡è¦çš„ï¼Œé˜²æ­¢è¿™ä¸ª token æ˜¯æœ‰å…¶ä»–äººä¸‹å‘çš„ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ æˆ‘ä»¬ä½¿ç”¨äº† https ä»¥ç¡®ä¿ token ç¡®å®æ¥è‡ª Google sub æ˜¯ç”¨æˆ·çš„æ ‡è¯†ç¬¦ï¼Œä¸å¸å·ç»‘å®šï¼Œå³ä½¿æ›´æ¢é‚®ç®±ä¹Ÿä¸ä¼šå˜</p><blockquote><p>ä¸‹é¢æ˜¯ä¸€äº›è§£é‡Š azp: æˆæƒæ¼”ç¤ºè€…çš„ client_id ã€‚ä»…å½“è¯·æ±‚ ID ä»¤ç‰Œçš„ä¸€æ–¹ä¸ ID ä»¤ç‰Œçš„å—ä¼—ä¸åŒæ—¶æ‰éœ€è¦æ­¤å£°æ˜ã€‚ aud: æ­¤ ID ä»¤ç‰Œçš„ç›®æ ‡å—ä¼—ã€‚å®ƒå¿…é¡»æ˜¯æ‚¨åº”ç”¨ç¨‹åºçš„ OAuth 2.0 å®¢æˆ·ç«¯ ID ä¹‹ä¸€ã€‚</p></blockquote><h2 id="_4-server-side-apps" tabindex="-1"><a class="header-anchor" href="#_4-server-side-apps" aria-hidden="true">#</a> 4 Server-Side Apps</h2><ol><li>è¯·æ±‚ code æ—¶çš„ queryString</li></ol><ul><li>response_type: æƒ³è¦è·å–çš„è¿”å›å€¼ç±»å‹</li><li>client_id: app çš„ identifier</li><li>redirect_url(optional): æˆæƒå®Œæˆåçš„è·³è½¬é¡µé¢ (éœ€è¦åœ¨æ³¨å†Œ app æ—¶è®¾ç½®)</li><li>scope(optional): Include one or more scope values (space-separated) to request additional levels of access. The values will depend on the particular service.(ç”¨ç©ºæ ¼åˆ†éš”)</li><li>status: ä¼šè¢«æœåŠ¡ç«¯å®Œæ•´è¿”å›ï¼Œcan be used to letyour app persist data between the user being directed to the authorization server and back againï¼Œ</li></ul><blockquote><p>æ¯”å¦‚ using it as session_key to indicate what action the app to perform after authorization is complete(æ¯”å¦‚é‡å®šå‘çš„é“¾æ¥) å¦‚æœæ¯æ¬¡ request çš„ status éƒ½æ˜¯éšæœºç”Ÿæˆçš„ï¼Œstatus ä¹Ÿèƒ½ç”¨æ¥ä¿æŠ¤ from CSRF</p></blockquote><ol start="2"><li>äº¤æ¢ access_token çš„ queryString</li></ol><ul><li>grant_type(required): å¿…é¡»è¦è®¾ç½®ä¸º authorization_code</li><li>code(required): will be in the query string parameter â€œcodeâ€ in this request.</li><li>redirect_uri (possibly required)</li><li>Client Authentication (required): ä¸€èˆ¬æ˜¯ client_id å’Œ client_secret</li></ul><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/trdthg/edit/main/other/oauth2.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.9dafc561.js" defer></script>
  </body>
</html>
